var G=Object.defineProperty;var U=(s,t,e)=>t in s?G(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>(U(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();var g=(s=>(s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s))(g||{}),l=(s=>(s[s.DOWN=1]="DOWN",s[s.MOVE=2]="MOVE",s[s.UP=3]="UP",s[s.CANCEL=4]="CANCEL",s))(l||{});function x(s,t,e){return(1-e)*s+e*t}var L=(s=>(s[s.INITIAL=1]="INITIAL",s[s.ACTIVE=2]="ACTIVE",s[s.FINISHED=3]="FINISHED",s))(L||{});const Y=412,H=window.innerWidth,_=Math.min(H,Y);class W{constructor(){i(this,"mLinearDistance",_);i(this,"mMaxDistance",window.innerWidth);i(this,"mNonLinearFactor",0);i(this,"mLatestTouchX",0);i(this,"mLatestTouchY",0);i(this,"mTriggerBack",!1);i(this,"mInitTouchX",0);i(this,"mInitTouchY",0);i(this,"mLatestVelocityX",0);i(this,"mLatestVelocityY",0);i(this,"mStartThresholdX",0);i(this,"mSwipeEdge",g.LEFT);i(this,"mLastUpdateTime",null);i(this,"mState",1)}update(t,e,r,n){(t<this.mStartThresholdX&&this.mSwipeEdge===g.LEFT||t>this.mStartThresholdX&&this.mSwipeEdge===g.RIGHT)&&(this.mStartThresholdX=t,(this.mSwipeEdge===g.LEFT&&this.mStartThresholdX<this.mInitTouchX||this.mSwipeEdge===g.RIGHT&&this.mStartThresholdX>this.mInitTouchX)&&(this.mInitTouchX=this.mStartThresholdX));const a=performance.now();this.mLastUpdateTime||(this.mLastUpdateTime=a);const o=a-this.mLastUpdateTime;o==0||o>500?(this.mLatestVelocityX=0,this.mLatestVelocityY=0):(this.mLatestVelocityX=(t-this.mLatestTouchX)/(o/1e3),this.mLatestVelocityY=(e-this.mLatestTouchY)/(o/1e3)),this.mLastUpdateTime=a,this.mLatestTouchX=t,this.mLatestTouchY=e}setTriggerBack(t){this.mTriggerBack!==t&&!t&&(this.mStartThresholdX=this.mLatestTouchX),this.mTriggerBack=t}getTriggerBack(){return this.mTriggerBack}setState(t){this.mState=t}isInInitialState(){return this.mState===1}isActive(){return this.mState===2}isFinished(){return this.mState===3}setGestureStartLocation(t,e,r){this.mInitTouchX=t,this.mInitTouchY=e,this.mLatestTouchX=t,this.mLatestTouchY=e,this.mSwipeEdge=r,this.mStartThresholdX=this.mInitTouchX}updateStartLocation(){this.mInitTouchX=this.mLatestTouchX,this.mInitTouchY=this.mLatestTouchY,this.mStartThresholdX=this.mInitTouchX}reset(){this.mInitTouchX=0,this.mInitTouchY=0,this.mStartThresholdX=0,this.mTriggerBack=!1,this.mState=1,this.mSwipeEdge=g.LEFT}createStartEvent(t){return{x:this.mLatestTouchX,y:this.mLatestTouchY,progress:0,vx:0,vy:0,triggerBack:this.mTriggerBack,edge:this.mSwipeEdge,animation_target:null}}createProgressEvent(){const t=this.getProgress(this.mLatestTouchX);return this.createProgressEventFromProgress(t)}getProgress(t){const e=this.mTriggerBack?this.mInitTouchX:this.mStartThresholdX;let r;this.mSwipeEdge===g.LEFT?r=t-e:r=e-t;const n=Math.max(0,r);let a=this.mLinearDistance,o=this.getMaxDistance();o=o===0?1:o;let h;if(a<o){const m=o-a,u=a+m*this.mNonLinearFactor;if(n<=a)h=n/u;else{const I=(n-a)/m,S=x(u,o,I);h=n/S}}else h=n/o;return Math.min(Math.max(h,0),1)}getMaxDistance(){return this.mMaxDistance}createProgressEventFromProgress(t){return{x:this.mLatestTouchX,y:this.mLatestTouchY,progress:t,vx:this.mLatestVelocityX,vy:this.mLatestVelocityY,triggerBack:this.mTriggerBack,edge:this.mSwipeEdge,animation_target:null}}}function D(s,t,e,r,n){if(e<=0){n();return}const a=Math.ceil(e/16),o=(t-s)/a;requestAnimationFrame(()=>{r(s+o),D(s+o,t,e-16,r,n)})}class ${constructor(t){i(this,"controller");this.controller=t}onBackMotion(t,e,r,n,a,o){this.controller.onMotionEvent(t,e,r,n,a,o)}onPilferPointers(){this.controller.onPilferPointers()}setTriggerBack(t){this.controller.setTriggerBack(t)}}class z{constructor(t){i(this,"mBackGestureStarted",!1);i(this,"mPostCommitAnimationInProgress",!1);i(this,"mShouldStartOnNextMoveEvent",!1);i(this,"mOnBackStartDispatched",!1);i(this,"mPointerPilfered",!1);i(this,"mCurrentTracker");i(this,"mActiveCallback");i(this,"mBackAnimation");this.mCurrentTracker=new W,this.mActiveCallback=t,this.mBackAnimation=new $(this)}getActiveTracker(){return this.mCurrentTracker.isActive()?this.mCurrentTracker:null}onPilferPointers(){}onPointerDown(t){this.onMotionEvent(t.clientX,t.clientY,0,0,l.DOWN,g.LEFT)}onPointerUp(t){this.onMotionEvent(t.clientX,t.clientY,0,0,l.UP,g.LEFT)}onPointerCancel(t){this.onMotionEvent(t.clientX,t.clientY,0,0,l.CANCEL,g.LEFT)}onPointerMove(t){this.onMotionEvent(t.clientX,t.clientY,0,0,l.MOVE,g.LEFT)}onMotionEvent(t,e,r,n,a,o){let h=this.getActiveTracker();h!=null&&a!==l.UP&&h.update(t,e,r,n),!this.mCurrentTracker.isFinished()&&(a===l.DOWN?this.mBackGestureStarted||(this.mShouldStartOnNextMoveEvent=!0):a===l.MOVE?(!this.mBackGestureStarted&&this.mShouldStartOnNextMoveEvent&&(this.onGestureStarted(t,e,o),this.mShouldStartOnNextMoveEvent=!1),this.onMove()):(a===l.UP||a===l.CANCEL)&&(a===l.CANCEL&&this.setTriggerBack(!1),this.onGestureFinished()))}onGestureStarted(t,e,r){let n;if(this.mCurrentTracker.isInInitialState())n=this.mCurrentTracker;else return;n.setGestureStartLocation(t,e,r),n.setState(L.ACTIVE),this.mBackGestureStarted=!0,this.tryDispatchOnBackStarted(this.mActiveCallback,n.createStartEvent(null))}onMove(){if(!this.mBackGestureStarted||!this.mOnBackStartDispatched)return;const t=this.mCurrentTracker.createProgressEvent();this.dispatchOnBackProgressed(this.mActiveCallback,t)}tryDispatchOnBackStarted(t,e){this.mOnBackStartDispatched||this.dispatchOnBackStarted(t,e)}dispatchOnBackStarted(t,e){t.onBackStarted(e),this.mOnBackStartDispatched=!0}dispatchOrAnimateOnBackInvoked(t,e){let r=!1;const n=this.mCurrentTracker.getMaxDistance(),a=this.mCurrentTracker.createProgressEvent();let o=250,h=3e3,m=n*.3,u=a.x,E=Math.min(Math.max(-h,a.vx),h),I=E/h*m,S=Math.min(Math.max(u+I,0),n);if(!Number.isNaN(S)&&u!=S&&Math.abs(E)>=o){let w=y=>{let X=e.getProgress(y),q=e.createProgressEventFromProgress(X);this.dispatchOnBackProgressed(this.mActiveCallback,q)},R=()=>this.dispatchOnBackInvoked(t);console.log("FLINGING"),D(u,S,200*250/E,w,R),r=!0}r||this.dispatchOnBackInvoked(t)}dispatchOnBackInvoked(t){this.onBackAnimationFinished(),t.onBackInvoked()}dispatchOnBackCancelled(t){this.onBackAnimationFinished(),t.onBackCancelled()}dispatchOnBackProgressed(t,e){t.onBackProgressed(e)}setTriggerBack(t){const e=this.getActiveTracker();e!=null&&e.setTriggerBack(t)}invokeOrCancelBack(t){this.finishBackNavigation(t.getTriggerBack())}onGestureFinished(){const t=this.getActiveTracker();!this.mBackGestureStarted||t==null||(t.getTriggerBack(),this.mBackGestureStarted=!1,t.setState(L.FINISHED),!this.mPostCommitAnimationInProgress&&this.startPostCommitAnimation())}startPostCommitAnimation(){this.mPostCommitAnimationInProgress||(this.mPostCommitAnimationInProgress=!0,this.mCurrentTracker.getTriggerBack()?this.dispatchOrAnimateOnBackInvoked(this.mActiveCallback,this.mCurrentTracker):this.dispatchOnBackCancelled(this.mActiveCallback))}onBackAnimationFinished(){this.mPostCommitAnimationInProgress=!1,(this.mCurrentTracker.isActive()||this.mCurrentTracker.isFinished())&&this.invokeOrCancelBack(this.mCurrentTracker),this.resetTouchTracker()}resetTouchTracker(){if(this.mCurrentTracker.reset(),this.mCurrentTracker.isInInitialState()){this.mBackGestureStarted&&(this.mBackGestureStarted=!1,this.dispatchOnBackCancelled(this.mActiveCallback),this.finishBackNavigation(!1));return}this.mCurrentTracker.isFinished()&&this.mCurrentTracker.getTriggerBack()?(this.finishBackNavigation(!0),this.mCurrentTracker.reset()):this.mCurrentTracker.isFinished()&&this.mCurrentTracker.reset()}finishBackNavigation(t){this.mShouldStartOnNextMoveEvent=!1,this.mOnBackStartDispatched=!1,this.mPointerPilfered=!1}}function b(s,t,e,r){if(e<=0)return;const n=Math.ceil(e/16),a=(t-s)/n;requestAnimationFrame(()=>{r(s+a),b(s+a,t,e-16,r)})}const C=class C{constructor(t){i(this,"mBackCallback");i(this,"mMinDeltaForSwitch",32);i(this,"mSwipeTriggerThreshold",16);i(this,"mSwipeProgressThreshold",412);i(this,"mIsLeftPanel",!0);i(this,"mBaseTranslation",C.BASE_TRANSLATION_DP);i(this,"mStartX",0);i(this,"mStartY",0);i(this,"mCurrentTranslation",0);i(this,"mDesiredTranslation",0);i(this,"mDragSlopPassed",!1);i(this,"mArrowsPointLeft",!0);i(this,"mMaxTranslation",70);i(this,"mTriggerBack",!1);i(this,"mPreviousTouchTranslation",0);i(this,"mTotalTouchDelta",0);this.mBackCallback=t}onMotionEvent(t,e){switch(e){case l.DOWN:this.mDragSlopPassed=!1,this.resetOnDown(),this.mStartX=t.clientX,this.mStartY=t.clientY;break;case l.MOVE:this.handleMoveEvent(t);break;case l.UP:this.mTriggerBack?this.triggerBack():this.cancelBack();break;case l.CANCEL:this.cancelBack();break}}onPointerDown(t){this.onMotionEvent(t,l.DOWN)}onPointerUp(t){this.onMotionEvent(t,l.UP)}onPointerCancel(t){this.onMotionEvent(t,l.CANCEL)}onPointerMove(t){this.onMotionEvent(t,l.MOVE)}triggerBack(){this.mBackCallback.triggerBack(),this.setDesiredTranslation(0,!0)}cancelBack(){this.mBackCallback.cancelBack()}resetOnDown(){this.setTriggerBack(!1,!1),this.setDesiredTranslation(0,!1),this.setCurrentTranslation(0),this.mPreviousTouchTranslation=0,this.mTotalTouchDelta=0}signum(t){return t===0||Number.isNaN(t)?t:Math.sign(t)}saturate(t){return Math.min(1,Math.max(0,t))}handleMoveEvent(t){const e=t.clientX,r=t.clientY;let n=Math.abs(e-this.mStartX);const a=r-this.mStartY;let o=n-this.mPreviousTouchTranslation;if(Math.abs(o)>0&&(this.signum(o)===this.signum(this.mTotalTouchDelta)?this.mTotalTouchDelta+=o:this.mTotalTouchDelta=o),this.mPreviousTouchTranslation=n,!this.mDragSlopPassed&&n>this.mSwipeTriggerThreshold&&(this.mDragSlopPassed=!0,navigator.vibrate(1),this.setTriggerBack(!0,!0)),n>this.mBaseTranslation){const m=n-this.mBaseTranslation;let u=this.saturate(m/(window.innerWidth-this.mBaseTranslation));u=u*(this.mMaxTranslation-this.mBaseTranslation),n=this.mBaseTranslation+u}else{const m=this.mBaseTranslation-n;let u=this.saturate(m/this.mBaseTranslation);u=u*(this.mBaseTranslation/4),n=this.mBaseTranslation-u}let h=this.mTriggerBack;if(Math.abs(this.mTotalTouchDelta)>this.mMinDeltaForSwitch){let m=h;h=this.mTotalTouchDelta>0,!m&&h&&navigator.vibrate(1)}Math.abs(a)>Math.abs(e-this.mStartX)*2&&(h=!1),this.setTriggerBack(h,!0),this.mTriggerBack?this.mIsLeftPanel&&this.mArrowsPointLeft||!this.mIsLeftPanel&&this.mArrowsPointLeft:n=0,this.setDesiredTranslation(n,!0)}setTriggerBack(t,e){this.mTriggerBack!==t&&(this.mTriggerBack=t,this.mBackCallback.setTriggerBack(this.mTriggerBack))}setDesiredTranslation(t,e){this.mDesiredTranslation!=t&&(this.mDesiredTranslation=t,e?b(this.mCurrentTranslation,this.mDesiredTranslation,64,r=>(this.setCurrentTranslation(r),Math.abs(this.mCurrentTranslation-this.mDesiredTranslation)<2)):this.setCurrentTranslation(t))}setCurrentTranslation(t){this.mCurrentTranslation=t,this.mBackCallback.updatedChevrons(this.mCurrentTranslation,this.mStartY-80)}};i(C,"BASE_TRANSLATION_DP",50);let A=C;class K{constructor(){i(this,"mValue",0);i(this,"mVelocity",0)}}const c=class c{constructor(t){i(this,"mNaturalFreq",Math.sqrt(c.STIFFNESS_MEDIUM));i(this,"mDampingRatio",c.DAMPING_RATIO_MEDIUM_BOUNCY);i(this,"mInitialized",!1);i(this,"mValueThreshold",0);i(this,"mVelocityThreshold",0);i(this,"mGammaPlus",0);i(this,"mGammaMinus",0);i(this,"mDampedFreq",0);i(this,"mFinalPosition",c.UNSET);i(this,"mMassState",new K);t!==void 0&&(this.mFinalPosition=t)}setStiffness(t){if(t<=0)throw new Error("Spring stiffness constant must be positive.");return this.mNaturalFreq=Math.sqrt(t),this.mInitialized=!1,this}getStiffness(){return this.mNaturalFreq*this.mNaturalFreq}setDampingRatio(t){if(t<0)throw new Error("Damping ratio must be non-negative");return this.mDampingRatio=t,this.mInitialized=!1,this}getDampingRatio(){return this.mDampingRatio}setFinalPosition(t){return this.mFinalPosition=t,this}getFinalPosition(){return this.mFinalPosition}getAcceleration(t,e){t-=this.getFinalPosition();const r=this.mNaturalFreq*this.mNaturalFreq,n=2*this.mNaturalFreq*this.mDampingRatio;return-r*t-n*e}isAtEquilibrium(t,e){return Math.abs(e)<this.mVelocityThreshold&&Math.abs(t-this.getFinalPosition())<this.mValueThreshold}init(){if(!this.mInitialized){if(this.mFinalPosition===c.UNSET)throw new Error("Error: Final position of the spring must be set before the animation starts");this.mDampingRatio>1?(this.mGammaPlus=-this.mDampingRatio*this.mNaturalFreq+this.mNaturalFreq*Math.sqrt(this.mDampingRatio*this.mDampingRatio-1),this.mGammaMinus=-this.mDampingRatio*this.mNaturalFreq-this.mNaturalFreq*Math.sqrt(this.mDampingRatio*this.mDampingRatio-1)):this.mDampingRatio>=0&&this.mDampingRatio<1&&(this.mDampedFreq=this.mNaturalFreq*Math.sqrt(1-this.mDampingRatio*this.mDampingRatio)),this.mInitialized=!0}}updateValues(t,e,r){this.init();const n=r/1e3;t-=this.mFinalPosition;let a,o;if(this.mDampingRatio>1){const h=t-(this.mGammaMinus*t-e)/(this.mGammaMinus-this.mGammaPlus),m=(this.mGammaMinus*t-e)/(this.mGammaMinus-this.mGammaPlus);a=h*Math.pow(Math.E,this.mGammaMinus*n)+m*Math.pow(Math.E,this.mGammaPlus*n),o=h*this.mGammaMinus*Math.pow(Math.E,this.mGammaMinus*n)+m*this.mGammaPlus*Math.pow(Math.E,this.mGammaPlus*n)}else if(this.mDampingRatio===1){const h=t,m=e+this.mNaturalFreq*t;a=(h+m*n)*Math.pow(Math.E,-this.mNaturalFreq*n),o=(h+m*n)*Math.pow(Math.E,-this.mNaturalFreq*n)*-this.mNaturalFreq+m*Math.pow(Math.E,-this.mNaturalFreq*n)}else{const h=t,m=1/this.mDampedFreq*(this.mDampingRatio*this.mNaturalFreq*t+e);a=Math.pow(Math.E,-this.mDampingRatio*this.mNaturalFreq*n)*(h*Math.cos(this.mDampedFreq*n)+m*Math.sin(this.mDampedFreq*n)),o=a*-this.mNaturalFreq*this.mDampingRatio+Math.pow(Math.E,-this.mDampingRatio*this.mNaturalFreq*n)*(-this.mDampedFreq*h*Math.sin(this.mDampedFreq*n)+this.mDampedFreq*m*Math.cos(this.mDampedFreq*n))}return this.mMassState.mValue=a+this.mFinalPosition,this.mMassState.mVelocity=o,this.mMassState}setValueThreshold(t){this.mValueThreshold=Math.abs(t),this.mVelocityThreshold=this.mValueThreshold*c.VELOCITY_THRESHOLD_MULTIPLIER}};i(c,"STIFFNESS_HIGH",1e4),i(c,"STIFFNESS_MEDIUM",1500),i(c,"STIFFNESS_LOW",200),i(c,"STIFFNESS_VERY_LOW",50),i(c,"DAMPING_RATIO_HIGH_BOUNCY",.2),i(c,"DAMPING_RATIO_MEDIUM_BOUNCY",.5),i(c,"DAMPING_RATIO_LOW_BOUNCY",.75),i(c,"DAMPING_RATIO_NO_BOUNCY",1),i(c,"VELOCITY_THRESHOLD_MULTIPLIER",1e3/16),i(c,"UNSET",Number.MAX_VALUE);let k=c;const d=class d{constructor(t,e,r){i(this,"mSpring",null);i(this,"mPendingPosition",Number.MAX_VALUE);i(this,"mEndRequested",!1);i(this,"writeCb");i(this,"readCb");i(this,"doneCb",null);i(this,"mLastFrameTime",0);i(this,"mMinVisibleChange",0);i(this,"mRunning",!1);i(this,"mStartValueIsSet",!1);i(this,"mValue",d.UNSET);i(this,"mVelocity",0);this.writeCb=t,this.readCb=e,this.doneCb=r}getSpring(){return this.mSpring}setSpring(t){return this.mSpring=t,this}rafHandler(){const t=performance.now();let e=!1;if(this.mLastFrameTime==0)this.mLastFrameTime=t,this.writeCb(this.mValue);else{let r=t-this.mLastFrameTime;this.mLastFrameTime=t,e=this.updateValueAndVelocity(r),this.writeCb(this.mValue)}e?this.endAnimationInternal(!1):requestAnimationFrame(this.rafHandler.bind(this))}endAnimationInternal(t){this.mRunning=!1,this.mLastFrameTime=0,this.mStartValueIsSet=!1}start(){this.sanityCheck(),this.mSpring&&this.mSpring.setValueThreshold(this.getValueThreshold()),this.mRunning||(this.mRunning=!0,this.mStartValueIsSet||(this.mValue=this.readCb()),requestAnimationFrame(this.rafHandler.bind(this)))}animateToFinalPosition(t){this.mRunning?this.mPendingPosition=t:(this.mSpring==null?this.mSpring=new k(t):this.mSpring.setFinalPosition(t),this.start())}cancel(){this.mRunning&&this.endAnimationInternal(!0),this.mPendingPosition!==d.UNSET&&(this.mSpring==null?this.mSpring=new k(this.mPendingPosition):this.mSpring.setFinalPosition(this.mPendingPosition),this.mPendingPosition=d.UNSET)}skipToEnd(){if(!this.canSkipToEnd())throw new Error("Spring animations can only come to an end when there is damping");this.mRunning&&(this.mEndRequested=!0)}canSkipToEnd(){return this.mSpring!==null&&this.mSpring.mDampingRatio>0}sanityCheck(){if(this.mSpring==null)throw new Error("Incomplete SpringAnimation: Either final position or a spring force needs to be set.")}updateValueAndVelocity(t){if(this.mEndRequested)return this.mPendingPosition!==d.UNSET&&(this.mSpring&&this.mSpring.setFinalPosition(this.mPendingPosition),this.mPendingPosition=d.UNSET),this.mValue=this.mSpring?this.mSpring.getFinalPosition():0,this.mVelocity=0,this.mEndRequested=!1,!0;if(this.mPendingPosition!==d.UNSET){let e;this.mSpring?(e=this.mSpring.updateValues(this.mValue,this.mVelocity,t/2),this.mSpring.setFinalPosition(this.mPendingPosition)):e={mValue:this.mValue,mVelocity:this.mVelocity},this.mPendingPosition=d.UNSET,this.mSpring&&(e=this.mSpring.updateValues(e.mValue,e.mVelocity,t/2)),this.mValue=e.mValue,this.mVelocity=e.mVelocity}else if(this.mSpring){const e=this.mSpring.updateValues(this.mValue,this.mVelocity,t);this.mValue=e.mValue,this.mVelocity=e.mVelocity}return this.isAtEquilibrium(this.mValue,this.mVelocity)?(this.mValue=this.mSpring?this.mSpring.getFinalPosition():0,this.mVelocity=0,!0):!1}getAcceleration(t,e){return this.mSpring?this.mSpring.getAcceleration(t,e):0}isAtEquilibrium(t,e){return this.mSpring?this.mSpring.isAtEquilibrium(t,e):!1}setValueThreshold(t){}getValueThreshold(){return .75}};i(d,"UNSET",Number.MAX_VALUE);let v=d;const f=class f{constructor(){i(this,"mSpring");i(this,"mCallback",null);i(this,"mProgress",0);i(this,"mLastBackEvent",null);i(this,"mBackAnimationInProgress",!1);i(this,"mBackCancelledFinishRunnable",null);i(this,"mOnAnimationEndListener",()=>{this.invokeBackCancelledRunnable(),this.reset()});this.mSpring=new v(e=>{e=Math.min(f.SCALE_FACTOR,Math.max(0,e)),this.setProgress(e),this.updateProgressValue(e)},()=>this.getProgress(),null);const t=new k;t.setStiffness(k.STIFFNESS_MEDIUM),t.setDampingRatio(k.DAMPING_RATIO_NO_BOUNCY),this.mSpring.setSpring(t)}setProgress(t){this.mProgress=t}getProgress(){return this.mProgress}onBackProgressed(t){this.mBackAnimationInProgress&&(this.mLastBackEvent=t,console.log("OnBackProgressed: "+t.progress),this.mSpring!=null&&this.mSpring.animateToFinalPosition(t.progress*f.SCALE_FACTOR))}onBackStarted(t,e){this.reset(),this.mLastBackEvent=t,this.mCallback=e,this.mBackAnimationInProgress=!0,this.updateProgressValue(0)}reset(){this.mBackCancelledFinishRunnable!=null&&(this.updateProgressValue(0),this.invokeBackCancelledRunnable()),this.mSpring.animateToFinalPosition(0),this.mSpring.canSkipToEnd()?this.mSpring.skipToEnd():this.mSpring.cancel(),this.mBackAnimationInProgress=!1,this.mLastBackEvent=null,this.mCallback=null,this.mProgress=0}onBackCancelled(t){this.mBackCancelledFinishRunnable=t,this.mSpring.doneCb=t,console.log("===CANCEL BACK PROGRESS"),this.mSpring.animateToFinalPosition(0)}isBackAnimationInProgress(){return this.mBackAnimationInProgress}updateProgressValue(t){if(this.mLastBackEvent==null||this.mCallback==null||!this.mBackAnimationInProgress)return;console.log(`=== UPDATE PROGRESS VALUE ${t/f.SCALE_FACTOR}`);const e=this.mLastBackEvent.x,r=this.mLastBackEvent.y,n=this.mLastBackEvent.vx,a=this.mLastBackEvent.vy,o=t/f.SCALE_FACTOR,h=this.mLastBackEvent.edge,m=this.mLastBackEvent.triggerBack;this.mCallback.onProgressUpdate({x:e,y:r,progress:o,vx:n,vy:a,triggerBack:m,edge:h,animation_target:null})}invokeBackCancelledRunnable(){this.mBackCancelledFinishRunnable&&this.mBackCancelledFinishRunnable(),this.mBackCancelledFinishRunnable=null}};i(f,"SCALE_FACTOR",100);let F=f;const M=[{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/cnn1.png?v=1722393268913",timeline:"--progress-timeline",animation:"shrink"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/cnn2.png?v=1722393272553",timeline:"--progress-timeline",animation:"shrink"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/cnn3.png?v=1722393274989",timeline:"--progress-timeline",animation:"screenswipe"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/wikipedia1.png?v=1722393277064",timeline:"--progress-timeline",animation:"shrink"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/wikipedia2.png?v=1722393279653",timeline:"--progress-timeline",animation:"screenswipe"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/hn1.png?v=1722393282525",timeline:"--progress-timeline",animation:"shrink"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/hn2.png?v=1722393284651",timeline:"--progress-timeline",animation:"shrink"},{src:"https://cdn.glitch.global/2950c782-439e-4f98-a671-b34cef4f461e/hn3.png?v=1722393287364",timeline:"--progress-timeline",animation:"screenswipe"}];function j(s){const t=document.getElementById("progressScroller");t.scrollTop=s*1e4}addEventListener("keydown",()=>console.log("##################3"));function J(s){j(s.progress)}const P=new F,p=new z({onBackStarted:s=>{P.onBackStarted(s,{onProgressUpdate:J})},onBackProgressed:s=>{P.onBackProgressed(s)},onBackCancelled:()=>{document.getElementById("progressScroller"),P.onBackCancelled(()=>{})},onBackInvoked:()=>{document.getElementById("progressScroller"),P.reset(),Z()}}),B=new A({triggerBack:function(){p.setTriggerBack(!0)},cancelBack:function(){p.setTriggerBack(!1)},setTriggerBack:function(s){p.setTriggerBack(s)},updatedChevrons:function(s,t){const e=document.getElementById("chevrons");e.style.left=`${s-50}px`,e.style.width=`${50+10*(s/70)**3}px`,e.style.top=`${Math.max(0,t)}px`}});let T=!1;window.onload=()=>{const s=document.getElementById("backarea");s.addEventListener("pointerdown",t=>{T||(T=!0,B.onPointerDown(t),p.onPointerDown(t),s.setPointerCapture(t.pointerId))}),s.addEventListener("pointerup",t=>{T&&(T=!1,B.onPointerUp(t),p.onPointerUp(t),s.releasePointerCapture(t.pointerId))}),s.addEventListener("pointercancel",t=>{T&&(T=!1,B.onPointerCancel(t),p.onPointerCancel(t),s.releasePointerCapture(t.pointerId))}),s.addEventListener("pointermove",t=>{T&&(B.onPointerMove(t),p.onPointerMove(t))}),Q()};let N=Number.parseInt(window.location.hash.substring(1));Number.isNaN(N)&&(N=M.length-1);function Q(){M.forEach((s,t)=>{if(t>N)return;const e=document.createElement("img");e.src=s.src,e.id=`img${t}`,e.className="screen";const r=document.getElementById("stack");r.insertBefore(e,r.firstElementChild)}),V()}function V(){const t=document.getElementById("stack").lastElementChild;if(!t)return;const e=Number.parseInt(t.id.substring(3));t.classList.add("top"),t.style.animationName=M[e].animation}function Z(){document.getElementById("progressScroller").scrollTop=0;const s=document.getElementById("stack"),t=s.lastElementChild;if(!t)return;const e=Number.parseInt(t.id.substring(3));t.classList.remove("top"),t.classList.add("end"),t.getAnimations()[0].commitStyles(),t.style.animationName=`${M[e].animation}end`,t.getAnimations()[0].addEventListener("finish",r=>{s.removeChild(t),V()})}
