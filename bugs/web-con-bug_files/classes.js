 function UCF_PhaseIndicatorItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PhaseIndicatorItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PhaseIndicatorItem.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_PhaseIndicatorItem.prototype.aAttributeNames=["sTooltip","sTitle","bEnabled","bSelected"]; UCF_PhaseIndicatorItem.prototype.aMethodNames=[];  UCF_PhaseIndicatorItem.prototype.sTooltip=''; UCF_PhaseIndicatorItem.prototype.sTitle=''; UCF_PhaseIndicatorItem.prototype.bEnabled=true; UCF_PhaseIndicatorItem.prototype.bSelected=false; UCF_PhaseIndicatorItem.prototype.setDefaultValues=function(){this.sTooltip='';this.sTitle='';this.bEnabled=true;this.bSelected=false;};
 function UCF_SapTableAccessibilityHelper(oTable){this.oTable=oTable;};UCF_SapTableAccessibilityHelper.prototype=new UCF_Object(); UCF_SapTableAccessibilityHelper.prototype.cleanUp=function(){this.oTable=null;}; UCF_SapTableAccessibilityHelper.prototype.onlsaccessibility=function(oBrowserEvent){ if(oBrowserEvent.oGetData().bProcessedBySapTableAcessibility){return;}else{oBrowserEvent.oGetData().bProcessedBySapTableAcessibility=true;}var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSourceControl=oBrowserEvent.oGetSourceControl(),oAccessInfo=this.oTable.oGetAccessInfo(oBrowserEvent,this.oTable.ACCESS_TYPE.S_508),oCell=null;if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.HEADER_CELL){oCell=new(UCF_ClassLoader.oGetClass("UCF_SapTableHeaderCell"))(oAccessInfo.oSubControlDomRef,this.oTable);}else if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.STANDARD_CELL||oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.POPIN_CELL){oCell=new(UCF_ClassLoader.oGetClass("UCF_SapTableCell"))(oAccessInfo.oSubControlDomRef,this.oTable);}else if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.HIERARCHY_CELL){oCell=new(UCF_ClassLoader.oGetClass("UCF_SapTableHierarchicalCell"))(oAccessInfo.oSubControlDomRef,this.oTable);}else if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.MATRIX_CELL){oCell=new(UCF_ClassLoader.oGetClass("UCF_SapTableMatrixCell"))(oAccessInfo.oSubControlDomRef,this.oTable);}else if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.SELECTION_CELL){oCell=new(UCF_ClassLoader.oGetClass("UCF_SapTableSelectionCell"))(oAccessInfo.oSubControlDomRef,this.oTable);}else if(oAccessInfo.eSubControlType==this.oTable.SUBCONTROL.TABLE){if(oSourceControl==this.oTable){if(oAccessInfo.eAction==this.oTable.ACTION.TABLE_END){oAccessibilityHelper.setControlType("ST_END");}else{ if(this.oTable.sAccessibilityDescription){oAccessibilityHelper.setLabel(this.oTable.sAccessibilityDescription);}else if(this.oTable.sTitleText){oAccessibilityHelper.setLabel(this.oTable.sTitleText);}else{var sTitle=this.oTable.oDomRef.getAttribute("t"); oAccessibilityHelper.setLabel(sTitle);} oAccessibilityHelper.setEnabled(this.oTable.bEnabled); if(this.oTable.sTooltip)oAccessibilityHelper.setTooltip(this.oTable.sTooltip); var iRowCount=this.oTable.iRowCount,iColCount=this.oTable.iColCount,iVisibleRowCount=this.oTable.iVisibleRowCount,iVisibleColCount=this.oTable.iVisibleColCount,iVisibleFirstRow=this.oTable.iVisibleFirstRow+(this.oTable.bZeroBasedScrolling?1:0);if(iRowCount==0){oAccessibilityHelper.setControlType("ST_EMPTY",[iColCount]);}else if(iVisibleRowCount>0&&iVisibleRowCount<iRowCount){if(iVisibleColCount!=-1&&iVisibleColCount<iColCount){oAccessibilityHelper.setControlType("ST_PAGE_HS",[iColCount,iVisibleRowCount,iRowCount,iVisibleFirstRow,iVisibleColCount]);}else{oAccessibilityHelper.setControlType("ST_PAGE",[iColCount,iVisibleRowCount,iRowCount,iVisibleFirstRow]);}}else{if(iVisibleColCount!=-1&&iVisibleColCount<iColCount){oAccessibilityHelper.setControlType("ST_HS",[iColCount,iRowCount,iVisibleColCount]);}else{oAccessibilityHelper.setControlType("ST",[iColCount,iRowCount]);}}oAccessibilityHelper.addTutor("GROUP_TUT");}}}if(oCell){var oCellInfo=this.oTable.oGetCellInfoByBrowserEvent(oBrowserEvent);oCell.setCellInfo(oCellInfo);oCell.setAccessibilityInfo(oSourceControl,oAccessInfo,oAccessibilityHelper);}};
function UCF_Hotkey(oDomRef){UCF_ControlInfo.apply(this,[oDomRef]);};UCF_Hotkey.prototype=new(UCF_ClassLoader.oGetClass("UCF_ControlInfo"))(); UCF_Hotkey.prototype.aAttributeNames=["sHotkey","sProviderId"]; UCF_Hotkey.prototype.aMethodNames=[];  UCF_Hotkey.prototype.sHotkey="NONE"; UCF_Hotkey.prototype.sProviderId=''; UCF_Hotkey.prototype.setDefaultValues=function(){this.sHotkey="NONE";this.sProviderId='';};
 function UCF_ComboBox(oDomRef,oLS){if(arguments.length==0)return; UCF_Control.apply(this,[oDomRef,oLS]);  this.oSelectTimer=null;  this.sKeySave=this.sKey;this.sValueSave=this.oDomRef.value;this.sValue=this.oDomRef.value; this.bAllowTextSelection=(this.sBehavior=="FREETEXT"&&this.bEnabled); this.bNoBlur=false; if(this.mEvents.Enter){this.bIgnoreDefaultButton=true;} this.sInputFocusStyle="lsEdFieldFocus";this.sHelpButtonFocusStyle="lsEdf3HlpBtnFocus";if(!this.bEnabled||this.bReadonly){this.sInputFocusStyle+="Dsbl";this.sHelpButtonFocusStyle+="Dsbl";}if(this.bInvalid||this.sInputState=="ERROR"){this.sInputFocusStyle+="Inv";this.sHelpButtonFocusStyle+="Inv";}this.sInputHoverStyle="urEdf2TxtHv";this.sHelpButtonHoverStyle="lsEdf3HlpBtnHv"; this.iSelectionStart=0;this.iSelectionEnd=0;  this.oListBox=null; if(this.bDisplayAsText){this.bHideFieldHelp=true;}this.oHelpButtonRef=null; this.oHelpButton=null; if(this.bHideFieldHelp){this.oHelpButton=this.oLS.oControlFactory.oGetControl("UCF_InputFieldHelpButton","ls-inputfieldhelpbutton");this.oHelpButtonRef=this.oHelpButton.oDomRef;}else{this.oHelpButtonRef=UCF_DomUtil.$(this.sId+"-btn");} this.bOpen=false;   this.bFireListAccess=true; this.sSearchString="";  this.bNavigation=!this.bUsedInSapTable; this.bIsDirty=false; this.bListNavigation=false; this.iLastKeypress=null;};UCF_ComboBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ComboBox.prototype.focus=function(){if(UCF_DomUtil.oGetActiveElement()!=this.oDomRef){this.bNoBlur=false;UCF_Control.prototype.focus.apply(this,arguments);if(!this.bReadonly&&this.bEnabled&&this.oDomRef.tagName=="INPUT")this.oDomRef.select();}}; UCF_ComboBox.prototype.destroy=function(){var oPopupManager=this.oLS.oGetPopupManagerInternal();if(oPopupManager)oPopupManager.detachEvent(oPopupManager.E_EVENTS.WindowOpen,this,"handlePopupWindowOpen"); if(this.oListBox&&this.bOpen){this.close();} if(this.oHelpButton)this.hideButton();}; UCF_ComboBox.prototype.collectFocusInfo=function(oFocusInfo){var iCursorPosX=UCF_DomUtil.iGetCursorPos(this.oDomRef);if(iCursorPosX>=0){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iCursorPosX",iCursorPosX);}if(this.bUsedInSapTable){oFocusInfo.addParam("bNavigation",this.bNavigation);}}; UCF_ComboBox.prototype.applyFocusInfo=function(oFocusInfo){var iCursorPosX=oFocusInfo.oGetParam("iCursorPosX");this.oDomRef.focus();if(iCursorPosX>=0){UCF_DomUtil.setCursorPos(this.oDomRef,iCursorPosX);}if(this.bUsedInSapTable){this.bNavigation=oFocusInfo.oGetParam("bNavigation");}}; UCF_ComboBox.prototype.onlsfocus=function(oBrowserEvent){ if(this.bHideFieldHelp){this.showButton();} this.setFocusStyles(); if(this.bRequired&&this.bShowRequiredIndicator&&!this.sValue){this.oDomRef.value="";this.oDomRef.className=this.oDomRef.className.replace("urEdf2TxtReq","");}}; UCF_ComboBox.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled||(this.bReadonly&&!this.bShowHelpButtonAlways))return; if(oBrowserEvent.oGetSourceControl()!=this)return;if(this.sBehavior=="DROPDOWNSELECT"||oBrowserEvent.oSource==this.oHelpButtonRef){this.handleHelpButtonClick();}oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_ComboBox.prototype.onlsselect=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.onlsblur=function(oBrowserEvent){ if(oBrowserEvent.oGetSource()!=this.oDomRef)return;if(this.bNoBlur){this.bNoBlur=false; return;} if(this.oHelpButton){this.hideButton();} this.removeFocusStyles(); if(this.oListBox&&this.mEvents.FieldHelpPress)this.oListBox.bAvailable=false; if(this.bEnabled&&!this.bReadOnly){this.bPrepareFireChange(false,oBrowserEvent);}  this.bFireListAccess=true; if(this.bUsedInSapTable){this.bNavigation=false;} if(this.bRequired&&this.bShowRequiredIndicator&&!this.sValue){this.oDomRef.value="*";UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtReq");} this.iSelectionStart=UCF_DomUtil.iGetSelectionStart(this.oDomRef);this.iSelectionEnd=UCF_DomUtil.iGetSelectionEnd(this.oDomRef);}; UCF_ComboBox.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();var sKey="";if(iKeyCode==UCF_KeyCodes.BACKSPACE&&(this.sBehavior=="DROPDOWNSELECT"||!this.bEnabled||this.bReadonly)){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}else if(iKeyCode==UCF_KeyCodes.BACKSPACE&&document.selection){if(document.selection){var oTextRange=document.selection.createRange();if(oTextRange.text.length>0){this.oDomRef.value=this.oDomRef.value.substring(0,this.oDomRef.value.indexOf(oTextRange.text)-1);}else{return;}oTextRange=this.oDomRef.createTextRange();oTextRange.move("character",this.oDomRef.value.length);oTextRange.select();}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();} else if((oBrowserEvent.bAlt()&&(iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN))||iKeyCode==UCF_KeyCodes.F4){if(!this.bEnabled||this.bReadonly)return;this.handleHelpButtonClick();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();} else if(iKeyCode==UCF_KeyCodes.DELETE){ if(this.sBehavior=="DROPDOWNSELECT"){var sValue=this.oListBox.sGetItemValue("");if(sValue!=null){this.oListBox.bSetItemSelected("",true,true);this.setValue("",sValue,true);}oBrowserEvent.cancel();}this.bIgnoreKey=true;oBrowserEvent.cancelBubble();} else if(iKeyCode==UCF_KeyCodes.ESCAPE){oBrowserEvent.cancelBubble();} else if(iKeyCode==UCF_KeyCodes.INSERT){oBrowserEvent.cancelBubble();} else if(iKeyCode==UCF_KeyCodes.F2&&this.bUsedInSapTable){this.bNavigation=!this.bNavigation;UCF_DomUtil.setCursorPos(this.oDomRef,this.oDomRef.value.length); if(this.oLS.oSystem.bIs508){this.bNoBlur=true;this.refocus(this.oFocusDomRef);}oBrowserEvent.cancelBubble();}}; UCF_ComboBox.prototype.onpaste=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_ComboBox.prototype.oncut=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_ComboBox.prototype.ondrop=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_ComboBox.prototype.onlsleft=function(oBrowserEvent){if(!this.bNavigation)oBrowserEvent.cancel();else oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.onlsright=function(oBrowserEvent){if(!this.bNavigation)oBrowserEvent.cancel();else oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.onlsup=function(oBrowserEvent){var sKey=null;if(!this.bEnabled||this.bReadonly)return; if(!this.bNavigation&&!this.bOpen){oBrowserEvent.cancel();return;}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();this.oListBox=this.oGetListBox();if(!this.oListBox||!this.oListBox.bIsAvailable()){ if(this.sSuggestFilter=="OFF")this.fireFieldHelpPress(this.sId);else this.prepareFireListAccess();return;}var sValue=this.oListBox.sGetItemValue(this.sKey); if(sValue==null){ sKey=this.oListBox.sGetLastItemKey();} else{sKey=this.oListBox.sGetPrevItem(this.sKey);}if(sKey!=null){var sNewValue=this.oListBox.sGetItemValue(sKey),sOldValue=this.sGetValue();this.oListBox.bSetItemSelected(sKey,true,true);this.setValue(sKey,sNewValue,true);}}; UCF_ComboBox.prototype.onlsdown=function(oBrowserEvent){var sKey=null;if(!this.bEnabled||this.bReadonly)return; if(!this.bNavigation&&!this.bOpen){oBrowserEvent.cancel();return;}oBrowserEvent.cancelBubble();oBrowserEvent.cancel(); this.oListBox=this.oGetListBox();if(!this.oListBox||!this.oListBox.bIsAvailable()){ if(this.sSuggestFilter=="OFF")this.fireFieldHelpPress(this.sId);else this.prepareFireListAccess();return;}var sValue=this.oListBox.sGetItemValue(this.sKey); if(sValue==null){ sKey=this.oListBox.sGetFirstItemKey();} else{sKey=this.oListBox.sGetNextItem(this.sKey);}if(sKey!=null){var sNewValue=this.oListBox.sGetItemValue(sKey),sOldValue=this.sGetValue();this.oListBox.bSetItemSelected(sKey,true,true);this.setValue(sKey,sNewValue,true);}}; UCF_ComboBox.prototype.onlspagedown=function(oBrowserEvent){if(this.oListBox&&this.oListBox.bOpened){this.oListBox.pageDown();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_ComboBox.prototype.onlspageup=function(oBrowserEvent){if(this.oListBox&&this.oListBox.bOpened){this.oListBox.pageUp();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_ComboBox.prototype.onlshome=function(oBrowserEvent){var sKey=null;if(!this.bEnabled||this.bReadonly)return; if(!this.bNavigation&&!this.bOpen){oBrowserEvent.cancel();return;}oBrowserEvent.cancelBubble(); if(this.sBehavior=="FREETEXT"&&!this.bOpen){return;} oBrowserEvent.cancel();this.oListBox=this.oGetListBox();if(!this.oListBox)return;sKey=this.oListBox.sGetFirstItemKey();this.oListBox.selectFirstItem();this.setValue(sKey,this.oListBox.sGetItemValue(sKey),true);}; UCF_ComboBox.prototype.onlsend=function(oBrowserEvent){var sKey=null;if(!this.bEnabled||this.bReadonly)return; if(!this.bNavigation&&!this.bOpen){oBrowserEvent.cancel();return;}oBrowserEvent.cancelBubble(); if(this.sBehavior=="FREETEXT"&&!this.bOpen){return;} oBrowserEvent.cancel();this.oListBox=this.oGetListBox();if(!this.oListBox)return;sKey=this.oListBox.sGetLastItemKey();this.oListBox.selectLastItem();this.setValue(sKey,this.oListBox.sGetItemValue(sKey),true);}; UCF_ComboBox.prototype.onlsexpand=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.onlscollapse=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_ComboBox.prototype.onlsenter=function(oBrowserEvent){if(this.bOpen){ if(this.bListNavigation){var sKey=this.oListBox.sGetSelectedItemKey();var sValue="";if(sKey!=null){sValue=this.oListBox.sGetItemValue(sKey);this.setValue(sKey,sValue,true);}this.selectText(sValue);}this.close();} var bChanged=this.bPrepareFireChange(false,oBrowserEvent); if(this.mEvents.Enter){this.fireEnter(this.sId);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();} if(bChanged||this.mEvents.Enter){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_ComboBox.prototype.onlsescape=function(oBrowserEvent){this.oListBox=this.oGetListBox();if(this.bOpen){this.sKey=this.sKeySave;var sValue=this.oListBox.sGetItemValue(this.sKey);if(sValue)this.oDomRef.value=this.oListBox.sGetItemValue(this.sKey);else this.oDomRef.value="";this.selectText("");this.close();}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_ComboBox.prototype.onlstabnext=function(oBrowserEvent){if(this.bOpen){this.bNoBlur=false;this.close();this.bPrepareFireChange(false,oBrowserEvent);}}; UCF_ComboBox.prototype.onlstabprevious=function(oBrowserEvent){if(this.bOpen){this.bNoBlur=false;this.close();this.bPrepareFireChange(false,oBrowserEvent);}}; UCF_ComboBox.prototype.onlshotkey=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();  if(oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift()&&(iKey==UCF_KeyCodes.C||iKey==UCF_KeyCodes.X||iKey==UCF_KeyCodes.V||iKey==UCF_KeyCodes.Z||iKey==UCF_KeyCodes.Y||iKey==UCF_KeyCodes.A)){oBrowserEvent.cancelBubble();return;}if(iKey==UCF_KeyCodes.DELETE||iKey==UCF_KeyCodes.ESCAPE||iKey==UCF_KeyCodes.F4||iKey==UCF_KeyCodes.INSERT){oBrowserEvent.cancelBubble();return;}if(this.bEnabled&&!this.bReadOnly){this.bPrepareFireChange(false,oBrowserEvent);}}; UCF_ComboBox.prototype.onkeypress=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();if(iKey==0&&oBrowserEvent.oDomEvent)iKey=oBrowserEvent.oDomEvent.charCode; if(this.bReadonly||!this.bEnabled){return;} if(iKey==UCF_KeyCodes.TAB||iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_DOWN||iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.PAGE_UP||iKey==UCF_KeyCodes.PAGE_DOWN)return; if(this.bUsedInSapTable)this.bNavigation=true; this.setInputState("INVALIDATE");if(this.oDataTip)this.oDataTip.close();  if(this.sBehavior=="FREETEXT"&&(!this.bAllowVirtualTyping||!this.bOpen)){this.sKey="";return}var cKey=String.fromCharCode(iKey);if(!this.oListBox)this.oListBox=this.oGetListBox();if(!this.oListBox)return; if(this.sBehavior=="DROPDOWNSELECT"){ if(this.bAllowVirtualTyping){if(!this.iLastKeypress){var oDate=new Date();this.iLastKeypress=oDate.getTime();this.sSearchString=cKey;}else{var oDate=new Date();var iNow=oDate.getTime();if(iNow-this.iLastKeypress>750){this.sSearchString=cKey;}else{this.sSearchString+=cKey;if(this.sSearchString.length>1&&this.sSearchString.toUpperCase()==this.oDomRef.value.substr(0,this.sSearchString.length).toUpperCase())return;}this.iLastKeypress=iNow;}} else{this.sSearchString=cKey;} var sKey=this.oListBox.sFindItem(this.sSearchString,this.sKey);if(sKey&&sKey!=""){this.setValue(sKey,this.oListBox.sGetItemValue(sKey),true);this.oListBox.bSetItemSelected(sKey,true,true);}} else if(this.bAllowVirtualTyping&&document.selection){var sSelection=document.selection.createRange().text;var sValue=this.sGetValue();sValue=sValue.substr(0,sValue.length-sSelection.length);sValue+=cKey;this.oDomRef.value=sValue;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return false;}}; UCF_ComboBox.prototype.onkeyup=function(oBrowserEvent){if(this.sBehavior=="DROPDOWNSELECT")return;var iKey=oBrowserEvent.iKeyCode();if(this.bIgnoreKey){this.bIgnoreKey=false;return;}this.handleEditEvents(oBrowserEvent);  if(this.sBehavior=="FREETEXT"&&(!this.bAllowVirtualTyping||!this.bOpen)){return;}if(iKey==UCF_KeyCodes.TAB||iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_DOWN||iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.PAGE_UP||iKey==UCF_KeyCodes.PAGE_DOWN)return;if(iKey==UCF_KeyCodes.BACKSPACE||iKey==UCF_KeyCodes.DELETE){if(!this.oListBox&&this.sGetValue()==""){return;}}if(this.bListLoadInProgress)return;this.oListBox=this.oGetListBox(); if(!this.oListBox)return; if(this.bAllowVirtualTyping){var sValue=this.sGetValue();this.sSearchString=sValue;}if(this.oListBox){var sKey=this.oListBox.sFindItem(this.sSearchString,"");if(sKey&&sKey!=""){var sValue=this.oListBox.sGetItemValue(sKey);this.oListBox.bSetItemSelected(sKey,true,true); var sItemValue=this.oListBox.sGetItemValue(sKey);var oRegExp=new RegExp(this.sSearchString,"i");if(sItemValue.search(oRegExp)!=0)return;this.setValue(sKey,this.oListBox.sGetItemValue(sKey),true);  if(this.oDomRef.createTextRange){var oTextRange=null;oTextRange=this.oDomRef.createTextRange();var sSelection=this.sGetValue().substr(this.sSearchString.length,this.sGetValue().length-this.sSearchString.length);if(sSelection!=""){var iChars=sSelection.length*(-1);oTextRange.findText(sSelection,iChars);oTextRange.select();}} else if(this.oDomRef.selectionStart){this.oDomRef.selectionStart=this.sSearchString.length;this.oDomRef.selectionEnd=this.sGetValue().length;}}}}; UCF_ComboBox.prototype.onmouseover=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(); if(oSource.className=="urLblFont"&&this.oDataTip){this.bOldShowOnActivate=this.oDataTip.bShowOnActivate;this.bOldAutoHideTimeout=this.oDataTip.iAutoHideTimeout;this.oDataTip.bShowOnActivate=false; this.oDataTip.iAutoHideTimeout=0; if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(400,this.oDataTip,"open");} this.setHoverStyles(oSource);}; UCF_ComboBox.prototype.onmousedown=function(oBrowserEvent){ if(oBrowserEvent.oGetSource()==this.oHelpButtonRef&&UCF_DomUtil.oGetActiveElement()==this.oDomRef){this.bNoBlur=true;}}; UCF_ComboBox.prototype.onmouseout=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(); if(oSource.className=="urLblFont"&&this.oDataTip){this.oDataTip.close();this.oDataTip.bShowOnActivate=this.bOldShowOnActivate;this.oDataTip.iAutoHideTimeout=this.bOldAutoHideTimeout;if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}} this.removeHoverStyles();}; UCF_ComboBox.prototype.onresize=function(oBrowserEvent){if(!this.oHelpButton)return; this.oHelpButton.setPosition();}; UCF_ComboBox.prototype.onAnyEvent=function(oEvent){var oBrowserEvent=oEvent.oGetParam("oBrowserEvent");var oSourceControl=this.oLS.oGetControlByDomRef(oBrowserEvent.oGetSourceRoot());if(oBrowserEvent.sGetName()=="mousedown"){if(oSourceControl!=this&&oSourceControl!=this.oListBox&&!UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_ItemListBoxItem")&&!UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_InputFieldHelpButton")){this.bPrepareFireChange(false,oBrowserEvent);this.bNoBlur=false;this.close();}else{this.bIgnoreNextFocusLost=true;}}else if(oBrowserEvent.sGetName()=="lsfocuslost"){if(!this.bIgnoreNextFocusLost){this.bPrepareFireChange(false,oBrowserEvent);this.bNoBlur=false;this.close();}else{this.bIgnoreNextFocusLost=false;}}}; UCF_ComboBox.prototype.onListBoxActivate=function(oEvent){this.bNoBlur=true;}; UCF_ComboBox.prototype.onHelpButtonActivate=function(oEvent){this.bNoBlur=true;}; UCF_ComboBox.prototype.onHelpButtonClick=function(oEvent){this.handleHelpButtonClick();}; UCF_ComboBox.prototype.handleHelpButtonClick=function(){ if(UCF_DomUtil.oGetActiveElement()!=this.oDomRef){this.oDomRef.focus();} if(this.mEvents.FieldHelpPress&&(!this.oListBox||!this.oListBox.bAvailable)){ if(this.oHelpButton){this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Press,this,"onHelpButtonClick");this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onHelpButtonActivate");}this.bPrepareFireChange(false);var oPopupManager=this.oLS.oGetPopupManagerInternal();if(oPopupManager)oPopupManager.attachEvent(oPopupManager.E_EVENTS.WindowOpen,this,"handlePopupWindowOpen");this.fireFieldHelpPress(this.sId);} else{this.bNoBlur=false;if(this.bOpen){this.close();}else{this.openInternal();}}}; UCF_ComboBox.prototype.handlePopupWindowOpen=function(){var oPopupManager=this.oLS.oGetPopupManagerInternal();this.removeFocusStyles();this.removeHoverStyles();this.hideButton();if(oPopupManager)oPopupManager.detachEvent(oPopupManager.E_EVENTS.WindowOpen,this,"handlePopupWindowOpen");}; UCF_ComboBox.prototype.bValueEdited=function(){return this.sGetValue()!=this.sValue;}; UCF_ComboBox.prototype.handleEditEvents=function(oBrowserEvent){if(this.bValueEdited()&&!this.bIsDirty){this.bIsDirty=true;this.markDirty();}}; UCF_ComboBox.prototype.onListBoxSelect=function(oEvent){var sKey=oEvent.oGetParam("sKey");var sValue=oEvent.oGetParam("sValue");var bFireSelect=oEvent.oGetParam("bFireSelect");this.setValue(sKey,sValue,!bFireSelect);this.focus();}; UCF_ComboBox.prototype.onListBoxClose=function(oEvent){this.close();this.focus();}; UCF_ComboBox.prototype.showButton=function(){if(!this.oHelpButton||this.oHelpButton.bIsConnected(this))return;if(!this.bEnabled||(this.bReadonly&&!this.ShowHelpButtonAlways))return;this.oHelpButton.detachAllEvents();this.oHelpButton.connect(this,this.sFieldHelp);this.oHelpButton.attachEvent(this.oHelpButton.E_EVENTS.Press,this,"onHelpButtonClick");this.oHelpButton.attachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onHelpButtonActivate");this.attachBrowserEvent("resize",this.oDomRef);}; UCF_ComboBox.prototype.hideButton=function(){if(!this.oHelpButton)return;this.oHelpButton.disconnect();this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Press,this,"onHelpButtonClick");this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onHelpButtonActivate");this.detachBrowserEvent("resize",this.oDomRef);}; UCF_ComboBox.prototype.selectText=function(sSelectionText){ if(this.oDomRef.createTextRange){var oTextRange=this.oDomRef.createTextRange();if(sSelectionText&&sSelectionText!=""){oTextRange.moveStart("character",oTextRange.text.lastIndexOf(sSelectionText));oTextRange.select();}else{oTextRange.moveStart("character",0);oTextRange.select();}}}; UCF_ComboBox.prototype.openInternal=function(){  if(!this.bEnabled||(this.bReadonly&&!this.bShowHelpButtonAlways))return; this.oListBox=this.oGetListBox();if(!this.oListBox)return; this.oListBox.setReadonly(this.bReadonly); this.oListBox.setOpenerRef(this.oDomRef); this.oListBox.setWidth(this.iGetWidth());this.oListBox.applyHeight(); this.oListBox.setOpenerRef(this.oDomRef); if(this.oListBox.setEventDefaultHandler)this.oListBox.setEventDefaultHandler(this); this.bOpen=true;this.oListBox.attachEvent(this.oListBox.E_EVENTS.Select,this,"onListBoxSelect");this.oListBox.attachEvent(this.oListBox.E_EVENTS.Close,this,"onListBoxClose");this.oListBox.attachEvent(this.oListBox.E_EVENTS.Activate,this,"onListBoxActivate");this.oListBox.open(); if(this.oDataTip&&this.oDataTip.sText){this.oDataTip.close();var bOpenedOnTop=this.oListBox.bOpenedOnTop();if(bOpenedOnTop){this.oDataTip.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.oDataTip.open();}else{this.oDataTip.setAlignment(UCF_LayeredControl.ALIGNMENT.TOPLEFT);this.oDataTip.open();}if(bOpenedOnTop&&this.oDataTip.bOpenedOnTop()){this.oDataTip.close();}}this.oListBox.setOverlap(1);this.oListBox.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT); this.oListBox.clearSelection();if(!this.bReadonly){this.oListBox.selectItem(this.sKey);} var oWindow=this.oLS.oBrowserWindow;oWindow.attachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent"); this.bIgnoreDefaultButton=true;}; UCF_ComboBox.prototype.close=function(){if(!this.oListBox)return; this.bOpen=false;this.oListBox.close();this.oListBox.detachEvent(this.oListBox.E_EVENTS.Select,this);this.oListBox.detachEvent(this.oListBox.E_EVENTS.Close,this);this.oListBox.detachEvent(this.oListBox.E_EVENTS.Activate,this); var oWindow=this.oLS.oBrowserWindow;oWindow.detachEvent(oWindow.E_EVENTS.AnyEvent,this); this.bIgnoreDefaultButton=false;}; UCF_ComboBox.prototype.oGetListBox=function(){var oListBox=null;if(this.sItemListBoxId){oListBox=this.oLS.oControlFactory.oGetControlById(this.sItemListBoxId);}return oListBox;}; UCF_ComboBox.prototype.prepareFireListAccess=function(){if(!this.oListBox||!this.oListBox.bIsAvailable()){if(this.bFireListAccess&&this.mEvents.ListAccess){this.focus();this.fireListAccess(this.sId,this.sItemListBoxId,"");this.bListLoadInProgress=true;this.bFireListAccess=false;}}}; UCF_ComboBox.prototype.bPrepareFireChange=function(bDelayed){var bChanged=false; if(this.oSelectTimer){UCF_JsUtil.clearDelayedCall(this.oSelectTimer);this.oSelectTimer=null;bChanged=true;} if(this.sKey!=this.sKeySave||this.oDomRef.value!=this.sValueSave){bChanged=true;}if(!bChanged){return false;} if(this.sBehavior=="FREETEXT"&&this.sKey==this.sKeySave&&this.sGetValue()!=this.sValueSave){this.sKey="";} if(this.sBehavior=="FREETEXT"&&this.sKey==""){this.fireValidateWithStateChange(this.sId,this.sGetValue());this.fireChange(this.sId,this.sGetValue());}else{ if(bDelayed){this.sKeySave=this.sKey;this.sValueSave=this.oDomRef.value;this.oSelectTimer=UCF_JsUtil.delayedCall(500,this,"fireSelect",[this.sId,this.sKey]);} else{this.setInputState("INVALIDATE"); this.sKeySave=this.sKey;this.sValueSave=this.oDomRef.value;this.fireSelect(this.sId,this.sKey);}}return true;}; UCF_ComboBox.prototype.fireValidateWithStateChange=function(sId,sValue){if(this.mEvents.Validate){this.bIgnoreDefaultButton=true;this.setInputState("INVALIDATELOADING");this.fireValidate(sId,sValue);}else{this.setInputState("INVALIDATE");}}; UCF_ComboBox.prototype.setValue=function(sKey,sValue,bKeyboard){ if(!this.bEnabled||this.bReadonly){return;} if(this.sKey==sKey&&this.sGetValue()==sValue){if(!bKeyboard&&this.sKey==this.sKeySave)return;}this.sKey=sKey;this.oDomRef.value=sValue; if(this.oLS.oSystem.bIs508){this.bNoBlur=true;this.refocus(this.oFocusDomRef);} if(this.oSelectTimer){UCF_JsUtil.clearDelayedCall(this.oSelectTimer);} this.setInputState("INVALIDATE");if(this.oDataTip)this.oDataTip.close(); if(this.bOpen&&bKeyboard)return; this.bPrepareFireChange(bKeyboard);}; UCF_ComboBox.prototype.sGetValue=function(){return this.oDomRef.value;}; UCF_ComboBox.prototype.open=function(){var oActiveElement=UCF_DomUtil.oGetActiveElement();var oPopupManager=this.oLS.oGetPopupManagerInternal();if(oPopupManager)oPopupManager.detachEvent(oPopupManager.E_EVENTS.WindowOpen,this,"handlePopupWindowOpen");this.bFireListAccess=false;this.bListLoadInProgress=false;this.openInternal();if(oActiveElement!=this.oDomRef&&oActiveElement!=this.oHelpButtonRef){this.bIgnoreNextFocusLost=true;}}; UCF_ComboBox.prototype.iGetWidth=function(){var iWidth=this.oDomRef.offsetWidth;if(this.oHelpButtonRef){iWidth+=this.oHelpButtonRef.offsetWidth;}return iWidth;}; UCF_ComboBox.prototype.setInputState=function(sInputState,sText){if(sInputState==this.sInputState)return;var oDataTip=this.oDataTip;if(!oDataTip){oDataTip=this.createDataTip();} switch(this.sInputState){case "ERROR":UCF_DomUtil.removeClass(this.oDomRef,"urEdf2TxtInv");this.oDomRef.className=this.oDomRef.className.replace("Inv","");this.sInputFocusStyle=this.sInputFocusStyle.replace("Inv","");if(this.bUsedInSapTable){UCF_DomUtil.removeClass(this.oRootRef,"urST3TDInInv");this.oRootRef.className=this.oRootRef.className.replace("Inv","");}if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,"lsEdf3HlpBtnInv");this.oHelpButtonRef.className=this.oHelpButtonRef.className.replace("Inv","");}break;case "WARNING":UCF_DomUtil.removeClass(this.oDomRef,"urEdf2TxtWarn");if(this.bUsedInSapTable)UCF_DomUtil.removeClass(this.oRootRef,"urST3TDInWarn");if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,"lsEdf3HlpBtnWarn");}break;} switch(sInputState){case "ERROR":UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtInv");if(this.bUsedInSapTable)UCF_DomUtil.addClass(this.oRootRef,"urST3TDInInv");this.setMessageBarsState(sText,"ERROR");if(oDataTip){oDataTip.setType("ERROR");oDataTip.setText(sText);oDataTip.fadeIn();}break;case "WARNING":UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtWarn");if(this.bUsedInSapTable)UCF_DomUtil.addClass(this.oRootRef,"urST3TDInWarn");this.setMessageBarsState(sText,"WARNING");if(oDataTip){oDataTip.setType("WARNING");oDataTip.setText(sText);oDataTip.fadeIn();}break;case "NONE":if(oDataTip){oDataTip.setType("OK");oDataTip.setText(sText);}this.setMessageBarsState(sText,"OK");break;case "INVALIDATE":this.setMessageBarsState(sText,"INVALIDATE");if(oDataTip){oDataTip.setInvalidated(true);}break;case "INVALIDATELOADING":this.setMessageBarsState(sText,"INVALIDATE");if(oDataTip){oDataTip.setInvalidated(true);}break;}this.sInputState=sInputState;}; UCF_ComboBox.prototype.setMessageBarsState=function(sText,sType){var oMessageBars=this.oLS.oControlFactory.oGetCurrentControlsByClassName("UCF_MessageBar");for(var i=0;i<oMessageBars.length;i++){if(oMessageBars[i].sConnectedControlId==this.sId){if(sType=="INVALIDATE"){oMessageBars[i].setInvalidated(true);}else if(sType=="INVALIDATELOADING"){oMessageBars[i].setInvalidated(true);oMessageBars[i].setType("LOADING");}else{oMessageBars[i].setText(sText);oMessageBars[i].setType(sType);}}}}; UCF_ComboBox.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper; var bNavigation=false;var oFrom=oBrowserEvent.oGetFromElement();if(oFrom&&oFrom==this.oFocusDomRef){bNavigation=true;} if(!this.oListBox){this.bFireListAccess=false;this.oListBox=this.oGetListBox();this.bFireListAccess=true;} var sValue=this.sGetValue();var sDescription="";if(this.oListBox&&this.sKey){sDescription=this.oListBox.sGetItemDescription(this.sKey);if(sDescription)sValue=sValue+" "+sDescription;}oAccessibilityHelper.setText(sValue); oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setRequired(this.bRequired);oAccessibilityHelper.setInvalid(this.bInvalid);switch(this.sInputState){case "ERROR":oAccessibilityHelper.setInvalid(true);break;case "WARNING":oAccessibilityHelper.setWarning(true);break;} oAccessibilityHelper.setTooltip(this.sTooltip); if(!bNavigation){if(this.sBehavior=="DROPDOWNSELECT")oAccessibilityHelper.setControlType("CB_DD");else oAccessibilityHelper.setControlType("CB");} var sLabel="";var oLabel=this.oRootRef.getElementsByTagName("LABEL")[0];if(oLabel){ sLabel=UCF_DomUtil.sGetInnerText(oLabel);if(sLabel.lastIndexOf(" *")>-1&&sLabel.lastIndexOf(" *")==sLabel.length-2)sLabel=sLabel.substring(0,sLabel.lastIndexOf(" *"));if(sLabel.lastIndexOf(":")>-1&&sLabel.lastIndexOf(":")==sLabel.length-1)sLabel=sLabel.substring(0,sLabel.lastIndexOf(":"));}else{sLabel=oAccessibilityHelper.sGetLabelText(this.sId);}if(sLabel!=""&&!bNavigation){oAccessibilityHelper.setLabel(sLabel);} if(this.oListBox){var iItemCount=this.oListBox.aItems.length;var iItemIndex=this.oListBox.iGetItemIndex(this.sKey);if(iItemCount>0){oAccessibilityHelper.setItemCount(iItemCount);}if(iItemIndex>0){oAccessibilityHelper.setItemIndex(iItemIndex);}} if(!bNavigation)oAccessibilityHelper.addEnabledTutor("CB_TUT",this.bEnabled&&!this.bReadonly); oAccessibilityHelper.addDataType(this.sType);}; UCF_ComboBox.prototype.setFocusStyles=function(){ if(!UCF_System.bUseAnimation)return; if((!this.bEnabled||this.bReadonly)&&!UCF_System.bIs508)return;var oDomRef=this.oDomRef;if(this.bUsedInSapTable)oDomRef=this.oRootRef; if(oDomRef.className.indexOf(this.sInputFocusStyle)<0){UCF_DomUtil.addClass(oDomRef,this.sInputFocusStyle);} if(!this.bUsedInSapTable&&this.oHelpButtonRef&&!this.bHideFieldHelp&&this.oHelpButtonRef.className.indexOf(this.sHelpButtonFocusStyle)<0){UCF_DomUtil.addClass(this.oHelpButtonRef,this.sHelpButtonFocusStyle);}}; UCF_ComboBox.prototype.removeFocusStyles=function(){ if(this.bUsedInSapTable){UCF_DomUtil.removeClass(this.oRootRef,this.sInputFocusStyle);}else{UCF_DomUtil.removeClass(this.oDomRef,this.sInputFocusStyle);}if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sHelpButtonFocusStyle);}}; UCF_ComboBox.prototype.setHoverStyles=function(oSource){if(!this.bEnabled||(this.bReadonly&&!this.bShowHelpButtonAlways))return;UCF_DomUtil.addClass(this.oDomRef,this.sInputHoverStyle);if(this.oHelpButtonRef&&!this.bUsedInSapTable){if(this.sBehavior=="DROPDOWNSELECT"||oSource==this.oHelpButtonRef){UCF_DomUtil.addClass(this.oHelpButtonRef,this.sHelpButtonHoverStyle);}else{UCF_DomUtil.addClass(this.oHelpButtonRef,this.sInputHoverStyle);}}}; UCF_ComboBox.prototype.removeHoverStyles=function(){if(!this.bEnabled||this.bReadonly)return;UCF_DomUtil.removeClass(this.oDomRef,this.sInputHoverStyle);if(this.oHelpButtonRef&&this.bEnabled&&!this.Readonly){UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sHelpButtonHoverStyle);UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sInputHoverStyle);}}; UCF_ComboBox.prototype.setChanged=function(){this.sKeySave="";this.sValueSave="";}; UCF_ComboBox.prototype.setCursorPosition=function(iPos){UCF_DomUtil.setCursorPos(this.oDomRef,iPos);}; UCF_ComboBox.prototype.setSelection=function(iStart,iEnd){UCF_DomUtil.setSelection(this.oDomRef,iStart,iEnd);}; UCF_ComboBox.prototype.iGetSelectionStart=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionStart)return UCF_DomUtil.iGetSelectionStart(this.oDomRef);else return this.iSelectionStart;}; UCF_ComboBox.prototype.iGetSelectionEnd=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionEnd)return UCF_DomUtil.iGetSelectionEnd(this.oDomRef);else return this.iSelectionEnd;}; UCF_ComboBox.prototype.aAttributeNames=["bEnabled","bReadonly","bInvalid","bRequired","sBehavior","bAllowVirtualTyping","sItemListBoxId","sKey","bHasIconColumn","sTooltip","bUsedInSapTable","sIMEMode","sInputState","iMaxLength","sAlign","sType","bShowHelpButtonAlways","sAccessKey","sSuggestFilter","sFieldHelp","bShowRequiredIndicator","bDisplayAsText","bHideFieldHelp"]; UCF_ComboBox.prototype.aMethodNames=["setChanged","open","update","setInputState","setCursorPosition","setSelection","iGetSelectionStart","iGetSelectionEnd"];  UCF_ComboBox.prototype.bEnabled=true; UCF_ComboBox.prototype.bReadonly=false; UCF_ComboBox.prototype.bInvalid=false; UCF_ComboBox.prototype.bRequired=false; UCF_ComboBox.prototype.sBehavior="DROPDOWNSELECT"; UCF_ComboBox.prototype.bAllowVirtualTyping=true; UCF_ComboBox.prototype.sItemListBoxId=''; UCF_ComboBox.prototype.sKey=''; UCF_ComboBox.prototype.bHasIconColumn=false; UCF_ComboBox.prototype.sTooltip=''; UCF_ComboBox.prototype.bUsedInSapTable=false; UCF_ComboBox.prototype.sIMEMode="AUTO"; UCF_ComboBox.prototype.sInputState="NONE"; UCF_ComboBox.prototype.iMaxLength=0; UCF_ComboBox.prototype.sAlign="LEFT"; UCF_ComboBox.prototype.sType="STRING"; UCF_ComboBox.prototype.bShowHelpButtonAlways=false; UCF_ComboBox.prototype.sAccessKey=''; UCF_ComboBox.prototype.sSuggestFilter="OFF"; UCF_ComboBox.prototype.sFieldHelp="DEFAULT"; UCF_ComboBox.prototype.bShowRequiredIndicator=false; UCF_ComboBox.prototype.bDisplayAsText=false; UCF_ComboBox.prototype.bHideFieldHelp=false; UCF_ComboBox.prototype.setDefaultValues=function(){this.bEnabled=true;this.bReadonly=false;this.bInvalid=false;this.bRequired=false;this.sBehavior="DROPDOWNSELECT";this.bAllowVirtualTyping=true;this.sItemListBoxId='';this.sKey='';this.bHasIconColumn=false;this.sTooltip='';this.bUsedInSapTable=false;this.sIMEMode="AUTO";this.sInputState="NONE";this.iMaxLength=0;this.sAlign="LEFT";this.sType="STRING";this.bShowHelpButtonAlways=false;this.sAccessKey='';this.sSuggestFilter="OFF";this.sFieldHelp="DEFAULT";this.bShowRequiredIndicator=false;this.bDisplayAsText=false;this.bHideFieldHelp=false;}; UCF_ComboBox.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("ComboBox","Change",mParams);}; UCF_ComboBox.prototype.fireSelect=function(sId,sKey){var mParams={Id:sId,Key:sKey};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("ComboBox","Select",mParams);}; UCF_ComboBox.prototype.fireEnter=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Enter)this.oLS.markDirty();this.fireSemanticEvent("ComboBox","Enter",mParams);}; UCF_ComboBox.prototype.fireListAccess=function(sId,sItemListBoxId,sFilterValue){var mParams={Id:sId,ItemListBoxId:sItemListBoxId,FilterValue:sFilterValue};this.fireSemanticEvent("ComboBox","ListAccess",mParams);}; UCF_ComboBox.prototype.fireValidate=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Validate)this.oLS.markDirty();this.fireSemanticEvent("ComboBox","Validate",mParams);}; UCF_ComboBox.prototype.fireFieldHelpPress=function(sId){var mParams={Id:sId};this.fireSemanticEvent("ComboBox","FieldHelpPress",mParams);}; UCF_ComboBox.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.DoubleClick)this.oLS.markDirty();this.fireSemanticEvent("ComboBox","DoubleClick",mParams);};UCF_ComboBox.prototype.aPublicMethods=["open","setInputState","setChanged","setCursorPosition","setSelection","iGetSelectionStart","iGetSelectionEnd"];
 function UCF_SuggestBox(oDomRef,oLS){if(arguments.length==0)return; UCF_ComboBox.apply(this,[oDomRef,oLS]); this.bClientFilter=false; this.iServerFilterDelay=250;this.iClientFilterDelay=50; this.sChangeTimer=null; this.sOldValue=this.oDomRef.value;  this.bFieldHelpPress=false; this.bSuggestListLoadInProgress=false;this.sEscapeValue="";this.bWaitForFocus=false;this.sLoadingText=oLS.sGetText("SAPUR_SUG_LOADING");this.sMatchText=oLS.sGetText("SAPUR_SUG_MATCH");this.sSelectedKey="";this.bAllowVirtualTyping=false;};UCF_SuggestBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_ComboBox"))();UCF_SuggestBox.prototype.bHasFocus=function(){var oRef=UCF_DomUtil.oGetActiveElement(); return oRef==this.oDomRef||oRef==this.oHelpButtonRef;}; UCF_SuggestBox.prototype.runChangeTimer=function(bStart){if(!bStart){UCF_JsUtil.clearDelayedCall(this.sChangeTimer);this.sChangeTimer=null;}else if(!this.sChangeTimer){if(this.bClientFilter){this.sChangeTimer=UCF_JsUtil.delayedCall(this.iClientFilterDelay,this,"onValueChange");}else{this.sChangeTimer=UCF_JsUtil.delayedCall(this.iServerFilterDelay,this,"onValueChange");}}};UCF_SuggestBox.prototype.handleFieldHelpEvent=function(oBrowserEvent){this.bFieldHelpPress=true;var oListBox=this.oGetListBox();if(oListBox){if(oListBox.sServerFilter==""&&oListBox.bComplete){if(oListBox.sClientFilter!=""){oListBox.filterList("");oListBox.bSetItemSelected(this.sSelectedKey,false,true);this.sSelectedKey="";this.open();}else{if(this.bOpen)this.close();else this.open();}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return true;}else{this.bPrepareFireChange(false);this.fireFieldHelpPress(this.sId);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();this.bTyped=false;return true;}}else{this.bPrepareFireChange(false);this.fireFieldHelpPress(this.sId);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return true;}};UCF_SuggestBox.prototype.close=function(){UCF_ComboBox.prototype.close.apply(this,arguments);}; UCF_SuggestBox.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();if(iKeyCode==UCF_KeyCodes.BACKSPACE&&document.selection){return;}if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onkeydown.apply(this,arguments);return;} this.runChangeTimer(false); if((oBrowserEvent.bAlt()&&(iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN))||iKeyCode==UCF_KeyCodes.F4){if(!this.bEnabled||this.bReadonly)return;if(this.handleFieldHelpEvent(oBrowserEvent))return;}else{UCF_ComboBox.prototype.onkeydown.apply(this,arguments);}}; UCF_SuggestBox.prototype.onkeyup=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onkeyup.apply(this,arguments);return;}this.handleEditEvents(oBrowserEvent); this.closeSuggestTip(); this.bSuppressAutoComplete=false;if(this.sGetValue()=="")this.sOldValue="";var iKeyCode=oBrowserEvent.iKeyCode();if(iKeyCode==UCF_KeyCodes.ARROW_LEFT||iKeyCode==UCF_KeyCodes.ARROW_RIGHT){this.bListNavigation=false;this.sSelectedKey="";if(this.oListBox&&this.bOpen){this.oListBox.bSetItemSelected(this.sSelectedKey,false,true);}}if(iKeyCode==UCF_KeyCodes.F2&&!this.bNavigation&&this.bOpen){this.close();return;}if(iKeyCode==UCF_KeyCodes.ALT||iKeyCode==UCF_KeyCodes.CONTROL||iKeyCode==UCF_KeyCodes.ENTER||iKeyCode==UCF_KeyCodes.HOME||iKeyCode==UCF_KeyCodes.END||iKeyCode==UCF_KeyCodes.PAGE_DOWN||iKeyCode==UCF_KeyCodes.PAGE_UP||iKeyCode==UCF_KeyCodes.ESCAPE||iKeyCode==UCF_KeyCodes.SHIFT||iKeyCode==UCF_KeyCodes.TAB||iKeyCode==UCF_KeyCodes.ARROW_LEFT||iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN||iKeyCode==UCF_KeyCodes.F1||iKeyCode==UCF_KeyCodes.F2||iKeyCode==UCF_KeyCodes.F3||iKeyCode==UCF_KeyCodes.F4||iKeyCode==UCF_KeyCodes.F5||iKeyCode==UCF_KeyCodes.F6||iKeyCode==UCF_KeyCodes.F7||iKeyCode==UCF_KeyCodes.F8||iKeyCode==UCF_KeyCodes.F9||iKeyCode==UCF_KeyCodes.F10||iKeyCode==UCF_KeyCodes.F11||iKeyCode==UCF_KeyCodes.F12||iKeyCode==UCF_KeyCodes.PRINT||iKeyCode==UCF_KeyCodes.CAPS_LOCK||iKeyCode==UCF_KeyCodes.NUM_LOCK||iKeyCode==UCF_KeyCodes.INSERT||iKeyCode==UCF_KeyCodes.SCROLL_LOCK||iKeyCode==UCF_KeyCodes.PAUSE||iKeyCode==UCF_KeyCodes.ARROW_RIGHT){return;} if(this.oDomRef.value==""&&this.oListBox&&!this.bFieldHelpPress){if(!((oBrowserEvent.bAlt()&&(iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN))||iKeyCode==UCF_KeyCodes.F4)){this.close();}}if((oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())&&this.sOldValue==this.oDomRef.value){UCF_ComboBox.prototype.onkeyup.apply(this,arguments);return;} if(this.bSelected&&!this.bTyped){this.bTyped=true;this.bSelected=false;} if(this.sOldValue==this.oDomRef.value&&!this.bTyped)return;this.bTyped=this.sOldValue!=this.oDomRef.value||this.bTyped;this.bListNavigation=false;if(this.oListBox){this.oListBox.bSetItemSelected(this.sSelectedKey,false,true);} if(!this.bSuggestListLoadInProgress){this.runChangeTimer(true);} if(iKeyCode==UCF_KeyCodes.DELETE||iKeyCode==UCF_KeyCodes.BACKSPACE){}}; UCF_SuggestBox.prototype.onlsup=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlsup.apply(this,arguments);return;}if(!this.bNavigation){oBrowserEvent.cancel();return;}else{oBrowserEvent.cancelBubble();}this.bListNavigation=true;if(this.bOpen||(this.oListBox&&this.oListBox.sServerFilter=="")){if(!this.sSelectedKey){this.sSelectedKey=this.oListBox.sGetFirstItemKey();}else{this.sSelectedKey=this.oListBox.sGetPrevItem(this.sSelectedKey);if(!this.sSelectedKey){this.sSelectedKey=this.oListBox.sGetFirstItemKey();}}if(this.sSelectedKey!=""){this.oListBox.bSetItemSelected(this.sSelectedKey,true,true);}}}; UCF_SuggestBox.prototype.onlsdown=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlsdown.apply(this,arguments);return;}if(!this.bNavigation){oBrowserEvent.cancel();return;}else{oBrowserEvent.cancelBubble();}this.bListNavigation=true;if(this.bOpen||(this.oListBox&&this.oListBox.sServerFilter=="")){if(!this.sSelectedKey){this.sSelectedKey=this.oListBox.sGetFirstItemKey();}else{this.sSelectedKey=this.oListBox.sGetNextItem(this.sSelectedKey);if(!this.sSelectedKey){this.sSelectedKey=this.oListBox.sGetLastItemKey();}}if(this.sSelectedKey!=""){this.oListBox.bSetItemSelected(this.sSelectedKey,true,true);}}}; UCF_SuggestBox.prototype.onlspageup=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlspageup.apply(this,arguments);return;}this.bListNavigation=true;UCF_ComboBox.prototype.onlspageup.apply(this,arguments);}; UCF_SuggestBox.prototype.onlspagedown=function(oBrowserEvent){UCF_ComboBox.prototype.onlspagedown.apply(this,arguments);if(this.sSuggestFilter=="OFF"){return;}this.bListNavigation=true;}; UCF_SuggestBox.prototype.focus=function(){if(UCF_DomUtil.oGetActiveElement()!=this.oDomRef){this.oDomRef.select();UCF_ComboBox.prototype.focus.apply(this,arguments);}}; UCF_SuggestBox.prototype.onlshome=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlshome.apply(this,arguments);return;}if(this.bListNavigation){if(this.bOpen||(this.oListBox&&this.oListBox.sServerFilter=="")){this.sSelectedKey=this.oListBox.sGetFirstItemKey();if(this.sSelectedKey!=""){this.oListBox.bSetItemSelected(this.sSelectedKey,true,true);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}}if(!this.bNavigation){ oBrowserEvent.cancel();}else{ oBrowserEvent.cancelBubble();}}; UCF_SuggestBox.prototype.onlsend=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlsend.apply(this,arguments);return;}if(this.bListNavigation){if(this.bOpen||(this.oListBox&&this.oListBox.sServerFilter=="")){this.sSelectedKey=this.oListBox.sGetLastItemKey();if(this.sSelectedKey!=""){this.oListBox.bSetItemSelected(this.sSelectedKey,true,true);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}}if(!this.bNavigation){ oBrowserEvent.cancel();}else{ oBrowserEvent.cancelBubble();}};UCF_SuggestBox.prototype.onlsescape=function(oBrowserEvent){if(this.oListBox&&this.bOpen){this.close();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}else{UCF_ComboBox.prototype.onlsescape.apply(this,arguments);this.oDomRef.value=this.sEscapeValue;}}; UCF_SuggestBox.prototype.onlsfocus=function(oBrowserEvent){ UCF_ComboBox.prototype.onlsfocus.apply(this,arguments);this.sOldValue=this.sGetValue();this.sEscapeValue=this.sOldValue;this.bSuggestListLoadInProgress=false;}; UCF_SuggestBox.prototype.applyFocusInfo=function(oFocusInfo){var oRef=UCF_DomUtil.oGetActiveElement();if(oRef!=this.oDomRef){var iCursorPosX=oFocusInfo.oGetParam("iCursorPosX");this.oDomRef.focus();if(iCursorPosX>=0){UCF_DomUtil.setCursorPos(this.oDomRef,iCursorPosX);}}if(this.bUsedInSapTable){this.bNavigation=oFocusInfo.oGetParam("bNavigation");}}; UCF_SuggestBox.prototype.onselectstart=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onselectstart.apply(this,arguments);return;}this.bSelected=true;UCF_ComboBox.prototype.onselectstart.apply(this,arguments);}; UCF_SuggestBox.prototype.onlsblur=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onlsblur.apply(this,arguments);return;} this.bFieldHelpPress=false;if(UCF_SuggestBox.oSuggestTip){UCF_SuggestBox.oSuggestTip.close();}UCF_ComboBox.prototype.onlsblur.apply(this,arguments);};UCF_SuggestBox.prototype.onListBoxSelect=function(oEvent){this.sSelectedKey=oEvent.oGetParam("sKey");if(oEvent.oGetParam("sEventName")=="click"){var sKey=oEvent.oGetParam("sKey");var sValue=oEvent.oGetParam("sValue");var bFireSelect=oEvent.oGetParam("bFireSelect");if(this.bOpen)this.close();this.setValue(sKey,sValue,!bFireSelect);this.oDomRef.focus();this.oDomRef.select();}}; UCF_SuggestBox.prototype.onValueChange=function(){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onValueChange.apply(this,arguments);return;} this.runChangeTimer(false);var sValue=this.sGetValue();if(this.sOldValue==sValue&&!this.bTyped)return;this.sOldValue=this.sGetValue();if(sValue=="")return;  if(this.bContainedInServerFiltered(sValue)){this.open();if(this.sSuggestFilter=="CLIENT_SERVER_PREFIX")this.autocomplete();return;}else{this.bClientFilter=false;this.openSuggestTip(this.sLoadingText+"...");this.fireListAccess(this.sId,this.sItemListBoxId,sValue);this.bSuggestListLoadInProgress=true;}this.bTyped=false;};UCF_SuggestBox.prototype.openSuggestTip=function(sText,iTimeout){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.openSuggestTip.apply(this,arguments);return;}var oSuggestTip=UCF_SuggestBox.oSuggestTip;if(!oSuggestTip||!oSuggestTip.bIsValid()||!UCF_DomUtil.$(this.sId+"-suggest-tip")){oSuggestTip=this.oLS.oControlFactory.oCreateControl("UCF_DataTip",this.sId+"-suggest-tip");oSuggestTip.render(this.sId+"-suggest-tip",this.oLS);  oSuggestTip.oDomRef.style.width=this.oRootRef.offsetWidth+"px";oSuggestTip.oDomRef.firstChild.firstChild.style.display="none";}oSuggestTip.setOpenerRef(this.oDomRef);oSuggestTip.setText(sText);if(iTimeout&&iTimeout>0)oSuggestTip.iAutoHideTimeout=iTimeout;if(!this.bOpen)oSuggestTip.open();UCF_SuggestBox.oSuggestTip=oSuggestTip;};UCF_SuggestBox.prototype.closeSuggestTip=function(){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.closeSuggestTip.apply(this,arguments);return;}if(UCF_SuggestBox.oSuggestTip){UCF_SuggestBox.oSuggestTip.close();}}; UCF_SuggestBox.prototype.oGetListBox=function(){if(this.sSuggestFilter=="OFF"){return UCF_ComboBox.prototype.oGetListBox.apply(this,arguments);}var oListBox=null; if(this.sItemListBoxId){oListBox=this.oLS.oControlFactory.oGetControlById(this.sItemListBoxId);} if(!oListBox){return null;}if(!oListBox.bIsAvailable()){oListBox.checkRootRef();return null;}oListBox.setOverlap(1);oListBox.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);return oListBox;}; UCF_SuggestBox.prototype.autocomplete=function(){return;if(this.bSuppressAutoComplete)return;var sValue=this.sGetValue();this.sSearchString=sValue;if(this.oListBox){var sKey=this.oListBox.sFindItem(this.sSearchString,"");if(sKey&&sKey!=""){var sValue=this.oListBox.sGetItemValue(sKey);this.oListBox.bSetItemSelected(sKey,true,true); var sItemValue=this.oListBox.sGetItemValue(sKey);var oRegExp=RegExp(this.sSearchString,"i");if(sItemValue.search(oRegExp)!=0)return;   if(this.oDomRef.createTextRange){var oTextRange=null;oTextRange=this.oDomRef.createTextRange();var sSelection=this.sGetValue().substr(this.sSearchString.length,this.sGetValue().length-this.sSearchString.length);if(sSelection!=""){var iChars=sSelection.length*(-1);oTextRange.findText(sSelection,iChars);oTextRange.select();}} else if(this.oDomRef.selectionStart){this.oDomRef.selectionStart=this.sSearchString.length;this.oDomRef.selectionEnd=this.sGetValue().length;}}}}; UCF_SuggestBox.prototype.onlsenter=function(oBrowserEvent){UCF_ComboBox.prototype.onlsenter.apply(this,arguments);this.sSelectedKey="";this.sOldValue=this.oDomRef.value;}; UCF_SuggestBox.prototype.close=function(){UCF_ComboBox.prototype.close.apply(this,arguments);this.sSelectedKey="";}; UCF_SuggestBox.prototype.open=function(){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.open.apply(this,arguments);return;}this.closeSuggestTip();var bTop=false;if(this.bOpen){this.close();}var sValue=this.sGetValue();var oListBox=this.oGetListBox();if(!oListBox||!oListBox.filterList)return; if(!this.bHasFocus()&&oListBox.sServerFilter!="")return; this.bFieldHelpPress=this.bFieldHelpPress||(oListBox.sServerFilter==""&&!this.bHasFocus()); this.bSuggestListLoadInProgress=false; if(sValue==""&&!this.bFieldHelpPress)return;if(!this.bFieldHelpPress&&this.bHasFocus()){ var bIsServerFilter=this.bContainedInServerFiltered(sValue);if(bIsServerFilter&&(this.sSuggestFilter=="CLIENT_SERVER_PREFIX"||this.sSuggestFilter=="CLIENT_SERVER")){ oListBox.filterList(sValue,this.sSuggestFilter=="CLIENT_SERVER_PREFIX");oListBox.bSetItemSelected(this.sSelectedKey,false,true);this.sSelectedKey="";this.bClientFilter=true; if(this.sSuggestFilter=="CLIENT_SERVER_PREFIX")this.autocomplete();this.sOldValue=this.sGetValue();}else{if(this.sOldValue!=sValue){ UCF_JsUtil.delayedCall(10,this,"onValueChange");return;}}}this.bFieldHelpPress=false;if(oListBox&&oListBox.iSuggestedItems>0){oListBox.bSetItemSelected(this.sSelectedKey,false,true);UCF_ComboBox.prototype.open.apply(this,arguments);}else{this.openSuggestTip(this.sMatchText,3);}}; UCF_SuggestBox.prototype.openInternal=function(){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.openInternal.apply(this,arguments);return;}var oListBox=this.oGetListBox();UCF_ComboBox.prototype.openInternal.apply(this,arguments);if(!oListBox)return;if(this.bFieldHelpPress&&oListBox.bComplete&&oListBox.sServerFilter==""&&oListBox.filterList){this.bFieldHelpPress=false;oListBox.filterList("");return;}  this.bFieldHelpPress=false;}; UCF_SuggestBox.prototype.bContainedInServerFiltered=function(sValue){var oListBox=this.oGetListBox();if(!oListBox)return false;if(this.sSuggestFilter=="SERVER"||!oListBox.bComplete)return false;var sUpperValue=sValue.toUpperCase(),sUpperServerFilter=oListBox.sServerFilter.toUpperCase();if(this.sSuggestFilter=="CLIENT_SERVER")return oListBox.bComplete&&sUpperValue.indexOf(sUpperServerFilter)==0;else if(this.sSuggestFilter=="CLIENT_SERVER_PREFIX")return oListBox.bComplete&&sUpperValue.indexOf(sUpperServerFilter)>=0;}; UCF_SuggestBox.prototype.onclick=function(oBrowserEvent){if(this.sSuggestFilter=="OFF"){UCF_ComboBox.prototype.onclick.apply(this,arguments);return;}if(!this.bEnabled||(this.bReadonly&&!this.bShowHelpButtonAlways))return;UCF_DomUtil.focusDomElement(this.oDomRef); if(oBrowserEvent.oGetSourceControl()!=this)return;if(oBrowserEvent.oSource==this.oHelpButtonRef){if(this.handleFieldHelpEvent(oBrowserEvent))return;}UCF_ComboBox.prototype.onclick.apply(this,arguments);};
function UCF_SuggestBoxInplaceEdit(oDomRef,oLS){UCF_SuggestBox.apply(this,[oDomRef,oLS]);};UCF_SuggestBoxInplaceEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_SuggestBox"))();UCF_SuggestBoxInplaceEdit.prototype.close=function(){UCF_SuggestBox.prototype.close.apply(this,arguments);if(this.sTimeOutIdInplace){UCF_JsUtil.clearDelayedCall(this.sTimeOutIdInplace);}this.enterEditMode();};UCF_SuggestBoxInplaceEdit.prototype.onclick=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){this.showButton();this.enterEditMode();var oSource=oBrowserEvent.oGetSource(); if(oSource.tagName=="BUTTON"){ if(this.sTimeOutIdInplace){UCF_JsUtil.clearDelayedCall(this.sTimeOutIdInplace);}}}UCF_SuggestBox.prototype.onclick.call(this,oBrowserEvent);};UCF_SuggestBoxInplaceEdit.prototype.onlsfocus=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){this.showButton();this.enterEditMode();}UCF_SuggestBox.prototype.onlsfocus.call(this,oBrowserEvent);};UCF_SuggestBoxInplaceEdit.prototype.onlsblur=function(oBrowserEvent){if(this.sTimeOutIdInplace){UCF_JsUtil.clearDelayedCall(this.sTimeOutIdInplace);}this.sTimeOutIdInplace=UCF_JsUtil.delayedCall(200,this,"enterViewMode");UCF_SuggestBox.prototype.onlsblur.call(this,oBrowserEvent);};UCF_SuggestBoxInplaceEdit.prototype.enterEditMode=function(){if(this.bEnabled&&!this.bReadonly){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldInplaceEdit");}};UCF_SuggestBoxInplaceEdit.prototype.enterViewMode=function(){if(this.bEnabled&&!this.bReadonly){if(this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")==-1)UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldInplaceEdit");} if(!this.oHelpButtonRef)return;this.oHelpButtonRef.style.position="absolute";this.oDomRef.className=this.oDomRef.className.replace("urEdf2TxtHlp","");this.oHelpButtonRef.style.top="-900px";};UCF_SuggestBoxInplaceEdit.prototype.showButton=function(){ if(!this.oHelpButtonRef||this.oHelpButtonRef.offsetTop>=0)return; var iTop=this.oDomRef.offsetTop;var oParent=this.oDomRef.offsetParent;while(oParent!=document.body){if(oParent.style.position=="absolute"||oParent.style.overflow=="auto"||oParent.style.overflow=="scroll")break;iTop+=oParent.offsetTop;oParent=oParent.offsetParent;}this.oHelpButtonRef.style.top=iTop;this.oDomRef.className+=" urEdf2TxtHlp";};UCF_SuggestBoxInplaceEdit.prototype.onmouseover=function(oBrowserEvent){UCF_SuggestBox.prototype.onmouseover.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldFocus");}};UCF_SuggestBoxInplaceEdit.prototype.onmouseout=function(oBrowserEvent){UCF_SuggestBox.prototype.onmouseout.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");}};
 function UCF_Container(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_Container.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Container.prototype.aAttributeNames=[]; UCF_Container.prototype.aMethodNames=[];  UCF_Container.prototype.setDefaultValues=function(){};
 function UCF_TagCloudItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_TagCloudItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TagCloudItem.prototype.onlsselect=function(oBrowserEvent){if(this.bEnabled){this.fireSelect(this.sId,this.oGetParent().sId);}}; UCF_TagCloudItem.prototype.onclick=function(oBrowserEvent){this.onlsselect(oBrowserEvent);}; UCF_TagCloudItem.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;}; UCF_TagCloudItem.prototype.aAttributeNames=["sText","bEnabled","sHitCount","sTooltip","iSize"]; UCF_TagCloudItem.prototype.aMethodNames=[];  UCF_TagCloudItem.prototype.sText=''; UCF_TagCloudItem.prototype.bEnabled=true; UCF_TagCloudItem.prototype.sHitCount=''; UCF_TagCloudItem.prototype.sTooltip=''; UCF_TagCloudItem.prototype.iSize=1; UCF_TagCloudItem.prototype.setDefaultValues=function(){this.sText='';this.bEnabled=true;this.sHitCount='';this.sTooltip='';this.iSize=1;}; UCF_TagCloudItem.prototype.fireSelect=function(sId,sTagCloudId){var mParams={Id:sId,TagCloudId:sTagCloudId};this.fireSemanticEvent("TagCloudItem","Select",mParams);};
 function UCF_ViewSwitch(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);UCF_DomUtil.setTabIndex(this.oDomRef,-1);};UCF_ViewSwitch.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ViewSwitch.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem"),oBrowserEvent=oEvent.oGetParam("oBrowserEvent");if(oItem.bEnabled&&!oItem.bSelected)this.fireSelect(this.sId,oItem.sId);oBrowserEvent.cancelBubble();}; UCF_ViewSwitch.prototype.createItems=function(){var aDomItems=this.oDomRef.getElementsByTagName("TD");for(var iItemCount=0;iItemCount<aDomItems.length;iItemCount++){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[iItemCount],true);oItem.iIndex=iItemCount;if(oItem.bEnabled||window.UCF_System.bIs508){this.oItemNavigation.addItem(oItem,oItem.bSelected);}}}; UCF_ViewSwitch.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(!UCF_JsUtil.bInstanceOf(oSource,"UCF_ViewSwitchItem"))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setTooltip(oSource.sTooltip);oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex+1);oAccessibilityHelper.setControlType("VS");oAccessibilityHelper.setEnabled(oSource.bEnabled);oAccessibilityHelper.setSelected(oSource.bSelected);if(!oSource.bSelected)oAccessibilityHelper.addEnabledTutor("SELECT_TUT",oSource.bEnabled);oAccessibilityHelper.addTutor("VS_TUT",oSource.bEnabled);}; UCF_ViewSwitch.prototype.aAttributeNames=[]; UCF_ViewSwitch.prototype.aMethodNames=[];  UCF_ViewSwitch.prototype.setDefaultValues=function(){}; UCF_ViewSwitch.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("ViewSwitch","Select",mParams);};
function UCF_DropDelegate(){this.oDropTargetControl=null;this.oDropDecorator=null;};UCF_DropDelegate.prototype=new UCF_Object();UCF_DropDelegate.prototype.setDropTargetControl=function(oDropTargetControl){this.oDropTargetControl=oDropTargetControl;};UCF_DropDelegate.prototype.onlsdragenter=function(oBrowserEvent){   var oDropTargetControl=this.oGetDropTargetControl(oBrowserEvent);if(!this.bIsDropPossible(oBrowserEvent))return;var sDropTargetInfoId=oDropTargetControl.sDropTargetInfo;if(!sDropTargetInfoId)return;var oDropTargetInfoControl=oDropTargetControl.oGetControlById(sDropTargetInfoId);if(!oDropTargetInfoControl)return;var sDropTags=oDropTargetInfoControl.sGetTags();if(!sDropTags)return;var oDragAndDropManager=oBrowserEvent.oDragAndDropManager;if(!oDragAndDropManager.bGetDropAllowed(sDropTags))return; if(!this.oDropDecorator)this.oDropDecorator=this.oCreateDropDecorator();if(this.oDropDecorator){this.oDropDecorator.init(oDragAndDropManager.oDragSession);this.oDropDecorator.update(oBrowserEvent);}oDragAndDropManager.initDropArea(oDragAndDropManager.oDragSession.DROP_TYPE.STANDARD,sDropTags,this.oDropDecorator);oBrowserEvent.cancelBubble();return oBrowserEvent.bHandled=true;};UCF_DropDelegate.prototype.onlsdrop=function(oBrowserEvent){var oDropTargetControl=this.oGetDropTargetControl(oBrowserEvent);var oDragSession=oBrowserEvent.oDragAndDropManager.oDragSession;if(oBrowserEvent.oDragAndDropManager.bGetDropAllowed()){var sDragTags=oDragSession.sDragTags;var sDragData=oDragSession.sGetDragData();var sMimeType=oDragSession.sGetMimeType();var sDragId=oDragSession.sDragId; if(sDragData==null){oDragSession.setDragDataChangeListener(this.fGetDropCallBack(sDragId,sDragTags));oDragSession.bDropPending=true;}else{this.fGetDropCallBack(sDragId,sDragTags).apply(this,[sDragData,sMimeType]);}oBrowserEvent.bHandled=true;oBrowserEvent.cancelBubble();}if(this.oDropDecorator)this.oDropDecorator.cleanUp();this.oDropDecorator=null;oBrowserEvent.oDragAndDropManager.cleanUpDropArea();};UCF_DropDelegate.prototype.oCreateDropDecorator=function(){return null;}; UCF_DropDelegate.prototype.onlsdragover=function(oBrowserEvent){if(this.oDropDecorator){this.oDropDecorator.update(oBrowserEvent);}};UCF_DropDelegate.prototype.onlsdragscroll=function(oBrowserEvent){ if(this.oDropDecorator)this.oDropDecorator.update(oBrowserEvent);}; UCF_DropDelegate.prototype.onlsdragleave=function(oBrowserEvent){oBrowserEvent.oDragAndDropManager.cleanUpDropArea();if(this.oDropDecorator)this.oDropDecorator.cleanUp(); }; UCF_DropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){return null;}; UCF_DropDelegate.prototype.bIsDropPossible=function(oBrowserEvent){return true;}; UCF_DropDelegate.prototype.oGetDropTargetControl=function(oBrowserEvent){return this.oDropTargetControl;};
function UCF_PopupMenuDropDelegate(oLS,oDropTargetControl){UCF_DropDelegate.apply(this,[oLS]);this.setDropTargetControl(oDropTargetControl);this.iCurrentStep=0;};UCF_PopupMenuDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DropDelegate"))(); UCF_PopupMenuDropDelegate.prototype.oCreateDropDecorator=function(){return new(UCF_ClassLoader.oGetClass("UCF_PopupMenuDropDecorator"))(this.oDropTargetControl,this.oLS);}; UCF_PopupMenuDropDelegate.prototype.onlsdraghover=function(oBrowserEvent){var oPopupMenu=this.oDropTargetControl;if(oPopupMenu.oDomHead.style.display=="none")return;var oSourceRef=oBrowserEvent.oGetSource();if(UCF_DomUtil.bContains(oPopupMenu.oDomHead,oSourceRef)){oPopupMenu.scrollUp();}else if(UCF_DomUtil.bContains(oPopupMenu.oDomFoot,oSourceRef)){oPopupMenu.scrollDown();}}; UCF_PopupMenuDropDelegate.prototype.oGetDropLocation=function(oBrowserEvent){return this.oDropDecorator.oGetDropLocation();}; UCF_PopupMenuDropDelegate.prototype.onlsdragleave=function(oBrowserEvent){UCF_DropDelegate.prototype.onlsdragleave.apply(this,arguments);var oPopupMenu=this.oDropTargetControl,oSource=oBrowserEvent.oGetSource();if(UCF_DomUtil.bContains(oPopupMenu.oDomRef,oSource))return;if(oPopupMenu.sGetOpenEventName()=="lsdraghover"){oPopupMenu.close();}}; UCF_PopupMenuDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oDropTargetControl.sDropTargetInfo;var oLocation=this.oGetDropLocation();var sItemId=oLocation.sItemId;var iOffset=oLocation.iOffset;var oDropTargetControl=this.oDropTargetControl;return function(sDragData,sMimeType){this.oDropTargetControl.close();oDropTargetControl.fireDrop(oDropTargetControl.sId,sDragId,sDropTargetInfoId,sItemId,iOffset,sDragData,sMimeType,sDragTags);oDropTargetControl.close();};};
 function UCF_Tray(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;this.oScrollDomRef=UCF_DomUtil.$(this.sId+'-scrl');oOptionMenu=null;if(this.bIsCollapsible){this.oExpander=new(UCF_ClassLoader.oGetClass("UCF_Expander"))(this.oScrollDomRef);}if(this.sScrollingMode!="NONE"){this.oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.addDelegate(this.oScrollArea);} this.setDefaultButtonId(this.sDefaultButtonId);this.initializeHandle(UCF_DomUtil.$(this.sId+"-hdtxt"));};UCF_Tray.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Tray.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_Tray.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}}; UCF_Tray.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");if(!this.bEnabled)return; if(sSourceId==this.sId+"-exp"){this.toggle();}if(sSourceId==this.sId+"-menu"){this.toggleMenu();}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_Tray.prototype.ondblclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),oHeaderSource=UCF_DomUtil.oGetParentByTagName(oSource,"TABLE"),sHeaderSourceId=oHeaderSource.getAttribute("id"),sSourceId=oSource.getAttribute("id");if(!this.bEnabled)return; if(sSourceId.indexOf("-exp")>-1||sSourceId.indexOf("-menu")>-1)return; if(sHeaderSourceId!=this.sId+"-hd")return; this.toggle();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_Tray.prototype.toggle=function(){if(!this.bIsCollapsible)return;var sId=this.sId;var oDomBodyRef=document.getElementById(sId+"-tbd"); var oExpanderRef=document.getElementById(sId+"-exp"); if(!oDomBodyRef)return;if(this.bCollapsed){ oDomBodyRef.style.display="block";oExpanderRef.className=oExpanderRef.className.replace("Closed","Open"); oExpanderRef.title=this.oLS.sGetText("SAPUR_TY_BTNE");}else{ oDomBodyRef.style.display="none";oExpanderRef.className=oExpanderRef.className.replace("Open","Closed");oExpanderRef.title=this.oLS.sGetText("SAPUR_TY_BTNC");} this.bCollapsed=!this.bCollapsed;if(!this.bCollapsed){ this.fireExpand(this.sId);}if(this.bCollapsed){ this.fireCollapse(this.sId);} this.notifyLayoutChange();}; UCF_Tray.prototype.toggleMenu=function(){if(!this.sOptionMenuId)return;var oMenuButtonRef=document.getElementById(this.sId+"-menu"); if(!oMenuButtonRef)return;if(!this.oOptionMenu){this.oOptionMenu=this.oLS.oControlFactory.oGetControlById(this.sOptionMenuId,true);if(!this.oOptionMenu)return;this.oOptionMenu.setOpenerRef(oMenuButtonRef);this.oOptionMenu.setOpenerId(this.sId);this.oOptionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oOptionMenu.setOffsetTop(-1);this.oOptionMenu.setOffsetLeft(-1);}this.oOptionMenu.attachEvent(this.oOptionMenu.E_EVENTS.Close,this,"onMenuClose");if(this.oOptionMenu.bOpened){this.oOptionMenu.close();}else{this.oOptionMenu.open();}}; UCF_Tray.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");if(!this.bEnabled)return;if((iKeyCode==UCF_KeyCodes.SPACE)&&(sSourceId==this.sId)){this.toggleMenu();}else if((iKeyCode==UCF_KeyCodes.NUMPAD_MINUS||iKeyCode==UCF_KeyCodes.NUMPAD_PLUS)&&(sSourceId==this.sId)){this.toggle();}oBrowserEvent.cancelBubble();}; UCF_Tray.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_Tray.prototype.onMenuClose=function(oEvent){this.bOptionMenuIsOpened=false;var oMenuButtonRef=document.getElementById(this.sId+"-menu"); oMenuButtonRef.focus();}; UCF_Tray.prototype.onScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollTop,iScrollLeft);}; UCF_Tray.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Tray.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Tray.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource==this.oDomRef){oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("TY");oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setEnabled(this.bEnabled);if(this.sAccessibilityDescription){oAccessibilityHelper.setText(this.sTitle+' - '+this.sAccessibilityDescription);}if(this.bCollapsed){oAccessibilityHelper.setCollapsed(this.bCollapsed);oAccessibilityHelper.addTutor("GROUPEXP_NO_ENTER_TUT");}else if(this.bEnabled){oAccessibilityHelper.setExpanded(!this.bCollapsed);oAccessibilityHelper.addTutor("GROUPCOLL_TUT");}if((this.bHasOptionMenu)&&(this.bEnabled)){oAccessibilityHelper.addTutor("TEXTVIEWMNU_TUTOR")}}else if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("TY_END");}}; UCF_Tray.prototype.aAttributeNames=["sTitle","sDesign","bCollapsed","bEnabled","sTooltip","sContentHeight","bHasOptionMenu","sOptionMenuId","sScrollingMode","bHasToolbar","bIsCollapsible","sAccessibilityDescription","sDefaultButtonId","iScrollTop","iScrollLeft","sAccessKey","sHotkeysId","bIsDragHandle"]; UCF_Tray.prototype.aMethodNames=[];  UCF_Tray.prototype.sTitle=''; UCF_Tray.prototype.sDesign="TRANSPARENT"; UCF_Tray.prototype.bCollapsed=false; UCF_Tray.prototype.bEnabled=true; UCF_Tray.prototype.sTooltip=''; UCF_Tray.prototype.sContentHeight=''; UCF_Tray.prototype.bHasOptionMenu=true; UCF_Tray.prototype.sOptionMenuId=''; UCF_Tray.prototype.sScrollingMode="NONE"; UCF_Tray.prototype.bHasToolbar=false; UCF_Tray.prototype.bIsCollapsible=true; UCF_Tray.prototype.sAccessibilityDescription=''; UCF_Tray.prototype.sDefaultButtonId=''; UCF_Tray.prototype.iScrollTop=0; UCF_Tray.prototype.iScrollLeft=0; UCF_Tray.prototype.sAccessKey=''; UCF_Tray.prototype.sHotkeysId=''; UCF_Tray.prototype.bIsDragHandle=false; UCF_Tray.prototype.setDefaultValues=function(){this.sTitle='';this.sDesign="TRANSPARENT";this.bCollapsed=false;this.bEnabled=true;this.sTooltip='';this.sContentHeight='';this.bHasOptionMenu=true;this.sOptionMenuId='';this.sScrollingMode="NONE";this.bHasToolbar=false;this.bIsCollapsible=true;this.sAccessibilityDescription='';this.sDefaultButtonId='';this.iScrollTop=0;this.iScrollLeft=0;this.sAccessKey='';this.sHotkeysId='';this.bIsDragHandle=false;}; UCF_Tray.prototype.fireExpand=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Expand)this.oLS.markDirty();this.fireSemanticEvent("Tray","Expand",mParams);}; UCF_Tray.prototype.fireCollapse=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Collapse)this.oLS.markDirty();this.fireSemanticEvent("Tray","Collapse",mParams);}; UCF_Tray.prototype.fireMenuAccess=function(sId,sMenuId){var mParams={Id:sId,MenuId:sMenuId};this.fireSemanticEvent("Tray","MenuAccess",mParams);}; UCF_Tray.prototype.fireScroll=function(sId,iScrollTop,iScrollLeft){var mParams={Id:sId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("Tray","Scroll",mParams);}; UCF_Tray.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("Tray","Hotkey",mParams);};
function UCF_DropTarget(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.sDropTargetInfo)this.addDelegate(new(UCF_ClassLoader.oGetClass("UCF_DropTargetDropDelegate"))(oLS,this));};UCF_DropTarget.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_DropTarget.prototype.aAttributeNames=["sDropTargetInfo"]; UCF_DropTarget.prototype.aMethodNames=[];  UCF_DropTarget.prototype.sDropTargetInfo=''; UCF_DropTarget.prototype.setDefaultValues=function(){this.sDropTargetInfo='';}; UCF_DropTarget.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("DropTarget","Drop",mParams);};
 function UCF_RoadMapItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_RoadMapItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RoadMapItem.prototype.onmouseover=function(oBrowserEvent){var oStep=(this.oGetParent().bScroll)?this.oDomRef.firstChild.childNodes[1]:this.oDomRef.childNodes[1],oSource=oBrowserEvent.oGetSource(),sSourceId=oSource.id;if(this.sStepDesign=="SELECTED"||this.sStepDesign=="DISABLED"||this.bIsInteractive==false||sSourceId.indexOf("-ma")>-1)return;this.sStyles=oStep.className;this.oHover=oStep;this.oHover.className=this.oHover.className+"Hover";}; UCF_RoadMapItem.prototype.onmouseout=function(oBrowserEvent){if(this.oHover==null||this.sStyles==""||this.sStepDesign=="SELECTED"||this.sStepDesign=="DISABLED"||this.bIsInteractive==false)return;this.oHover.className=this.sStyles;};UCF_RoadMapItem.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_RoadMapItem.prototype.aAttributeNames=["sTooltip","sStepDesign","sStepType","sStepDescription","bIsInteractive","bDynamicStep"]; UCF_RoadMapItem.prototype.aMethodNames=[];  UCF_RoadMapItem.prototype.sTooltip=''; UCF_RoadMapItem.prototype.sStepDesign="DEFAULT"; UCF_RoadMapItem.prototype.sStepType="STANDARDSTEP"; UCF_RoadMapItem.prototype.sStepDescription=''; UCF_RoadMapItem.prototype.bIsInteractive=false; UCF_RoadMapItem.prototype.bDynamicStep=false; UCF_RoadMapItem.prototype.setDefaultValues=function(){this.sTooltip='';this.sStepDesign="DEFAULT";this.sStepType="STANDARDSTEP";this.sStepDescription='';this.bIsInteractive=false;this.bDynamicStep=false;};
 function UCF_GridLayout(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_GridLayout.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_GridLayout.prototype.sGetDragSourceInfo=function(){return this.sDragSourceInfo;}; UCF_GridLayout.prototype.createDragDelegate=function(){if(!this.sDragSourceInfo){this.bAllowTextSelection=true;return;}if(this.oDragDelegate)return;this.oDragDelegate=new(UCF_ClassLoader.oGetClass("UCF_GridLayoutDragDelegate"))(this.oLS,this);this.addDelegate(this.oDragDelegate);}; UCF_GridLayout.prototype.createDropDelegate=function(){if(!this.sDropTargetInfo)return;if(this.oDropDelegate)return;this.oDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_GridLayoutDropDelegate"))(this.oLS,this);this.addDelegate(this.oDropDelegate);}; UCF_GridLayout.prototype.aAttributeNames=["sDragSourceInfo","sDropTargetInfo"]; UCF_GridLayout.prototype.aMethodNames=[];  UCF_GridLayout.prototype.sDragSourceInfo=''; UCF_GridLayout.prototype.sDropTargetInfo=''; UCF_GridLayout.prototype.setDefaultValues=function(){this.sDragSourceInfo='';this.sDropTargetInfo='';}; UCF_GridLayout.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("GridLayout","Drag",mParams);}; UCF_GridLayout.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,sCell,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,Cell:sCell,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("GridLayout","Drop",mParams);};
 function UCF_SapTable(oDomRef,oLS){if(arguments.length>0){UCF_Control.apply(this,[oDomRef,oLS]);this.oScrollV=null;this.oScrollH=null;this.aCellInfoMatrix=null;this.mCellInfoMatrixHeadData=null;this.oSelectionMenu=null;this.initTabAction();this.initCellInfoMatrix();this.initScrollbars();this.initClientSelectionHandling();this.eFocusBehavior=this.FOCUS_BEHAVIOR.NONE;this.eFocusAppearance=this.FOCUS_APPEARANCE.NEVER;this.oAccHelper=null;this.bZeroBasedScrolling=false; this.iContenRowOffset=0; this.oDragDropDelegate=null;}};UCF_SapTable.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();  UCF_SapTable.prototype.destroy=function(){this.eFocusAppearance=this.FOCUS_APPEARANCE.NEVER;this.eFocusBehavior=this.FOCUS_BEHAVIOR.NONE;this.cleanUpSelectionMenu();this.cleanUpScrollbars();this.cleanUpCellInfoMatrix(); if(this.oAccHelper){this.oAccHelper.cleanUp();this.oAccHelper=null;}this.cleanUpTabAction();this.cleanDataTips();this.cleanUpClientSelectionHandling(); if(this.oDragDropDelegate)this.oDragDropDelegate.cleanUpDragDrop();};  UCF_SapTable.prototype.setSecondarySelection=function(sSelectionCellId,bSet){this.setSecondarySelectionByIndex(this.iGetInternalRowIndexByCellId(sSelectionCellId),bSet);}; UCF_SapTable.prototype.setPrimarySelection=function(sSelectionCellId,bSet){this.setPrimarySelectionByIndex(this.iGetInternalRowIndexByCellId(sSelectionCellId),bSet);}; UCF_SapTable.prototype.setColumnSelection=function(sHeaderCellId,bSet){this.setColumnSelectionByIndex(this.iGetInternalColIndexByCellId(sHeaderCellId),bSet);}; UCF_SapTable.prototype.getSelectedRows=function(){var aCellInfos=this.aGetSelectedRows(),aRowIndices=[];for(var i=0;i<aCellInfos.length;i++){aRowIndices[aRowIndices.length]=this.iGetAppDefinedRowIndex(aCellInfos[i]);}return aRowIndices;}; UCF_SapTable.prototype.MIN_COL_WIDTH=25; UCF_SapTable.prototype.MODIFIER={NONE:0,SHIFT:1,CTRL:2,ALT:4,ALL:100,NONE_OR_SHIFT:101,NONE_OR_CTRL:102,NONE_OR_SHIFT_XOR_CTRL:103};UCF_SapTable.prototype.MODIFIER_NAME={SHIFT:"SHIFT",CTRL:"CTRL",ALT:"ALT"}; UCF_SapTable.prototype.SUBCONTROL={NONE:false,TABLE:"ST",HEADER_CELL:"HC",STANDARD_CELL:"STC",HIERARCHY_CELL:"HIC",MATRIX_CELL:"MC",SELECTION_CELL:"SC",POPIN_CELL:"PC"}; UCF_SapTable.prototype.EVENT_PARAM_MAP_CELL_TYPE={"STC":"SapTableCell","HIC":"SapTableHierarchicalCell","MC":"SapTableMatrixCell","SC":"SapTableSelectionCell","PC":"SapTableCell"}; UCF_SapTable.prototype.EVENT_PARAM_MAP_INSERT_MODE={AFTER:"AFTER",BEFORE:"BEFORE"}; UCF_SapTable.prototype.EVENT_PARAM_MAP_ACCESS_TYPE={INVALID:"INVALID",STANDARD:"STANDARD",RANGE:"RANGE",TOGGLE:"TOGGLE",SELECT_ALL:"SELECT_ALL",DESELECT_ALL:"DESELECT_ALL"}; UCF_SapTable.prototype.ACTION={NONE:"",CELL_SELECT:"CSEL",HEADER_SORT:"HCSORT",HIERARCHY_EXPAND:"HICEXP",HIERARCHY_COLLAPSE:"HICCOL",HIERARCHY_ALTERNATIVE:"HICALT",SELECTION_MENU_OPEN:"SELMNUOPN",FILTER:"FLTR",COL_RESIZE:"CRESIZE",COL_DRAG:"CDRAG",TABLE_END:"TABLE_END",CONFIG:"CONFIG"}; UCF_SapTable.prototype.ACCESS_TYPE={NONE:0,MOUSE:1,KEYBOARD_SELECT:2,KEYBOARD_EXPAND:3,KEYBOARD_COLLAPSE:4,DRAG_START:5,DRAG:6,DRAG_END:7,DRAG_OVER:8,DROP:9,DRAG_ENTER:10,DRAG_LEAVE:11,S_508:12,HOTKEY:13}; UCF_SapTable.prototype.SUFFIX={NONE:"",SCROLL_V:"scrollV",SCROLL_H:"scrollH",CONTENT_TD:"content"}; UCF_SapTable.prototype.NAVIGATION={NONE:0,LEFT:1,RIGHT:2,HOME:3,END:4,UP:5,DOWN:6,TOP:7,BOTTOM:8,PAGE_UP:9,PAGE_DOWN:10};UCF_SapTable.prototype.FOCUS_BEHAVIOR={NONE:0,CELL:1,FILTER:2,SELECTION_MENU:3,HEADER_SORT:4};UCF_SapTable.prototype.FOCUS_APPEARANCE={NEVER:0,ALWAYS:1,INPUT:2};  UCF_SapTable.prototype.oncontextmenu=function(oBrowserEvent){var oAccessInfo=this.oGetAccessInfo(oBrowserEvent,this.ACCESS_TYPE.MOUSE);if(this.mEvents.CellContextMenu &&oAccessInfo&&oAccessInfo.oCellInfo&&(this.eGetCellType(oAccessInfo.oCellInfo)==this.SUBCONTROL.SELECTION_CELL||(this.bIsDataTableCell(this.eGetCellType(oAccessInfo.oCellInfo))&&!oAccessInfo.sContentControlType ))){if(this.eGetCellType(oAccessInfo.oCellInfo)!=this.SUBCONTROL.SELECTION_CELL){this.fireCellContextMenu(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo),this.iGetAppDefinedColIndex(oAccessInfo.oCellInfo),oBrowserEvent.iPageX(),oBrowserEvent.iPageY(),this.sGetRowUserData(oAccessInfo.oCellInfo),oBrowserEvent.bCtrl(),oBrowserEvent.bAlt());}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();return false;}}; UCF_SapTable.prototype.onclick=function(oBrowserEvent){if(!this.bIsQuickRowSelect(oBrowserEvent)){if(oBrowserEvent.oGetSource().bQuickSelect){  oBrowserEvent.oGetSource().bQuickSelect=false;}else{return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE);}}}; UCF_SapTable.prototype.onmousedown=function(oBrowserEvent){if(oBrowserEvent.eGetMouseButtonState()!=oBrowserEvent.MOUSE_BUTTON_STATE.Left)return; if(oBrowserEvent.oGetSource().getAttribute("cdd")){this.bAllowTextSelection=true;oBrowserEvent.oGetSource().createTextRange().select();oBrowserEvent.cancelBubble();}else{this.bAllowTextSelection=false;}if(this.bIsQuickRowSelect(oBrowserEvent)){  oBrowserEvent.oGetSource().bQuickSelect=true;return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE);}if(oBrowserEvent.oGetSource().bQuickSelect){oBrowserEvent.oGetSource().bQuickSelect=false;}}; UCF_SapTable.prototype.onlsselectmodifier=function(oBrowserEvent){if(this.bIsValidTableHotkey(oBrowserEvent)){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.HOTKEY);}return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_SELECT);}; UCF_SapTable.prototype.onlsselect=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_SELECT);}; UCF_SapTable.prototype.onlsexpand=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_EXPAND);}; UCF_SapTable.prototype.onlsexpandmodifier=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_EXPAND);}; UCF_SapTable.prototype.onlscollapse=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_COLLAPSE);}; UCF_SapTable.prototype.onlscollapsemodifier=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.KEYBOARD_COLLAPSE);}; UCF_SapTable.prototype.onmousewheel=function(oBrowserEvent){if(this.oScrollV){return this.oScrollV.onmousewheel(oBrowserEvent);}return true;}; UCF_SapTable.prototype.onmouseover=function(oBrowserEvent){this.checkDataTipOpen(oBrowserEvent);}; UCF_SapTable.prototype.createDropDelegate=function(){ this.createDragDropDelegate();}; UCF_SapTable.prototype.createDragDropDelegate=function(){if(this.oDragDropDelegate)return;this.oDragDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_SapTableDragDropDelegate"))(this.oLS,this);this.addDelegate(this.oDragDropDelegate);}; UCF_SapTable.prototype.onmousemove=function(oBrowserEvent){this.createDragDropDelegate();}; UCF_SapTable.prototype.onmouseout=function(oBrowserEvent){this.checkDataTipClose(oBrowserEvent);}; UCF_SapTable.prototype.onlshotkey=function(oBrowserEvent){if(this.bIsValidTableHotkey(oBrowserEvent)){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.HOTKEY);}if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_SapTable.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_SapTable.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_SapTable.prototype.onlsup=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.UP,false);}; UCF_SapTable.prototype.onlsdown=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.DOWN,false);}; UCF_SapTable.prototype.onlsleft=function(oBrowserEvent){return UCF_System.bIsRTL?this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.RIGHT,true):this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.LEFT,true);}; UCF_SapTable.prototype.onlsright=function(oBrowserEvent){return UCF_System.bIsRTL?this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.LEFT,true):this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.RIGHT,true);}; UCF_SapTable.prototype.onlspageup=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.PAGE_UP,false);}; UCF_SapTable.prototype.onlspagedown=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.PAGE_DOWN,false);}; UCF_SapTable.prototype.onlshome=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.HOME,true);}; UCF_SapTable.prototype.onlsend=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.END,true);}; UCF_SapTable.prototype.onlstop=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.TOP,false);}; UCF_SapTable.prototype.onlsbottom=function(oBrowserEvent){return this.handleKeyboardNavigation(oBrowserEvent,this.NAVIGATION.BOTTOM,false);}; UCF_SapTable.prototype.onlscontainerfocus=function(oBrowserEvent){UCF_Control.prototype.onlscontainerfocus.call(this,oBrowserEvent);   if(oBrowserEvent.oGetData().bProcessedBySapTable){return;}else{oBrowserEvent.oGetData().bProcessedBySapTable=true;}var oCellInfo=this.oGetCellInfoByBrowserEvent(oBrowserEvent);if(oCellInfo){this.processTabActionEnd(oCellInfo);if(this.bIsCellFocussed(oCellInfo))this.markCellAsFocussed(oCellInfo);else{var oAccessInfo=this.oGetAccessInfo(oBrowserEvent,this.ACCESS_TYPE.NONE);if(oAccessInfo.eAction!=this.ACTION.COL_RESIZE)this.setCellMatrixFocusByCellInfo(oCellInfo);}}}; UCF_SapTable.prototype.onlstabnext=function(oBrowserEvent){this.processTabActionStart(oBrowserEvent);}; UCF_SapTable.prototype.onlsaccessibility=function(oBrowserEvent){if(!this.oAccHelper)this.oAccHelper=new(UCF_ClassLoader.oGetClass("UCF_SapTableAccessibilityHelper"))(this);this.oAccHelper.onlsaccessibility(oBrowserEvent);}; UCF_SapTable.prototype.sGetAccChildren=function(){return this.oLS.sGetText("SAPUR_ACC_TABLE_CHILDREN");}; UCF_SapTable.prototype.ondragstart=function(oBrowserEvent){ if(oBrowserEvent.oGetSource().getAttribute("cdd")){this.fireClipboardSelectionDataGet(this.sId);oBrowserEvent.cancelBubble();}};  UCF_SapTable.prototype.onScrollH=function(oEvent){this.scrollPreparation();this.fireHorizontalScroll(this.sId,oEvent.oGetParam("iFirstVisibleItem")+(this.bZeroBasedScrolling?-1:0),oEvent.oGetParam("eAction"),oEvent.oGetParam("eAccess"));}; UCF_SapTable.prototype.onScrollV=function(oEvent){this.scrollPreparation();this.fireVerticalScroll(this.sId,(oEvent.oGetParam("iFirstVisibleItem")+(this.bZeroBasedScrolling?-1:0)),oEvent.oGetParam("eAction"),oEvent.oGetParam("eAccess"));};UCF_SapTable.prototype.scrollPreparation=function(){var oDomRef=UCF_DomUtil.oGetActiveElement(),oControl=oDomRef?this.oLS.oControlFactory.oGetControlByDomRef(oDomRef,true):null; if(oControl&&UCF_JsUtil.bInstanceOf(oControl,"UCF_InputField")){oControl.prepareFireChange();}};  UCF_SapTable.prototype.sGetAlternativeAction=function(oAccessInfo){if(oAccessInfo.oSubControlDomRef&&oAccessInfo.oSubControlDomRef.getAttribute("altAction")){return oAccessInfo.oSubControlDomRef.getAttribute("altAction")}return null;}; UCF_SapTable.prototype.oGetAccessInfo=function(oBrowserEvent,eAccessType){var oSource=oDomRef=oBrowserEvent.oGetSource(),eSubControlType=this.SUBCONTROL.NONE,sContentControlType=null,eAction=this.ACTION.NONE,sAccessFragmentType="",oAccessFragmentDomRef=null;while(oDomRef&&oDomRef.tagName!="BODY"){if(oDomRef.getAttribute("subct")){eSubControlType=oDomRef.getAttribute("subct");}else if(!sContentControlType&&oDomRef.getAttribute("ct")){sContentControlType=oDomRef.getAttribute("ct");}if(!sAccessFragmentType&&oDomRef.getAttribute("acf")){sAccessFragmentType=oDomRef.getAttribute("acf");oAccessFragmentDomRef=oDomRef;eAction=sAccessFragmentType;}if(oDomRef==this.oDomRef){eSubControlType=this.SUBCONTROL.TABLE;}if(eSubControlType){return{oBrowserEvent:oBrowserEvent,eAccessType:eAccessType,oTable:this,oTableDomRef:this.oDomRef,sSubControlId:oDomRef.getAttribute("id")?oDomRef.getAttribute("id"):"",oSubControlDomRef:oDomRef,eSubControlType:eSubControlType,sContentControlType:sContentControlType,sAccessFragmentType:sAccessFragmentType,oAccessFragmentDomRef:oAccessFragmentDomRef,eAction:eAction,bHandled:false,oCellInfo:this.oGetCellInfoByDomRef(oDomRef)};}oDomRef=oDomRef.parentNode;}return null;}; UCF_SapTable.prototype.handleEvent=function(oBrowserEvent,eAccessType){if(!this.bInitBeforeHandling())return false;var oAccessInfo=this.oGetAccessInfo(oBrowserEvent,eAccessType);if(oAccessInfo){  if(oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_SELECT&&oAccessInfo.oAccessFragmentDomRef&&oAccessInfo.oAccessFragmentDomRef.tagName=="BUTTON"){return false;}if(eAccessType==this.ACCESS_TYPE.MOUSE&&this.bIsNavigateableTableCell(oAccessInfo.eSubControlType)&&(!oAccessInfo.oAccessFragmentDomRef||!UCF_DomUtil.bHasTabIndex(oAccessInfo.oAccessFragmentDomRef))&&oAccessInfo.eAction!=this.ACTION.COL_RESIZE){this.setCellMatrixFocusByCellInfo(oAccessInfo.oCellInfo);oAccessInfo.bHandled=true;}if(oAccessInfo.eAccessType==this.ACCESS_TYPE.HOTKEY){this.handleTableHotkey(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.HEADER_CELL){this.handleHeaderCellEvent(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.STANDARD_CELL){this.handleStandardCellEvent(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.HIERARCHY_CELL){this.handleHierarchyCellEvent(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.MATRIX_CELL){}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.SELECTION_CELL){this.handleSelectionCellEvent(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.SUBCONTROL.POPIN_CELL){this.handlePopinCellEvent(oAccessInfo);}if(!oAccessInfo.bHandled&&oAccessInfo.eSubControlType==this.SUBCONTROL.TABLE){this.handleTableEvent(oAccessInfo);}return this.bSetEventReturnState(oBrowserEvent,oAccessInfo.bHandled,oAccessInfo.bForceCancelEvent);}else{return this.bSetEventReturnState(oBrowserEvent,false,false);}}; UCF_SapTable.prototype.bIsCellSelect=function(oAccessInfo,iModifierCeck,bNoDoubleClickAllowed){return oAccessInfo.oCellInfo&&oAccessInfo.eAction==this.ACTION.CELL_SELECT&&this.bIsSelectAccess(oAccessInfo,iModifierCeck);}; UCF_SapTable.prototype.internalFireCellSelect=function(oAccessInfo){this.fireCellSelect(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventCellType(oAccessInfo),this.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo),this.iGetAppDefinedColIndex(oAccessInfo.oCellInfo),this.sGetRowUserData(oAccessInfo.oCellInfo),this.sGetEventSelectAccessType(oAccessInfo));}; UCF_SapTable.prototype.internalFireHeaderCellSelect=function(oAccessInfo){this.fireHeaderCellSelect(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventSelectAccessType(oAccessInfo));}; UCF_SapTable.prototype.bIsQuickRowSelect=function(oBrowserEvent){var oCellInfo=this.oGetCellInfoByBrowserEvent(oBrowserEvent); if(oCellInfo&&this.eGetCellType(oCellInfo)==this.SUBCONTROL.SELECTION_CELL){if(this.bCheckModifierMask(this.MODIFIER.NONE,oBrowserEvent.bShift(),oBrowserEvent.bCtrl(),oBrowserEvent.bAlt())){var eRowSelectionState=this.eGetRowSelectionState(oCellInfo.iRowIndex);if(!((eRowSelectionState&this.SELECTION_LAYER.ROW)||(eRowSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)))return true;}else if(this.bCheckModifierMask(this.MODIFIER.NONE_OR_SHIFT,oBrowserEvent.bShift(),oBrowserEvent.bCtrl(),oBrowserEvent.bAlt())){return true;}}return false;}; UCF_SapTable.prototype.bIsSelectAccess=function(oAccessInfo,iModifierMask){if(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE&&!oAccessInfo.oBrowserEvent.bShift()&&!oAccessInfo.oBrowserEvent.bCtrl()&&!oAccessInfo.oBrowserEvent.bAlt()&&UCF_DomUtil.sGetSelectionText(document.body)&&oAccessInfo.oBrowserEvent.sGetName()!="dblclick"){ return false;}return this.bCheckModifierMask(iModifierMask,oAccessInfo.oBrowserEvent.bShift(),oAccessInfo.oBrowserEvent.bCtrl(),oAccessInfo.oBrowserEvent.bAlt())&&(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE||oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_SELECT);}; UCF_SapTable.prototype.bCheckModifierMask=function(iModifierMask,bShift,bCtrl,bAlt){var iModifierMaskToCheck=this.MODIFIER.NONE;if(iModifierMask>=this.MODIFIER.ALL){ return iModifierMask==this.MODIFIER.ALL||!bShift&&!bCtrl&&!bAlt ||iModifierMask==this.MODIFIER.NONE_OR_SHIFT&&bShift&&!bCtrl&&!bAlt||iModifierMask==this.MODIFIER.NONE_OR_CTRL&&!bShift&&bCtrl&&!bAlt||iModifierMask==this.MODIFIER.NONE_OR_SHIFT_XOR_CTRL&&!bShift&&!bAlt||iModifierMask==this.MODIFIER.NONE_OR_SHIFT_XOR_CTRL&&!bCtrl&&!bAlt;}else{ if(bShift)iModifierMaskToCheck|=1;if(bCtrl)iModifierMaskToCheck|=2;if(bAlt)iModifierMaskToCheck|=4;return iModifierMask==iModifierMaskToCheck;}}; UCF_SapTable.prototype.sGetEventCellType=function(oAccessInfo){return this.EVENT_PARAM_MAP_CELL_TYPE[oAccessInfo.eSubControlType];}; UCF_SapTable.prototype.sGetEventSelectAccessType=function(oAccessInfo){var bShift=oAccessInfo.oBrowserEvent.bShift(),bCtrl=oAccessInfo.oBrowserEvent.bCtrl(),bAlt=oAccessInfo.oBrowserEvent.bAlt();if(this.bCheckModifierMask(this.MODIFIER.NONE,bShift,bCtrl,bAlt))return this.EVENT_PARAM_MAP_ACCESS_TYPE.STANDARD;else if(this.bCheckModifierMask(this.MODIFIER.SHIFT,bShift,bCtrl,bAlt))return this.EVENT_PARAM_MAP_ACCESS_TYPE.RANGE;else if(this.bCheckModifierMask(this.MODIFIER.CTRL,bShift,bCtrl,bAlt))return this.EVENT_PARAM_MAP_ACCESS_TYPE.TOGGLE;else return this.EVENT_PARAM_MAP_ACCESS_TYPE.INVALID;};  UCF_SapTable.prototype.handleSelectionCellEvent=function(oAccessInfo){if(this.bIsCellSelect(oAccessInfo,this.MODIFIER.NONE_OR_SHIFT_XOR_CTRL)){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;if(this.isRowCreatorCell(oAccessInfo.oCellInfo)){this.fireRowCreate(this.sId,-1);}else{this.fireRowSelect(oAccessInfo.oTable.sId,this.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo),this.sGetRowUserData(oAccessInfo.oCellInfo),this.sGetEventSelectAccessType(oAccessInfo));}oAccessInfo.bHandled=true;}}; UCF_SapTable.prototype.handleHeaderCellEvent=function(oAccessInfo){if(this.bIsCellSelect(oAccessInfo,this.MODIFIER.NONE_OR_CTRL)){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;this.internalFireHeaderCellSelect(oAccessInfo);oAccessInfo.bHandled=true;}if(this.bIsSelectAccess(oAccessInfo,this.MODIFIER.NONE_OR_CTRL)){if(oAccessInfo.eAction==this.ACTION.HEADER_SORT){if(oAccessInfo.oAccessFragmentDomRef&&oAccessInfo.oAccessFragmentDomRef.id&&oAccessInfo.oAccessFragmentDomRef.id.indexOf(this.ACTION.HEADER_SORT)!=-1){this.eFocusBehavior=this.FOCUS_BEHAVIOR.HEADER_SORT_BUTTON;}else{this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;}this.fireColSort(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventSelectAccessType(oAccessInfo));oAccessInfo.bHandled=true;}else if(oAccessInfo.eAction==this.ACTION.SELECTION_MENU_OPEN){this.openSelectionMenu(oAccessInfo.oAccessFragmentDomRef.getAttribute("selMenuId"),oAccessInfo.oAccessFragmentDomRef);oAccessInfo.bHandled=true;}}}; UCF_SapTable.prototype.handleStandardCellEvent=function(oAccessInfo){if(this.bIsCellSelect(oAccessInfo,this.MODIFIER.NONE_OR_SHIFT_XOR_CTRL)){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;if(this.isRowCreatorCell(oAccessInfo.oCellInfo))this.fireRowCreate(this.sId,this.iGetAppDefinedColIndex(oAccessInfo.oCellInfo));else this.internalFireCellSelect(oAccessInfo);oAccessInfo.bHandled=true;}else if(oAccessInfo.eAction==this.ACTION.FILTER&&this.bIsSelectAccess(oAccessInfo,this.MODIFIER.NONE)){this.eFocusBehavior=this.FOCUS_BEHAVIOR.FILTER;this.fireFilter(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId);oAccessInfo.bHandled=true;}}; UCF_SapTable.prototype.handleHierarchyCellEvent=function(oAccessInfo){if(this.bIsCellSelect(oAccessInfo,this.MODIFIER.NONE_OR_SHIFT_XOR_CTRL)){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;this.internalFireCellSelect(oAccessInfo);oAccessInfo.bHandled=true;}else{var eAction=this.ACTION.NONE;if(this.bIsSelectAccess(oAccessInfo,this.MODIFIER.NONE))eAction=oAccessInfo.eAction;if(oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_COLLAPSE||oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_EXPAND){ var sAltAction=this.sGetAlternativeAction(oAccessInfo),iKeyCode=oAccessInfo.oBrowserEvent.iKeyCode(),bValidOperation=false;bValidOperation=(oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_EXPAND&&sAltAction==this.ACTION.HIERARCHY_EXPAND)||(oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD_COLLAPSE&&sAltAction==this.ACTION.HIERARCHY_COLLAPSE);if(bValidOperation&&sAltAction){eAction=sAltAction;}}if(eAction==this.ACTION.HIERARCHY_ALTERNATIVE){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;this.fireCellIconSelect(oAccessInfo.oTable.sId,this.sGetRowUserData(oAccessInfo.oCellInfo),oAccessInfo.sSubControlId);oAccessInfo.bHandled=true;}else if(eAction==this.ACTION.HIERARCHY_EXPAND){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;this.fireCellExpand(oAccessInfo.oTable.sId,this.sGetRowUserData(oAccessInfo.oCellInfo),oAccessInfo.sSubControlId);oAccessInfo.bHandled=true;}else if(eAction==this.ACTION.HIERARCHY_COLLAPSE){this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;this.fireCellCollapse(oAccessInfo.oTable.sId,this.sGetRowUserData(oAccessInfo.oCellInfo),oAccessInfo.sSubControlId);oAccessInfo.bHandled=true;}}}; UCF_SapTable.prototype.handleTableEvent=function(oAccessInfo){}; UCF_SapTable.prototype.bSetEventReturnState=function(oBrowserEvent,bHandled){if(bHandled){if(oBrowserEvent.iKeyCode()!=0&&oBrowserEvent.iKeyCode()!=UCF_KeyCodes.SPACE){oBrowserEvent.cancel();}oBrowserEvent.cancelBubble();oBrowserEvent.bHandled=true;}return oBrowserEvent.oDomEvent.returnValue;}; UCF_SapTable.prototype.TAB_ACTION={NONE:0,ROWCREATOR:1};UCF_SapTable.prototype.initTabAction=function(){this.eTabAction=this.TAB_ACTION.ROWCREATOR;this.resetTabAction();};UCF_SapTable.prototype.cleanUpTabAction=function(){this.resetTabAction();this.eTabAction=this.TAB_ACTION.NONE;};UCF_SapTable.prototype.bIsTabActionEnabled=function(){return this.eTabAction!=this.TAB_ACTION.NONE;};UCF_SapTable.prototype.processTabActionStart=function(oBrowserEvent){if(!this.bIsTabActionEnabled())return;this.resetTabAction();var oTabActionCellInfoFrom=this.oGetCellInfoByBrowserEvent(oBrowserEvent);if(oTabActionCellInfoFrom){this.oTabActionCellInfoFrom=oTabActionCellInfoFrom;this.autoResetTabAction();}};UCF_SapTable.prototype.processTabActionEnd=function(oTabActionCellInfoTo){if(!this.bIsTabActionEnabled())return;var oTabActionCellInfoFrom=this.oTabActionCellInfoFrom;this.resetTabAction();if(oTabActionCellInfoFrom&&oTabActionCellInfoFrom!=oTabActionCellInfoTo){if(!UCF_System.bIs508&&this.eTabAction==this.TAB_ACTION.ROWCREATOR&&this.isRowCreatorCell(oTabActionCellInfoTo)&&oTabActionCellInfoFrom.iRowIndex+1==oTabActionCellInfoTo.iRowIndex){this.fireRowCreate(this.sId,-1);}}};UCF_SapTable.prototype.resetTabAction=function(){if(!this.bIsTabActionEnabled())return;if(this.autoResetTabActionTimer!=null)UCF_JsUtil.clearDelayedCall(this.autoResetTabActionTimer);this.autoResetTabActionTimer=null;this.oTabActionCellInfoFrom=null;};UCF_SapTable.prototype.autoResetTabAction=function(){this.autoResetTabActionTimer=UCF_JsUtil.delayedCall(500,this,"resetTabAction");};UCF_SapTable.prototype.isRowCreatorCell=function(oCellInfo){return oCellInfo.oDomRefCell.getAttribute("tp")=="RC";};  UCF_SapTable.prototype.openSelectionMenu=function(sSelectionMenuId,oDomRefMenuIcon){if(!this.oSelectionMenu){this.oSelectionMenu=this.oGetControlById(sSelectionMenuId);this.oSelectionMenu.setOpenerRef(oDomRefMenuIcon);this.oSelectionMenu.setOpenerId(this.sId);this.oSelectionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.oSelectionMenu.attachEvent(this.oSelectionMenu.E_EVENTS.Select,this,"onSelectionMenuItemSelect");this.oSelectionMenu.attachEvent(this.oSelectionMenu.E_EVENTS.Close,this,"onSelectionMenuClose");this.oSelectionMenu.open();}}; UCF_SapTable.prototype.cleanUpSelectionMenu=function(){if(this.oSelectionMenu){this.oSelectionMenu.detachEvent(this.oSelectionMenu.E_EVENTS.Select,this);this.oSelectionMenu.detachEvent(this.oSelectionMenu.E_EVENTS.Close,this);this.oSelectionMenu=null;}}; UCF_SapTable.prototype.onSelectionMenuItemSelect=function(oEvent){this.fireSelectionMenuItemSelect(this.sId,oEvent.oGetParam("sItemId"));}; UCF_SapTable.prototype.onSelectionMenuClose=function(oEvent){var oCellInfo=this.oGetSelectionMenuCell();if(oCellInfo){this.setCellMatrixFocusByCellInfo(oCellInfo);}this.cleanUpSelectionMenu();};  UCF_SapTable.prototype.initScrollbars=function(){ this.oScrollV=this.oGetControlById(this.sId+"-"+this.SUFFIX.SCROLL_V),this.oScrollH=this.oGetControlById(this.sId+"-"+this.SUFFIX.SCROLL_H);if(this.oScrollV){this.oScrollV.attachEvent(this.oScrollV.E_EVENTS.Scroll,this,"onScrollV");}if(this.oScrollH){this.oScrollH.attachEvent(this.oScrollH.E_EVENTS.Scroll,this,"onScrollH");}}; UCF_SapTable.prototype.cleanUpScrollbars=function(){if(this.oScrollV){this.oScrollV.detachEvent(this.oScrollV.E_EVENTS.Scroll,this);}if(this.oScrollH){this.oScrollH.detachEvent(this.oScrollH.E_EVENTS.Scroll,this);}this.oScrollV=null;this.oScrollH=null;};  UCF_SapTable.prototype.initCellInfoMatrix=function(){ var aDomRefRows=this.aGetContentTableRows(),oCellInfo=null;this.initCellInfoMatrixHeadData();for(var iRowIndex=0;iRowIndex<aDomRefRows.length;iRowIndex++){var aDomRefCells=this.aGetContentTableRowCells(aDomRefRows[iRowIndex]);this.addCellInfoMatrixRow(aDomRefCells,iRowIndex)}}; UCF_SapTable.prototype.initCellInfoMatrixHeadData=function(){this.mCellInfoMatrixHeadData={iCellCount:0,iFocussedCellRowIndex:-1,iFocussedCellColIndex:-1};}; UCF_SapTable.prototype.addCellInfoMatrixRow=function(aDomRefCells,iRowIndex){if(aDomRefCells){for(var iColIndex=0;iColIndex<aDomRefCells.length;iColIndex++){oCellInfo=this.oCreateCellInfo(aDomRefCells[iColIndex]);this.addCellInfo(iRowIndex,oCellInfo);if(this.eGetCellType(oCellInfo)==this.SUBCONTROL.HEADER_CELL){this.checkAndPrepareDataTip(oCellInfo);}}}}; UCF_SapTable.prototype.cleanUpCellInfoMatrix=function(){this.aCellInfoMatrix=null;this.mCellInfoMatrixHeadData=null;this.mDataTips={};this.cleanUpUnmarkHandler();}; UCF_SapTable.prototype.oGetCellInfo=function(iRowIndex,iColIndex){if(this.bIsValidCellInfoMatrixPosition(iRowIndex,iColIndex))return this.aCellInfoMatrix[iRowIndex][iColIndex];else return null;}; UCF_SapTable.prototype.oGetNextCellInfo=function(oCellInfo){if(oCellInfo.iColIndex+oCellInfo.iColSpan<=this.iGetCellInfoMatrixLastColIndex()){return this.oGetCellInfo(oCellInfo.iRowIndex,oCellInfo.iColIndex+oCellInfo.iColSpan);}else if(oCellInfo.iRowIndex+1<=this.iGetCellInfoMatrixLastRowIndex()){return this.oGetCellInfo(oCellInfo.iRowIndex+1,0);}return null;}; UCF_SapTable.prototype.oGetPreviousCellInfo=function(oCellInfo){if(oCellInfo.iColIndex>0){return this.oGetCellInfo(oCellInfo.iRowIndex,oCellInfo.iColIndex-1);}else if(oCellInfo.iRowIndex>0){return this.oGetCellInfo(oCellInfo.iRowIndex-1,this.iGetCellInfoMatrixLastColIndex());}return null;}; UCF_SapTable.prototype.bIsValidCellInfoMatrixPosition=function(iRowIndex,iColIndex){return this.aCellInfoMatrix[iRowIndex]&&this.aCellInfoMatrix[iRowIndex][iColIndex];}; UCF_SapTable.prototype.aGetCellInfosOfColumn=function(iColIndex){if(this.iGetCellInfoMatrixLastColIndex()<iColIndex)return[];else{var aCellInfos=[],iRowIndex=0,oCurrCellInfo=this.aCellInfoMatrix[iRowIndex][iColIndex];while(oCurrCellInfo!=null){aCellInfos[aCellInfos.length]=oCurrCellInfo;iRowIndex+=oCurrCellInfo.iRowSpan;oCurrCellInfo=this.oGetCellInfo(iRowIndex,iColIndex);}return aCellInfos;}}; UCF_SapTable.prototype.aGetCellInfosOfRow=function(iRowIndex){if(this.iGetCellInfoMatrixLastRowIndex()<iRowIndex)return[];else{var aCellInfos=[],iColIndex=0,oCurrCellInfo=this.aCellInfoMatrix[iRowIndex][iColIndex];while(oCurrCellInfo!=null){aCellInfos[aCellInfos.length]=oCurrCellInfo;iColIndex+=oCurrCellInfo.iColSpan;oCurrCellInfo=this.oGetCellInfo(iRowIndex,iColIndex);}return aCellInfos;}}; UCF_SapTable.prototype.iGetCellInfoMatrixLastRowIndex=function(){return this.aCellInfoMatrix.length-1;}; UCF_SapTable.prototype.iGetCellInfoMatrixLastColIndex=function(){return this.aCellInfoMatrix[0].length-1;}; UCF_SapTable.prototype.oGetCellInfoByDomRef=function(oDomRefCell){var oCurrDomRefCell=oDomRefCell;while(oCurrDomRefCell&&oCurrDomRefCell!=this.oDomRef){if(this.bHasCellInfoByDomRef(oCurrDomRefCell))return this.oGetCellInfo(oCurrDomRefCell.lsMatrixRowIndex,oCurrDomRefCell.lsMatrixColIndex);oCurrDomRefCell=oCurrDomRefCell.parentNode;}return null;}; UCF_SapTable.prototype.bHasCellInfoByDomRef=function(oDomRefCell){return!isNaN(oDomRefCell.lsMatrixRowIndex);}; UCF_SapTable.prototype.oCreateCellInfo=function(oDomRefCell){var oDomRefRow=oDomRefCell.parentNode;var oCellInfo={oDomRefCell:oDomRefCell,oDomRefRow:oDomRefRow,eCellType:this.SUBCONTROL.NONE,iRowSpan:1,iColSpan:1,iRowIndex:-1,iColIndex:-1,iSelectionState:this.SELECTION_LAYER.NONE};if(oDomRefCell.getAttribute("lsRowSpan"))oCellInfo.iRowSpan=parseInt(oDomRefCell.getAttribute("lsRowSpan"));if(oDomRefCell.getAttribute("lsColSpan"))oCellInfo.iColSpan=parseInt(oDomRefCell.getAttribute("lsColSpan"));oCellInfo.eCellType=oDomRefCell.getAttribute("subct");this.mCellInfoMatrixHeadData.iCellCount++;return oCellInfo;}; UCF_SapTable.prototype.sGetRowUserData=function(oCellInfo){return oCellInfo.oDomRefRow.getAttribute("userData")?oCellInfo.oDomRefRow.getAttribute("userData"):"";}; UCF_SapTable.prototype.iGetAppDefinedRowIndex=function(oCellInfo){return parseInt(oCellInfo.oDomRefRow.getAttribute("rr"));}; UCF_SapTable.prototype.eGetCellType=function(oCellInfo){return oCellInfo.eCellType;}; UCF_SapTable.prototype.bIsColumnHeader=function(oHeaderCellInfo){return oHeaderCellInfo.oDomRefCell.getAttribute("headerType")=="S";}; UCF_SapTable.prototype.oGetHeaderCellInfoByDomRef=function(oDomRefCell){var oCellInfo=this.oGetCellInfoByDomRef(oDomRefCell);if(oCellInfo){return this.oGetHeaderCellInfoByCellInfo(oCellInfo);}return null;}; UCF_SapTable.prototype.oGetHeaderCellInfoByCellInfo=function(oCellInfo){if(oCellInfo==null)return null;var iColIndex=oCellInfo.iColIndex;while(oCellInfo!=null&&this.eGetCellType(oCellInfo)!=this.SUBCONTROL.HEADER_CELL){oCellInfo=this.oGetCellInfo(oCellInfo.iRowIndex-1,iColIndex);}return oCellInfo;}; UCF_SapTable.prototype.oGetSelectionCellInfoByDomRef=function(oDomRefCell){var oCell=this.oGetCellInfoByDomRef(oDomRefCell);if(oCell){oCell=this.oGetCellInfo(oCell.iRowIndex,0);if(oCell&&this.eGetCellType(oCell)==this.SUBCONTROL.SELECTION_CELL)return oCell;}return null;}; UCF_SapTable.prototype.oGetSelectionMenuCell=function(){var oCurrCellInfo=this.oGetCellInfo(0,0);while(oCurrCellInfo!=null){if(oCurrCellInfo.oDomRefCell.getAttribute("hasSelMenu"))return oCurrCellInfo;oCurrCellInfo=this.oGetCellInfo(oCurrCellInfo.iRowIndex+oCurrCellInfo.iRowSpan,0);}return null;}; UCF_SapTable.prototype.iGetAppDefinedColIndex=function(oCellInfo){return oCellInfo.oDomRefCell.getAttribute("cc")?parseInt(oCellInfo.oDomRefCell.getAttribute("cc")):-1;}; UCF_SapTable.prototype.addCellInfo=function(iRowIndex,oCellInfo){if(!this.aCellInfoMatrix)this.aCellInfoMatrix=[];if(!this.aCellInfoMatrix[iRowIndex])this.aCellInfoMatrix[iRowIndex]=[];oCellInfo.iRowIndex=iRowIndex;oCellInfo.iColIndex=this.iGetNextAvailableSlotIndex(this.aCellInfoMatrix[iRowIndex]);oCellInfo.oDomRefCell.lsMatrixRowIndex=oCellInfo.iRowIndex;oCellInfo.oDomRefCell.lsMatrixColIndex=oCellInfo.iColIndex;for(var iRow=oCellInfo.iRowIndex;iRow<oCellInfo.iRowIndex+oCellInfo.iRowSpan;iRow++){if(!this.aCellInfoMatrix[iRow])this.aCellInfoMatrix[iRow]=[];for(var iCol=oCellInfo.iColIndex;iCol<oCellInfo.iColIndex+oCellInfo.iColSpan;iCol++){this.aCellInfoMatrix[iRow][iCol]=oCellInfo;}}}; UCF_SapTable.prototype.iGetNextAvailableSlotIndex=function(aArray){var iLastFoundSlotIndex=0;if(aArray.iLastFoundSlotIndex)iLastFoundSlotIndex=aArray.iLastFoundSlotIndex;for(var i=iLastFoundSlotIndex;i<aArray.length;i++){if(!aArray[i])break;}aArray.iLastFoundSlotIndex=i;return i;}; UCF_SapTable.prototype.aGetContentTableRows=function(){var oDomRef=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.CONTENT_TD);oDomRef=this.oDomRefGetFirstChildByTagName(oDomRef,"SPAN");oDomRef=this.oDomRefGetFirstChildByTagName(oDomRef,"TABLE"); if(oDomRef==null)return[];oDomRef=this.oDomRefGetFirstChildByTagName(oDomRef,"TBODY");return oDomRef.rows;}; UCF_SapTable.prototype.aGetContentTableRowCells=function(oDomRefRow){return oDomRefRow.cells;}; UCF_SapTable.prototype.oDomRefGetFirstChildByTagName=function(oDomRefParent,sTagName){for(var i=0;i<oDomRefParent.childNodes.length;i++){if(oDomRefParent.childNodes[i].tagName==sTagName.toUpperCase())return oDomRefParent.childNodes[i];}return null;};  UCF_SapTable.prototype.collectFocusInfo=function(oFocusInfo){if(this.eFocusBehavior==this.FOCUS_BEHAVIOR.CELL||this.eFocusBehavior==this.FOCUS_BEHAVIOR.FILTER||this.eFocusBehavior==this.FOCUS_BEHAVIOR.HEADER_SORT_BUTTON){var oCellInfo=this.oGetCellInfoByDomRef(oFocusInfo.oGetOrgFocussedElement());if(oCellInfo){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iRowIndex",oCellInfo.iRowIndex);oFocusInfo.addParam("iColIndex",oCellInfo.iColIndex);if(this.eFocusBehavior==this.FOCUS_BEHAVIOR.HEADER_SORT_BUTTON){oFocusInfo.addParam("sFragmentId",oCellInfo.oDomRefCell.id+"-"+this.ACTION.HEADER_SORT);}}}this.eFocusBehavior=this.FOCUS_BEHAVIOR.NONE;}; UCF_SapTable.prototype.applyFocusInfo=function(oFocusInfo){var iRowIndex=oFocusInfo.oGetParam("iRowIndex"),iColIndex=oFocusInfo.oGetParam("iColIndex"),sFragmentId=oFocusInfo.oGetParam("sFragmentId");if(sFragmentId){UCF_DomUtil.focusDomElement(UCF_DomUtil.$(sFragmentId));}else{if(iRowIndex>=0&&iColIndex>=0){this.setCellMatrixFocus(iRowIndex,iColIndex);}}}; UCF_SapTable.prototype.setCellMatrixFocusByCellInfo=function(oCellInfo){this.setCellMatrixFocus(oCellInfo.iRowIndex,oCellInfo.iColIndex);}; UCF_SapTable.prototype.setCellMatrixFocus=function(iRowIndex,iColIndex){if(!this.bIsValidCellInfoMatrixPosition(iRowIndex,iColIndex))return;var oCellInfo=this.oGetCellInfo(iRowIndex,iColIndex),oLastFocussedCellInfo=this.oGetCellInfo(this.mCellInfoMatrixHeadData.iFocussedCellRowIndex,this.mCellInfoMatrixHeadData.iFocussedCellColIndex); if(oCellInfo.oDomRefCell.fi)return;if(this.mCellInfoMatrixHeadData.iFocussedCellRowIndex!=iRowIndex||this.mCellInfoMatrixHeadData.iFocussedCellColIndex!=iColIndex){this.mCellInfoMatrixHeadData.iFocussedCellRowIndex=iRowIndex;this.mCellInfoMatrixHeadData.iFocussedCellColIndex=iColIndex;}this.processCellIsFocussed(oCellInfo);this.markCellAsFocussed(oCellInfo,oLastFocussedCellInfo);}; UCF_SapTable.prototype.processCellIsFocussed=function(oCellInfo){}; UCF_SapTable.prototype.bIsCellFocussed=function(oCellInfo){var oFocussedCellInfo=this.oGetCellInfo(this.mCellInfoMatrixHeadData.iFocussedCellRowIndex,this.mCellInfoMatrixHeadData.iFocussedCellColIndex);return oFocussedCellInfo==oCellInfo;}; UCF_SapTable.prototype.colorizeCell=function(oCellInfo,sStyle){oCellInfo.oDomRefCell.bColorized=sStyle;UCF_DomUtil.addClass(oCellInfo.oDomRefCell,sStyle);}; UCF_SapTable.prototype.decolorizeCell=function(oCellInfo){if(oCellInfo.oDomRefCell.bColorized){UCF_DomUtil.removeClass(oCellInfo.oDomRefCell,oCellInfo.oDomRefCell.bColorized);oCellInfo.oDomRefCell.bColorized=null;}}; UCF_SapTable.prototype.resetCellMatrixFocus=function(){this.mCellInfoMatrixHeadData.iFocussedCellRowIndex=0;this.mCellInfoMatrixHeadData.iFocussedCellColIndex=0;}; UCF_SapTable.prototype.SEARCH_DIRECTION={NONE:0,ACCENDING:1,DECENDING:2,LAST:3,FIRST:4}; UCF_SapTable.prototype.oSearchFocusableCell=function(oCellInfoReference,eSearchDirection,bHorizontal){var iCurrRowIndex=oCellInfoReference.iRowIndex,iCurrColIndex=oCellInfoReference.iColIndex,oCurrCellInfo=null;if(bHorizontal){if(eSearchDirection==this.SEARCH_DIRECTION.LAST){iCurrColIndex=this.iGetCellInfoMatrixLastColIndex();}else if(eSearchDirection==this.SEARCH_DIRECTION.FIRST){iCurrColIndex=0;}else if(eSearchDirection==this.SEARCH_DIRECTION.ACCENDING){iCurrColIndex=iCurrColIndex+oCellInfoReference.iColSpan;}else if(eSearchDirection==this.SEARCH_DIRECTION.DECENDING){iCurrColIndex=iCurrColIndex-1;}}else{if(eSearchDirection==this.SEARCH_DIRECTION.LAST){iCurrRowIndex=this.iGetCellInfoMatrixLastRowIndex();}else if(eSearchDirection==this.SEARCH_DIRECTION.FIRST){iCurrRowIndex=0;}else if(eSearchDirection==this.SEARCH_DIRECTION.ACCENDING){iCurrRowIndex=iCurrRowIndex+oCellInfoReference.iRowSpan;}else if(eSearchDirection==this.SEARCH_DIRECTION.DECENDING){iCurrRowIndex=iCurrRowIndex-1;}}oCurrCellInfo=this.oGetCellInfo(iCurrRowIndex,iCurrColIndex);if(oCurrCellInfo==null)return oCellInfoReference; if(oCurrCellInfo.oDomRefCell.fi){var oRecursionResult=null;if(eSearchDirection==this.SEARCH_DIRECTION.LAST)oRecursionResult=this.oSearchFocusableCell(oCurrCellInfo,this.SEARCH_DIRECTION.DECENDING,bHorizontal);else if(eSearchDirection==this.SEARCH_DIRECTION.FIRST)oRecursionResult=this.oSearchFocusableCell(oCurrCellInfo,this.SEARCH_DIRECTION.ACCENDING,bHorizontal);else{oRecursionResult=this.oSearchFocusableCell(oCurrCellInfo,eSearchDirection,bHorizontal);}if(oRecursionResult.oDomRefCell.fi)return oCellInfoReference;else return oRecursionResult;}else return oCurrCellInfo;}; UCF_SapTable.prototype.attachUnmarkHandler=function(oDomRef){var oSapTable=this;if(!this.unmarkCellAsFocussedRedirect){this.unmarkCellAsFocussedRedirect=function(oDomEvent){oSapTable.unmarkCellAsFocussed(oDomEvent.srcElement||oDomEvent.target);oSapTable.detachUnmarkHandler(oDomEvent.srcElement||oDomEvent.target);};}this.oDomRefLastAttachedToUnmarkHandler=oDomRef;UCF_DomUtil.attachEvent(oDomRef,"blur",this.unmarkCellAsFocussedRedirect);}; UCF_SapTable.prototype.detachUnmarkHandler=function(oDomRef){UCF_DomUtil.detachEvent(oDomRef,"blur",this.unmarkCellAsFocussedRedirect);}; UCF_SapTable.prototype.cleanUpUnmarkHandler=function(){if(this.oDomRefLastAttachedToUnmarkHandler)this.detachUnmarkHandler(this.oDomRefLastAttachedToUnmarkHandler);this.oDomRefLastAttachedToUnmarkHandler=null;this.unmarkCellAsFocussedRedirect=null;}; UCF_SapTable.prototype.markCellAsFocussed=function(oCellInfo,oLastFocussedCellInfo){ if(oCellInfo.oDomRefCell.fi)return;var oDomRef=null,oActiveElement=UCF_DomUtil.oGetActiveElement();if(oCellInfo.oDomRefCell!=oActiveElement&&UCF_DomUtil.bContains(oCellInfo.oDomRefCell,oActiveElement)){oDomRef=oActiveElement;}else{oDomRef=UCF_DomUtil.oGetFirstFocusableDomRef(oCellInfo.oDomRefCell);}if(!oDomRef)oDomRef=UCF_DomUtil.oGetFirstElement(oCellInfo.oDomRefCell); if(!oDomRef){oCellInfo.oDomRefCell.fi=true; return;}if(!oDomRef.bMarkedAsFocussed){var eCellType=this.eGetCellType(oCellInfo);oDomRef.bMarkedAsFocussed=true;if(!UCF_DomUtil.bHasTabIndex(oDomRef)){UCF_DomUtil.setTabIndex(oDomRef,0);oDomRef.bResetTabIndex=true;}this.attachUnmarkHandler(oDomRef);if(oLastFocussedCellInfo){this.decolorizeCell(oLastFocussedCellInfo);}{var oControl=this.oLS.oControlFactory.oGetControlByDomRef(oDomRef,true);if(this.bIsDataTableCell(eCellType)&&eCellType!=this.SUBCONTROL.MATRIX_CELL){if(this.eFocusAppearance!=this.FOCUS_APPEARANCE.NEVER&&(this.eFocusAppearance==this.FOCUS_APPEARANCE.ALWAYS||(  this.eFocusAppearance==this.FOCUS_APPEARANCE.INPUT&&oControl&&oControl.oGetParent()==this&&(UCF_JsUtil.bInstanceOf(oControl,"UCF_InputField")||UCF_JsUtil.bInstanceOf(oControl,"UCF_ComboBox"))))){this.colorizeCell(oCellInfo,"urSTFoc");}}if(oControl){oControl.focus();}else{if(UCF_DomUtil.oGetActiveElement()!=oDomRef)UCF_DomUtil.focusDomElement(oDomRef);}}}}; UCF_SapTable.prototype.unmarkCellAsFocussed=function(oDomRef){if(oDomRef.bMarkedAsFocussed){var oCellInfo=this.oGetCellInfoByDomRef(oDomRef),eCellType=this.eGetCellType(oCellInfo);if(oDomRef.bResetTabIndex){UCF_DomUtil.resetTabIndex(oDomRef);oDomRef.bResetTabIndex=false;}oDomRef.bMarkedAsFocussed=false;this.decolorizeCell(oCellInfo);}}; UCF_SapTable.prototype.oGetCellInfoByBrowserEvent=function(oBrowserEvent){var oDomRef=oBrowserEvent.oGetSource();while(oDomRef&&oDomRef.tagName!="BODY"&&oDomRef!=this.oDomRef){if(this.bHasCellInfoByDomRef(oDomRef))return this.oGetCellInfoByDomRef(oDomRef);oDomRef=oDomRef.parentNode;}return null;}; UCF_SapTable.prototype.handleKeyboardNavigation=function(oBrowserEvent,eOperation,bHorizontal){if(!this.bInitBeforeHandling())return false; if(!this.bCheckModifierMask(this.MODIFIER.NONE,oBrowserEvent.bShift(),oBrowserEvent.bCtrl(),oBrowserEvent.bAlt())){if(!(this.bCheckModifierMask(this.MODIFIER.CTRL,oBrowserEvent.bShift(),oBrowserEvent.bCtrl(),oBrowserEvent.bAlt())&&(eOperation==this.NAVIGATION.TOP||eOperation==this.NAVIGATION.BOTTOM))){return false;}}var iCurrentRowIndex=-1,iCurrentColIndex=-1,bHandled=false,oTriggerCellInfo=this.oGetCellInfoByBrowserEvent(oBrowserEvent),oCurrentCellInfo=this.oGetCellInfo(this.mCellInfoMatrixHeadData.iFocussedCellRowIndex,this.mCellInfoMatrixHeadData.iFocussedCellColIndex);this.eFocusBehavior=this.FOCUS_BEHAVIOR.CELL;if(oTriggerCellInfo&&oCurrentCellInfo!=oTriggerCellInfo){this.mCellInfoMatrixHeadData.iFocussedCellRowIndex=oTriggerCellInfo.iRowIndex;this.mCellInfoMatrixHeadData.iFocussedCellColIndex=oTriggerCellInfo.iColIndex;oCurrentCellInfo=oTriggerCellInfo;}if(oCurrentCellInfo){iCurrentRowIndex=this.mCellInfoMatrixHeadData.iFocussedCellRowIndex,iCurrentColIndex=this.mCellInfoMatrixHeadData.iFocussedCellColIndex;this.navigateToCell(eOperation,iCurrentRowIndex,iCurrentColIndex,bHorizontal);bHandled=true;}return this.bSetEventReturnState(oBrowserEvent,bHandled);}; UCF_SapTable.prototype.navigateToCell=function(eOperation,iCurrentRowIndex,iCurrentColIndex,bHorizontal){var oCurrentCellInfo=this.oGetCellInfo(iCurrentRowIndex,iCurrentColIndex),oScrollbar=bHorizontal?this.oScrollH:this.oScrollV,sScrollMethod=null,oResultCellInfo=null,iResultIndex=-1;if(eOperation==this.NAVIGATION.LEFT||eOperation==this.NAVIGATION.UP){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.DECENDING,bHorizontal);if(oResultCellInfo==oCurrentCellInfo)sScrollMethod="scrollToPrevious";}else if(eOperation==this.NAVIGATION.RIGHT||eOperation==this.NAVIGATION.DOWN){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.ACCENDING,bHorizontal);if(oResultCellInfo==oCurrentCellInfo)sScrollMethod="scrollToNext";}else if(eOperation==this.NAVIGATION.PAGE_UP){oResultCellInfo=oCurrentCellInfo;sScrollMethod="scrollToPreviousPage";}else if(eOperation==this.NAVIGATION.PAGE_DOWN){oResultCellInfo=oCurrentCellInfo;sScrollMethod="scrollToNextPage";}else if(eOperation==this.NAVIGATION.HOME||eOperation==this.NAVIGATION.TOP){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.FIRST,bHorizontal);sScrollMethod="scrollToBegin";}else if(eOperation==this.NAVIGATION.END||eOperation==this.NAVIGATION.BOTTOM){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.LAST,bHorizontal);iResultIndex=bHorizontal?oResultCellInfo.iColIndex+oResultCellInfo.iColSpan-1:oResultCellInfo.iRowIndex+oResultCellInfo.iRowSpan-1;sScrollMethod="scrollToEnd";}if(iResultIndex==-1)iResultIndex=bHorizontal?oResultCellInfo.iColIndex:oResultCellInfo.iRowIndex;this.setCellMatrixFocus(bHorizontal?iCurrentRowIndex:iResultIndex,bHorizontal?iResultIndex:iCurrentColIndex);if(oScrollbar&&sScrollMethod)oScrollbar[sScrollMethod]();}; UCF_SapTable.prototype.bIsNavigateableTableCell=function(eSubControlType){return eSubControlType==this.SUBCONTROL.HEADER_CELL||eSubControlType==this.SUBCONTROL.STANDARD_CELL||eSubControlType==this.SUBCONTROL.HIERARCHY_CELL||eSubControlType==this.SUBCONTROL.MATRIX_CELL||eSubControlType==this.SUBCONTROL.SELECTION_CELL||eSubControlType==this.SUBCONTROL.POPIN_CELL}; UCF_SapTable.prototype.bIsDataTableCell=function(eSubControlType){return eSubControlType==this.SUBCONTROL.STANDARD_CELL||eSubControlType==this.SUBCONTROL.HIERARCHY_CELL||eSubControlType==this.SUBCONTROL.MATRIX_CELL}; UCF_SapTable.prototype.bInitBeforeHandling=function(){this.eFocusBehavior=this.FOCUS_BEHAVIOR.NONE;if(this.oScrollV&&this.oScrollV.bIsInInteraction()){this.oScrollV.cancelInteraction();}return this.bEnabled;}; UCF_SapTable.prototype.bIsValidTableHotkey=function(oBrowserEvent){if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.A){if(oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()){ return true;}if(!oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()){ return true;}}else if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE){if(!oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&oBrowserEvent.bAlt()){ return true;}}return false;};UCF_SapTable.prototype.handleTableHotkey=function(oAccessInfo){var oBrowserEvent=oAccessInfo.oBrowserEvent;if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.A){if(oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()){ this.fireRowSelect(oAccessInfo.oTable.sId,-1,"",this.EVENT_PARAM_MAP_ACCESS_TYPE.DESELECT_ALL);oAccessInfo.bHandled=true;}if(!oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()){ this.fireRowSelect(oAccessInfo.oTable.sId,-1,"",this.EVENT_PARAM_MAP_ACCESS_TYPE.SELECT_ALL);oAccessInfo.bHandled=true;}}else if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE){if(!oBrowserEvent.bShift()&&oBrowserEvent.bCtrl()&&oBrowserEvent.bAlt()){ var oHeaderCellInfo=this.oGetHeaderCellInfoByCellInfo(oAccessInfo.oCellInfo);if(oHeaderCellInfo&&oHeaderCellInfo.oDomRefCell.getAttribute("id")){this.fireHeaderCellSelect(oAccessInfo.oTable.sId,oHeaderCellInfo.oDomRefCell.getAttribute("id"),this.EVENT_PARAM_MAP_ACCESS_TYPE.TOGGLE);oAccessInfo.bHandled=true;}}}}; UCF_SapTable.prototype.initDataTips=function(){};UCF_SapTable.prototype.cleanDataTips=function(){if(this.mDataTips){this.mDataTips=null;}}; UCF_SapTable.prototype.checkDataTipOpen=function(oBrowserEvent){if(this.mDataTips){var oSource=oBrowserEvent.oGetSource();if(oSource.sTableDataTipId){var sId=oSource.sTableDataTipId,oDataTip=this.mDataTips[sId];oDataTip.bShowOnActivate=false; if(this.sDataTipTimeOutId){UCF_JsUtil.clearDelayedCall(this.sDataTipTimeOutId);}this.addDelegate(oDataTip);this.sDataTipTimeOutId=UCF_JsUtil.delayedCall(400,this,"openDataTip",[sId]);}}}; UCF_SapTable.prototype.checkDataTipClose=function(oBrowserEvent){if(this.mDataTips){var oSource=oBrowserEvent.oGetSource();if(oSource.sTableDataTipId){var sId=oSource.sTableDataTipId,oDataTip=this.mDataTips[sId];if(oDataTip){oDataTip.close();this.removeDelegate(oDataTip);}if(this.sDataTipTimeOutId){UCF_JsUtil.clearDelayedCall(this.sDataTipTimeOutId);}}}};UCF_SapTable.prototype.removeDataTipDelegateById=function(sId){if(this.mDataTips){var oDataTip=this.mDataTips[sId];this.removeDelegate(oDataTip);}}; UCF_SapTable.prototype.openDataTip=function(sId){if(this.mDataTips){var oDataTip=this.mDataTips[sId]; oDataTip.setAlignment(UCF_LayeredControl.ALIGNMENT.TOPLEFT);oDataTip.open();if(this.sDataTipTimeOutId){UCF_JsUtil.clearDelayedCall(this.sDataTipTimeOutId);}}}; UCF_SapTable.prototype.checkAndPrepareDataTip=function(oCellInfo){var oDomRef=oCellInfo.oDomRefCell,sHeaderId=oDomRef.getAttribute("id"),oDataTip=sHeaderId?this.oGetDataTipById(sHeaderId):null;if(oDataTip){var oDomRefContent=UCF_DomUtil.$(sHeaderId+"-CONTENT"),oDomRefFirstChild=(oDomRefContent==null)?null:UCF_DomUtil.oGetFirstElement(oDomRefContent);if(oDomRefFirstChild)oDomRefContent=oDomRefFirstChild;if(oDomRefContent){oDataTip.setOpenerRef(oDomRef);oDomRefContent.sTableDataTipId=sHeaderId;if(!this.mDataTips)this.mDataTips={};this.mDataTips[sHeaderId]=oDataTip;}}}; UCF_SapTable.prototype.CLIENT_SELECTION_MODE={NONE:0,WEB_DYNPRO:1};UCF_SapTable.prototype.SELECTION_LAYER={NONE:0,ROW:1,COLUMN:2,ROW_PRIMARY:4,ROW_DISABLED:8,COLUMN_DISABLED:16,CELL:32,ALL:255}; UCF_SapTable.prototype.initClientSelectionHandling=function(){this.bCellSelectionStatesInitialized=false;}; UCF_SapTable.prototype.cleanUpClientSelectionHandling=function(){this.bCellSelectionStatesInitialized=false;}; UCF_SapTable.prototype.toggleSelectRowInternal=function(iRowIndex){var eRowSelectionState=this.eGetRowSelectionState(iRowIndex),bSelectable=!(eRowSelectionState&this.SELECTION_LAYER.ROW_DISABLED);if(bSelectable){var aCellInfos=this.aGetCellInfosOfRow(iRowIndex);this.setCellSelectionStates(aCellInfos,!(eRowSelectionState&this.SELECTION_LAYER.ROW),this.SELECTION_LAYER.ROW);if((eRowSelectionState&this.SELECTION_LAYER.ROW)&&(eRowSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)){this.setCellSelectionStates(aCellInfos,false,this.SELECTION_LAYER.ROW_PRIMARY);}}}; UCF_SapTable.prototype.toggleSelectColInternal=function(iColIndex){var eCollSelectionState=this.eGetColSelectionState(iColIndex),bSelectable=!(eColSelectionState&this.SELECTION_LAYER.COLUMN_DISABLED);if(bSelectable){var aCellInfos=this.aGetCellInfosOfColumn(iColIndex);this.setCellSelectionStates(aCellInfos,!(eColSelectionState&this.SELECTION_LAYER.COLUMN),this.SELECTION_LAYER.COLUMN);}}; UCF_SapTable.prototype.setSecondarySelectionByIndex=function(iRowIndex,bSet){if(iRowIndex<0)return;var eRowSelectionState=this.eGetRowSelectionState(iRowIndex),bSelectable=!(eRowSelectionState&this.SELECTION_LAYER.ROW_DISABLED);if(bSelectable)this.setCellSelectionStates(this.aGetCellInfosOfRow(iRowIndex),bSet,this.SELECTION_LAYER.ROW);}; UCF_SapTable.prototype.setPrimarySelectionByIndex=function(iRowIndex,bSet){if(iRowIndex<0)return;var eRowSelectionState=this.eGetRowSelectionState(iRowIndex),bSelectable=!(eRowSelectionState&this.SELECTION_LAYER.ROW_DISABLED);if(bSelectable)this.setCellSelectionStates(this.aGetCellInfosOfRow(iRowIndex),bSet,this.SELECTION_LAYER.ROW_PRIMARY);}; UCF_SapTable.prototype.setColumnSelectionByIndex=function(iColIndex,bSet){if(iColIndex<0)return;var eColSelectionState=this.eGetColSelectionState(iColIndex),bSelectable=!(eColSelectionState&this.SELECTION_LAYER.COLUMN_DISABLED);if(bSelectable)this.setCellSelectionStates(this.aGetCellInfosOfColumn(iColIndex),bSet,this.SELECTION_LAYER.COLUMN);}; UCF_SapTable.prototype.oGetInternalPositionByCellId=function(sCellId){var oDomRefCell=UCF_DomUtil.$(sCellId);return(oDomRefCell)?{iRowIndex:oDomRefCell.lsMatrixRowIndex,iColIndex:oDomRefCell.lsMatrixColIndex}:null;}; UCF_SapTable.prototype.iGetInternalRowIndexByCellId=function(sCellId){var oDomRefCell=UCF_DomUtil.$(sCellId);return(oDomRefCell)?oDomRefCell.lsMatrixRowIndex:-1;}; UCF_SapTable.prototype.iGetInternalColIndexByCellId=function(sCellId){var oDomRefCell=UCF_DomUtil.$(sCellId);return(oDomRefCell)?oDomRefCell.lsMatrixColIndex:-1;}; UCF_SapTable.prototype.setCellSelectionStates=function(aCellInfos,bSet,mOperationMap){if(!this.bCellSelectionStatesInitialized){this.initializeCellSelectionStates();this.bCellSelectionStatesInitialized=true;}for(var i=0;i<aCellInfos.length;i++){this.applyCellSelectionState(aCellInfos[i],bSet,mOperationMap);}for(var i=0;i<aCellInfos.length;i++){this.applyCellSelectionStateUi(aCellInfos[i]);}}; UCF_SapTable.prototype.applyCellSelectionState=function(oCellInfo,bSet,mOperationMap){oCellInfo.iLastSelectionState=oCellInfo.iSelectionState;oCellInfo.bSelectionClientModified=true; if(bSet){oCellInfo.iSelectionState|=mOperationMap;}else{oCellInfo.iSelectionState&=~mOperationMap;}}; UCF_SapTable.prototype.applyCellSelectionStateUi=function(oCellInfo){var eCellType=this.eGetCellType(oCellInfo);if(eCellType==this.SUBCONTROL.STANDARD_CELL||eCellType==this.SUBCONTROL.HIERARCHY_CELL){var bSelectedBefore=(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.ROW)||(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.COLUMN)||(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.CELL),bSelectedPrimaryBefore=(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)&&true,bSelectedAfter=(oCellInfo.iSelectionState&this.SELECTION_LAYER.ROW)||(oCellInfo.iSelectionState&this.SELECTION_LAYER.COLUMN)||(oCellInfo.iSelectionState&this.SELECTION_LAYER.CELL),bSelectedPrimaryAfter=(oCellInfo.iSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)&&true;if(bSelectedBefore!=bSelectedAfter||bSelectedPrimaryBefore!=bSelectedPrimaryAfter){var oDomRef=oCellInfo.oDomRefCell,sCssClasses=UCF_DomUtil.sGetClass(oDomRef),bIsReadOnly=sCssClasses.indexOf("urSTTDRo2")>-1,sClassToReplace=null;if(bSelectedPrimaryBefore)sClassToReplace=bIsReadOnly?" urST4SelRo":" urST4Sel";else if(bSelectedBefore)sClassToReplace=bIsReadOnly?" urST4Sel2Ro":" urST4Sel2";if(bSelectedPrimaryAfter){if(sClassToReplace)sCssClasses=sCssClasses.replace(sClassToReplace,(bIsReadOnly?" urST4SelRo":" urST4Sel"));else sCssClasses+=(bIsReadOnly?" urST4SelRo":" urST4Sel");}else if(bSelectedAfter){if(sClassToReplace)sCssClasses=sCssClasses.replace(sClassToReplace,(bIsReadOnly?" urST4Sel2Ro":" urST4Sel2"));else sCssClasses+=(bIsReadOnly?" urST4Sel2Ro":" urST4Sel2");}else{if(sClassToReplace)sCssClasses=sCssClasses.replace(sClassToReplace,"");}UCF_DomUtil.setClass(oDomRef,sCssClasses);}}else if(eCellType==this.SUBCONTROL.SELECTION_CELL){var bSelectedBefore=(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.ROW)&&true,bSelectedPrimaryBefore=(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)&&true,bSelectedAfter=(oCellInfo.iSelectionState&this.SELECTION_LAYER.ROW)&&true,bSelectedPrimaryAfter=(oCellInfo.iSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)&&true;if(bSelectedBefore!=bSelectedAfter||bSelectedPrimaryBefore!=bSelectedPrimaryAfter){var oDomRef=UCF_DomUtil.oGetFirstElement(oCellInfo.oDomRefCell),sCssClasses=UCF_DomUtil.sGetClass(oDomRef),sClassToReplace="urSTRowUnSelIcon";if(bSelectedPrimaryBefore)sClassToReplace="urSTRowSelIcon";else if(bSelectedBefore)sClassToReplace="urSTRowSelSecIcon";if(bSelectedPrimaryAfter){sCssClasses=sCssClasses.replace(sClassToReplace,"urSTRowSelIcon");}else if(bSelectedAfter){sCssClasses=sCssClasses.replace(sClassToReplace,"urSTRowSelSecIcon");}else{sCssClasses=sCssClasses.replace(sClassToReplace,"urSTRowUnSelIcon");}if((bSelectedPrimaryBefore||bSelectedBefore)&&!bSelectedPrimaryAfter&&!bSelectedAfter)sCssClasses=sCssClasses.replace(" urST4LbSelIcon"," urST4LbUnselIcon");else if((bSelectedPrimaryAfter||bSelectedAfter)&&!bSelectedPrimaryBefore&&!bSelectedBefore)sCssClasses=sCssClasses.replace(" urST4LbUnselIcon"," urST4LbSelIcon");UCF_DomUtil.setClass(oDomRef,sCssClasses);}}else if(eCellType==this.SUBCONTROL.HEADER_CELL){var bSelectedBefore=(oCellInfo.iLastSelectionState&this.SELECTION_LAYER.COLUMN)&&true,bSelectedAfter=(oCellInfo.iSelectionState&this.SELECTION_LAYER.COLUMN)&&true;if(bSelectedBefore!=bSelectedAfter){var oDomRef=oCellInfo.oDomRefCell,sCssClasses=UCF_DomUtil.sGetClass(oDomRef);if(bSelectedAfter){sCssClasses=sCssClasses.replace("urST3HUnsel","urST3HSel");sCssClasses=sCssClasses.replace("urST4LbHdrBg","urST4LbHdrSelBg");}else{sCssClasses=sCssClasses.replace("urST3HSel","urST3HUnsel");sCssClasses=sCssClasses.replace("urST4LbHdrSelBg","urST4LbHdrBg");}UCF_DomUtil.setClass(oDomRef,sCssClasses);}}}; UCF_SapTable.prototype.oGetRowReferenceCell=function(iRowIndex){if(this.bIsValidCellInfoMatrixPosition(iRowIndex,0)){var oReferenceCell=this.aCellInfoMatrix[iRowIndex][0];if(this.eGetCellType(oReferenceCell)==this.SUBCONTROL.SELECTION_CELL){return oReferenceCell;}}return null;}; UCF_SapTable.prototype.oGetColReferenceCell=function(iColIndex){var iLastRowIndex=this.iGetCellInfoMatrixLastRowIndex(),oReferenceCell=null;for(var i=0;i<=iLastRowIndex;i++){if(this.bIsValidCellInfoMatrixPosition(i,iColIndex)&&this.eGetCellType(this.aCellInfoMatrix[i][iColIndex])==this.SUBCONTROL.HEADER_CELL){oReferenceCell=this.aCellInfoMatrix[i][iColIndex];}else break;}return oReferenceCell;}; UCF_SapTable.prototype.initializeCellSelectionStates=function(){var iMaxColIndex=this.iGetCellInfoMatrixLastColIndex(),iMaxRowIndex=this.iGetCellInfoMatrixLastRowIndex(),eSelectionState=null;for(var iColIndex=0;iColIndex<=iMaxColIndex;iColIndex++){eSelectionState=this.eGetColSelectionState(iColIndex);if(eSelectionState!=this.SELECTION_LAYER.NONE){var aCellInfos=this.aGetCellInfosOfColumn(iColIndex);for(var i=0;i<aCellInfos.length;i++){aCellInfos[i].iSelectionState|=eSelectionState;}}}for(var iRowIndex=0;iRowIndex<=iMaxRowIndex;iRowIndex++){eSelectionState=this.eGetRowSelectionState(iRowIndex);if(eSelectionState!=this.SELECTION_LAYER.NONE){var aCellInfos=this.aGetCellInfosOfRow(iRowIndex);for(var i=0;i<aCellInfos.length;i++){aCellInfos[i].iSelectionState|=eSelectionState;}}}}; UCF_SapTable.prototype.aGetSelectedRows=function(){var iMaxRowIndex=this.iGetCellInfoMatrixLastRowIndex(),eSelectionState=null,aCellInfos=[];for(var iRowIndex=0;iRowIndex<=iMaxRowIndex;iRowIndex++){eSelectionState=this.eGetRowSelectionState(iRowIndex);if((eSelectionState&this.SELECTION_LAYER.ROW_PRIMARY)||(eSelectionState&this.SELECTION_LAYER.ROW)){aCellInfos[aCellInfos.length]=this.oGetRowReferenceCell(iRowIndex)}}return aCellInfos;}; UCF_SapTable.prototype.eGetRowSelectionState=function(iRowIndex){var oReferenceCell=this.oGetRowReferenceCell(iRowIndex);if(oReferenceCell){if(this.bCellSelectionStatesInitialized){return oReferenceCell.iSelectionState;}else{var eCellType=this.eGetCellType(oReferenceCell);if(eCellType==this.SUBCONTROL.SELECTION_CELL){ var sServerSelectionState=oReferenceCell.oDomRefCell.getAttribute("sst"),iServerSelectionState=sServerSelectionState?parseInt(sServerSelectionState):0,iSelectionState=this.SELECTION_LAYER.NONE;if(iServerSelectionState&1)iSelectionState|=this.SELECTION_LAYER.ROW_PRIMARY;if(iServerSelectionState&2)iSelectionState|=this.SELECTION_LAYER.ROW;if(iServerSelectionState&4)iSelectionState|=this.SELECTION_LAYER.ROW_DISABLED;if((iServerSelectionState&1)&&(iServerSelectionState&8))iSelectionState|=this.SELECTION_LAYER.ROW_DISABLED;return iSelectionState;}}}return this.SELECTION_LAYER.ROW_DISABLED;}; UCF_SapTable.prototype.eGetCellSelectionState=function(iRowIndex,iColIndex){var oReferenceCell=this.oGetCellInfo(iRowIndex,iColIndex);if(oReferenceCell){if(this.bCellSelectionStatesInitialized){return oReferenceCell.iSelectionState;}else{var eCellType=this.eGetCellType(oReferenceCell);if(eCellType==this.SUBCONTROL.STANDARD_CELL||eCellType==this.SUBCONTROL.HIERARCHY_CELL){var bServerSelectionState=false; if(bServerSelectionState)return this.SELECTION_LAYER.CELL;else return this.SELECTION_LAYER.NONE;}}}return this.SELECTION_LAYER.NONE;}; UCF_SapTable.prototype.eGetColSelectionState=function(iColIndex){var oReferenceCell=this.oGetColReferenceCell(iColIndex);if(oReferenceCell){if(this.bCellSelectionStatesInitialized){return oReferenceCell.iSelectionState;}else{var eCellType=this.eGetCellType(oReferenceCell);if(eCellType==this.SUBCONTROL.HEADER_CELL){ var sServerSelectionState=oReferenceCell.oDomRefCell.getAttribute("sst"),iServerSelectionState=sServerSelectionState?parseInt(sServerSelectionState):0;if((iServerSelectionState&2)||!(iServerSelectionState&4)){if(iServerSelectionState&1)return this.SELECTION_LAYER.COLUMN;else return this.SELECTION_LAYER.NONE;}else{return this.SELECTION_LAYER.COLUMN_DISABLED;}}}}return this.SELECTION_LAYER.COLUMN_DISABLED;};UCF_SapTable.prototype.sGetDragSourceInfo=function(){return this.sDragSourceInfo;}; UCF_SapTable.prototype.aAttributeNames=["sTitleText","sAccessibilityDescription","iRowCount","iColCount","iVisibleFirstRow","iVisibleRowCount","iVisibleColCount","iVisibleScrollableColCount","iFirstVisibleScrollableCol","sTooltip","bEnabled","sAccessKey","sHotkeysId","sDragSourceInfo","sDropTargetInfo"]; UCF_SapTable.prototype.aMethodNames=["setPrimarySelection","setSecondarySelection","setColumnSelection"];  UCF_SapTable.prototype.sTitleText=''; UCF_SapTable.prototype.sAccessibilityDescription=''; UCF_SapTable.prototype.iRowCount=-1; UCF_SapTable.prototype.iColCount=-1; UCF_SapTable.prototype.iVisibleFirstRow=-1; UCF_SapTable.prototype.iVisibleRowCount=-1; UCF_SapTable.prototype.iVisibleColCount=-1; UCF_SapTable.prototype.iVisibleScrollableColCount=-1; UCF_SapTable.prototype.iFirstVisibleScrollableCol=-1; UCF_SapTable.prototype.sTooltip=''; UCF_SapTable.prototype.bEnabled=true; UCF_SapTable.prototype.sAccessKey=''; UCF_SapTable.prototype.sHotkeysId=''; UCF_SapTable.prototype.sDragSourceInfo=''; UCF_SapTable.prototype.sDropTargetInfo=''; UCF_SapTable.prototype.setDefaultValues=function(){this.sTitleText='';this.sAccessibilityDescription='';this.iRowCount=-1;this.iColCount=-1;this.iVisibleFirstRow=-1;this.iVisibleRowCount=-1;this.iVisibleColCount=-1;this.iVisibleScrollableColCount=-1;this.iFirstVisibleScrollableCol=-1;this.sTooltip='';this.bEnabled=true;this.sAccessKey='';this.sHotkeysId='';this.sDragSourceInfo='';this.sDropTargetInfo='';}; UCF_SapTable.prototype.fireRowSelect=function(sId,iRowIndex,sRowUserData,sAccessType){var mParams={Id:sId,RowIndex:iRowIndex,RowUserData:sRowUserData,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.RowSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTable","RowSelect",mParams);}; UCF_SapTable.prototype.fireFilter=function(sId,sCellId){var mParams={Id:sId,CellId:sCellId};this.fireSemanticEvent("SapTable","Filter",mParams);}; UCF_SapTable.prototype.fireCellSelect=function(sId,sCellId,sCellType,iRowIndex,iColIndex,sRowUserData,sAccessType){var mParams={Id:sId,CellId:sCellId,CellType:sCellType,RowIndex:iRowIndex,ColIndex:iColIndex,RowUserData:sRowUserData,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTable","CellSelect",mParams);}; UCF_SapTable.prototype.fireColSort=function(sId,sCellId,sAccessType){var mParams={Id:sId,CellId:sCellId,AccessType:sAccessType};this.fireSemanticEvent("SapTable","ColSort",mParams);}; UCF_SapTable.prototype.fireHeaderCellSelect=function(sId,sCellId,sAccessType){var mParams={Id:sId,CellId:sCellId,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.HeaderCellSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTable","HeaderCellSelect",mParams);}; UCF_SapTable.prototype.fireCellExpand=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellExpand)this.oLS.markDirty();this.fireSemanticEvent("SapTable","CellExpand",mParams);}; UCF_SapTable.prototype.fireCellCollapse=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellCollapse)this.oLS.markDirty();this.fireSemanticEvent("SapTable","CellCollapse",mParams);}; UCF_SapTable.prototype.fireCellIconSelect=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};this.fireSemanticEvent("SapTable","CellIconSelect",mParams);}; UCF_SapTable.prototype.fireSelectionMenuItemSelect=function(sId,sMenuItemId){var mParams={Id:sId,MenuItemId:sMenuItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.SelectionMenuItemSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTable","SelectionMenuItemSelect",mParams);}; UCF_SapTable.prototype.fireCellContextMenu=function(sId,sCellId,iRowIndex,iColIndex,iPosX,iPosY,sRowUserData,bCtrl,bAlt){var mParams={Id:sId,CellId:sCellId,RowIndex:iRowIndex,ColIndex:iColIndex,PosX:iPosX,PosY:iPosY,RowUserData:sRowUserData,Ctrl:bCtrl,Alt:bAlt};this.fireSemanticEvent("SapTable","CellContextMenu",mParams);}; UCF_SapTable.prototype.fireVerticalScroll=function(sId,iFirstVisibleItemIndex,sAction,sAccessType){var mParams={Id:sId,FirstVisibleItemIndex:iFirstVisibleItemIndex,Action:sAction,AccessType:sAccessType};this.fireSemanticEvent("SapTable","VerticalScroll",mParams);}; UCF_SapTable.prototype.fireHorizontalScroll=function(sId,iFirstVisibleItemIndex,sAction,sAccessType){var mParams={Id:sId,FirstVisibleItemIndex:iFirstVisibleItemIndex,Action:sAction,AccessType:sAccessType};this.fireSemanticEvent("SapTable","HorizontalScroll",mParams);}; UCF_SapTable.prototype.fireClipboardSelectionDataGet=function(sId){var mParams={Id:sId};this.fireSemanticEvent("SapTable","ClipboardSelectionDataGet",mParams);}; UCF_SapTable.prototype.fireColumnReorder=function(sId,sMovedColId,sRefColId,sInsertMode){var mParams={Id:sId,MovedColId:sMovedColId,RefColId:sRefColId,InsertMode:sInsertMode};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ColumnReorder)this.oLS.markDirty();this.fireSemanticEvent("SapTable","ColumnReorder",mParams);}; UCF_SapTable.prototype.fireColumnResize=function(sId,sColWidths){var mParams={Id:sId,ColWidths:sColWidths};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ColumnResize)this.oLS.markDirty();this.fireSemanticEvent("SapTable","ColumnResize",mParams);}; UCF_SapTable.prototype.fireRowCreate=function(sId,iColIndex){var mParams={Id:sId,ColIndex:iColIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.RowCreate)this.oLS.markDirty();this.fireSemanticEvent("SapTable","RowCreate",mParams);}; UCF_SapTable.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("SapTable","Hotkey",mParams);}; UCF_SapTable.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("SapTable","Drag",mParams);}; UCF_SapTable.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,iRowIndex,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,RowIndex:iRowIndex,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("SapTable","Drop",mParams);};
 function UCF_SapTableCS(oDomRef,oLS){var sBdyId=oDomRef.getAttribute("bdyId");this.iContentRowCount=parseInt(oDomRef.getAttribute("crc"));this.iVisibleContentRowCount=parseInt(oDomRef.getAttribute("vcrc"));this.iFirstVisibleContentRowIndex=parseInt(oDomRef.getAttribute("fvcri"));this.iContentColumnCount=parseInt(oDomRef.getAttribute("ccc"));this.iHorizontalScrollPosition=parseInt(oDomRef.getAttribute("hsp"));this.eVerticalScrollUpdateMode=oDomRef.getAttribute("vsclum");this.iRowHeight=parseInt(oDomRef.getAttribute("rh"));this.aDomRefSegmentMatrix=[[UCF_DomUtil.$(sBdyId+"-mrss-hdr-left"),UCF_DomUtil.$(sBdyId+"-mrss-hdr-none"),UCF_DomUtil.$(sBdyId+"-mrss-hdr-right")],[UCF_DomUtil.$(sBdyId+"-mrss-tfx-left"),UCF_DomUtil.$(sBdyId+"-mrss-tfx-none"),UCF_DomUtil.$(sBdyId+"-mrss-tfx-right")],[UCF_DomUtil.$(sBdyId+"-mrss-cont-left"),UCF_DomUtil.$(sBdyId+"-mrss-cont-none"),UCF_DomUtil.$(sBdyId+"-mrss-cont-right")],[UCF_DomUtil.$(sBdyId+"-mrss-bfx-left"),UCF_DomUtil.$(sBdyId+"-mrss-bfx-none"),UCF_DomUtil.$(sBdyId+"-mrss-bfx-right")]];UCF_SapTable.apply(this,[oDomRef,oLS]);   this.removeDelegate(this.oDragDropDelegate);this.oDragDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_SapTableCSDragDropDelegate"))(oLS,this);this.addDelegate(this.oDragDropDelegate);this.eFocusAppearance=this.FOCUS_APPEARANCE.ALWAYS;this.bZeroBasedScrolling=true;this.iContenRowOffset=parseInt(this.oDomRef.getAttribute("cros")); this.iRowCount=this.iContentRowCount;this.iColCount=this.iContentColumnCount;this.iVisibleRowCount=this.iVisibleContentRowCount;this.iVisibleColCount=this.iColCount;this.iVisibleFirstRow=this.iFirstVisibleContentRowIndex;if(this.oScrollV){if(this.eVerticalScrollUpdateMode==this.SCROLL_UPDATE_MODE.SERVER)this.oScrollV.setNotifactionMode(this.oScrollV.NOTIFICATION.AUTO);else this.oScrollV.setNotifactionMode(this.oScrollV.NOTIFICATION.ALWAYS_WHEN_CHANGED);}if(this.oScrollH){this.oScrollH.setNotifactionMode(this.oScrollH.NOTIFICATION.ALWAYS_WHEN_CHANGED);this.oScrollH.attachEvent(this.oScrollH.E_EVENTS.ClientUpdateResize,this,"onHScrollClientUpdateResize");}};UCF_SapTableCS.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTable"))();  UCF_SapTableCS.prototype.destroy=function(){if(this.oScrollH){this.oScrollH.detachEvent(this.oScrollH.E_EVENTS.ClientUpdateResize,this,"onHScrollClientUpdateResize");}this.aDomRefSegmentMatrix=null;this.iVisibleContentRowCount=0;this.iFirstVisibleContentRowIndex=0;this.iHorizontalScrollPosition=0;this.eVerticalScrollUpdateMode=null;this.iContenRowOffset=0;UCF_SapTable.prototype.destroy.apply(this,arguments);};  UCF_SapTableCS.prototype.SUBCONTROL={NONE:false,TABLE:"STCS",HEADER_CELL:"HC",STANDARD_CELL:"STC",HIERARCHY_CELL:"HIC",MATRIX_CELL:"MC",SELECTION_CELL:"SC",POPIN_CELL:"PC"};UCF_SapTableCS.prototype.SEGMENT_ROW={HEADER:0,TOP:1,CONTENT:2,BOTTOM:3};UCF_SapTableCS.prototype.SCROLL_UPDATE_MODE={CLIENT:"CLIENT",SERVER:"SERVER"};UCF_SapTableCS.prototype.SEGMENT_COL={LEFT_FIXED:0,NONE_FIXED:1,RIGHT_FIXED:2};  UCF_SapTableCS.prototype.ondblclick=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE);}; UCF_SapTableCS.prototype.onlstabnext=function(oBrowserEvent){return this.processTabAction(oBrowserEvent,true);}; UCF_SapTableCS.prototype.onlstabprevious=function(oBrowserEvent){return this.processTabAction(oBrowserEvent,false);};UCF_SapTableCS.prototype.processTabAction=function(oBrowserEvent,bForward){var oTabActionCellInfo=this.oGetCellInfoByBrowserEvent(oBrowserEvent);if(oTabActionCellInfo){var oResultCellInfo=oTabActionCellInfo,oResultDomRef=null;if(bForward&&oTabActionCellInfo.oDomRefCell==oTabActionCellInfo.oDomRefRow.lastChild&&UCF_DomUtil.oGetLastFocusableDomRef(oTabActionCellInfo.oDomRefCell)==oBrowserEvent.oGetSource()){while(oResultCellInfo!=null&&oResultDomRef==null){oResultCellInfo=this.oGetNextCellInfo(oResultCellInfo);oResultDomRef=oResultCellInfo?UCF_DomUtil.oGetFirstFocusableDomRef(oResultCellInfo.oDomRefCell):null;}}if(!bForward&&oTabActionCellInfo.oDomRefCell==oTabActionCellInfo.oDomRefRow.firstChild&&UCF_DomUtil.oGetFirstFocusableDomRef(oTabActionCellInfo.oDomRefCell)==oBrowserEvent.oGetSource()){while(oResultCellInfo!=null&&oResultDomRef==null){oResultCellInfo=this.oGetPreviousCellInfo(oResultCellInfo);oResultDomRef=oResultCellInfo?UCF_DomUtil.oGetLastFocusableDomRef(oResultCellInfo.oDomRefCell):null;}}if(oResultDomRef){UCF_DomUtil.focusDomElement(oResultDomRef);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();oBrowserEvent.bHandled=true;return false;}}return true;}; UCF_SapTableCS.prototype.onHScrollClientUpdateResize=function(oEvent){this.oScrollH.updateDimensions(this.iGetScrollRange(),this.iGetScrollClipping(),this.iHorizontalScrollPosition);}; UCF_SapTableCS.prototype.onScrollH=function(oEvent){this.setHorizontalScrollPosition(oEvent.oGetParam("iFirstVisibleItem")-1);UCF_SapTable.prototype.onScrollH.call(this,oEvent);}; UCF_SapTableCS.prototype.onScrollV=function(oEvent){this.setVerticalScrollPosition(oEvent.oGetParam("iFirstVisibleItem")-1);UCF_SapTable.prototype.onScrollV.call(this,oEvent);};  UCF_SapTableCS.prototype.initialize=function(){if(this.oScrollH){this.updateHorizontalScrollUI(this.iGetScrollRange(),this.iGetScrollClipping(),this.iHorizontalScrollPosition);}};UCF_SapTableCS.prototype.updateHorizontalScrollUI=function(){if(this.oScrollH){this.oScrollH.updateDimensions(this.iGetScrollRange(),this.iGetScrollClipping(),this.iHorizontalScrollPosition);}};  UCF_SapTableCS.prototype.handleTableEvent=function(oAccessInfo){UCF_SapTable.prototype.handleTableEvent.call(this,oAccessInfo);if(oAccessInfo.eAction==this.ACTION.CONFIG&&this.bIsSelectAccess(oAccessInfo,this.MODIFIER.NONE)){this.fireConfig(oAccessInfo.oTable.sId);oAccessInfo.bHandled=true;}}; UCF_SapTableCS.prototype.internalFireCellSelect=function(oAccessInfo){if(oAccessInfo.oBrowserEvent.sGetName()=="dblclick"){this.fireCellDoubleClick(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventCellType(oAccessInfo),this.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo),this.iGetAppDefinedColIndex(oAccessInfo.oCellInfo),this.sGetRowUserData(oAccessInfo.oCellInfo),this.sGetEventSelectAccessType(oAccessInfo));}else{this.fireCellSelect(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventCellType(oAccessInfo),this.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo),this.iGetAppDefinedColIndex(oAccessInfo.oCellInfo),this.sGetRowUserData(oAccessInfo.oCellInfo),this.sGetEventSelectAccessType(oAccessInfo));}};UCF_SapTable.prototype.internalFireHeaderCellSelect=function(oAccessInfo){if(oAccessInfo.oBrowserEvent.sGetName()=="dblclick"){if(oAccessInfo.eSubControlType==this.SUBCONTROL.HEADER_CELL){this.optimizeColumnWidth(oAccessInfo.oCellInfo.iColIndex);}}else{this.fireHeaderCellSelect(oAccessInfo.oTable.sId,oAccessInfo.sSubControlId,this.sGetEventSelectAccessType(oAccessInfo));}}; UCF_SapTableCS.prototype.initCellInfoMatrix=function(){var iRowIndex=0;this.initCellInfoMatrixHeadData();for(var iRowSegment=0;iRowSegment<this.aDomRefSegmentMatrix.length;iRowSegment++){var aSegmentRowsLeft=this.aGetSegmentRows(this.aDomRefSegmentMatrix[iRowSegment][this.SEGMENT_COL.LEFT_FIXED]),aSegmentRowsNone=this.aGetSegmentRows(this.aDomRefSegmentMatrix[iRowSegment][this.SEGMENT_COL.NONE_FIXED]),aSegmentRowsRight=this.aGetSegmentRows(this.aDomRefSegmentMatrix[iRowSegment][this.SEGMENT_COL.RIGHT_FIXED]),iSegmentRowCount=0;if(aSegmentRowsLeft&&aSegmentRowsLeft.length>0)iSegmentRowCount=aSegmentRowsLeft.length;else if(aSegmentRowsNone&&aSegmentRowsNone.length>0)iSegmentRowCount=aSegmentRowsNone.length;else if(aSegmentRowsRight&&aSegmentRowsRight.length>0)iSegmentRowCount=aSegmentRowsRight.length;for(var iSegmentRowIndex=0;iSegmentRowIndex<iSegmentRowCount;iSegmentRowIndex++){if(aSegmentRowsLeft)this.addCellInfoMatrixRow(aSegmentRowsLeft[iSegmentRowIndex].cells,iRowIndex);if(aSegmentRowsNone)this.addCellInfoMatrixRow(aSegmentRowsNone[iSegmentRowIndex].cells,iRowIndex);if(aSegmentRowsRight)this.addCellInfoMatrixRow(aSegmentRowsRight[iSegmentRowIndex].cells,iRowIndex);iRowIndex++;}}}; UCF_SapTableCS.prototype.initScrollbars=function(){var sScrollVId=this.oDomRef.getAttribute("vsbid"),sScrollHId=this.oDomRef.getAttribute("hsbid");this.oScrollV=this.oGetControlById(sScrollVId),this.oScrollH=this.oGetControlById(sScrollHId);if(this.oScrollV){this.oScrollV.attachEvent(this.oScrollV.E_EVENTS.Scroll,this,"onScrollV");}if(this.oScrollH){this.oScrollH.attachEvent(this.oScrollH.E_EVENTS.Scroll,this,"onScrollH");}}; UCF_SapTableCS.prototype.navigateToCell=function(eOperation,iCurrentRowIndex,iCurrentColIndex,bHorizontal){if(this.eVerticalScrollUpdateMode==this.SCROLL_UPDATE_MODE.SERVER&&!bHorizontal){UCF_SapTable.prototype.navigateToCell.call(this,eOperation,iCurrentRowIndex,iCurrentColIndex,bHorizontal);}else{var oCurrentCellInfo=this.oGetCellInfo(iCurrentRowIndex,iCurrentColIndex),oScrollbar=bHorizontal?this.oScrollH:this.oScrollV,sScrollMethod=null,oResultCellInfo=null,iResultIndex=-1;if(eOperation==this.NAVIGATION.LEFT||eOperation==this.NAVIGATION.UP){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.DECENDING,bHorizontal);sScrollMethod="scrollToPrevious";}else if(eOperation==this.NAVIGATION.RIGHT||eOperation==this.NAVIGATION.DOWN){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.ACCENDING,bHorizontal);sScrollMethod="scrollToNext";}else if(eOperation==this.NAVIGATION.PAGE_UP){iResultIndex=Math.max(0,iCurrentRowIndex-this.iVisibleContentRowCount);oResultCellInfo=this.oGetCellInfo(iResultIndex,iCurrentColIndex);sScrollMethod="scrollToPreviousPage";}else if(eOperation==this.NAVIGATION.PAGE_DOWN){iResultIndex=Math.min(this.iGetCellInfoMatrixLastRowIndex(),iCurrentRowIndex+this.iVisibleContentRowCount);oResultCellInfo=this.oGetCellInfo(iResultIndex,iCurrentColIndex);sScrollMethod="scrollToNextPage";}else if(eOperation==this.NAVIGATION.HOME||eOperation==this.NAVIGATION.TOP){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.FIRST,bHorizontal);oScrollbar.scrollToBegin();}else if(eOperation==this.NAVIGATION.END||eOperation==this.NAVIGATION.BOTTOM){oResultCellInfo=this.oSearchFocusableCell(oCurrentCellInfo,this.SEARCH_DIRECTION.LAST,bHorizontal);iResultIndex=bHorizontal?oResultCellInfo.iColIndex+oResultCellInfo.iColSpan-1:oResultCellInfo.iRowIndex+oResultCellInfo.iRowSpan-1;oScrollbar.scrollToEnd();}if(iResultIndex==-1)iResultIndex=bHorizontal?oResultCellInfo.iColIndex:oResultCellInfo.iRowIndex;if(oScrollbar&&sScrollMethod&&!this.bIsVerticalScrolledIntoView(oResultCellInfo)){oScrollbar[sScrollMethod]();}this.setCellMatrixFocus(bHorizontal?iCurrentRowIndex:iResultIndex,bHorizontal?iResultIndex:iCurrentColIndex);}}; UCF_SapTableCS.prototype.processCellIsFocussed=function(oCellInfo){if(!this.bIsVerticalScrolledIntoView(oCellInfo))this.scrollVerticalIntoView(oCellInfo);if(!this.bIsHorizontalScrolledIntoView(oCellInfo))this.scrollHorizontalIntoView(oCellInfo);};  UCF_SapTableCS.prototype.setRowSelection=function(iRowIndex,bSet){this.setSecondarySelectionByIndex(iRowIndex+this.iContenRowOffset+(this.eVerticalScrollUpdateMode==this.SCROLL_UPDATE_MODE.SERVER?-this.iFirstVisibleContentRowIndex:0),bSet);}; UCF_SapTableCS.prototype.setCellSelection=function(sCellId,bSet){var oDomRefCell=UCF_DomUtil.$(sCellId),oCellInfo=(oDomRefCell)?this.oGetCellInfoByDomRef(oDomRef):null;if(oCellInfo){this.setCellSelectionStates([oCellInfo],bSet,this.SELECTION_LAYER.CELL);}else{}}; UCF_SapTableCS.prototype.setColumnSelection=function(sHeaderCellId,bSet){var iColIndex=this.iGetInternalColIndexByCellId(sHeaderCellId),eColSelectionState=this.eGetColSelectionState(iColIndex),bSelectable=!(eColSelectionState&this.SELECTION_LAYER.COLUMN_DISABLED);if(bSelectable)this.setColumnSelectionByIndex(iColIndex,bSet);}; UCF_SapTableCS.prototype.getRowSelection=function(iRowIndex){return true&&(this.eGetRowSelectionState(iRowIndex+this.iContenRowOffset+(this.eVerticalScrollUpdateMode==this.SCROLL_UPDATE_MODE.SERVER?-this.iFirstVisibleContentRowIndex:0))&this.SELECTION_LAYER.ROW);}; UCF_SapTableCS.prototype.getCellSelection=function(sCellId){var oDomRefCell=UCF_DomUtil.$(sCellId),oCellInfo=(oDomRefCell)?this.oGetCellInfoByDomRef(oDomRef):null;if(oCellInfo){return true&&(this.eGetCellSelectionState(oCellInfo.iRowIndex,oCellInfo.iColIndex)&this.SELECTION_LAYER.CELL);}else{}return false;}; UCF_SapTableCS.prototype.getColumnSelection=function(sHeaderCellId,bSet){var oDomRefCell=UCF_DomUtil.$(sHeaderCellId),oCellInfo=(oDomRefCell)?this.oGetCellInfoByDomRef(oDomRef):null;if(oCellInfo){return true&&(this.eGetColSelectionState(oCellInfo.iColIndex)&this.SELECTION_LAYER.COLUMN);}else{}return false;};  UCF_SapTableCS.prototype.eGetSegmentColType=function(oSegment){if(oSegment.getAttribute("hpm")=="none")return this.SEGMENT_COL.NONE_FIXED;if(oSegment.getAttribute("hpm")=="left")return this.SEGMENT_COL.LEFT_FIXED;if(oSegment.getAttribute("hpm")=="right")return this.SEGMENT_COL.RIGHT_FIXED;}; UCF_SapTableCS.prototype.eGetSegmentRowType=function(oSegment){if(oSegment.getAttribute("vpm")=="mrss-cont")return this.SEGMENT_ROW.CONTENT;if(oSegment.getAttribute("vpm")=="mrss-hdr")return this.SEGMENT_ROW.HEADER;if(oSegment.getAttribute("vpm")=="mrss-tfx")return this.SEGMENT_ROW.TOP;if(oSegment.getAttribute("vpm")=="mrss-bfx")return this.SEGMENT_ROW.BOTTOM;}; UCF_SapTableCS.prototype.iGetSegmentColCount=function(oSegment){return parseInt(oSegment.getAttribute("segcc"));}; UCF_SapTableCS.prototype.iGetSegmentRowCount=function(oSegment){return parseInt(oSegment.getAttribute("segrc"));}; UCF_SapTableCS.prototype.iGetFirstInternalColIndexOfSegment=function(oSegment){return this.oGetCellInfoByDomRef(this.oGetSegmentTable(oSegment).rows[0].cells[0]).iColIndex;}; UCF_SapTableCS.prototype.oGetSegmentOfCell=function(oCellInfo){return oCellInfo.oDomRefRow.parentNode.parentNode.parentNode;}; UCF_SapTableCS.prototype.oGetSegmentTable=function(oSegment){return oSegment.firstChild;}; UCF_SapTableCS.prototype.iGetSegmentWidth=function(oSegment){return parseInt(UCF_DomUtil.sGetCurrentStyle(this.oGetSegmentTable(oSegment),"width"));}; UCF_SapTableCS.prototype.setSegmentWidth=function(oSegment,iWidth){this.oGetSegmentTable(oSegment).style.width=iWidth;}; UCF_SapTableCS.prototype.setSegmentColumnWidth=function(oSegment,iSegmentColIndex,iWidth){this.setHtmlColWidth(this.aGetColsOfHtmlTable(this.oGetSegmentTable(oSegment)),iSegmentColIndex,iWidth);}; UCF_SapTableCS.prototype.aGetColsOfHtmlTable=function(oHtmlTable){var oDomRefColGroup=oHtmlTable.getElementsByTagName("COLGROUP")[0];aDomRefCols=oDomRefColGroup?oDomRefColGroup.getElementsByTagName("COL"):null;return aDomRefCols;}; UCF_SapTableCS.prototype.setHtmlColWidth=function(aDomRefCols,iColIndex,iWidth){if(aDomRefCols){aDomRefCols[iColIndex].style.width=iWidth;if(UCF_System.sDevice=="ff1"){ if(this.oDomRef.style.left||this.oDomRef.style.left=="0px")this.oDomRef.style.left="";else this.oDomRef.style.left="0px";}}}; UCF_SapTableCS.prototype.bIsInHorizontalScrollSegment=function(oCellInfo){var oSegment=this.oGetSegmentOfCell(oCellInfo);for(var iRowSegment=0;iRowSegment<this.aDomRefSegmentMatrix.length;iRowSegment++){if(oSegment==this.aDomRefSegmentMatrix[iRowSegment][this.SEGMENT_COL.NONE_FIXED]){return true;}}return false;}; UCF_SapTableCS.prototype.scrollHorizontalIntoView=function(oCellInfo){if(this.oScrollH&&this.bIsInHorizontalScrollSegment(oCellInfo)){this.oScrollH.scrollToPosition(oCellInfo.oDomRefCell.offsetLeft);}}; UCF_SapTableCS.prototype.scrollVerticalIntoView=function(oCellInfo){if(this.oScrollV){this.oScrollV.scrollToPosition(parseInt(oCellInfo.oDomRefRow.getAttribute("rr")));}}; UCF_SapTableCS.prototype.bIsVerticalScrolledIntoView=function(oCellInfo){if(UCF_DomUtil.sGetCurrentStyle(oCellInfo.oDomRefRow,"display")=="none")return false;return true;}; UCF_SapTableCS.prototype.bIsHorizontalScrolledIntoView=function(oCellInfo){var oSegment=this.oGetSegmentByCellInfo(oCellInfo),isNoneFixedSegment=false;for(var iRowSegment=0;iRowSegment<this.aDomRefSegmentMatrix.length;iRowSegment++){if(oSegment==this.aDomRefSegmentMatrix[iRowSegment][this.SEGMENT_COL.NONE_FIXED]){isNoneFixedSegment=true;break;}}if(isNoneFixedSegment){var iScrollPos=this.iGetHorizontalScrollPosition(oSegment),iClippingWidth=oSegment.offsetWidth,iCellOffsetPos=oCellInfo.oDomRefCell.offsetLeft,iCellWidth=oCellInfo.oDomRefCell.offsetWidth;if(iCellOffsetPos<iScrollPos||iCellOffsetPos+iCellWidth>iScrollPos+iClippingWidth||iCellOffsetPos>iScrollPos+iClippingWidth){return false;}}return true;}; UCF_SapTableCS.prototype.oGetSegmentByCellInfo=function(oCellInfo){return UCF_DomUtil.oGetParentByTagName(oCellInfo.oDomRefRow,"DIV");}; UCF_SapTableCS.prototype.iGetScrollRange=function(){var oContentSegment=this.aDomRefSegmentMatrix[this.SEGMENT_ROW.CONTENT][this.SEGMENT_COL.NONE_FIXED],oContentTable=oContentSegment.firstChild,iContentWidth=oContentTable.offsetWidth,iContentPos=this.iGetHorizontalScrollPosition(oContentSegment),iClippingWidth=oContentSegment.offsetWidth,iResult=iContentWidth;if((iContentWidth-iContentPos)<iClippingWidth)iResult=iClippingWidth+iContentPos;return iResult-4;}; UCF_SapTableCS.prototype.iGetScrollClipping=function(){return this.aDomRefSegmentMatrix[this.SEGMENT_ROW.CONTENT][this.SEGMENT_COL.NONE_FIXED].offsetWidth;}; UCF_SapTableCS.prototype.oGetSegmentBody=function(oDomRefSegment){var oDomRef=oDomRefSegment;oDomRef=this.oDomRefGetFirstChildByTagName(oDomRef,"TABLE");oDomRef=this.oDomRefGetFirstChildByTagName(oDomRef,"TBODY");return oDomRef;}; UCF_SapTableCS.prototype.aGetSegmentRows=function(oDomRefSegment){var oDomRefSegmentBody=oDomRefSegment?this.oGetSegmentBody(oDomRefSegment):null;return oDomRefSegmentBody?oDomRefSegmentBody.rows:null;}; UCF_SapTableCS.prototype.iGetHorizontalScrollPosition=function(oDomRefSegment){return(UCF_System.sDevice=="ff1")?-parseInt(oDomRefSegment.firstChild.style.left):-oDomRefSegment.firstChild.offsetLeft}; UCF_SapTableCS.prototype.setHorizontalScrollPosition=function(iPxPosition){var oNoneFixedSegment=null;this.iHorizontalScrollPosition=iPxPosition;for(var iSementRowIndex=0;iSementRowIndex<this.aDomRefSegmentMatrix.length;iSementRowIndex++){oNoneFixedSegment=this.aDomRefSegmentMatrix[iSementRowIndex][this.SEGMENT_COL.NONE_FIXED];if(oNoneFixedSegment)oNoneFixedSegment.firstChild.style.left=-(iPxPosition+1);}}; UCF_SapTableCS.prototype.setVerticalScrollPosition=function(iRowIndex){if(this.eVerticalScrollUpdateMode==this.SCROLL_UPDATE_MODE.SERVER)return;if(iRowIndex!=this.iFirstVisibleContentRowIndex){this.updateVisibleContentRows(iRowIndex);this.setFirstVisibleContentRowIndex(iRowIndex);}};UCF_SapTableCS.prototype.updateVisibleContentRows=function(iStartIndex){var oMergingObject={},bShow=true;if(!iStartIndex&&iStartIndex!==0)iStartIndex=this.iFirstVisibleContentRowIndex;for(var i=iStartIndex,iTo=iStartIndex+this.iVisibleContentRowCount;i<iTo;i++){oMergingObject[i]=true;}for(var i=this.iFirstVisibleContentRowIndex,iTo=this.iFirstVisibleContentRowIndex+this.iVisibleContentRowCount;i<iTo;i++){if(!oMergingObject[i])oMergingObject[i]=false;}for(var i in oMergingObject){i=parseInt(i);if(oMergingObject[i])bShow=true;else bShow=false;this.setRowVisibilityState(i,bShow);}}; UCF_SapTableCS.prototype.setRowVisibilityState=function(iRowIndex,bShow){var oContentSegments=this.aDomRefSegmentMatrix[this.SEGMENT_ROW.CONTENT],oContentSegment=null;for(var iContentSegment=0;iContentSegment<oContentSegments.length;iContentSegment++){oContentSegment=oContentSegments[iContentSegment];if(oContentSegment){if(oContentSegment&&oContentSegment.childNodes[0]&&oContentSegment.childNodes[0].rows[iRowIndex]){if(bShow){oContentSegment.childNodes[0].rows[iRowIndex].style.display=(UCF_System.sDevice=="ff1")?"table-row":"";}else{oContentSegment.childNodes[0].rows[iRowIndex].style.display="none";}}}}}; UCF_SapTableCS.prototype.setFirstVisibleContentRowIndex=function(iRowIndex){this.iFirstVisibleContentRowIndex=iRowIndex;this.iVisibleFirstRow=this.iFirstVisibleContentRowIndex;}; UCF_SapTableCS.prototype.iGetColumnWidth=function(iColIndex){return this.oGetCellInfo(0,iColIndex).oDomRefCell.offsetWidth;}; UCF_SapTableCS.prototype.setColumnWidth=function(iColIndex,iWidth){var oCellInfo=this.oGetCellInfo(0,iColIndex),oSegment=this.oGetSegmentOfCell(oCellInfo),iFirstInternalColIndexOfSegment=this.iGetFirstInternalColIndexOfSegment(oSegment),iSegmentColIndex=oCellInfo.iColIndex-iFirstInternalColIndexOfSegment,eSegmentColType=this.eGetSegmentColType(oSegment),oSegmentTable=this.oGetSegmentTable(oSegment),iColumnWidth=this.iGetColumnWidth(iColIndex),iSegmentWidth=this.iGetSegmentWidth(oSegment)+(iWidth-iColumnWidth);for(var iRowSegmentIndex=0;iRowSegmentIndex<this.aDomRefSegmentMatrix.length;iRowSegmentIndex++){var oColSegment=this.aDomRefSegmentMatrix[iRowSegmentIndex][eSegmentColType];if(oColSegment){this.setSegmentColumnWidth(oColSegment,iSegmentColIndex,iWidth);this.setSegmentWidth(oColSegment,iSegmentWidth);}}if(eSegmentColType==this.SEGMENT_COL.LEFT_FIXED){this.setHtmlColWidth(this.aGetColsOfHtmlTable(UCF_DomUtil.$(this.oDomRef.getAttribute("bdyId"))),oCellInfo.iColIndex+1, iWidth);}else if(eSegmentColType==this.SEGMENT_COL.RIGHT_FIXED){var aCols=this.aGetColsOfHtmlTable(UCF_DomUtil.$(this.oDomRef.getAttribute("bdyId")));this.setHtmlColWidth(aCols,(aCols.length-2)-(this.iGetCellInfoMatrixLastColIndex()-oCellInfo.iColIndex),iWidth);}this.updateHorizontalScrollUI();};UCF_SapTableCS.prototype.iGetBestCellWidth=function(oCellInfo){var oFirstChild=UCF_DomUtil.oGetFirstElement(oCellInfo.oDomRefCell);if(oFirstChild){var sWidth=UCF_DomUtil.sGetCurrentStyle(oFirstChild,"width");if(!sWidth||sWidth.indexOf("%")==-1){return(oFirstChild.offsetWidth+12);}}return 0;};UCF_SapTableCS.prototype.optimizeColumnWidth=function(iColIndex){var aCellInfos=this.aGetCellInfosOfColumn(iColIndex),iResultWidth=this.MIN_COL_WIDTH;for(var i=0;i<aCellInfos.length;i++){iResultWidth=Math.max(iResultWidth,this.iGetBestCellWidth(aCellInfos[i]));}this.setColumnWidth(iColIndex,iResultWidth);};UCF_SapTableCS.prototype.setVisibleRowCount=function(iVisibleRowCount){if(iVisibleRowCount==this.iVisibleRowCount)return;var iOldResultHeight=this.iRowHeight*this.iVisibleRowCount,iResultHeight=this.iRowHeight*iVisibleRowCount,oContentSegments=this.aDomRefSegmentMatrix[this.SEGMENT_ROW.CONTENT],oContentSegment=null,oFirstFoundSegment=null;this.iVisibleRowCount=iVisibleRowCount;this.iVisibleContentRowCount=this.iVisibleRowCount;oDomRef.setAttribute("vcrc",this.iVisibleRowCount);for(var iContentSegment=0;iContentSegment<oContentSegments.length;iContentSegment++){oContentSegment=oContentSegments[iContentSegment];if(oContentSegment){if(!oFirstFoundSegment){oFirstFoundSegment=oContentSegment;break;}}}if(oFirstFoundSegment){var oSegmentRowContainer=oContentSegment.parentNode.parentNode,iOffset=oSegmentRowContainer.offsetHeight-iOldResultHeight;oSegmentRowContainer.style.height=this.iRowHeight*this.iVisibleRowCount+iOffset;if(this.iFirstVisibleContentRowIndex+this.iVisibleRowCount>this.iContentRowCount){var iNewFirstVisibleContentRowIndex=-1;iNewFirstVisibleContentRowIndex=Math.max(0,this.iContentRowCount-this.iVisibleRowCount);if(iNewFirstVisibleContentRowIndex!=this.iFirstVisibleContentRowIndex){if(this.oScrollV)this.oScrollV.scrollToPosition(iNewFirstVisibleContentRowIndex+1);else this.setVerticalScrollPosition(iNewFirstVisibleContentRowIndex);}}else{this.updateVisibleContentRows();} if(this.oScrollV)this.oScrollV.setVisibleItemCount(this.iVisibleRowCount); if(UCF_System.sDevice=="ff1"){for(var iContentSegment=0;iContentSegment<oContentSegments.length;iContentSegment++){oContentSegment=oContentSegments[iContentSegment];if(oContentSegment){var iOffset=oContentSegment.offsetHeight-iOldResultHeight;oContentSegment.style.height=this.iRowHeight*this.iVisibleRowCount+iOffset;}}}}}; UCF_SapTableCS.prototype.aAttributeNames=["sTooltip","sAccessKey","sHotkeysId"]; UCF_SapTableCS.prototype.aMethodNames=["setRowSelection","setCellSelection","setColumnSelection","getRowSelection","getCellSelection","getColumnSelection"];  UCF_SapTableCS.prototype.sTooltip=''; UCF_SapTableCS.prototype.sAccessKey=''; UCF_SapTableCS.prototype.sHotkeysId=''; UCF_SapTableCS.prototype.setDefaultValues=function(){this.sTooltip='';this.sAccessKey='';this.sHotkeysId='';}; UCF_SapTableCS.prototype.fireRowSelect=function(sId,iRowIndex,sRowUserData,sAccessType){var mParams={Id:sId,RowIndex:iRowIndex,RowUserData:sRowUserData,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.RowSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","RowSelect",mParams);}; UCF_SapTableCS.prototype.fireFilter=function(sId,sCellId){var mParams={Id:sId,CellId:sCellId};this.fireSemanticEvent("SapTableCS","Filter",mParams);}; UCF_SapTableCS.prototype.fireCellSelect=function(sId,sCellId,sCellType,iRowIndex,iColIndex,sRowUserData,sAccessType){var mParams={Id:sId,CellId:sCellId,CellType:sCellType,RowIndex:iRowIndex,ColIndex:iColIndex,RowUserData:sRowUserData,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","CellSelect",mParams);}; UCF_SapTableCS.prototype.fireCellDoubleClick=function(sId,sCellId,sCellType,iRowIndex,iColIndex,sRowUserData,sAccessType){var mParams={Id:sId,CellId:sCellId,CellType:sCellType,RowIndex:iRowIndex,ColIndex:iColIndex,RowUserData:sRowUserData,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellDoubleClick)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","CellDoubleClick",mParams);}; UCF_SapTableCS.prototype.fireColSort=function(sId,sCellId,sAccessType){var mParams={Id:sId,CellId:sCellId,AccessType:sAccessType};this.fireSemanticEvent("SapTableCS","ColSort",mParams);}; UCF_SapTableCS.prototype.fireHeaderCellSelect=function(sId,sCellId,sAccessType){var mParams={Id:sId,CellId:sCellId,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.HeaderCellSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","HeaderCellSelect",mParams);}; UCF_SapTableCS.prototype.fireCellExpand=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellExpand)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","CellExpand",mParams);}; UCF_SapTableCS.prototype.fireCellCollapse=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellCollapse)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","CellCollapse",mParams);}; UCF_SapTableCS.prototype.fireCellIconSelect=function(sId,sRowUserData,sCellId){var mParams={Id:sId,RowUserData:sRowUserData,CellId:sCellId};this.fireSemanticEvent("SapTableCS","CellIconSelect",mParams);}; UCF_SapTableCS.prototype.fireSelectionMenuItemSelect=function(sId,sMenuItemId){var mParams={Id:sId,MenuItemId:sMenuItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.SelectionMenuItemSelect)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","SelectionMenuItemSelect",mParams);}; UCF_SapTableCS.prototype.fireCellContextMenu=function(sId,sCellId,iRowIndex,iColIndex,iPosX,iPosY,sRowUserData,bCtrl,bAlt){var mParams={Id:sId,CellId:sCellId,RowIndex:iRowIndex,ColIndex:iColIndex,PosX:iPosX,PosY:iPosY,RowUserData:sRowUserData,Ctrl:bCtrl,Alt:bAlt};this.fireSemanticEvent("SapTableCS","CellContextMenu",mParams);}; UCF_SapTableCS.prototype.fireVerticalScroll=function(sId,iFirstVisibleItemIndex,sAction,sAccessType){var mParams={Id:sId,FirstVisibleItemIndex:iFirstVisibleItemIndex,Action:sAction,AccessType:sAccessType};this.fireSemanticEvent("SapTableCS","VerticalScroll",mParams);}; UCF_SapTableCS.prototype.fireHorizontalScroll=function(sId,iFirstVisibleItemIndex,sAction,sAccessType){var mParams={Id:sId,FirstVisibleItemIndex:iFirstVisibleItemIndex,Action:sAction,AccessType:sAccessType};this.fireSemanticEvent("SapTableCS","HorizontalScroll",mParams);}; UCF_SapTableCS.prototype.fireClipboardSelectionDataGet=function(sId){var mParams={Id:sId};this.fireSemanticEvent("SapTableCS","ClipboardSelectionDataGet",mParams);}; UCF_SapTableCS.prototype.fireColumnReorder=function(sId,sMovedColId,sRefColId,sInsertMode){var mParams={Id:sId,MovedColId:sMovedColId,RefColId:sRefColId,InsertMode:sInsertMode};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ColumnReorder)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","ColumnReorder",mParams);}; UCF_SapTableCS.prototype.fireColumnResize=function(sId,sCellId,iWidth){var mParams={Id:sId,CellId:sCellId,Width:iWidth};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ColumnResize)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","ColumnResize",mParams);}; UCF_SapTableCS.prototype.fireRowCreate=function(sId,iColIndex){var mParams={Id:sId,ColIndex:iColIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.RowCreate)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","RowCreate",mParams);}; UCF_SapTableCS.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("SapTableCS","Hotkey",mParams);}; UCF_SapTableCS.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("SapTableCS","Drag",mParams);}; UCF_SapTableCS.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,iRowIndex,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,RowIndex:iRowIndex,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("SapTableCS","Drop",mParams);}; UCF_SapTableCS.prototype.fireConfig=function(sId){var mParams={Id:sId};this.fireSemanticEvent("SapTableCS","Config",mParams);};
 function UCF_NavigationListGroup(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_NavigationListGroup.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_NavigationListGroup.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_NavigationListGroup.prototype.aAttributeNames=["sTitle","bIsClickable","sTooltip"]; UCF_NavigationListGroup.prototype.aMethodNames=[];  UCF_NavigationListGroup.prototype.sTitle=''; UCF_NavigationListGroup.prototype.bIsClickable=false; UCF_NavigationListGroup.prototype.sTooltip=''; UCF_NavigationListGroup.prototype.setDefaultValues=function(){this.sTitle='';this.bIsClickable=false;this.sTooltip='';};
 function UCF_Link(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bIgnoreDefaultButton=true; this.bAllowTextSelection=true;};UCF_Link.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Link.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled||(this.oDomRef.getAttribute("st")=="d0"))return; this.fireActivate(this.sId);oBrowserEvent.cancelBubble();if(!this.bHasReference){oBrowserEvent.cancel();}else{var url=this.oDomRef.href,windowId=this.oDomRef.target;if(url&&windowId!=""&&windowId!="_blank"&&windowId!="_top"&&windowId!="_parent"&&windowId!="_self"){ var winRef=window.open(url,windowId);if(winRef){try{winRef.focus();}catch(e){};}oBrowserEvent.cancel();}}}; UCF_Link.prototype.onlsselect=function(oBrowserEvent){if(!this.bEnabled||(this.oDomRef.getAttribute("st")=="d0"))return; this.oDomRef.click(); oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_Link.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sTooltip=this.sTooltip,sCaptionTooltip="";var enabled=this.bEnabled;var sLabel="";if(this.oDomRef.getAttribute("st")=="d0"){oAccessibilityHelper.setEmpty(true);enabled=false;} if(this.sLabelText&&this.sLabelText!=""){sLabel=this.sLabelText;}else{sLabel=oAccessibilityHelper.sGetLabelText(this.sId);}if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setHotkey(this.sHotkey);oAccessibilityHelper.setEnabled(enabled);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef)); if(this.bHasLinkCaption&&this.oDomRef.getAttribute("tt"))sCaptionTooltip=this.oDomRef.getAttribute("tt"); if(sTooltip!=""&&sCaptionTooltip!="")sTooltip=sTooltip+" - "+sCaptionTooltip;else sTooltip=sTooltip+sCaptionTooltip;oAccessibilityHelper.setTooltip(sTooltip);oAccessibilityHelper.setControlType("LN");oAccessibilityHelper.addEnabledTutor("LN_TUT",enabled);}; UCF_Link.prototype.aAttributeNames=["sTooltip","sText","bHasReference","bEnabled","bHasLinkCaption","sLabelText","sAccessKey","sHotkey"]; UCF_Link.prototype.aMethodNames=[];  UCF_Link.prototype.sTooltip=''; UCF_Link.prototype.sText=''; UCF_Link.prototype.bHasReference=false; UCF_Link.prototype.bEnabled=true; UCF_Link.prototype.bHasLinkCaption=false; UCF_Link.prototype.sLabelText=''; UCF_Link.prototype.sAccessKey=''; UCF_Link.prototype.sHotkey="NONE"; UCF_Link.prototype.setDefaultValues=function(){this.sTooltip='';this.sText='';this.bHasReference=false;this.bEnabled=true;this.bHasLinkCaption=false;this.sLabelText='';this.sAccessKey='';this.sHotkey="NONE";}; UCF_Link.prototype.fireActivate=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Link","Activate",mParams);}; UCF_Link.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.DoubleClick)this.oLS.markDirty();this.fireSemanticEvent("Link","DoubleClick",mParams);};
function UCF_SapTableBaseCell(oDomRef,oTable){if(arguments.length==0)return;UCF_ControlInfo.apply(this,[oDomRef]);this.oTable=oTable;this.sRowInfo=null;this.sColumnInfo=null;this.sCellTutorInfo=null;this.oCellInfo=null;var sId=oDomRef.getAttribute("id");this.sId=(sId)?sId:"";this.oCellInfo=this.oTable.oGetCellInfoByDomRef(this.oDomRef);var oHeaderCellInfo=this.oTable.oGetHeaderCellInfoByDomRef(this.oDomRef);if(oHeaderCellInfo&&this.oTable.eGetCellType(oHeaderCellInfo)!=this.oTable.SUBCONTROL.HEADER_CELL)this.oHeader=new(UCF_ClassLoader.oGetClass("UCF_SapTableHeaderCell"))(oHeaderCellInfo.oDomRefCell,this.oTable);else this.oHeader=null;this.oAccessibilityHelper=null;};UCF_SapTableBaseCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_ControlInfo"))();UCF_SapTableBaseCell.prototype.SELECTION_STATE={NOT_SELECTED:0,PRIMARY:1,SECONDARY:2,COLUMN:3};UCF_SapTableBaseCell.prototype.setAccessibilityInfo=function(oSourceControl,oAccessInfo,oAccessibilityHelper){ if(this.oDomRef.getAttribute("skpCAnnounce")){return;}if(oSourceControl!=this.oTable){this.oAccessibilityHelper=new(UCF_ClassLoader.oGetClass("UCF_AccessibilityHelper"))(this.oTable.oLS);oAccessibilityHelper.addContainerHelper(this.oAccessibilityHelper);}else{ if(oAccessInfo.oBrowserEvent&&oAccessInfo.oBrowserEvent.oGetSource()&&oAccessInfo.oBrowserEvent.oGetSource().getAttribute("empty")){oAccessibilityHelper.setEmpty(true);this.oAccessibilityHelper=new(UCF_ClassLoader.oGetClass("UCF_AccessibilityHelper"))(this.oTable.oLS);oAccessibilityHelper.addContainerHelper(this.oAccessibilityHelper);}else{this.oAccessibilityHelper=oAccessibilityHelper;}}this.oAccessInfo=oAccessInfo;var sRowAccDescription=this.sSpaceCleanUp(this.sGetRowAccDescription()),sRowInfo=this.sSpaceCleanUp(this.sGetRowInfo()),sColumnInfo=this.sSpaceCleanUp(this.sGetColumnInfo()),sTutorInfo=this.sSpaceCleanUp(this.sGetTutorInfo()); if(!this.oTable.bEnabled)this.oAccessibilityHelper.setEnabled(false); this.setSemanticColors(); if(this.oTable.bEnabled&&sTutorInfo)this.oAccessibilityHelper.addTutor(sTutorInfo);if(sRowAccDescription){ this.oAccessibilityHelper.setText(sRowAccDescription);}else if(sRowInfo&&sColumnInfo){this.oAccessibilityHelper.setControlType("ST_C",[sRowInfo,sColumnInfo]);}else if(sRowInfo){this.oAccessibilityHelper.setControlType("ST_SC",[sRowInfo]);}else if(sColumnInfo){this.oAccessibilityHelper.setText(sColumnInfo);} if(this.oHeader&&this.oHeader.bRequired)this.oAccessibilityHelper.setRequired(true); this.setCellState();this.oAccessibilityHelper=null;this.oAccessInfo=null;};UCF_SapTableBaseCell.prototype.setCellState=function(){};UCF_SapTableBaseCell.prototype.setCellInfo=function(oCellInfo){this.oCellInfo=oCellInfo;if(oCellInfo){if(oCellInfo.bSelectionClientModified){ var SELECTION_LAYER=this.oTable.SELECTION_LAYER;if(oCellInfo.iSelectionState&(SELECTION_LAYER.COLUMN|SELECTION_LAYER.CELL|SELECTION_LAYER.ROW)){this.bIsSecondarySelected=true;}else{this.bIsSecondarySelected=false;}if(oCellInfo.iSelectionState&SELECTION_LAYER.ROW_PRIMARY){this.bIsSelected=true;}else{this.bIsSelected=false;}}}};UCF_SapTableBaseCell.prototype.mGetSelectionState=function(){if(this.bIsSelected)return this.SELECTION_STATE.PRIMARY;else if(this.bIsSecondarySelected)return this.SELECTION_STATE.SECONDARY;else return this.SELECTION_STATE.NOT_SELECTED;};UCF_SapTableBaseCell.prototype.sGetRowInfo=function(){var iRowIndex=this.oTable.iGetAppDefinedRowIndex(this.oCellInfo);if(!isNaN(iRowIndex)&&iRowIndex>=0)return new String(iRowIndex+(this.oTable.bZeroBasedScrolling?1:0));else return "";};UCF_SapTableBaseCell.prototype.sGetRowAccDescription=function(){var sAccDescription=this.oCellInfo.oDomRefRow.getAttribute("t");return sAccDescription?sAccDescription:null;};UCF_SapTableBaseCell.prototype.sGetColumnInfo=function(){var sColumnInfo="";if(this.sHeaderCellIds){var aHeaders=this.sHeaderCellIds.split(" "),oCurrDomRef=null;for(var i=0;i<aHeaders.length;i++){oCurrDomRef=UCF_DomUtil.$(aHeaders[i]);if(oCurrDomRef){sColumnInfo+=((i==0)?"":" ")+this.sGetHeaderInfo(new(UCF_ClassLoader.oGetClass("UCF_SapTableHeaderCell"))(oCurrDomRef,this.oTable));}}}else if(this.oHeader){sColumnInfo+=this.sGetHeaderInfo(this.oHeader);}else{var iColumnIndex=this.oTable.iGetAppDefinedColIndex(this.oCellInfo);if(!isNaN(iColumnIndex)&&iColumnIndex>=0)sColumnInfo+=iColumnIndex;}return sColumnInfo;};UCF_SapTableBaseCell.prototype.sGetHeaderInfo=function(oHeader){if(oHeader.sAccessibilityDescription){return oHeader.sAccessibilityDescription;}else{var oDomRefHeader=oHeader.oDomRef,sText=UCF_DomUtil.sGetInnerText(oDomRefHeader);if(sText&&oHeader.bRequired&&sText.indexOf("*")==0){sText=sText.substr(1);}return sText;}return "";};UCF_SapTableBaseCell.prototype.sGetCellTypeInfo=function(){return "";};UCF_SapTableBaseCell.prototype.setSemanticColors=function(){var mSelectionState=this.mGetSelectionState(),oLegendDomRef=UCF_DomUtil.$(this.oTable.sId+'-legend');if(oLegendDomRef)this.oAccessibilityHelper.setLegendJSDomRef(oLegendDomRef);if(mSelectionState==this.SELECTION_STATE.PRIMARY||mSelectionState==this.SELECTION_STATE.SECONDARY||mSelectionState==this.SELECTION_STATE.COLUMN){this.oAccessibilityHelper.addSemantic(this.oAccessibilityHelper.E_SEMANTIC.Selected);}if(this.sCellDesign)this.oAccessibilityHelper.addSemantic(this.sCellDesign);};UCF_SapTableBaseCell.prototype.sGetTutorInfo=function(){return "";};UCF_SapTableBaseCell.prototype.sSpaceCleanUp=function(sText){if(sText)return sText.replace(/\s+$/,"").replace(/^\s+/,"");else return "";};
  function UCF_SplitterCell(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);var oSplitterRow=this.oGetParent(),oSplitter=oSplitterRow.oGetParent();if(this.sScrollbars!="NONE"&&oSplitter.mEvents.Scroll){this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oDomRef);this.attachBrowserEvent("scroll",this.oDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onAreaScroll");this.addDelegate(this.oScrollArea);} this.setDefaultButtonId(this.sDefaultButtonId);  if(this.bAttachBrowserResize&&oSplitter.mEvents.Resize){this.iWidth=this.oDomRef.offsetWidth;this.iHeight=this.oDomRef.offsetHeight;this.attachBrowserEvent("resize",this.oDomRef);}};UCF_SplitterCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_SplitterCell.prototype.onAreaScroll=function(oEvent){var oSplitterRow=this.oGetParent(),oSplitter=oSplitterRow.oGetParent(),iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");oSplitter.fireScroll(oSplitter.sId,this.sId,iScrollTop,iScrollLeft);}; UCF_SplitterCell.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_SplitterCell.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}if(this.bAttachBrowserResize){this.detachBrowserEvent("resize",this.oDomRef);}}; UCF_SplitterCell.prototype.onresize=function(oBrowserEvent){var iWidth=this.oDomRef.offsetWidth;var iHeight=this.oDomRef.offsetHeight; var iWidthDelta=iWidth-this.iWidth;var iHeightDelta=iHeight-this.iHeight;if(iWidthDelta!=0||iHeightDelta!=0){var oSplitterRow=this.oGetParent(),oSplitter=oSplitterRow.oGetParent();this.iWidth=iWidth;this.iHeight=iHeight;oSplitter.fireResize(oSplitter.sId,this.sId,iWidth,iHeight);}else{}oBrowserEvent.cancelBubble();}; UCF_SplitterCell.prototype.aAttributeNames=["sDefaultButtonId","iScrollTop","iScrollLeft","bAttachBrowserResize"]; UCF_SplitterCell.prototype.aMethodNames=[];  UCF_SplitterCell.prototype.sDefaultButtonId=''; UCF_SplitterCell.prototype.iScrollTop=0; UCF_SplitterCell.prototype.iScrollLeft=0; UCF_SplitterCell.prototype.bAttachBrowserResize=false; UCF_SplitterCell.prototype.setDefaultValues=function(){this.sDefaultButtonId='';this.iScrollTop=0;this.iScrollLeft=0;this.bAttachBrowserResize=false;};
 function UCF_DropTargetInfo(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_DropTargetInfo.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_DropTargetInfo.prototype.sGetTags=function(){return this.sTags;}; UCF_DropTargetInfo.prototype.aAttributeNames=["sTags"]; UCF_DropTargetInfo.prototype.aMethodNames=[];  UCF_DropTargetInfo.prototype.sTags=''; UCF_DropTargetInfo.prototype.setDefaultValues=function(){this.sTags='';};
 function UCF_Paginator(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oInputField=UCF_DomUtil.$(this.sId+'-inp');if(this.oInputField){this.attachBrowserEvent("change",this.oInputField);}};UCF_Paginator.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Paginator.prototype.destroy=function(){UCF_Control.prototype.destroy.apply(this,arguments);if(this.oInputField){this.detachBrowserEvent("change",this.oInputField);}}; UCF_Paginator.prototype.onactivate=function(oBrowserEvent){if(this.bReadonly&&!UCF_System.bIs508)return;var sFocusStyle="lsEdFieldFocus",oSource=oBrowserEvent.oGetSource();if(oSource.getAttribute("id").indexOf("-inp")<0)return;this.sStyles=oSource.className;if(this.bReadonly||!this.bEnabled){sFocusStyle+="Dsbl";}UCF_DomUtil.addClass(oSource,sFocusStyle);}; UCF_Paginator.prototype.ondeactivate=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.getAttribute("id").indexOf("-inp")<0||!this.sStyles)return;oSource.className=this.sStyles;}; UCF_Paginator.prototype.onchange=function(oBrowserEvent){this.fireFieldChange(this.sId,this.oInputField.value);}; UCF_Paginator.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");var sConId=oSource.getAttribute("ConnectedControlId");var sOpId=oSource.getAttribute("OptionMenuId"); if(sSourceId.indexOf("-menu")>-1){this.toggleMenu(sSourceId,sConId,sOpId);}if(oSource.className.indexOf("Begin")>-1){this.firePageTop(this.sId,sConId);}if(oSource.className.indexOf("PrevPage")>-1){this.firePagePrevious(this.sId,sConId);}if(oSource.className.indexOf("PrevItem")>-1){this.fireItemPrevious(this.sId,sConId);}if(oSource.className.indexOf("NxtItem")>-1){this.fireItemNext(this.sId,sConId);}if(oSource.className.indexOf("NxtPage")>-1){this.firePageNext(this.sId,sConId);}if(oSource.className.indexOf("End")>-1){this.firePageEnd(this.sId,sConId);}if(oSource.className.indexOf("AA")>-1){this.fireNextYear(this.sId,sConId);}if(oSource.className.indexOf("RA")>-1){this.firePreviousYear(this.sId,sConId);}}; UCF_Paginator.prototype.onkeydown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");var sConId=oSource.getAttribute("ConnectedControlId");var iKeyCode=oBrowserEvent.iKeyCode();var sOpId=oSource.getAttribute("OptionMenuId"); if((iKeyCode==UCF_KeyCodes.SPACE||(iKeyCode==UCF_KeyCodes.ARROW_DOWN&&oBrowserEvent.bAlt()))&&sSourceId.indexOf("-menu")>-1){this.toggleMenu(sSourceId,sConId,sOpId);} if(iKeyCode==UCF_KeyCodes.SPACE){if(oSource.className.indexOf("Begin")>-1){this.firePageTop(this.sId,sConId);}if(oSource.className.indexOf("PrevPage")>-1){this.firePagePrevious(this.sId,sConId);}if(oSource.className.indexOf("PrevItem")>-1){this.fireItemPrevious(this.sId,sConId);}if(oSource.className.indexOf("NxtItem")>-1){this.fireItemNext(this.sId,sConId);}if(oSource.className.indexOf("NxtPage")>-1){this.firePageNext(this.sId,sConId);}if(oSource.className.indexOf("End")>-1){this.firePageEnd(this.sId,sConId);}if(oSource.className.indexOf("AA")>-1){this.fireNextYear(this.sId,sConId);}if(oSource.className.indexOf("RA")>-1){this.firePreviousYear(this.sId,sConId);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}if(iKeyCode==UCF_KeyCodes.ENTER){if(oSource.className.indexOf("Input")>-1){this.fireFieldChange(this.sId,this.oInputField.value);}}}; UCF_Paginator.prototype.toggleMenu=function(){var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); var sOpId=oMenuButtonRef.getAttribute("OptionMenuId");if(!oMenuButtonRef)return;if(!this.oOptionMenu){this.oOptionMenu=this.oLS.oControlFactory.oGetControlById(sOpId,true);if(!this.oOptionMenu)return;this.oOptionMenu.setOpenerRef(oMenuButtonRef);this.oOptionMenu.setOpenerId(this.sId);this.oOptionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oOptionMenu.setOffsetTop(-1);this.oOptionMenu.setOffsetLeft(-1);this.oOptionMenu.attachEvent(this.oOptionMenu.E_EVENTS.Close,this,"onMenuClose")}if(this.bOptionMenuIsOpened){this.oOptionMenu.close();}else{this.oOptionMenu.open();}}; UCF_Paginator.prototype.onMenuClose=function(oEvent){var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); this.bOptionMenuIsOpened=false;oMenuButtonRef.focus();}; UCF_Paginator.prototype.setEnabled=function(){if(this.bEnabled)return;this.oDomRef.className=this.oDomRef.className+"Dsbl";}; UCF_Paginator.prototype.setDisabled=function(){if(this.bEnabled)return;this.oDomRef.className=this.oDomRef.className.replace("Dsbl","");}; UCF_Paginator.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.className.indexOf("Input")>-1){oAccessibilityHelper.setControlType("I");if(this.bReadonly){oAccessibilityHelper.addTutor("READONLY")}else{oAccessibilityHelper.addTutor("PG_INPUT");}if(this.sPageIndicatorText!=""){oAccessibilityHelper.addTooltip(this.sPageIndicatorText+" "+this.iVisibleIndex+" of "+this.iMaximumIndex);}else{oAccessibilityHelper.addTooltip(this.sNavigationText+" "+this.iVisibleIndex+" of "+this.iMaximumIndex);}}else if((this.bHasFreetext)&&(oSource.className.indexOf("Txt")>-1))oAccessibilityHelper.setTooltip(this.sFreetext);else{oAccessibilityHelper.setControlType("B");if(oSource.className.indexOf("Begin")>-1)oAccessibilityHelper.addTutor("PG_IBEGIN");if(oSource.className.indexOf("PrevPage")>-1)oAccessibilityHelper.addTutor("PG_PPREV");if((this.sNavigationType!="CALENDAR")&&(oSource.className.indexOf("PrevItem")>-1))oAccessibilityHelper.addTutor("PG_IPREV");if((this.sNavigationType=="CALENDAR")&&(oSource.className.indexOf("PrevItem")>-1))oAccessibilityHelper.addTutor("DN_PREV");if((this.sNavigationType!="CALENDAR")&&(oSource.className.indexOf("NxtItem")>-1))oAccessibilityHelper.addTutor("PG_INEXT");if((this.sNavigationType=="CALENDAR")&&(oSource.className.indexOf("NxtItem")>-1))oAccessibilityHelper.addTutor("DN_NEXT");if(oSource.className.indexOf("NxtPage")>-1)oAccessibilityHelper.addTutor("PG_PNEXT");if(oSource.className.indexOf("End")>-1)oAccessibilityHelper.addTutor("PG_IEND");if((this.sNavigationType!="CALENDAR")&&(oSource.className.indexOf("AA")>-1))oAccessibilityHelper.addTutor("PG_AA");if((this.sNavigationType=="CALENDAR")&&(oSource.className.indexOf("AA")>-1))oAccessibilityHelper.addTutor("DN_YNEXT");if((this.sNavigationType!="CALENDAR")&&(oSource.className.indexOf("RA")>-1))oAccessibilityHelper.addTutor("PG_RA");if((this.sNavigationType=="CALENDAR")&&(oSource.className.indexOf("RA")>-1))oAccessibilityHelper.addTutor("DN_YPREV");if(oSource.className.indexOf("MenuIco")>-1)oAccessibilityHelper.addTutor("PG_MNU");if(oSource.className.indexOf("Dsbl")>-1)oAccessibilityHelper.addTutor("DISABLED");else{oAccessibilityHelper.addTutor("B_TUT");}}}; UCF_Paginator.prototype.aAttributeNames=["iVisibleIndex","iMaximumIndex","sPageIndicatorText","bHasFreetext","sFreetext","sNavigationType","sNavigationText","bReadonly","sTooltipCalendarDoubleNext","sTooltipCalendarDoublePrev","sTooltipCalendarNext","sTooltipCalendarPrev"]; UCF_Paginator.prototype.aMethodNames=["openMenu"];  UCF_Paginator.prototype.iVisibleIndex=-1; UCF_Paginator.prototype.iMaximumIndex=0; UCF_Paginator.prototype.sPageIndicatorText=''; UCF_Paginator.prototype.bHasFreetext=false; UCF_Paginator.prototype.sFreetext=''; UCF_Paginator.prototype.sNavigationType="ITEM"; UCF_Paginator.prototype.sNavigationText="PAGE"; UCF_Paginator.prototype.bReadonly=false; UCF_Paginator.prototype.sTooltipCalendarDoubleNext=''; UCF_Paginator.prototype.sTooltipCalendarDoublePrev=''; UCF_Paginator.prototype.sTooltipCalendarNext=''; UCF_Paginator.prototype.sTooltipCalendarPrev=''; UCF_Paginator.prototype.setDefaultValues=function(){this.iVisibleIndex=-1;this.iMaximumIndex=0;this.sPageIndicatorText='';this.bHasFreetext=false;this.sFreetext='';this.sNavigationType="ITEM";this.sNavigationText="PAGE";this.bReadonly=false;this.sTooltipCalendarDoubleNext='';this.sTooltipCalendarDoublePrev='';this.sTooltipCalendarNext='';this.sTooltipCalendarPrev='';}; UCF_Paginator.prototype.firePageTop=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","PageTop",mParams);}; UCF_Paginator.prototype.firePageEnd=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","PageEnd",mParams);}; UCF_Paginator.prototype.firePreviousYear=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","PreviousYear",mParams);}; UCF_Paginator.prototype.firePageNext=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","PageNext",mParams);}; UCF_Paginator.prototype.fireNextYear=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","NextYear",mParams);}; UCF_Paginator.prototype.firePagePrevious=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","PagePrevious",mParams);}; UCF_Paginator.prototype.fireItemNext=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","ItemNext",mParams);}; UCF_Paginator.prototype.fireItemPrevious=function(sId,sConnectedControlId){var mParams={Id:sId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","ItemPrevious",mParams);}; UCF_Paginator.prototype.fireFieldChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.FieldChange)this.oLS.markDirty();this.fireSemanticEvent("Paginator","FieldChange",mParams);}; UCF_Paginator.prototype.fireMenuOpen=function(sId,sOptionMenuId,sConnectedControlId){var mParams={Id:sId,OptionMenuId:sOptionMenuId,ConnectedControlId:sConnectedControlId};this.fireSemanticEvent("Paginator","MenuOpen",mParams);};
 function UCF_Date(iYear,iMonth,iDate,iHours,iMinutes,iSeconds){UCF_Object.apply(this);this.oDate=new Date();if(typeof(iYear)=="number"&&iYear==Math.floor(iYear)){this.oDate.setFullYear(iYear);}if(typeof(iDate)=="number"&&iDate==Math.floor(iDate)){this.oDate.setDate(iDate);}if(typeof(iMonth)=="number"&&iMonth==Math.floor(iMonth)){this.oDate.setMonth(iMonth);}if(typeof(iHours)=="number"&&iHours==Math.floor(iHours)){this.oDate.setHours(iHours);}else{this.oDate.setHours(0);}if(typeof(iMinutes)=="number"&&iMinutes==Math.floor(iMinutes)){this.oDate.setMinutes(iMinutes);}else{this.oDate.setMinutes(0);}if(typeof(iSeconds)=="number"&&iSeconds==Math.floor(iSeconds)){this.oDate.setSeconds(iSeconds);}else{this.oDate.setSeconds(0);}this.oDate.setMilliseconds(0);this.iMinimalDaysInFirstWeek=4;this.iFirstDayOfWeek=0;this.iFirstDayOfFirstWeek=-1;this.iFirstDayOfFirstWeekYear=-1;if(UCF_System&&typeof(UCF_System.iFirstDayOfWeek)=="number"){this.iFirstDayOfWeek=UCF_System.iFirstDayOfWeek;}if(UCF_System&&typeof(UCF_System.iMinimalDaysInFirstWeek)=="number"){this.iMinimalDaysInFirstWeek=UCF_System.iMinimalDaysInFirstWeek;}this.sFormat="MM/dd/yyyy";if(UCF_Date.oMessageBundle==null){UCF_Date.oMessageBundle=new(UCF_ClassLoader.oGetClass("UCF_MessageBundle"))();UCF_Date.oMessageBundle.loadTexts();  var sLowerCaseFormatLanguages=",mk,hu,sv,is,cs,it,no,ro,nl,ko,ru,lv,iw,hr,et,fi,es,be,ca,fr,sr,uk,vi,sq,ar,ja,sl,sk,da,pl,",sLoadedLanguage=UCF_Date.oMessageBundle.sGetLanguage();if(sLowerCaseFormatLanguages.indexOf(","+sLoadedLanguage.substring(0,2)+",")>-1){var bToLowerLanguage=true;}for(var i=0;i<12;i++){UCF_Date.aMonthNames[i]=UCF_Date.oMessageBundle.sGetText("SAPUR_"+UCF_Date.MONTHNAMES[i]);UCF_Date.aMonthNames3[i]=UCF_Date.aMonthNames[i].substring(0,3);if(bToLowerLanguage){UCF_Date.aFormatMonthNames[i]=UCF_Date.aMonthNames[i].toLowerCase();UCF_Date.aFormatMonthNames3[i]=UCF_Date.aMonthNames[i].substring(0,3).toLowerCase();}else{UCF_Date.aFormatMonthNames[i]=UCF_Date.aMonthNames[i];UCF_Date.aFormatMonthNames3[i]=UCF_Date.aMonthNames[i].substring(0,3);}}for(var i=0;i<7;i++){UCF_Date.aDayNames[i]=UCF_Date.oMessageBundle.sGetText("SAPUR_"+UCF_Date.DAYNAMES[i]);UCF_Date.aDayNamesAbbrev[i]=UCF_Date.oMessageBundle.sGetText("SAPUR_"+UCF_Date.DAYNAMES[i]+"_ABBREV");UCF_Date.aDayNames2[i]=UCF_Date.aDayNames[i].substring(0,2);UCF_Date.aDayNames3[i]=UCF_Date.aDayNames[i].substring(0,3);if(bToLowerLanguage){UCF_Date.aFormatDayNames[i]=UCF_Date.aDayNames[i].toLowerCase();UCF_Date.aFormatDayNames3[i]=UCF_Date.aDayNames[i].substring(0,3).toLowerCase();}else{UCF_Date.aFormatDayNames[i]=UCF_Date.aDayNames[i];UCF_Date.aFormatDayNames3[i]=UCF_Date.aDayNames[i].substring(0,3);}}}};UCF_Date.prototype=new UCF_Object(); UCF_Date.prototype.DAY=86400000; UCF_Date.prototype.WEEK=86400000*7;  UCF_Date.prototype.YEAR2DIGITTHRESHOLD=30; UCF_Date.prototype.MINYEAR=1;UCF_Date.prototype.MAXYEAR=9999; UCF_Date.oMessageBundle=null;UCF_Date.MONTHNAMES=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"];UCF_Date.aMonthNames3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];UCF_Date.aFormatMonthNames3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];UCF_Date.aMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];UCF_Date.aFormatMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]; UCF_Date.DAYNAMES=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];UCF_Date.aDayNames3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];UCF_Date.aFormatDayNames3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];UCF_Date.aDayNames2=["Su","Mo","Tu","We","Th","Fr","Sa"];UCF_Date.aDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];UCF_Date.aFormatDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];UCF_Date.aDayNamesAbbrev=["Su","Mo","Tu","We","Th","Fr","Sa"]; UCF_Date.prototype.iGetYear=function(){return this.oDate.getFullYear();}; UCF_Date.prototype.setYear=function(iYear){this.oDate.setFullYear(iYear);return this;}; UCF_Date.prototype.iGetMonth=function(){return this.oDate.getMonth();}; UCF_Date.prototype.setMonth=function(iMonth){this.oDate.setMonth(iMonth);return this;}; UCF_Date.prototype.iGetDate=function(){return this.oDate.getDate();}; UCF_Date.prototype.setDate=function(iDate){this.oDate.setDate(iDate);return this;}; UCF_Date.prototype.getFirstDayOfFirstWeek=function(iFullYear){var oFirstDay=new Date(iFullYear,0,this.iMinimalDaysInFirstWeek,0,0,0);var iFirstDay=oFirstDay.getDay();var iDiff=iFirstDay-this.iFirstDayOfWeek;if(iDiff<0)iDiff+=7;var ilFirstDayOfFirstWeek=oFirstDay.getTime()-(iDiff)*this.DAY;return ilFirstDayOfFirstWeek;}; UCF_Date.prototype.iGetWeek=function(){if(this.iFirstDayOfFirstWeek==-1||this.iFirstDayOfFirstWeekYear!=this.oDate.getFullYear()){this.iFirstDayOfFirstWeek=this.getFirstDayOfFirstWeek(this.oDate.getFullYear());this.iFirstDayOfFirstWeekYear=this.oDate.getFullYear();}var iWeekNum=Math.floor((this.oDate.getTime()-this.iFirstDayOfFirstWeek)/ this.WEEK+.5)+1;if(iWeekNum>=53){var itFirstDayOfFirstYear=this.getFirstDayOfFirstWeek(this.oDate.getFullYear()+1);if(itFirstDayOfFirstYear-this.oDate.getTime()<this.WEEK)iWeekNum=1;}return iWeekNum;}; UCF_Date.prototype.iGetDay=function(){return this.oDate.getDay();}; UCF_Date.prototype.iGetTime=function(){return this.oDate.getTime();}; UCF_Date.prototype.setTime=function(iTime){this.oDate.setTime(iTime);return this;}; UCF_Date.prototype.iGetHours=function(){return this.oDate.getHours();}; UCF_Date.prototype.setHours=function(iHours){this.oDate.setHours(iHours);return this;}; UCF_Date.prototype.iGetMinutes=function(){return this.oDate.getMinutes();}; UCF_Date.prototype.setMinutes=function(iMinutes){this.oDate.setMinutes(iMinutes);return this;}; UCF_Date.prototype.iGetSeconds=function(){return this.oDate.getSeconds();}; UCF_Date.prototype.setSeconds=function(iSeconds){this.oDate.setSeconds(iSeconds);return this;}; UCF_Date.prototype.iGetMilliseconds=function(){return this.oDate.getMiliseconds();}; UCF_Date.prototype.setMilliseconds=function(iMilliseconds){this.oDate.setMiliseconds(iMilliseconds);return this;}; UCF_Date.prototype.iGetFirstDayOfWeek=function(){return this.iFirstDayOfWeek;}; UCF_Date.prototype.setFirstDayOfWeek=function(iFirstDayOfWeek){this.iFirstDayOfWeek=iFirstDayOfWeek;return this;}; UCF_Date.prototype.addDays=function(iNumberOfDays){var iOldDate=this.oDate.getDate(),iHours=this.oDate.getHours();this.oDate.setHours(12);this.oDate.setDate(this.oDate.getDate()+iNumberOfDays);this.oDate.setHours(iHours); if(iHours<this.oDate.getHours()){    this.oDate.setHours(iHours+1); this.addDays(iNumberOfDays);}return this;}; UCF_Date.prototype.addMonths=function(iNumberOfMonths){var iHours=this.oDate.getHours();var iDate=this.oDate.getDate();this.oDate.setHours(12);this.oDate.setDate(15+(30*iNumberOfMonths));var iMonth=this.oDate.getMonth();this.oDate.setDate(iDate);if(iMonth<this.oDate.getMonth()){this.oDate.setDate(iDate);}this.oDate.setHours(iHours);return this;}; UCF_Date.prototype.bGetLeapYear=function(){var iYear=this.oDate.getFullYear();return((iYear % 400==0)||((iYear % 4==0)&&(iYear % 100!=0)));}; UCF_Date.prototype.iGetMinimalDaysInFirstWeek=function(){return this.iMinimalDaysInFirstWeek;}; UCF_Date.prototype.setMinimalDaysInFirstWeek=function(iMinimalDaysInFirstWeek){this.iMinimalDaysInFirstWeek=iMinimalDaysInFirstWeek;return this;}; UCF_Date.prototype.oGetStartOfWeekDate=function(){var iDay=this.oDate.getDay(); var oWeekStartDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();oWeekStartDate.setTime(this.iGetTime());oWeekStartDate.setFirstDayOfWeek(this.iFirstDayOfWeek);oWeekStartDate.setMinimalDaysInFirstWeek(this.iMinimalDaysInFirstWeek);var iDays=this.iGetDay();if(this.iFirstDayOfWeek<=iDays){oWeekStartDate.addDays((iDays*(-1))+this.iFirstDayOfWeek);}else{oWeekStartDate.addDays(((iDays+7)*(-1))+this.iFirstDayOfWeek);}return oWeekStartDate;}; UCF_Date.prototype.sGetDate=function(){return UCF_StringUtil.fillChars(String(this.iGetDate()),"0",2,true);}; UCF_Date.prototype.sGetMonth=function(){return UCF_StringUtil.fillChars(String(this.iGetMonth()+1),"0",2,true);}; UCF_Date.prototype.sGetYear=function(){return String(this.iGetYear());}; UCF_Date.prototype.sGetHours=function(){return UCF_StringUtil.fillChars(String(this.iGetHours()),"0",2,true);}; UCF_Date.prototype.sGetMinutes=function(){return UCF_StringUtil.fillChars(String(this.iGetMinutes()),"0",2,true);}; UCF_Date.prototype.sGetSeconds=function(){return UCF_StringUtil.fillChars(String(this.iGetMinutes()),"0",2,true);}; UCF_Date.prototype.sGetWeek=function(){return UCF_StringUtil.fillChars(String(this.iGetWeek()),"0",2,true);}; UCF_Date.prototype.toString=function(){return this.oDate.toString();}; UCF_Date.prototype.toDebugString=function(){var debugString=new Array(),sYear=UCF_StringUtil.fillChars(String(this.iGetYear()),"0",4,true),sMonth=this.sGetMonth(),sDate=this.sGetDate(),sDay=this.sGetDate(),sHours=this.sGetHours(),sMinutes=this.sGetMinutes(),sSeconds=this.sGetSeconds(),sFirst=String(this.iGetFirstDayOfWeek()),sWeek=UCF_StringUtil.fillChars(String(this.iGetWeek()),"0",2,true);debugString.push(sYear);debugString.push("-"+sMonth);debugString.push("-"+sDate);debugString.push(" "+sHours);debugString.push(":"+sMinutes);debugString.push(":"+sSeconds);debugString.push(" "+sMonth);debugString.push(" WD:"+sDay);debugString.push(" FD: "+sFirst);debugString.push(" CW: "+sWeek+"\t");debugString.push(" LY: "+this.bGetLeapYear());return debugString.join("");}; UCF_Date.prototype.loadDateFormatProperties=function(){if(this.bDateFormatPropertiesLoaded)return;var sPath="texts/",sFile="dateformat",sBaseUrl=UCF_System.sResourceRoot+"/js",oResponse={};sPath=sBaseUrl+"/"+sPath;if(!UCF_System.bUseActiveX&&UCF_System.sDevice=="ie6"){oResponse.sText=UCF_Properties[sFile];oResponse.bSuccess=oResponse.sText&&oResponse.sText!=null;}else{oResponse=UCF_RequestUtil.sendSyncRequest(sPath+sFile+".properties");}if(oResponse.bSuccess){var aLines=oResponse.sText.split("\n");this.mProperties={};for(var i=0;i<aLines.length;i++){if(aLines[i].indexOf("#")==0)continue;var iSeperatorPos=aLines[i].indexOf("="),sKey=aLines[i].substring(0,iSeperatorPos),sValue=aLines[i].substring(iSeperatorPos+1).replace(/^\s+|\s+$/,'');sValue=sValue.replace(/"/g,'\\\"');sValue=eval("result = \""+sValue+"\"");this.mProperties[sKey]=sValue;}this.bDateFormatPropertiesLoaded=true;}}; UCF_Date.prototype.sGetEmperorYearChar=function(){this.loadDateFormatProperties();var iYear=this.iGetYear(),sEmperorYear="";if(!this.mProperties["JAPANESE_EMPERORS"])return sEmperorYear;aEmperors=this.mProperties["JAPANESE_EMPERORS"].split(",");for(i=0;i<aEmperors.length;i++){var n=aEmperors[i],iStartYear=parseInt(this.mProperties[n+"_BEGIN"]);if(isNaN(iStartYear))iStartYear=0;if(iYear>iStartYear){return this.mProperties[n+"_1"];}}return "";}; UCF_Date.prototype.iGetEmperorYear=function(){this.loadDateFormatProperties();var iYear=this.iGetYear(),iEmperorYear=0;if(!this.mProperties["JAPANESE_EMPERORS"])return iEmperorYear;aEmperors=this.mProperties["JAPANESE_EMPERORS"].split(",");for(i=0;i<aEmperors.length;i++){var n=aEmperors[i],iStartYear=parseInt(this.mProperties[n+"_BEGIN"]);if(isNaN(iStartYear))iStartYear=0;iEmperorYear=iYear-iStartYear;if(iYear>iStartYear){return iEmperorYear;}}return 0;}; UCF_Date.prototype.iGetEmperorStartYear=function(sString){this.loadDateFormatProperties();if(!this.mProperties["JAPANESE_EMPERORS"])return 0;var aEmperors=this.mProperties["JAPANESE_EMPERORS"].split(",");for(i=0;i<aEmperors.length;i++){var n=aEmperors[i];if(sString==this.mProperties[n+"_1"])return parseInt(this.mProperties[n+"_BEGIN"]);if(sString==this.mProperties[n+"_2"])return parseInt(this.mProperties[n+"_BEGIN"]);}return 0;};UCF_Date.prototype.parse=function(sDateString,sFormatString){if(sFormatString)this.sFormat=sFormatString;var aFormatArray=this.aGetDateFormatArray(""),iPos=0,bError=false,iYear=this.iGetYear(),iMonth=this.iGetMonth(),iDate=this.iGetDate(),iStartYear=0,bHasDayName=false,bHasMonthName=false;sDateString=sDateString.toLowerCase();for(var i=0;i<aFormatArray.length;i++){oPart=aFormatArray[i];switch(oPart.sType){case "text":if(sDateString.substr(iPos,oPart.sValue.length)==oPart.sValue){iPos+=oPart.sValue.length;}else{bError=true;}break;case "emperor":var sEmperor=sDateString.charAt(iPos);iStartYear=this.iGetEmperorStartYear(sEmperor);if(iStartYear==0){iPos++;sChar=sDateString.charAt(iPos);sEmperor+=sChar;iStartYear=this.iGetEmperorStartYear(sEmperor);}iPos++;break;case "dayname":var sDay="",sChar=sDateString.charAt(iPos),bFound=false;bHasDayName=true;if(oPart.iDigits==1){var iStartPos=iPos;for(var j=0;j<UCF_Date.aDayNames3.length;j++){var sDayName3=UCF_Date.aDayNames3[j].toLowerCase();iPos=iStartPos;sDay="";sChar=sDateString.charAt(iPos);while(sDayName3.substring(0,iPos-iStartPos)==sDay){if(iPos-iStartPos==sDayName3.length){iPos=iStartPos+sDayName3.length;bFound=true;break;}sDay+=sChar;iPos++;sChar=sDateString.charAt(iPos);}if(bFound)break;}}else if(oPart.iDigits>=2){var iStartPos=iPos;for(var j=0;j<UCF_Date.aDayNames.length;j++){var sDayName=UCF_Date.aDayNames[j].toLowerCase();iPos=iStartPos;sDay="";sChar=sDateString.charAt(iPos);while(sDayName.substring(0,iPos-iStartPos)==sDay){if(iPos-iStartPos==sDayName.length){iPos=iStartPos+sDayName.length;bFound=true;break;}sDay+=sChar;iPos++;sChar=sDateString.charAt(iPos);}if(bFound)break;}}if(!bFound)bError=true;break;case "day":var sDay="",sChar=sDateString.charAt(iPos);while(sChar>="0"&&sChar<="9"){sDay+=sChar;iPos++;sChar=sDateString.charAt(iPos);}iDate=parseInt(sDay,10);break;case "month":var sMonth="",sChar=sDateString.charAt(iPos);if(oPart.iDigits==3){bHasMonthName=true;iMonth=-1;var iStartPos=iPos;for(var j=0;j<UCF_Date.aMonthNames3.length;j++){var sMonthName3=UCF_Date.aMonthNames3[j].toLowerCase();iPos=iStartPos;sMonth="";sChar=sDateString.charAt(iPos);while(sMonthName3.substring(0,iPos-iStartPos)==sMonth){if(iPos-iStartPos==sMonthName3.length){iMonth=j;iPos=iStartPos+sMonthName3.length;break;}sMonth+=sChar;iPos++;sChar=sDateString.charAt(iPos);}if(iMonth>-1)break;}}else if(oPart.iDigits>=4){bHasMonthName=true;iMonth=-1;var iStartPos=iPos;for(var j=0;j<UCF_Date.aMonthNames.length;j++){var sMonthName=UCF_Date.aMonthNames[j].toLowerCase();iPos=iStartPos;sMonth="";sChar=sDateString.charAt(iPos);while(sMonthName.substring(0,iPos-iStartPos)==sMonth){if(iPos-iStartPos==sMonthName.length){iMonth=j;iPos=iStartPos+sMonthName.length;break;}sMonth+=sChar;iPos++;sChar=sDateString.charAt(iPos);}if(iMonth>-1)break;}}else{while(sChar>="0"&&sChar<="9"){sMonth+=sChar;iPos++;sChar=sDateString.charAt(iPos);}iMonth=parseInt(sMonth,10)-1;}break;case "year":var sYear="",sChar=sDateString.charAt(iPos);while(sChar>="0"&&sChar<="9"){sYear+=sChar;iPos++;sChar=sDateString.charAt(iPos);} if(sYear.length<=2&&!this.bJapaneseDate){iYear=parseInt(sYear,10);var sFill="",iCurrentYear=(new Date()).getFullYear(),sCurrentCentury=String(iCurrentYear).substring(0,2),sLastCentury=String(iCurrentYear-100).substring(0,2),iThresholdYear=iCurrentYear+this.YEAR2DIGITTHRESHOLD-parseInt(sCurrentCentury+"00");if(sYear.length==1)sFill="0";if(iYear>iThresholdYear)sYear=sLastCentury+sFill+sYear;if(iYear<=iThresholdYear)sYear=sCurrentCentury+sFill+sYear;iYear=parseInt(sYear,10);}else if(this.bJapaneseDate){if(iStartYear>0){iYear=parseInt(sYear,10);iYear=iStartYear+iYear;}else if(sEmperor!=""&&sYear!=""){iYear=parseInt(sEmperor+sYear,10);}else{iYear=parseInt("20"+sEmperor,10);}}else{iYear=parseInt(sYear,10);}if(isNaN(iYear))iYear=(new Date()).getFullYear();break;}if(bError)break;}if(!bError){if(iMonth>11)iMonth=11;if(iYear<1)this.iYear=1;this.setYear(iYear);var oMonthArray=[31,29,31,30,31,30,31,31,30,31,30,31];if(oMonthArray[iMonth]<=iDate){iDate=oMonthArray[iMonth];if(iMonth==1&&!this.bGetLeapYear()&&iDate==29){iDate=28;}} this.setDate(iDate);this.setMonth(iMonth);}else{ if(bHasDayName){var sTempFormat=sFormatString;var sNewFormatString=sFormatString.replace(/E /g,"").replace(/E/g,"");bError=this.parse(sDateString,sNewFormatString);this.sFormat=sTempFormat;}else if(bHasMonthName){var sTempFormat=sFormatString;var sNewFormatString=sFormatString.replace(/MMMMM/g,"M").replace(/MMMM/g,"M").replace(/MMM/g,"M");bError=this.parse(sDateString,sNewFormatString);this.sFormat=sTempFormat;}else{if("MM/dd/yyyy"!=sFormatString&&"yyyy-MM-dd"!=sFormatString){var sTempFormat=sFormatString;bError=this.parse(sDateString,"yyyy-MM-dd");if(bError){bError=this.parse(sDateString,"MM/dd/yyyy");}this.sFormat=sTempFormat;}}}return bError;};UCF_Date.prototype.sGetFormattedDate=function(sFormatString){var aFormatArray=this.aGetDateFormatArray(sFormatString),aBuffer=[],oPart;for(var i=0;i<aFormatArray.length;i++){oPart=aFormatArray[i];switch(oPart.sType){case "text":aBuffer.push(oPart.sValue);break;case "day":aBuffer.push(UCF_StringUtil.fillChars(String(this.iGetDate()),"0",oPart.iDigits,true));break;case "dayname":if(oPart.iDigits<4){aBuffer.push(UCF_Date.aFormatDayNames3[this.iGetDay()]);}else if(oPart.iDigits>=4){aBuffer.push(UCF_Date.aFormatDayNames[this.iGetDay()]);}break;case "month":if(oPart.iDigits==3){aBuffer.push(UCF_Date.aFormatMonthNames3[this.iGetMonth()]);}else if(oPart.iDigits>=4){aBuffer.push(UCF_Date.aFormatMonthNames[this.iGetMonth()]);}else{aBuffer.push(UCF_StringUtil.fillChars(String(this.iGetMonth()+1),"0",oPart.iDigits,true));}break;case "emperor":aBuffer.push(this.sGetEmperorYearChar());break;case "year":if(this.bJapaneseDate&&this.sGetEmperorYearChar()!=""){aBuffer.push(UCF_StringUtil.fillChars(String(this.iGetEmperorYear()),"0",oPart.iDigits,true));}else{aBuffer.push(UCF_StringUtil.fillChars(String(this.iGetYear()),"0",oPart.iDigits,true));}break;}}return aBuffer.join("");};UCF_Date.prototype.aGetDateFormatArray=function(sFormat){var aFormatArray=[];if(sFormat=="")sFormat=this.sFormat;var bQuoted=false,oCurrentObject=null,sState="";for(i=0;i<sFormat.length;i++){var sCurChar=sFormat.charAt(i),sNextChar,sPrevChar;if(bQuoted){if(sCurChar=="'"){sPrevChar=sFormat.charAt(i-1);sNextChar=sFormat.charAt(i+1); if(sPrevChar=="'"){bQuoted=false;} else if(sNextChar=="'"){i+=1;} else{bQuoted=false;continue;}}if(sState=="text"){oCurrentObject.sValue+=sCurChar;}else{oCurrentObject={sType:"text",sValue:sCurChar};aFormatArray.push(oCurrentObject);sState="text";}}else{switch(sCurChar){case "'":bQuoted=true;break;case "d":if(!bQuoted){if(sState=="day"){oCurrentObject.iDigits++;}else{oCurrentObject={sType:"day",iDigits:1};aFormatArray.push(oCurrentObject);sState="day";}break;}case "M":if(!bQuoted){if(sState=="month"){oCurrentObject.iDigits++;}else{oCurrentObject={sType:"month",iDigits:1};aFormatArray.push(oCurrentObject);sState="month";}break;}case "G":if(!bQuoted){oCurrentObject={sType:"emperor",sValue:sCurChar};aFormatArray.push(oCurrentObject);this.bJapaneseDate=true;break;}case "y":if(!bQuoted){if(sState=="year"){oCurrentObject.iDigits++;}else{oCurrentObject={sType:"year",iDigits:1};aFormatArray.push(oCurrentObject);sState="year";}break;}case "E":if(!bQuoted){if(sState=="dayname"){oCurrentObject.iDigits++;}else{oCurrentObject={sType:"dayname",iDigits:1};aFormatArray.push(oCurrentObject);sState="dayname";}break;}default:if(sState=="text"){oCurrentObject.sValue+=sCurChar;}else{oCurrentObject={sType:"text",sValue:sCurChar};aFormatArray.push(oCurrentObject);sState="text";}}}}return aFormatArray;};UCF_Date.prototype.sGetMonthTitle=function(){var aFormat=this.aGetDateFormatArray("");var i;var sFormat=new String();for(i=0;i<aFormat.length;i++){if(aFormat[i].sType=="emperor")sFormat+=aFormat[i].sValue;if(aFormat[i].sType=="year")for(var j=0;j<aFormat[i].iDigits;j++)sFormat+="y";}var sYear="";if(sFormat.length)sYear=this.sGetFormattedDate(sFormat);if(UCF_System.sLanguage=="ja")return(sYear+" "+UCF_Date.aMonthNames[this.iGetMonth()]);else return(UCF_Date.aMonthNames[this.iGetMonth()]+" "+sYear);};
 function UCF_PendingRequest(oQueue){UCF_EventProvider.apply(this);this.oQueue=oQueue;this.iType=UCF_PendingRequest.XMLHTTP;this.oForm=null;this.sActionUrl=""; this.iSuspendCounter=0; this.mIdMap={};};UCF_PendingRequest.prototype=new UCF_EventProvider();UCF_PendingRequest.prototype.M_EVENTS={Send:0};UCF_PendingRequest.FORM=0;UCF_PendingRequest.XMLHTTP=1; UCF_PendingRequest.prototype.setForm=function(oForm){this.oForm=oForm;this.iType=UCF_PendingRequest.FORM;}; UCF_PendingRequest.prototype.oGetForm=function(){return this.oForm;}; UCF_PendingRequest.prototype.setActionUrl=function(sActionUrl){this.sActionUrl=sActionUrl;this.iType=UCF_PendingRequest.XMLHTTP;}; UCF_PendingRequest.prototype.sGetActionUrl=function(){return this.sActionUrl;}; UCF_PendingRequest.prototype.oGetQueue=function(){return this.oQueue;}; UCF_PendingRequest.prototype.iGetType=function(){return this.iType;}; UCF_PendingRequest.prototype.suspend=function(sId){if(this.mIdMap[sId]){}this.mIdMap[sId]=true;this.iSuspendCounter++;}; UCF_PendingRequest.prototype.resume=function(sId){if(!this.mIdMap[sId]){}this.mIdMap[sId]=false;this.iSuspendCounter--;if(this.iSuspendCounter==0){this.mIdMap={};this.fireEvent(this.M_EVENTS.Send,{oPendingRequest:this});}}; UCF_PendingRequest.prototype.send=function(){}; UCF_PendingRequest.prototype.bIsSuspended=function(){return this.iSuspendCounter>0;}; UCF_PendingRequest.prototype.addSemanticEvent=function(oSemanticEvent){var oQueueItem=new(UCF_ClassLoader.oGetClass("UCF_EventQueueItem"))(oSemanticEvent);this.oQueue.addItem(oQueueItem);};UCF_PendingRequest.prototype.aPublicMethods=["suspend","resume","send","addSemanticEvent"];
function UCF_SapTableCell(oDomRef,oTable){UCF_SapTableBaseCell.apply(this,arguments);};UCF_SapTableCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableBaseCell"))();UCF_SapTableCell.prototype.setCellState=function(){if(this.sCellDesign=="FILTERICON"){this.oAccessibilityHelper.setControlType("ST_FBTN");}else if(this.sCellDesign=="FILTER"){var sColumnInfo=this.sSpaceCleanUp(this.sGetColumnInfo());this.oAccessibilityHelper.setControlType("ST_F",[sColumnInfo]);if(this.oAccessInfo.oBrowserEvent&&this.oAccessInfo.oBrowserEvent.oGetSource()&&this.oAccessInfo.oBrowserEvent.oGetSource().getAttribute("empty")){this.oAccessibilityHelper.setEnabled(false);}}else if(this.sCellType=="ROWCREATOR"){this.oAccessibilityHelper.setControlType("ST_RC",[this.sGetRowInfo()]);}};UCF_SapTableCell.prototype.sGetTutorInfo=function(){if(this.oAccessInfo.eAction==this.oTable.ACTION.FILTER){return "ST_FBTN_TUT";}else if(this.sCellDesign=="FILTER"){return "ST_F_TUT";}else if(this.sCellType=="ROWCREATOR"){return "ST_RC_TUT";}return "";}; UCF_SapTableCell.prototype.aAttributeNames=["bIsSelected","bIsSecondarySelected","sCellType","sCellDesign","sHeaderCellIds","sRowHeaderCellIds"]; UCF_SapTableCell.prototype.aMethodNames=[];  UCF_SapTableCell.prototype.bIsSelected=false; UCF_SapTableCell.prototype.bIsSecondarySelected=false; UCF_SapTableCell.prototype.sCellType="TEXT"; UCF_SapTableCell.prototype.sCellDesign="STANDARD"; UCF_SapTableCell.prototype.sHeaderCellIds=''; UCF_SapTableCell.prototype.sRowHeaderCellIds=''; UCF_SapTableCell.prototype.setDefaultValues=function(){this.bIsSelected=false;this.bIsSecondarySelected=false;this.sCellType="TEXT";this.sCellDesign="STANDARD";this.sHeaderCellIds='';this.sRowHeaderCellIds='';};
 function UCF_PopupWindow(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.sDragMode=null;this.resizeListenerForPopup=null;this.oPopupManager=oLS.oGetPopupManagerInternal();this.animationRectangle=null;this.bIsInitialized=false;this.bKeepAlive=true;this.bUserHasResized=false;  this.bUserHasMaximized=this.bIsMaximized;this.bUseGhostForResize=true;this.bIgnoreLayoutChange=false; this.bStopAnimation=false; this.focussedElementId=null; this.TITLE_HEIGHT=21;this.BORDER_WIDTH=2; this.setDefaultButtonId(this.sDefaultButtonId);this.oFocusDomRef=UCF_DomUtil.$(this.sId+"-ttl");};UCF_PopupWindow.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PopupWindow.MINIMAL_WIDTH=270;UCF_PopupWindow.MINIMAL_HEIGHT=180;UCF_PopupWindow.prototype.onAreaScroll=function(oEvent){this.oContentScrollPosition={iScrollLeft:oEvent.oGetParam("iScrollLeft"),iScrollTop:oEvent.oGetParam("iScrollTop")};}; UCF_PopupWindow.prototype.destroy=function(){UCF_DomUtil.removeFromDom(this.oGhostRectangle);this.detachBrowserEvent("resize",UCF_DomUtil.oGetFirstChild(UCF_DomUtil.$(this.sId+"-cnt")));this.detachBrowserEvent("scroll",UCF_DomUtil.$(this.sId+"-cnt"));if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();this.oScrollArea=null;}this.bStopAnimation=true;this.oPopupManager=null; this.oIFrame=null;UCF_Object.prototype.destroy.apply(this);}; UCF_PopupWindow.prototype.getPopupManager=function(){return this.oPopupManager;};UCF_PopupWindow.prototype.bHasActiveComponent=function(){var aXMPs=document.getElementsByTagName("xmp");for(var x=0;x<aXMPs.length;x++){if(!aXMPs[x].innerHTML)continue;var sText=aXMPs[x].innerHTML.toLowerCase();if(sText.indexOf("<object")!=-1)return true;}return false;}; UCF_PopupWindow.prototype.preparePositionChange=function(){this.bIsInitialized=false;}; UCF_PopupWindow.prototype.initialize=function(){this.setDefaultButtonId(this.sDefaultButtonId);this.bEmbedsActiveComponent=this.bHasActiveComponent();if(this.bEmbedsActiveComponent){UCF_DomUtil.$(this.sId+"-cnt").style.overflow="visible";}else{UCF_DomUtil.$(this.sId+"-cnt").style.overflow="auto";document.body.style.overflow="hidden";} this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(UCF_DomUtil.$(this.sId+"-cnt"));this.oScrollArea.enableDragScrolling(false);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onAreaScroll");this.addDelegate(this.oScrollArea);this.attachBrowserEvent("scroll",UCF_DomUtil.$(this.sId+"-cnt"));if(this.bIsInitialized){ this.handleRoundtrip();return;}this.bIsInitialized=true; var iFrames=parent.document.getElementsByTagName("iframe");for(var x=0;x<iFrames.length;x++){try{if(iFrames[x].contentWindow==window){this.oIFrame=iFrames[x];break;}}catch(e){}}if(!this.bEmbedsActiveComponent){  this.oIFrame.setAttribute("scrolling","no");}else{this.oIFrame.setAttribute("scrolling","auto");}this.getPopupManager().register(this);this.adaptBodyColor(); var width=this.sWidth;var height=this.sHeight;width=(width=="-1"||width=="-1px")?0:width;height=(height=="-1"||height=="-1px")?0:height; var bounds=this.getPixelSize(width,height);var optimalSize=this.oGetOptimalSize(bounds.width,bounds.height); bounds.width=Math.max(bounds.width,optimalSize.width);bounds.height=Math.max(bounds.height,optimalSize.height); var innerSize=UCF_DomUtil.oGetInnerSize(UCF_DomUtil.oGetTopWindow());var scrollOffset=UCF_DomUtil.oGetScrollOffset(UCF_DomUtil.oGetTopWindow());var x=this.sX==""?-1:parseInt(this.sX);if(x==-1)x=scrollOffset.x+innerSize.width / 2-bounds.width / 2; var y=this.sY==""?-1:parseInt(this.sY);if(y==-1)y=scrollOffset.y+innerSize.height /3-bounds.height / 2; if(UCF_System.bIsRTL){ var bdy=UCF_DomUtil.oGetTopWindow().document.body;var bodyScrollWidth=bdy.scrollWidth;var bodyClientWidth=bdy.clientWidth;x=Math.max(bodyScrollWidth,bodyClientWidth)-x-bounds.width;}bounds.x=x;bounds.y=y; this.oIFrame.style.visibility="visible";if(UCF_System.bUseAnimation&&UCF_System.sDevice=="ie6"){this.oIFrame.style.opacity="0.6";this.oIFrame.style.filter="alpha(opacity=60)";}if(this.bUserHasMaximized){this.oldBounds=bounds;this.doMaximize();}else{this.doInitialize(bounds);}if(UCF_System.bUseAnimation&&UCF_System.sDevice=="ie6"){var oAnimation=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oIFrame,100);oAnimation.addOpacityChange(60,100,oAnimation.M_TRANSITIONS.EaseIn);oAnimation.addFinalOpacityValue(100);oAnimation.callbackFinish(this,"initializeEnd");oAnimation.play();}else{this.initializeEnd();}};UCF_PopupWindow.prototype.initializeEnd=function(){if(this.oPopupManager&&this.oPopupManager.oGetOpenerLSByPopupId(this.sId))this.oPopupManager.oGetOpenerLSByPopupId(this.sId).unlock();}; UCF_PopupWindow.prototype.getPixelSize=function(sWidth,sHeight){var dummy=document.createElement("div");document.body.appendChild(dummy);var style=dummy.style;style.position="absolute";style.left="0px";style.top="-5000px";if(typeof(sWidth)=="string"&&sWidth.indexOf("%")>0){var pixelWidth=UCF_DomUtil.oGetInnerSize(UCF_DomUtil.oGetTopWindow()).width*parseInt(sWidth)/ 100;}else{ dummy.style.width=sWidth;var pixelWidth=dummy.scrollWidth;}if(typeof(sHeight)=="string"&&sHeight.indexOf("%")>0){var pixelHeight=UCF_DomUtil.oGetInnerSize(UCF_DomUtil.oGetTopWindow()).height*parseInt(sHeight)/ 100;}else{dummy.style.width=sHeight;var pixelHeight=dummy.scrollWidth;}document.body.removeChild(dummy);return{width:parseInt(pixelWidth),height:parseInt(pixelHeight)};}; UCF_PopupWindow.prototype.doInitialize=function(rect){if(UCF_System.sDevice=="ie6"){ this.oIFrame.style.visibility="hidden";this.oIFrame.style.visibility="visible";}this.setPosition(rect.x,rect.y);this.setSize(rect.width,rect.height);this.relocate();this.oLS.oBrowserWindow.attachEvent(this.oLS.oBrowserWindow.E_EVENTS.LayoutChange,this,"onLayoutChange");};UCF_PopupWindow.prototype.onLayoutChange=function(oBrowserEvent){if(this.bIgnoreLayoutChange){ if(this.sLayoutChangeTimeout)UCF_JsUtil.clearDelayedCall(this.sLayoutChangeTimeout);this.sLayoutChangeTimeout=UCF_JsUtil.delayedCall(1,this,"doNotIgnoreLayoutChanges",[]);}else{ this.bIgnoreLayoutChange=true;this.handleRoundtrip();}};UCF_PopupWindow.prototype.doNotIgnoreLayoutChanges=function(){this.bIgnoreLayoutChange=false;};UCF_PopupWindow.prototype.restoreScrollPosition=function(){ if(!this.oContentScrollPosition)return;var oContentAreaDiv=UCF_DomUtil.$(this.sId+"-cnt");oContentAreaDiv.scrollLeft=this.oContentScrollPosition.iScrollLeft;oContentAreaDiv.scrollTop=this.oContentScrollPosition.iScrollTop;}; UCF_PopupWindow.prototype.handleRoundtrip=function(){var oldWidth=0;var oldHeight=0;if(this.oSize){oldWidth=this.oSize.width;oldHeight=this.oSize.height;}if(this.bUserHasResized){this.setSize(oldWidth,oldHeight);this.restoreScrollPosition();return;}var width=this.sWidth,height=this.sHeight;width=(width=="-1"||width=="-1px")?0:width;height=(height=="-1"||height=="-1px")?0:height; var bounds=this.getPixelSize(width,height),optimalSize=this.oGetOptimalSize(bounds.width,bounds.height); bounds.width=Math.max(bounds.width,optimalSize.width);bounds.height=Math.max(bounds.height,optimalSize.height);  this.setSize(bounds.width,bounds.height);this.relocate();this.restoreScrollPosition();}; UCF_PopupWindow.prototype.setSize=function(iWidth,iHeight,originalBounds){ var minSize=this.getMinSize();iWidth=Math.max(iWidth,minSize.width);iHeight=Math.max(iHeight,minSize.height);this.oSize={width:iWidth,height:iHeight};var oOuterDiv=this.oDomRef;var oInnerDiv=UCF_DomUtil.$(this.sId+"-ib");var oContentDiv=UCF_DomUtil.$(this.sId+"-cnt");var oContentTable=UCF_DomUtil.$(this.sId+"-cnttbl");var oTitleDiv=UCF_DomUtil.$(this.sId+"-ttl");var oTitleTextDiv=UCF_DomUtil.$(this.sId+"-ttltxt");var oFooterDiv=UCF_DomUtil.$(this.sId+"-ftr");this.oIFrame.style.width=iWidth+"px";this.oIFrame.style.height=iHeight+"px";var spaceForButtons=this.iGetButtonWidth();if(this.bEmbedsActiveComponent)iWidth-=17;var contentWidth=iWidth-2*this.BORDER_WIDTH;oContentDiv.style.width=contentWidth+"px";oFooterDiv.style.width=contentWidth+"px";oTitleDiv.style.width=(contentWidth-1)+"px";oTitleTextDiv.style.width=(iWidth-spaceForButtons)+"px"; if(UCF_UserAgent.bIsIE())oTitleTextDiv.style.height="17px";var footerbarHeight=this.getFooterbarHeight();var messageAreaHeight=this.getMessageAreaHeightByWidth(contentWidth);var messageBar=UCF_DomUtil.$(this.sId+"-mb");if(messageBar)messageBar.style.width=contentWidth+"px";var contentHeight=iHeight-this.TITLE_HEIGHT-2*this.BORDER_WIDTH-messageAreaHeight-footerbarHeight;oContentDiv.style.height=contentHeight+"px";oContentTable.style.height=(contentHeight-18)+"px";  if(!UCF_UserAgent.bIsIE()){oOuterDiv.style.width=(iWidth-this.BORDER_WIDTH)+"px";oOuterDiv.style.height=(iHeight-this.BORDER_WIDTH)+"px";oInnerDiv.style.width=(iWidth-2*this.BORDER_WIDTH)+"px";oInnerDiv.style.height=(iHeight-2*this.BORDER_WIDTH)+"px";oContentDiv.style.width=contentWidth+"px";if(this.bEmbedsActiveComponent&&originalBounds){oContentDiv.style.height=originalBounds.height+"px";}}};UCF_PopupWindow.prototype.iGetButtonWidth=function(){var iWidth=5;if(UCF_System.sDevice!="ie6"){iWidth+=6;}if(this.bIsResizable)iWidth+=20;if(this.bHasCloseButton)iWidth+=20;if(this.bHasHelpButton)iWidth+=20;return iWidth;};UCF_PopupWindow.prototype.getFooterbarHeight=function(){return UCF_DomUtil.$(this.sId+"-ftr").scrollHeight;}; UCF_PopupWindow.prototype.setPosition=function(left,top){left=Math.max(left,-this.oIFrame.offsetWidth+50);top=Math.max(top,0);this.oIFrame.style.left=left+"px";this.oIFrame.style.top=top+"px";}; UCF_PopupWindow.prototype.setBounds=function(oBounds,originalBounds){this.setSize(oBounds.width,oBounds.height,originalBounds);this.setPosition(oBounds.x,oBounds.y);}; UCF_PopupWindow.prototype.getBounds=function(){var x=parseInt(this.oIFrame.style.left);var y=parseInt(this.oIFrame.style.top);var width=parseInt(this.oIFrame.style.width);var height=parseInt(this.oIFrame.style.height);return{x:x,y:y,width:width,height:height};}; UCF_PopupWindow.prototype.ondblclick=function(oBrowserEvent){var srcElement=oBrowserEvent.oGetSource();if(srcElement.id==this.sId+"-ttltxt"){ if(oBrowserEvent.bCtrl()&&!this.bUserHasMaximized){var optimalSize=this.oGetOptimalSize(0,0);this.setSize(optimalSize.width,optimalSize.height);}else{if(this.bIsResizable)this.toggleMinMax();}}}; UCF_PopupWindow.prototype.oGetOptimalSize=function(iWidthHint,iHeightHint){var oContentDiv=UCF_DomUtil.$(this.sId+"-cnt"),originalWidth=oContentDiv.style.width,originalHeight=oContentDiv.style.height,footerbarHeight=this.getFooterbarHeight();var iSampleWidth=UCF_PopupWindow.MINIMAL_WIDTH-2*this.BORDER_WIDTH,iSampleHeight=UCF_PopupWindow.MINIMAL_HEIGHT-(this.TITLE_HEIGHT+footerbarHeight+2*this.BORDER_WIDTH);  if(this.bOverrideMinimumSize){iSampleWidth=50;iSampleHeight=50;} if(iWidthHint){iSampleWidth=Math.max(iSampleWidth,iWidthHint-18);} if(iHeightHint){iSampleHeight=Math.max(iSampleHeight,iHeightHint);}oContentDiv.style.width=iSampleWidth+"px";oContentDiv.style.height=iSampleHeight+"px";oContentDiv.firstChild.style.height=""; var sw=oContentDiv.scrollWidth,sh=oContentDiv.scrollHeight; var optimalWidth=sw+2*this.BORDER_WIDTH;var messageAreaHeight=this.getMessageAreaHeightByWidth(sw);var optimalHeight=sh+this.TITLE_HEIGHT+messageAreaHeight+footerbarHeight+2*this.BORDER_WIDTH;if(UCF_System.sDevice=="ff1"){ if(this.bEmbedsActiveComponent){optimalHeight=document.body.scrollHeight-(this.TITLE_HEIGHT+messageAreaHeight+footerbarHeight+2*this.BORDER_WIDTH+1);optimalWidth=document.body.scrollWidth-2*this.BORDER_WIDTH+6;}} oContentDiv.style.width=originalWidth;oContentDiv.style.height=originalHeight;if(!this.bOverrideMinimumSize){ optimalWidth=Math.max(optimalWidth,UCF_PopupWindow.MINIMAL_WIDTH);optimalHeight=Math.max(optimalHeight,UCF_PopupWindow.MINIMAL_HEIGHT);} var messageBar=UCF_DomUtil.$(this.sId+"-mb");if(messageBar)optimalWidth=Math.max(optimalWidth,messageBar.scrollWidth); if(this.bEmbedsActiveComponent){optimalWidth+=17;}return{width:optimalWidth,height:optimalHeight};};UCF_PopupWindow.prototype.getMessageAreaHeightByWidth=function(iWidth){var messageBar=UCF_DomUtil.$(this.sId+"-mb");if(!messageBar)return 0;var messageAreaHeight=0;var originalWidth=messageBar.style.width;messageBar.style.overflow="visible";messageBar.style.width=iWidth+"px";messageAreaHeight=messageBar.scrollHeight;messageBar.style.width="100%";messageBar.style.overflow="hidden";return messageAreaHeight;}; UCF_PopupWindow.prototype.onclick=function(oBrowserEvent){var srcElement=oBrowserEvent.oGetSource();var sAction=srcElement.getAttribute("action");if(sAction=="minmax"){this.toggleMinMax();}else if(sAction=="close"){this.close();}}; UCF_PopupWindow.prototype.onmousedown=function(oBrowserEvent){this.oPopupManager.updateZIndices(this);if(this.bUserHasMaximized)return;var srcElement=oBrowserEvent.oGetSource();this.sDragMode=srcElement.getAttribute("drag");if(this.sDragMode==null)return;if(this.sDragMode=="resize"){this.focussedElementId=this.oLS.sGetFocusedElementId();} this.startDragX=oBrowserEvent.iScreenX();this.startDragY=oBrowserEvent.iScreenY();this.originalRectangle=this.getBounds();var that=this;this.handleMoveCall=function(event){that.handleMove(event);};UCF_DomUtil.attachEvent(window.document,"mousemove",this.handleMoveCall);UCF_DomUtil.attachEvent(parent.document,"mousemove",this.handleMoveCall);if(this.bUseGhostForResize){this.handleMouseUp=function(event){that.onmouseup(event);};UCF_DomUtil.attachEvent(window.document,"mouseup",this.handleMouseUp);UCF_DomUtil.attachEvent(parent.document,"mouseup",this.handleMouseUp);} if(srcElement.setCapture){srcElement.setCapture();this.oCaptureDomRef=srcElement;} oBrowserEvent.cancel();}; UCF_PopupWindow.prototype.handleMove=function(event){if(!this.sDragMode)return;event=event||window.event;if(this.sDragMode=="resize"){var oContentDiv=UCF_DomUtil.$(this.sId+"-cnt");var ow=oContentDiv.offsetWidth;var cw=oContentDiv.clientWidth;var sw=oContentDiv.scrollWidth;var oh=oContentDiv.offsetHeight;var ch=oContentDiv.clientHeight;var sh=oContentDiv.scrollHeight; var deltaX=event.screenX-this.startDragX;if(UCF_System.bIsRTL)deltaX*=-1;var deltaY=event.screenY-this.startDragY;var w=this.originalRectangle.width+deltaX;var h=this.originalRectangle.height+deltaY;var iLeft=this.originalRectangle.x;var iTop=this.originalRectangle.y;var minimalWidth=this.getMinSize().width;if(UCF_System.bIsRTL){if(w>minimalWidth){iLeft=this.originalRectangle.x-deltaX;}else{iLeft=this.originalRectangle.x+this.originalRectangle.width-minimalWidth;}}if(this.bUseGhostForResize){var oGhostRectangle=this.oCreateGhostRectangle();oGhostRectangle.style.left=iLeft;oGhostRectangle.style.top=iTop;var minSize=this.getMinSize();oGhostRectangle.style.width=Math.max(w,minSize.width);oGhostRectangle.style.height=Math.max(h,minSize.height);}else{this.setPosition(iLeft,iTop);this.setSize(w,h);}this.bUserHasResized=true;}else if(this.sDragMode=="move"){var iLeft=this.originalRectangle.x+event.screenX-this.startDragX;var iTop=this.originalRectangle.y+event.screenY-this.startDragY;if(this.bUseGhostForResize){var oGhostRectangle=this.oCreateGhostRectangle();oGhostRectangle.style.left=iLeft;oGhostRectangle.style.top=iTop;oGhostRectangle.style.width=this.originalRectangle.width+"px";oGhostRectangle.style.height=this.originalRectangle.height+"px";}else{this.setPosition(iLeft,iTop);}this.bUserHasMoved=true;}event.cancelBubble=true;return false;}; UCF_PopupWindow.prototype.onmouseup=function(event){if(this.oCaptureDomRef)this.oCaptureDomRef.releaseCapture();if(this.sDragMode==null)return;this.getPopupManager().popupMoved(this); if(this.focussedElementId){this.oLS.focusElement(this.focussedElementId);this.focussedElementId=null;}if(this.handleMoveCall){UCF_DomUtil.detachEvent(window.document,"mousemove",this.handleMoveCall);UCF_DomUtil.detachEvent(parent.document,"mousemove",this.handleMoveCall);this.handleMoveCall=null;}if(this.bUseGhostForResize){if(this.handleMouseUp){UCF_DomUtil.detachEvent(window.document,"mouseup",this.handleMouseUp);UCF_DomUtil.detachEvent(parent.document,"mouseup",this.handleMouseUp);this.handleMouseUp=null;}if(this.oGhostRectangle){var style=this.oGhostRectangle.style;var bounds={x:parseInt(style.left),y:parseInt(style.top),width:parseInt(style.width),height:parseInt(style.height)};if(this.sDragMode=="resize")this.setBounds(bounds);else{this.setPosition(bounds.x,bounds.y); this.setSize(bounds.width+1,bounds.height+1);this.setSize(bounds.width,bounds.height);}parent.document.body.removeChild(this.oGhostRectangle);this.oGhostRectangle=null;}}this.sDragMode=null;}; UCF_PopupWindow.prototype.relocate=function(){if(this.bUserHasResized)return;var oInnerSize=UCF_DomUtil.oGetInnerSize(UCF_DomUtil.oGetTopWindow()),oScrollOffset=UCF_DomUtil.oGetScrollOffset(UCF_DomUtil.oGetTopWindow()),oBounds=this.getBounds(),oOriginalBounds=this.getBounds();var bAddHeightToPreventScrollbar=false;if(oBounds.width>oInnerSize.width)bAddHeightToPreventScrollbar=true; oBounds.width=Math.min(oBounds.width,oInnerSize.width);   if(oBounds.height>oInnerSize.height)oBounds.width+=17;oBounds.height=Math.min(oBounds.height,oInnerSize.height);if(bAddHeightToPreventScrollbar)oBounds.height+=17;if(UCF_System.bIsRTL){ var maxX=oInnerSize.width-oBounds.width;oBounds.x=Math.min(oBounds.x,maxX);oBounds.x=Math.max(oBounds.x,0);}else{ var maxX=oScrollOffset.x+oInnerSize.width-oBounds.width;oBounds.x=Math.min(oBounds.x,maxX);oBounds.x=Math.max(oBounds.x,0);}var maxY=oScrollOffset.y+oInnerSize.height-oBounds.height;if(oBounds.y>maxY)oBounds.y=maxY;oBounds.y=Math.max(oBounds.y,0);this.setBounds(oBounds,oOriginalBounds);};  UCF_PopupWindow.prototype.onkeydown=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode(),bCtrl=oBrowserEvent.bCtrl(),bShift=oBrowserEvent.bShift(),bAlt=oBrowserEvent.bAlt();if(bCtrl||bShift||bAlt)return;switch(iKey){case UCF_KeyCodes.ESCAPE:this.close();break;case UCF_KeyCodes.SPACE:this.onclick(oBrowserEvent);break;}}; UCF_PopupWindow.prototype.getMinSize=function(){var oButtonContainer=UCF_DomUtil.$(this.sId+"-btns");var width=oButtonContainer?parseInt(oButtonContainer.scrollWidth):0;width+=22+40+16+22;var messageAreaHeight=this.getMessageAreaHeightByWidth(width);width+=2*this.BORDER_WIDTH;var height=80+messageAreaHeight;return{width:width,height:height};}; UCF_PopupWindow.prototype.setTitle=function(sText){var oTitleTextRef=UCF_DomUtil.$(this.sId+"-ttltxt");UCF_DomUtil.setInnerText(oTitleTextRef,sText);};UCF_PopupWindow.prototype.setZIndex=function(iZIndex){ if(this.oIFrame.style.zIndex!=iZIndex)this.oIFrame.style.zIndex=iZIndex;}; UCF_PopupWindow.prototype.adaptBodyColor=function(){var content=UCF_DomUtil.$(this.sId+"-cnt");var bg=content.style.backgroundColor;if(bg=="")bg=content.getAttribute("bgColor");if(bg=="")return;UCF_DomUtil.$(this.sId+"-ftr").style.backgroundColor=bg;}; UCF_PopupWindow.prototype.close=function(){if(!this.bHasCloseButton)return;this.fireClose(this.sId);}; UCF_PopupWindow.prototype.dispose=function(){        UCF_DomUtil.focusDomElement(document.body); this.oLS.oBrowserWindow.lock(UCF_BrowserWindow.LOCKTYPES.POPUP);this.oLS.oBrowserWindow.detachEvent(this.oLS.oBrowserWindow.E_EVENTS.LayoutChange,this,"onLayoutChange");if(this.resizeListenerForPopup){UCF_DomUtil.detachEvent(parent,"resize",this.resizeListenerForPopup);UCF_DomUtil.detachEvent(parent,"scroll",this.resizeListenerForPopup);this.resizeListenerForPopup=null;}var srcRect=this.getBounds();this.oIFrame.style.display="none";this.oIFrame.style.top="-5000px";this.getPopupManager().unregister(this);if(!UCF_System.bUseAnimation){this.doDispose();return;}var trgtRect={x:srcRect.x+srcRect.width/2,y:srcRect.y+srcRect.height/2,width:2,height:2};var that=this;this.showResizeAnimation(srcRect,trgtRect,function(){that.doDispose();});}; UCF_PopupWindow.prototype.doDispose=function(){try{this.getPopupManager().unregister2(this);}catch(e){}}; UCF_PopupWindow.prototype.toggleMinMax=function(){if(this.bUserHasMaximized){this.minimize();}else{this.maximize();}}; UCF_PopupWindow.prototype.minimize=function(){if(!UCF_System.bUseAnimation){this.doMinimize();return;}var srcRect=this.getBounds();var trgtRect=this.oldBounds;var that=this;var callBack=function(){that.doMinimize();};this.showResizeAnimation(srcRect,trgtRect,callBack);}; UCF_PopupWindow.prototype.doMinimize=function(){UCF_DomUtil.detachEvent(parent,"resize",this.resizeListenerForPopup);UCF_DomUtil.detachEvent(parent,"scroll",this.resizeListenerForPopup);this.resizeListenerForPopup=null;UCF_DomUtil.$(this.sId+"-minmax").className="urPWButton urPWMaximize";if(this.bIsResizable){var classes="urPWResize ";if(UCF_System.bIsRTL)classes+="urPWResizeNE";else classes+="urPWResizeNW";UCF_DomUtil.$(this.sId+"-rsz").className=classes;}this.setBounds(this.oldBounds);this.bUserHasMaximized=false;var oMinMaxDomRef=UCF_DomUtil.$(this.sId+"-minmax");if(oMinMaxDomRef){oMinMaxDomRef.setAttribute("title",this.oLS.sGetText("SAPUR_POPUP_MAXIMIZE"));oMinMaxDomRef.focus();}this.fireRestore(this.sId);}; UCF_PopupWindow.prototype.maximize=function(){this.bUserHasResized=true; this.oldBounds=this.getBounds();if(!window.UCF_System.bUseAnimation){this.doMaximize();return;}var srcRect=this.getBounds();var body=parent.document.body;var trgtRect={};trgtRect.width=body.clientWidth;trgtRect.height=body.clientHeight;trgtRect.y=body.scrollTop;trgtRect.x=body.scrollLeft; var that=this;var callBack=function(){that.doMaximize()};this.showResizeAnimation(srcRect,trgtRect,callBack);}; UCF_PopupWindow.prototype.doMaximize=function(){if(this.bIsResizable){UCF_DomUtil.$(this.sId+"-minmax").className="urPWButton urPWRestore";UCF_DomUtil.$(this.sId+"-rsz").className="urPWNoResize";}this.stretchToMax();var that=this;this.resizeListenerForPopup=function(){that.stretchToMax();};UCF_DomUtil.attachEvent(parent,"resize",this.resizeListenerForPopup);UCF_DomUtil.attachEvent(parent,"scroll",this.resizeListenerForPopup);this.bUserHasMaximized=true;var oMinMaxDomRef=UCF_DomUtil.$(this.sId+"-minmax");if(oMinMaxDomRef){oMinMaxDomRef.setAttribute("title",this.oLS.sGetText("SAPUR_POPUP_RESTORE"));oMinMaxDomRef.focus();}this.fireMaximize(this.sId);}; UCF_PopupWindow.prototype.stretchToMax=function(){var body=parent.document.body;var width=body.clientWidth;var height=body.clientHeight;var top=body.scrollTop;var left=body.scrollLeft;var right=body.scrollWidth-body.clientWidth-body.scrollLeft;this.setPosition(left,top);this.setSize(width,height);};  UCF_PopupWindow.prototype.onlsfocus=function(oBrowserEvent){var oDomRef=oBrowserEvent.oGetSource();switch(oDomRef.getAttribute("id")){case this.sId+"-fhet":this.focus();break;case this.sId+"-fhte": this.focusLastChildControl();break;}}; UCF_PopupWindow.prototype.focus=function(){ try{UCF_JsUtil.delayedCall(0,UCF_DomUtil,"focusDomElement",[UCF_DomUtil.$(this.sId+"-ttltxt")]);}catch(e){}};UCF_PopupWindow.prototype.oCreateGhostRectangle=function(){if(this.oGhostRectangle)return this.oGhostRectangle;this.oGhostRectangle=parent.document.createElement("div");var style=this.oGhostRectangle.style;style.border="1px dotted black";style.position="absolute";style.zIndex=99999;parent.document.body.appendChild(this.oGhostRectangle);var innerDiv=parent.document.createElement("div");style=innerDiv.style;style.backgroundColor="#FFFFFF";style.opacity="0.1";style.filter="alpha(opacity=10)";style.width="100%";style.height="100%";this.oGhostRectangle.appendChild(innerDiv);if(UCF_System.sDevice=="ie6"){ this.oGhostRectangle.onselectstart=function(){return false;};}return this.oGhostRectangle;}; UCF_PopupWindow.prototype.showResizeAnimation=function(oSrcRect,oTrgtRect,callbackMethod){if(this.bAnimationInProgress)return;this.bAnimationInProgress=true;this.oSrcRect=oSrcRect;this.oTrgtRect=oTrgtRect;this.callbackMethod=callbackMethod;this.iAnimationStartTime=new Date().valueOf(); this.oCreateGhostRectangle();this.doResizeAnimationStep();}; UCF_PopupWindow.prototype.doResizeAnimationStep=function(){var iDuration=200,iTime=new Date().valueOf();if(iTime>this.iAnimationStartTime+iDuration||this.bStopAnimation){ UCF_DomUtil.removeFromDom(this.oGhostRectangle);this.oGhostRectangle=null;this.bAnimationInProgress=false;if(this.callbackMethod&&!this.bStopAnimation){this.callbackMethod();this.callbackMethod=null;}}else{ var fFactor=(iTime-this.iAnimationStartTime)/iDuration,rect={x:this.oSrcRect.x,y:this.oSrcRect.y,width:this.oSrcRect.width,height:this.oSrcRect.height};rect.x+=(this.oTrgtRect.x-this.oSrcRect.x)*fFactor;rect.y+=(this.oTrgtRect.y-this.oSrcRect.y)*fFactor;rect.width+=(this.oTrgtRect.width-this.oSrcRect.width)*fFactor;rect.height+=(this.oTrgtRect.height-this.oSrcRect.height)*fFactor;var style=this.oGhostRectangle.style;style.left=rect.x;style.top=rect.y;style.width=rect.width;style.height=rect.height;UCF_JsUtil.delayedCall(iDuration/10,this,"doResizeAnimationStep",[]);}}; UCF_PopupWindow.prototype.blink=function(){if(this.isBlinking)return;this.doBlink(5);}; UCF_PopupWindow.prototype.doBlink=function(step){var visibility=(step % 2==0)?"visible":"hidden";this.oIFrame.style.visibility=visibility;var that=this;if(step>0){UCF_JsUtil.delayedCall(80,this,"doBlink",[step-1]);}else{this.isBlinking=false;this.focus();}}; UCF_PopupWindow.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var srcElement=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setEnabled(this.bEnabled);if(srcElement.getAttribute("action")=="close"){oAccessibilityHelper.setTooltip(this.oLS.sGetText("SAPUR_POPUP_CLOSE"));oAccessibilityHelper.setControlType("PW");oAccessibilityHelper.addEnabledTutor("B_TUT",this.bEnabled);}else if(srcElement.getAttribute("action")=="minmax"&&srcElement.tagName=="A"){if(this.bUserHasMaximized){var sTooltip=this.oLS.sGetText("SAPUR_POPUP_RESTORE");}else{var sTooltip=this.oLS.sGetText("SAPUR_POPUP_MAXIMIZE");}oAccessibilityHelper.setTooltip(sTooltip);oAccessibilityHelper.setControlType("PW");oAccessibilityHelper.addEnabledTutor("B_TUT",this.bEnabled);}else if(srcElement.id==this.sId+"-ttltxt"){oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(srcElement));oAccessibilityHelper.setControlType("PW");}else if(srcElement.getAttribute("acc_text")){oAccessibilityHelper.setText(this.oLS.sGetText(srcElement.getAttribute("acc_text")));oAccessibilityHelper.setControlType("PW");}};UCF_PopupWindow.prototype.onlshomemodifier=function(oBrowserEvent){ if(UCF_System.bIs508&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift())this.focus();}; UCF_PopupWindow.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_PopupWindow.prototype.aAttributeNames=["bIsResizable","bHasCloseButton","sX","sY","sWidth","sHeight","sDefaultButtonId","sHotkeysId","bOverrideMinimumSize","bIsMaximized"]; UCF_PopupWindow.prototype.aMethodNames=[];  UCF_PopupWindow.prototype.bIsResizable=true; UCF_PopupWindow.prototype.bHasCloseButton=true; UCF_PopupWindow.prototype.sX='-1'; UCF_PopupWindow.prototype.sY='-1'; UCF_PopupWindow.prototype.sWidth='-1'; UCF_PopupWindow.prototype.sHeight='-1'; UCF_PopupWindow.prototype.sDefaultButtonId=''; UCF_PopupWindow.prototype.sHotkeysId=''; UCF_PopupWindow.prototype.bOverrideMinimumSize=false; UCF_PopupWindow.prototype.bIsMaximized=false; UCF_PopupWindow.prototype.setDefaultValues=function(){this.bIsResizable=true;this.bHasCloseButton=true;this.sX='-1';this.sY='-1';this.sWidth='-1';this.sHeight='-1';this.sDefaultButtonId='';this.sHotkeysId='';this.bOverrideMinimumSize=false;this.bIsMaximized=false;}; UCF_PopupWindow.prototype.fireClose=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Close)this.oLS.markDirty();this.fireSemanticEvent("PopupWindow","Close",mParams);}; UCF_PopupWindow.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("PopupWindow","Hotkey",mParams);}; UCF_PopupWindow.prototype.fireMaximize=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Maximize)this.oLS.markDirty();this.fireSemanticEvent("PopupWindow","Maximize",mParams);}; UCF_PopupWindow.prototype.fireRestore=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Restore)this.oLS.markDirty();this.fireSemanticEvent("PopupWindow","Restore",mParams);};UCF_PopupWindow.prototype.aPublicMethods=["setSize"];
 function UCF_SingleColumnLayout(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_SingleColumnLayout.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_SingleColumnLayout.prototype.aAttributeNames=[]; UCF_SingleColumnLayout.prototype.aMethodNames=[];  UCF_SingleColumnLayout.prototype.setDefaultValues=function(){};
 function UCF_ItemListBoxItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ItemListBoxItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ItemListBoxItem.prototype.select=function(bSelect){if(bSelect){this.oDomRef.className="urIlb2ISel";}else{this.oDomRef.className="";}}; UCF_ItemListBoxItem.prototype.bMatchValue1=function(sString){var sSTRING=sString.toUpperCase();var sVALUE1=this.sValue1.toUpperCase();sVALUE1=sVALUE1.substr(0,sString.length);if(sSTRING==sVALUE1)return true;else return false;}; UCF_ItemListBoxItem.prototype.bMatchValue2=function(sString){var sSTRING=sString.toUpperCase();var sVALUE2=this.sValue2.toUpperCase();sVALUE2=sVALUE2.substr(0,sString.length);if(sSTRING==sVALUE2)return true;else return false;}; UCF_ItemListBoxItem.prototype.aAttributeNames=["sKey","sValue1","sValue2","sIconToolTip","bEnabled","sGroupTitle"]; UCF_ItemListBoxItem.prototype.aMethodNames=[];  UCF_ItemListBoxItem.prototype.sKey=''; UCF_ItemListBoxItem.prototype.sValue1=''; UCF_ItemListBoxItem.prototype.sValue2=''; UCF_ItemListBoxItem.prototype.sIconToolTip=''; UCF_ItemListBoxItem.prototype.bEnabled=true; UCF_ItemListBoxItem.prototype.sGroupTitle=''; UCF_ItemListBoxItem.prototype.setDefaultValues=function(){this.sKey='';this.sValue1='';this.sValue2='';this.sIconToolTip='';this.bEnabled=true;this.sGroupTitle='';};
 function UCF_TrackSwitch(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);};UCF_TrackSwitch.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TrackSwitch.prototype.onlsfocus=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),oConnectedTrackSwitch=this.oLS.oControlFactory.oGetControlById(oSource.getAttribute("connectId")),oFocusTo=null;if(!oConnectedTrackSwitch)oConnectedTrackSwitch=this;if(oSource==this.oDomRef){ var oNext=UCF_DomUtil.oGetNextSibling(oConnectedTrackSwitch.oDomRef,true);if(oNext)oFocusTo=UCF_DomUtil.oGetTabbableElementForward(oNext,true);}else{ var oPrevious=UCF_DomUtil.oGetPreviousSibling(oConnectedTrackSwitch.oDomRef,true);if(oPrevious)oFocusTo=UCF_DomUtil.oGetTabbableElementBackward(oPrevious,true);}if(oFocusTo){UCF_DomUtil.focusDomElement(oFocusTo);}else{this.oLS.focusEnd();}}; UCF_TrackSwitch.prototype.aAttributeNames=[]; UCF_TrackSwitch.prototype.aMethodNames=[];  UCF_TrackSwitch.prototype.setDefaultValues=function(){};
 function UCF_Image(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.initializeHandle(oDomRef);if(this.bAdjustImageSize){var oImage=(this.oDomRef.tagName=="SPAN")?this.oDomRef.firstChild:this.oDomRef;this.attachBrowserEvent("load",oImage);}this.bLoaded=false;};UCF_Image.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Image.prototype.onclick=function(oBrowserEvent){this.activate(oBrowserEvent);if(this.bIsInteractive){oBrowserEvent.cancelBubble();}};UCF_Image.prototype.onmousedown=function(oBrowserEvent){if(this.bIsInteractive){oBrowserEvent.cancelBubble();}};UCF_Image.prototype.ondblclick=function(oBrowserEvent){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();};UCF_Image.prototype.onlsselect=function(oBrowserEvent){this.activate(oBrowserEvent);if(this.bIsInteractive)oBrowserEvent.cancelBubble();};UCF_Image.prototype.activate=function(oBrowserEvent){var oSourceRef=oBrowserEvent.oGetSource();if(oSourceRef.tagName.toLowerCase()=="area"){var sAreaId=oSourceRef.getAttribute("areaid");this.fireImageMapClick(this.sId,sAreaId);}else{if(!this.bIsInteractive)return;this.fireActivate(this.sId);}}; UCF_Image.prototype.oGetImageTagReference=function(){return(this.oDomRef.tagName=="SPAN")?this.oDomRef.firstChild:this.oDomRef;}; UCF_Image.prototype.initialize=function(){if(this.oDomRef.loaded){this.handleLoad();}};UCF_Image.prototype.onload=function(){if(!this.bLoaded){this.handleLoad();}};UCF_Image.prototype.handleLoad=function(){this.bLoaded=true;var iTargetWidth=parseInt(this.sWidth),iTargetHeight=parseInt(this.sHeight);if(isNaN(iTargetWidth)||iTargetWidth<0)iTargetWidth=0;if(isNaN(iTargetHeight)||iTargetHeight<0)iTargetHeight=0;   if((iTargetWidth<=0)||(iTargetHeight<=0)){this.show();return;}var oImage=this.oGetImageTagReference(),iActWidth=this.oDomRef.offsetWidth,iActHeight=this.oDomRef.offsetHeight,iPropHeight=this.iGetProportionalSize(iTargetWidth,iActWidth,iActHeight);    if(iPropHeight>iTargetHeight){oImage.style.height=iTargetHeight;}else{oImage.style.width=iTargetWidth;}this.show();}; UCF_Image.prototype.iGetProportionalSize=function(iActSize,iRelatedSize,iRelatedMax){return Math.floor(iActSize*(iRelatedMax / iRelatedSize));}; UCF_Image.prototype.show=function(){this.oDomRef.style.visibility="visible";this.oDomRef.parentNode.style.height="auto";this.oDomRef.parentNode.style.width="auto";this.oDomRef.parentNode.style.display="inline-block";}; UCF_Image.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("IMG");oAccessibilityHelper.setLabel(this.sLabelText);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setEnabled(this.bEnabled); var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.addEnabledTutor("B_TUT",this.bEnabled&&this.bIsInteractive);}; UCF_Image.prototype.createDragDelegate=function(){if(!this.sDragSourceInfo)return;if(this.oDragDelegate)return;this.oDragDelegate=new(UCF_ClassLoader.oGetClass("UCF_ImageDragDelegate"))(this.oLS,this);this.addDelegate(this.oDragDelegate);}; UCF_Image.prototype.aAttributeNames=["sTooltip","sWidth","sHeight","bIsInteractive","sVisibility","sLabelText","bAdjustImageSize","sDragSourceInfo","bIsDragHandle","bEnabled"]; UCF_Image.prototype.aMethodNames=[];  UCF_Image.prototype.sTooltip=''; UCF_Image.prototype.sWidth=''; UCF_Image.prototype.sHeight=''; UCF_Image.prototype.bIsInteractive=false; UCF_Image.prototype.sVisibility="VISIBLE"; UCF_Image.prototype.sLabelText=''; UCF_Image.prototype.bAdjustImageSize=false; UCF_Image.prototype.sDragSourceInfo=''; UCF_Image.prototype.bIsDragHandle=false; UCF_Image.prototype.bEnabled=true; UCF_Image.prototype.setDefaultValues=function(){this.sTooltip='';this.sWidth='';this.sHeight='';this.bIsInteractive=false;this.sVisibility="VISIBLE";this.sLabelText='';this.bAdjustImageSize=false;this.sDragSourceInfo='';this.bIsDragHandle=false;this.bEnabled=true;}; UCF_Image.prototype.fireActivate=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Image","Activate",mParams);}; UCF_Image.prototype.fireImageMapClick=function(sId,sAreaId){var mParams={Id:sId,AreaId:sAreaId};this.fireSemanticEvent("Image","ImageMapClick",mParams);}; UCF_Image.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("Image","Drag",mParams);}; UCF_Image.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Image","DoubleClick",mParams);};
 function UCF_DOMAnalyzer(){UCF_Object.apply(this);this.iCount=0;this.iElementCount=0;this.iTextCount=0;this.mTagCount={};this.iNesting=0;this.iMaxNesting=0;this.iNestingSum=0;this.fAvgNesting=0;this.iTableNesting=0;this.iMaxTableNesting=0;this.iCritNesting=0;this.iMaxCritNesting=0;this.aCritNesting=[];this.iTime=0;};UCF_DOMAnalyzer.prototype=new UCF_Object(); UCF_DOMAnalyzer.prototype.trigger=function(){this.reset();this.iTime=new Date().valueOf();this.analyze(document.documentElement);this.iTime=new Date().valueOf()-this.iTime;this.fAvgNesting=Math.floor(10*this.iNestingSum / this.iElementCount)/ 10;var sText=this.createReport();alert(sText);}; UCF_DOMAnalyzer.prototype.analyze=function(node){var bIsTable,bIsCritical,sTagName;this.iCount++;if(this.iNesting>this.iMaxNesting)this.iMaxNesting=this.iNesting;if(this.iTableNesting>this.iMaxTableNesting)this.iMaxTableNesting=this.iTableNesting;if(this.iCritNesting>this.iMaxCritNesting){this.iMaxCritNesting=this.iCritNesting;this.sMaxCritNesting=this.aCritNesting.join("\n");}var nodeType=node.nodeType;switch(nodeType){case 1: sTagName=node.tagName;sId=node.getAttribute("id");sCt=node.getAttribute("ct");bIsTable=(sTagName=="TABLE");bIsCritical=node.currentStyle&&(node.currentStyle.height!="auto"||node.currentStyle.width!="auto");this.iElementCount++;this.iNestingSum+=this.iNesting;if(!this.mTagCount[sTagName])this.mTagCount[sTagName]=0;this.mTagCount[sTagName]++;this.iNesting++;if(bIsTable)this.iTableNesting++;if(bIsCritical){this.iCritNesting++;this.aCritNesting.push(sTagName+(sCt?", "+sCt+" \""+sId+"\"":""));}for(var i=0;i<node.childNodes.length;i++){this.analyze(node.childNodes[i]);}this.iNesting--;if(bIsTable)this.iTableNesting--;if(bIsCritical){this.iCritNesting--;this.aCritNesting.pop();}break;case 3: this.iTextCount++;break;case 8:}};UCF_DOMAnalyzer.prototype.reset=function(){this.iCount=0;this.iElementCount=0;this.iTextCount=0;this.mTagCount={};this.iNesting=0;this.iMaxNesting=0;this.iNestingSum=0;this.fAvgNesting=0;this.iTableNesting=0;this.iMaxTableNesting=0;this.iCritNesting=0;this.iMaxCritNesting=0;this.aCritNesting=[];};UCF_DOMAnalyzer.prototype.createReport=function(){var sReport="";sReport+="Nodes: "+this.iCount+"\n";sReport+="Element Nodes: "+this.iElementCount+"\n";sReport+="Text Nodes: "+this.iTextCount+"\n\n";sReport+="Max Nesting: "+this.iMaxNesting+"\n";sReport+="Avg Nesting: "+this.fAvgNesting+"\n\n";sReport+="Max Table Nesting: "+this.iMaxTableNesting+"\n";sReport+="Max Critical Nesting: "+this.iMaxCritNesting+"\n\n";sReport+="Max Critical Nesting Path:\n\n"+this.sMaxCritNesting+"\n\n";return sReport;};
 function UCF_Legend(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(UCF_System.bIs508){this.bSkipMsgSet=false;}};UCF_Legend.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Legend.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Legend.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Legend.prototype.onlstabprevious=function(oBrowserEvent){this.onlsskipback(oBrowserEvent);}; UCF_Legend.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource));oAccessibilityHelper.setControlType("LEG");if(this.bSkipMsgSet==false){oAccessibilityHelper.addTutor("SKIP");this.bSkipMsgSet=true;}}; UCF_Legend.prototype.aAttributeNames=[]; UCF_Legend.prototype.aMethodNames=[];  UCF_Legend.prototype.setDefaultValues=function(){};
 function UCF_EventQueueItem(oSemanticEvent){UCF_Object.apply(this);this.sControlName=oSemanticEvent.sGetControl();this.sEventName=oSemanticEvent.sGetName();this.sControlId=oSemanticEvent.mGetParameters()["Id"];this.sItemName=this.sControlName+"::"+this.sEventName+"::"+this.sControlId;this.sSerializedData=this.sSerialize(oSemanticEvent);};UCF_EventQueueItem.prototype=new UCF_Object(); UCF_EventQueueItem.prototype.sGetControlName=function(){return this.sControlName;}; UCF_EventQueueItem.prototype.sGetEventName=function(){return this.sEventName;}; UCF_EventQueueItem.prototype.sGetControlId=function(){return this.sControlId;}; UCF_EventQueueItem.prototype.sGetItemName=function(){return this.sItemName;}; UCF_EventQueueItem.prototype.sGetSerializedData=function(){return this.sSerializedData;}; UCF_EventQueueItem.prototype.sSerialize=function(oSemanticEvent){var aBuff=[];var ose=oSemanticEvent;aBuff.push(ose.sGetControl());aBuff.push("_");aBuff.push(ose.sGetName());this.sSerializeSection(ose.mGetParameters(),aBuff,true);this.sSerializeSection(ose.mGetUcfParameters(),aBuff,false);this.sSerializeSection(ose.mGetCustomParameters(),aBuff,false);return aBuff.join("");}; UCF_EventQueueItem.prototype.sSerializeSection=function(oParams,aBuff,bCollectionAllowed){var iCnt=0;if(oParams==null)iCnt;aBuff.push(this.E_SEPARATORS.SECTION_BEGIN);var bFirst=true;for(var i in oParams){if(!bFirst){aBuff.push(this.E_SEPARATORS.KEYVALUE_PAIR);}else{bFirst=false;}aBuff.push(i);aBuff.push(this.E_SEPARATORS.KEYVALUE);this.sSerializePropertyValue(oParams[i],aBuff,bCollectionAllowed);iCnt++;}aBuff.push(this.E_SEPARATORS.SECTION_END);return iCnt;}; UCF_EventQueueItem.prototype.sSerializePropertyValue=function(oValue,aBuff,bCollectionAllowed){switch(typeof(oValue)){case "object":if(this.bInstanceOfArray(oValue)&&bCollectionAllowed){ for(var i=0;i<oValue.length;i++){switch(typeof(oValue[i])){case "number":case "boolean":case "string":if(i>0)aBuff.push(this.E_SEPARATORS.COLLECTION_ENTRY);this.sSerializePropertyValue(oValue[i],aBuff,false);break;default:break;}}}else{}break;default:aBuff.push(oValue);}};UCF_EventQueueItem.prototype.bInstanceOfArray=function(oObject){     if(oObject instanceof Array)return true;if("[object Array]"==Object.prototype.toString.apply(oObject))return true;return false;}; UCF_EventQueueItem.prototype.E_SEPARATORS={EVENT:"\ue001",SECTION_BEGIN:"\ue002",SECTION_END:"\ue003",KEYVALUE:"\ue004",KEYVALUE_PAIR:"\ue005",COLLECTION_ENTRY:"\ue006"};
 function UCF_LineDecorator(oControl,bHorizontal){if(arguments.length==0)return;this.oControl=oControl;this.bHorizontal=bHorizontal;};UCF_LineDecorator.prototype=new UCF_Object(); UCF_LineDecorator.prototype.init=function(){var oParentContainer=this.oControl.oLS.oGetRootRef();var oDiv=this.oDecoratorDomRef=document.createElement("DIV");oDiv.style.position="absolute";if(this.bHorizontal)oDiv.style.height="2px";else oDiv.style.width="2px";var sFilter="progid:DXImageTransform.Microsoft.Alpha( Opacity=60, Style=0 )";oDiv.style.fontSize="1px";oDiv.style.backgroundColor="black"; oParentContainer.appendChild(oDiv);if(this.bHorizontal){ var oFirstArrow=document.createElement("div");oFirstArrow.style.position="absolute";oFirstArrow.style.backgroundRepeat="no-repeat";oFirstArrow.style.backgroundPosition="top left";oFirstArrow.style.width=12;oFirstArrow.style.height=12;oFirstArrow.style.overflow="hidden";oFirstArrow.className="urDDDecoLeft";oParentContainer.appendChild(oFirstArrow);this.oFirstArrow=oFirstArrow; var oSecondArrow=document.createElement("div");oSecondArrow.style.position="absolute";oSecondArrow.style.backgroundRepeat="no-repeat";oSecondArrow.style.backgroundPosition="top left";oSecondArrow.style.width=12;oSecondArrow.style.height=12;oSecondArrow.style.overflow="hidden";oSecondArrow.className="urDDDecoRight";oParentContainer.appendChild(oSecondArrow);this.oSecondArrow=oSecondArrow;}}; UCF_LineDecorator.prototype.cleanUp=function(){UCF_DomUtil.removeFromDom(this.oDecoratorDomRef);this.oDecoratorDomRef=null;UCF_DomUtil.removeFromDom(this.oFirstArrow);this.oFirstArrow=null;UCF_DomUtil.removeFromDom(this.oSecondArrow);this.oSecondArrow=null;}; UCF_LineDecorator.prototype.hide=function(){if(this.oDecoratorDomRef){this.oDecoratorDomRef.style.display="none";this.oFirstArrow.style.display="none";this.oSecondArrow.style.display="none";}};UCF_LineDecorator.prototype.show=function(){if(this.oDecoratorDomRef){this.oDecoratorDomRef.style.display="block";this.oFirstArrow.style.display="block";this.oSecondArrow.style.display="block";}};UCF_LineDecorator.prototype.setBounds=function(iLeft,iTop,iLength){ if(iLeft){this.oDecoratorDomRef.style.left=iLeft+"px";this.oFirstArrow.style.left=(iLeft-4)+"px";}if(iTop){this.oDecoratorDomRef.style.top=iTop+"px";this.oFirstArrow.style.top=(iTop-5)+"px";this.oSecondArrow.style.top=(iTop-5)+"px";}if(iLength){if(this.bHorizontal){this.oDecoratorDomRef.style.width=iLength+"px";this.oSecondArrow.style.left=(iLeft+iLength-8)+"px";}else{}}};UCF_LineDecorator.prototype.update=function(oBrowserEvent){};UCF_LineDecorator.prototype.bIsVisible=function(){return this.oDecoratorDomRef.style.display!="none";}; UCF_LineDecorator.prototype.setZIndex=function(iZIndex){if(this.oDecoratorDomRef)this.oDecoratorDomRef.style.zIndex=iZIndex;if(this.oFirstArrow)this.oFirstArrow.style.zIndex=iZIndex;if(this.oSecondArrow)this.oSecondArrow.style.zIndex=iZIndex;};
function UCF_PopupMenuDropDecorator(oPopupMenu,oLS){UCF_LineDecorator.apply(this,[oPopupMenu,true]);};UCF_PopupMenuDropDecorator.prototype=new(UCF_ClassLoader.oGetClass("UCF_LineDecorator"))();UCF_PopupMenuDropDecorator.prototype.init=function(){UCF_LineDecorator.prototype.init.apply(this,arguments);this.setZIndex(100);}; UCF_PopupMenuDropDecorator.prototype.update=function(oBrowserEvent){var iMouseX=oBrowserEvent.iPageX(),iMouseY=oBrowserEvent.iPageY();var oViewPort=UCF_DomUtil.oGetObjectRect(this.oControl.oDomRef);var iItemHeight=0,aItems=this.oControl.aItems,iItemCount=aItems.length,oFirstItem=aItems[0].oDomRef,iIndex=-1,iOffsetY=iMouseY-1,iTop=oViewPort.top;if(this.oControl.oDomHead.style.display!="none"){this.bScrolling=true;iTop+=this.oControl.oDomHead.offsetHeight;}for(var i=0;i<aItems.length;i++){var iItemHeight=aItems[i].oDomRef.offsetHeight;if(iOffsetY<iTop+Math.floor(iItemHeight/2)){this.iOffset=-1;break;}iTop+=iItemHeight;this.sItemId=aItems[i].sId;this.iOffset=1;iIndex=i;if(aItems[i].bHasSeparator){iTop+=aItems[i].oDomRef.previousSibling.offsetHeight;}}var iWidth=this.oControl.oDomRef.clientWidth;var iLeft=oViewPort.left;this.setBounds(iLeft,iTop,iWidth);}; UCF_PopupMenuDropDecorator.prototype.oGetDropLocation=function(){return{sItemId:this.sItemId,iOffset:this.iOffset};};
function UCF_ItemListBoxDropDecorator(oItemListBox,oLS){UCF_LineDecorator.apply(this,[oItemListBox,true]);this.oLS=oLS;}; UCF_ItemListBoxDropDecorator.prototype=new(UCF_ClassLoader.oGetClass("UCF_LineDecorator"))(); UCF_ItemListBoxDropDecorator.prototype.update=function(oBrowserEvent){var oViewPort=UCF_DomUtil.oGetObjectRect(this.oControl.oDomRef),iItemHeight=0,iItemCount=this.oControl.iGetItemCount(),aRows=this.oControl.oDomRef.getElementsByTagName("tr"),oFirstItem=aRows[0],iIndex=-1; if(oFirstItem&&iItemCount>0){iItemHeight=oFirstItem.offsetHeight;var iOffsetY=oBrowserEvent.iPageY()-oViewPort.top-1+this.oControl.oDomRef.scrollTop;iIndex=Math.floor((iOffsetY+iItemHeight / 2)/ iItemHeight); iIndex=Math.min(iIndex,iItemCount);}if(iIndex==-1){this.sKey="";this.iOffset=0;}else if(iIndex<iItemCount){var oItemListBoxItem=this.oLS.oGetControlByDomRef(aRows[iIndex],true);this.sKey=oItemListBoxItem.sKey;this.iOffset=-1;}else if(iIndex==iItemCount){var oItemListBoxItem=this.oLS.oGetControlByDomRef(aRows[iIndex-1],true);this.sKey=oItemListBoxItem.sKey;this.iOffset=1;} var iTop=iIndex*iItemHeight+oViewPort.top-this.oControl.oDomRef.scrollTop,iWidth=this.oControl.oDomRef.clientWidth,iLeft=oViewPort.left+1;if(UCF_System.bIsRTL)iLeft+=13;this.setBounds(iLeft,iTop,iWidth);}; UCF_ItemListBoxDropDecorator.prototype.oGetDropLocation=function(){return{sKey:this.sKey,iOffset:this.iOffset};};
 function UCF_DragDelegate(oLS){this.oLS=oLS;this.oDragSourceControl=null;};UCF_DragDelegate.prototype=new UCF_Object(); UCF_DragDelegate.prototype.oGetGhost=function(oBrowserEvent){ return this.oDragSourceControl.oDomRef.cloneNode(true);}; UCF_DragDelegate.prototype.setDragSourceControl=function(oDragSourceControl){this.oDragSourceControl=oDragSourceControl;}; UCF_DragDelegate.prototype.onlsdragstart=function(oBrowserEvent){ var oDragSourceControl=this.oGetDragSourceControl(oBrowserEvent);var sDragSourceInfoId=oDragSourceControl.sDragSourceInfo;if(!sDragSourceInfoId)return;var oDragSourceInfoControl=oDragSourceControl.oGetControlById(sDragSourceInfoId);if(!oDragSourceInfoControl)return;var sTags=oDragSourceInfoControl.sGetTags();if(!sTags)return;if(!this.bIsDragPossible(oBrowserEvent))return;var oDragAndDropManager=oBrowserEvent.oDragAndDropManager; if(oDragSourceControl.mEvents.Drag){oDragSourceControl.fireDrag(oDragSourceControl.sId,sDragSourceInfoId);} if(oDragSourceInfoControl.mEvents.DataAccess){oDragSourceInfoControl.fireDataAccess(sDragSourceInfoId,oDragSourceControl.sId);}else{ this.oLS.setDragData(oDragSourceInfoControl.sGetData(),oDragSourceInfoControl.sGetMimeType());}oBrowserEvent.bHandled=true;oBrowserEvent.cancelBubble();oDragAndDropManager.handleDefaultDragStart(oDragSourceControl.sId,sTags,this.oGetGhost(oBrowserEvent));}; UCF_DragDelegate.prototype.bIsDragPossible=function(oBrowserEvent){return true;}; UCF_DragDelegate.prototype.oGetDragSourceControl=function(oBrowserEvent){return this.oDragSourceControl;};
function UCF_PopupMenuDragDelegate(oLS,oDragSourceControl){UCF_DragDelegate.apply(this,[oLS]);this.setDragSourceControl(oDragSourceControl);};UCF_PopupMenuDragDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DragDelegate"))();UCF_PopupMenuDragDelegate.prototype.oGetGhost=function(oBrowserEvent){var oGhostDomRef=this.oDragSourceControl.oSelectedItem.oDomRef;oGhostClone=oGhostDomRef.cloneNode(true);for(var i=0;i<oGhostClone.childNodes.length;i++){oGhostClone.childNodes[i].style.width=oGhostDomRef.childNodes[i].offsetWidth+"px";}var oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oGhostClone);oGhost.setOffset(12,12);oGhost.oDomRef.style.width=this.oDragSourceControl.oDomRef.style.width;return oGhost;};UCF_PopupMenuDragDelegate.prototype.onlsdragend=function(oBrowserEvent){this.oDragSourceControl.close();};UCF_PopupMenuDragDelegate.prototype.bIsDragPossible=function(oBrowserEvent){if(this.oDragSourceControl.oSelectedItem&&this.oDragSourceControl.oSelectedItem.bEnabled){return oBrowserEvent.oGetSource()!=this.oDragSourceControl.oDomRef;}return false;};
 function UCF_BlockLayer(sId,oHostWindow,bShaded){UCF_EventProvider.apply(this);this.sId=sId;this.oHostWindow=oHostWindow;this.bShaded=bShaded;this.oDomRef=null;}UCF_BlockLayer.prototype=new UCF_EventProvider(); UCF_BlockLayer.prototype.E_EVENTS={Click:0,Focus:1}; UCF_BlockLayer.prototype.createDom=function(){var doc=this.oHostWindow.document;this.oDomRef=doc.getElementById(this.sId);if(this.oDomRef!=null)return;this.oDomRef=doc.createElement('div');this.oDomRef.id=this.sId;this.oDomRef.tabIndex="0";var style=this.oDomRef.style;style.position="absolute";style.display="none";style.zIndex="4999";style.backgroundColor="#CCC";if(!this.bShaded){style.opacity="0.0";style.filter="alpha(opacity=00)";} var firstChild=doc.body.firstChild;doc.body.insertBefore(this.oDomRef,firstChild);}; UCF_BlockLayer.prototype.show=function(iZIndex){if(this.oDomRef==null)this.createDom();if(!iZIndex)iZIndex=50000;var style=this.oDomRef.style;style.zIndex=iZIndex;if(style.display=="block")return;this.attachHandlers();this.resizeBlocklayer();style.opacity="0.0";style.filter="alpha(opacity=00)";style.display="block";if(this.bShaded){if(UCF_System.bUseAnimation){var oAnimation=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oDomRef,100);oAnimation.addOpacityChange(0,60,oAnimation.M_TRANSITIONS.EaseIn);oAnimation.play();}else{style.opacity="0.6";style.filter="alpha(opacity=60)";}}}; UCF_BlockLayer.prototype.hide=function(){this.oDomRef=this.oHostWindow.document.getElementById(this.sId);if(!this.oDomRef)return;if(this.oDomRef.style.display=="none")return;this.oDomRef.style.display="none";}; UCF_BlockLayer.prototype.attachHandlers=function(){var that=this;this.callbackResize=function(){that.resizeBlocklayer();};this.callbackCancel=function(event){that.cancelEvent(event);};this.callbackClick=function(event){that.clickHandler(event)};this.callbackFocus=function(event){that.focusHandler(event)};UCF_DomUtil.attachEvent(this.oHostWindow,"resize",this.callbackResize);UCF_DomUtil.attachEvent(this.oDomRef,"dragstart",this.callbackCancel);UCF_DomUtil.attachEvent(this.oDomRef,"contextmenu",this.callbackCancel);UCF_DomUtil.attachEvent(this.oDomRef,"click",this.callbackClick);UCF_DomUtil.attachEvent(this.oDomRef,"focus",this.callbackFocus);}; UCF_BlockLayer.prototype.detachHandlers=function(){if(!this.oDomRef||!this.oDomRef.parentNode)return;if(this.callbackResize)UCF_DomUtil.detachEvent(this.oHostWindow,"resize",this.callbackResize);if(this.callbackCancel)UCF_DomUtil.detachEvent(this.oDomRef,"dragstart",this.callbackCancel);if(this.callbackCancel)UCF_DomUtil.detachEvent(this.oDomRef,"contextmenu",this.callbackCancel);if(this.callbackClick)UCF_DomUtil.detachEvent(this.oDomRef,"click",this.callbackClick);if(this.callbackFocus)UCF_DomUtil.detachEvent(this.oDomRef,"focus",this.callbackFocus);this.callbackResize=null;this.callbackCancel=null;this.callbackClick=null;this.callbackFocus=null;}; UCF_BlockLayer.prototype.clickHandler=function(event){event=event||this.oHostWindow.event;if(!event)return;if(event.button&&event.button==2||event.which&&event.which==3){event.returnValue=false;return false;}this.fireEvent(this.E_EVENTS.Click);return false;}; UCF_BlockLayer.prototype.focusHandler=function(event){this.fireEvent(this.E_EVENTS.Focus);}; UCF_BlockLayer.prototype.resizeBlocklayer=function(){if(!this.oDomRef)return;var bdy=this.oHostWindow.document.body;var bodyScrollHeight=bdy.scrollHeight;var bodyScrollWidth=bdy.scrollWidth;var bodyClientHeight=bdy.clientHeight;var bodyClientWidth=bdy.clientWidth;var style=this.oDomRef.style;style.top="0px";if(UCF_System.bIsRTL){style.right="0px";}else{style.left="0px";} style.height=Math.max(bodyScrollHeight,bodyClientHeight)-1;style.width=Math.max(bodyScrollWidth,bodyClientWidth)-1;}; UCF_BlockLayer.prototype.cancelEvent=function(event){event=event||this.oHostWindow.event;if(!event)return false;event.returnValue=false;event.cancelBubble=true;return false;}; UCF_BlockLayer.prototype.destroy=function(){this.detachHandlers();this.oHostWindow=null;UCF_EventProvider.prototype.destroy.apply(this,arguments);};
 function UCF_ItemNavigation(){UCF_EventProvider.apply(this);this.iSelectedIndex=0;this.iFocusedIndex=0;this.bHasItems=false;this.oItemContainer=null;    this.bControlTabChain=true;};UCF_ItemNavigation.prototype=new UCF_EventProvider(); UCF_ItemNavigation.prototype.E_EVENTS={Select:0,Focus:1}; UCF_ItemNavigation.prototype.addItem=function(oItem,bSelected){if(!this.aItems)this.aItems=[];this.aItems.push(oItem);if(!oItem.oFocusDomRef)oItem.oFocusDomRef=oItem.oDomRef;if(bSelected){this.iSelectedIndex=this.aItems.length-1;this.iFocusedIndex=this.aItems.length-1;}this.bHasItems=true;}; UCF_ItemNavigation.prototype.bOccuredInItemContainer=function(oBrowserEvent){if(!this.oItemContainer)return true;return UCF_DomUtil.bContains(this.oItemContainer,oBrowserEvent.oGetSource());}; UCF_ItemNavigation.prototype.onlsnext=function(oBrowserEvent){if(!this.bOccuredInItemContainer(oBrowserEvent))return;if(this.iFocusedIndex<this.aItems.length-1){this.focusItemByIndex(this.iFocusedIndex+1);}else{this.onlshome(oBrowserEvent);}oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.onlsprevious=function(oBrowserEvent){if(!this.bOccuredInItemContainer(oBrowserEvent))return;if(this.iFocusedIndex>0){this.focusItemByIndex(this.iFocusedIndex-1);}else{this.onlsend(oBrowserEvent);}oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.onlshome=function(oBrowserEvent){if(!this.bOccuredInItemContainer(oBrowserEvent))return;this.focusItemByIndex(0);oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.onlsend=function(oBrowserEvent){if(!this.bOccuredInItemContainer(oBrowserEvent))return;this.focusItemByIndex(this.aItems.length-1);oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.onlstop=function(oBrowserEvent){this.onlshome(oBrowserEvent);oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.onlsbottom=function(oBrowserEvent){this.onlsend(oBrowserEvent);oBrowserEvent.cancel();}; UCF_ItemNavigation.prototype.focusItemByIndex=function(iNewIndex){if(!this.bHasItems)return;this.setFocusedIndex(iNewIndex); this.fireEvent(this.E_EVENTS.Focus,{oItem:this.aItems[this.iFocusedIndex]});if(UCF_System.bIs508)this.aItems[this.iFocusedIndex].moveFocus(); else this.aItems[iNewIndex].focus();}; UCF_ItemNavigation.prototype.setFocusedIndex=function(iIndex){if(!this.bHasItems)return;if(iIndex>this.aItems.length-1)iIndex=0;if(iIndex<0)iIndex=this.aItems.length-1; var oFocusDomRef=this.aItems[this.iFocusedIndex].oFocusDomRef;if(oFocusDomRef&&this.bControlTabChain)UCF_DomUtil.setTabIndex(oFocusDomRef,-1); this.iFocusedIndex=iIndex; oFocusDomRef=this.aItems[this.iFocusedIndex].oFocusDomRef;if(oFocusDomRef&&this.bControlTabChain)UCF_DomUtil.setTabIndex(oFocusDomRef,0);}; UCF_ItemNavigation.prototype.focusItem=function(oItem){if(!this.bHasItems)return;for(var i=0;i<this.aItems.length;i++){if(this.aItems[i]==oItem){this.focusItemByIndex(i);return;}}};       UCF_ItemNavigation.prototype.onclick=function(oBrowserEvent){if(!this.bHasItems||!this.bOccuredInItemContainer(oBrowserEvent))return;this.onlsselect(oBrowserEvent);}; UCF_ItemNavigation.prototype.onlsselect=function(oBrowserEvent){if(!this.bHasItems)return;var oSource=oBrowserEvent.oGetSource(); if(oSource.tagName=="A"&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.ENTER)return;var oItem=oBrowserEvent.oGetSourceControl(); for(var i=0;i<this.aItems.length;i++){if(this.aItems[i]==oItem){this.iSelectedIndex=i;this.setFocusedIndex(i);this.fireEvent(this.E_EVENTS.Select,{oItem:oItem,oBrowserEvent:oBrowserEvent});return;}}}; UCF_ItemNavigation.prototype.onlsfocus=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(!this.bOccuredInItemContainer(oBrowserEvent)||!this.bHasItems)return;if(oSource.getAttribute("itn")=="ITBB"||oSource.getAttribute("itn")=="ITBA"){ this.focusItemByIndex(this.iFocusedIndex);return;}else{ var idx=this.iIndexOf(oSource);if(idx>=0)this.iFocusedIndex=idx;}if(this.bIgnoreFocus)return;var oFromElement=oBrowserEvent.oGetFromElement(),oLS=oBrowserEvent.oGetSourceControl().oLS;var oFromControl=oLS.oGetControlByDomRef(oFromElement,false);if(!oFromControl||(oFromControl&&oFromControl.oGetParent()!=oBrowserEvent.oGetSourceControl().oGetParent())){this.focusItemByIndex(this.iSelectedIndex);}}; UCF_ItemNavigation.prototype.iIndexOf=function(oDomRef){if(!this.bHasItems&&!oDomRef)return-1;for(var i=0;i<this.aItems.length;i++){if(oDomRef==this.aItems[i].oFocusDomRef){return i;}}return-1;};
 function UCF_PlaceHolder(oLS,oDomRef){if(arguments.length==0)return;UCF_Control.apply(this,[oLS,oDomRef]);this.bKeepAlive=(this.sLifeCycle!="BROWSER");if(this.bKeepAlive){if(this.oRootRef){this.attachBrowserEvent("resize",this.oRootRef);}this.oContentRef=UCF_DomUtil.$(this.sId+"-ph");this.sContent=this.oRootRef.firstChild.innerHTML;this.oLS.oBrowserWindow.attachEvent(this.oLS.oBrowserWindow.E_EVENTS.LayoutChange,this,"update"); this.attachBrowserEvent("focusin",this.oContentRef);}};UCF_PlaceHolder.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PlaceHolder.prototype.destroy=function(){UCF_Control.prototype.destroy.apply(this,arguments);if(this.oRootRef){this.detachBrowserEvent("resize",this.oRootRef);}if(this.oContentRef){this.detachBrowserEvent("focusin",this.oContentRef);this.oLS.oBrowserWindow.detachEvent(this.oLS.oBrowserWindow.E_EVENTS.LayoutChange,this);this.oContentRef.parentNode.removeChild(this.oContentRef);this.oContentRef=null;}}; UCF_PlaceHolder.prototype.initialize=function(){if(this.oContentRef){this.update();}}; UCF_PlaceHolder.prototype.reconnectToDom=function(){if(this.oContentRef){if(this.oRootRef){this.detachBrowserEvent("resize",this.oRootRef);}var oDomRef=UCF_DomUtil.$(this.sId),oRootRef=UCF_DomUtil.$(this.sId+"-r");if(oRootRef){this.connectToDom(oDomRef);this.attachBrowserEvent("resize",this.oRootRef);}else{this.hide();this.oRootRef=null;}}}; UCF_PlaceHolder.prototype.bDoKeepAlive=function(){if(this.bKeepAlive){var oNewRootRef=UCF_DomUtil.$(this.sId+"-r");if(oNewRootRef){ var sNewContent=oNewRootRef.firstChild.innerHTML;return(this.sContent==sNewContent);}else{ return(this.sLifeCycle=="MANUAL");}}return false;}; UCF_PlaceHolder.prototype.onresize=function(){if(this.oContentRef){this.update();}}; UCF_PlaceHolder.prototype.bIsValid=function(){if(this.oContentRef){var oRootRef=UCF_DomUtil.$(this.sId+"-r");return(oRootRef!=null&&oRootRef==this.oRootRef);}else{return UCF_Control.prototype.bIsValid.apply(this,arguments);}}; UCF_PlaceHolder.prototype.update=function(){if(!this.oRootRef||this.oRootRef.style.visibility=="hidden"){this.hide();return;}var oRootRect=UCF_DomUtil.oGetObjectRect(this.oRootRef);if(oRootRect.height==0||oRootRect.top<0||(oRootRect.left<0&&!UCF_System.bIsRTL)){this.hide();return;}for(var i in oRootRect){this.oContentRef.style[i]=oRootRect[i]+"px";} if(UCF_UserAgent.bIsIE()&&this.oDomRef.tagName=="IFRAME"){this.oDomRef.style.height=oRootRect.height+"px";}}; UCF_PlaceHolder.prototype.hide=function(){this.oContentRef.style.top="-10000px";}; UCF_PlaceHolder.prototype.setKeepAlive=function(bKeepAlive){if(this.sLifeCycle=="MANUAL"){this.bKeepAlive=bKeepAlive;if(!bKeepAlive){UCF_JsUtil.delayedCall(0,this.oLS.oControlFactory,"purgeControl",[this]);}}};
 function UCF_ActiveComponent(oDomRef,oLS){if(arguments.length==0)return;UCF_PlaceHolder.apply(this,[oDomRef,oLS]);};UCF_ActiveComponent.prototype=new(UCF_ClassLoader.oGetClass("UCF_PlaceHolder"))(); UCF_ActiveComponent.prototype.initialize=function(){UCF_PlaceHolder.prototype.initialize.apply(this,arguments);}; UCF_ActiveComponent.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_ActiveComponent.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);};
 function UCF_PDFContainer(oDomRef,oLS){UCF_ActiveComponent.apply(this,[oDomRef,oLS]);};UCF_PDFContainer.prototype=new(UCF_ClassLoader.oGetClass("UCF_ActiveComponent"))(); UCF_PDFContainer.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSourceControl();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("AX");oAccessibilityHelper.addTutor("GROUP_TUT");}; UCF_PDFContainer.prototype.aAttributeNames=["sLifeCycle"]; UCF_PDFContainer.prototype.aMethodNames=["setKeepAlive"];  UCF_PDFContainer.prototype.sLifeCycle="BROWSER"; UCF_PDFContainer.prototype.setDefaultValues=function(){this.sLifeCycle="BROWSER";};
function UCF_SapTableHeaderCell(oDomRef,oTable){UCF_SapTableBaseCell.apply(this,arguments);this.oHeader=this;};UCF_SapTableHeaderCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableBaseCell"))();UCF_SapTableHeaderCell.prototype.setCellState=function(){if(this.oTable.mDataTips){var oDataTip=this.oTable.mDataTips[this.sId];if(oDataTip){this.oTable.addDelegate(oDataTip);UCF_JsUtil.delayedCall(0,this.oTable,"removeDataTipDelegateById",[this.sId]);}} if(this.sSortState=="ASCENDING")this.oAccessibilityHelper.setSortedAscending(true);if(this.sSortState=="DESCENDING")this.oAccessibilityHelper.setSortedDescending(true);  var sText=null;if(this.sHeaderCellType!="SELECTIONCOLUMN"){var sColumnInfo=this.sSpaceCleanUp(this.sGetColumnInfo());if(sColumnInfo){sText=sColumnInfo;}else{sText=this.oAccessibilityHelper.sGetText("EMPTY");}}if(sText)this.oAccessibilityHelper.setText(sText); if(this.sTooltip&&this.sTooltip!=sText) this.oAccessibilityHelper.setTooltip(this.sTooltip); if(this.oAccessInfo.eAction==this.oTable.ACTION.SELECTION_MENU_OPEN){this.oAccessibilityHelper.setControlType("ST_SMNU");}else if(this.sHeaderCellType=="SELECTIONCOLUMN"){this.oAccessibilityHelper.setControlType("ST_SCOL");}else{if(this.sHeaderCellDesign=="LEVEL1HEADER")this.oAccessibilityHelper.setControlType("ST_HDR1");else if(this.sHeaderCellDesign=="LEVEL2HEADER")this.oAccessibilityHelper.setControlType("ST_HDR2");else if(this.sHeaderCellDesign=="LEVEL3HEADER")this.oAccessibilityHelper.setControlType("ST_HDR3");}};UCF_SapTableHeaderCell.prototype.mGetSelectionState=function(){return this.bColumnSelected?this.SELECTION_STATE.COLUMN:this.SELECTION_STATE.NOT_SELECTED;};UCF_SapTableHeaderCell.prototype.sGetTutorInfo=function(){if(this.oAccessInfo.eAction==this.oTable.ACTION.SELECTION_MENU_OPEN){return "MENUSPACE_TUT";}else if(this.oAccessInfo.eAction==this.oTable.ACTION.HEADER_SORT){if(this.sSortState=="DESCENDING"){return "ST_SRT_ASC_TUT";}else if(this.sSortState=="ASCENDING"){return "ST_SRT_DES_TUT";}else if(this.sSortState=="NONE"){return "ST_SRT_TUT";}}else if(this.bColumnSelectable){if(this.bColumnSelected){}else{}}else if(this.sSortState!="DISABLED"){return "ST_HDR_SORT";}return "";};UCF_SapTableHeaderCell.prototype.sGetColumnInfo=function(){return this.sGetHeaderInfo(this);};UCF_SapTableHeaderCell.prototype.eGetSemanticColor=function(){var mSelectionState=this.mGetSelectionState();if(mSelectionState==this.SELECTION_STATE.PRIMARY||mSelectionState==this.SELECTION_STATE.SECONDARY)return this.oAccessibilityHelper.E_SEMANTIC.Selected;else if(this.bFiltered)return this.oAccessibilityHelper.E_SEMANTIC.Filtered;return this.oAccessibilityHelper.E_SEMANTIC.Standard;}; UCF_SapTableHeaderCell.prototype.aAttributeNames=["sSortState","sHeaderCellDesign","sHeaderCellType","sSelectionMenuId","bRequired","sTooltip","bColumnSelected","bColumnSelectable","bFiltered","bMarkTotals","sAccessibilityDescription"]; UCF_SapTableHeaderCell.prototype.aMethodNames=[];  UCF_SapTableHeaderCell.prototype.sSortState="DISABLED"; UCF_SapTableHeaderCell.prototype.sHeaderCellDesign="LEVEL1HEADER"; UCF_SapTableHeaderCell.prototype.sHeaderCellType="STANDARD"; UCF_SapTableHeaderCell.prototype.sSelectionMenuId=''; UCF_SapTableHeaderCell.prototype.bRequired=false; UCF_SapTableHeaderCell.prototype.sTooltip=''; UCF_SapTableHeaderCell.prototype.bColumnSelected=false; UCF_SapTableHeaderCell.prototype.bColumnSelectable=false; UCF_SapTableHeaderCell.prototype.bFiltered=false; UCF_SapTableHeaderCell.prototype.bMarkTotals=false; UCF_SapTableHeaderCell.prototype.sAccessibilityDescription=''; UCF_SapTableHeaderCell.prototype.setDefaultValues=function(){this.sSortState="DISABLED";this.sHeaderCellDesign="LEVEL1HEADER";this.sHeaderCellType="STANDARD";this.sSelectionMenuId='';this.bRequired=false;this.sTooltip='';this.bColumnSelected=false;this.bColumnSelectable=false;this.bFiltered=false;this.bMarkTotals=false;this.sAccessibilityDescription='';};
 function UCF_HorizontalContextualPanelMenuItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef;};UCF_HorizontalContextualPanelMenuItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_HorizontalContextualPanelMenuItem.prototype.aAttributeNames=["iTabIndex","iIndex","sTooltip","bEnabled","sAccessKey"]; UCF_HorizontalContextualPanelMenuItem.prototype.aMethodNames=[];  UCF_HorizontalContextualPanelMenuItem.prototype.iTabIndex=0; UCF_HorizontalContextualPanelMenuItem.prototype.iIndex=0; UCF_HorizontalContextualPanelMenuItem.prototype.sTooltip=''; UCF_HorizontalContextualPanelMenuItem.prototype.bEnabled=true; UCF_HorizontalContextualPanelMenuItem.prototype.sAccessKey=''; UCF_HorizontalContextualPanelMenuItem.prototype.setDefaultValues=function(){this.iTabIndex=0;this.iIndex=0;this.sTooltip='';this.bEnabled=true;this.sAccessKey='';};
 function UCF_PatternContainerTab(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PatternContainerTab.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PatternContainerTab.prototype.initialize=function(){this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.createItems();this.bScrollingNeeded=this.aItems.length>this.iMaxVisibleItems;this.iPageSize=Math.floor(this.aItems.length / this.iMaxVisibleItems);this.iFirstVisibleItemIndex=Math.floor(this.iSelectedIndex / this.iMaxVisibleItems)*this.iMaxVisibleItems;this.updateScrollButtons();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);UCF_DomUtil.setTabIndex(this.oDomRef,-1);if(this.aItems.length>0){this.oItemNavigation.oItemContainer=this.oDomRef.firstChild.firstChild;}}; UCF_PatternContainerTab.prototype.updateScrollButtons=function(){if(!this.bScrollable)return;var oPagingRef=UCF_DomUtil.$(this.sId+"-pag");if(this.bScrollingNeeded){oPagingRef.style.visibility="visible";}else{oPagingRef.style.visibility="hidden";return;}var aButtons=oPagingRef.childNodes;if(this.iFirstVisibleItemIndex>0){aButtons[0].className="urBtnStd urPGBtn urPGHBegin";aButtons[1].className="urBtnStd urPGBtn urPGHPrevPage";}else{aButtons[0].className="urBtnStdDsbl urPGBtn urPGHBeginDsbl";aButtons[1].className="urBtnStdDsbl urPGBtn urPGHPrevPageDsbl";}if(this.iFirstVisibleItemIndex+this.iMaxVisibleItems<this.aItems.length){aButtons[2].className="urBtnStd urPGBtn urPGHNxtPage";aButtons[3].className="urBtnStd urPGBtn urPGHEnd";}else{aButtons[2].className="urBtnStdDsbl urPGBtn urPGHNxtPageDsbl";aButtons[3].className="urBtnStdDsbl urPGBtn urPGHEndDsbl";}this.oItemNavigation.aItems=[];this.createItems();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);}; UCF_PatternContainerTab.prototype.createItems=function(){this.aItems=[];var aItems=this.aItems,iItemsLength=this.oDomRef.getAttribute("ic"),aItemIds=this.oDomRef.getAttribute("itemids").split(",");for(var iItemCount=0;iItemCount<iItemsLength;iItemCount++){var oDomItem=UCF_DomUtil.$(aItemIds[iItemCount]),oItem=this.oLS.oControlFactory.oGetControlByDomRef(oDomItem,true);oItem.iIndex=iItemCount;oItem.bSelected=oItem.iIndex==this.iSelectedIndex;aItems.push(oItem);if(oItem.bGetVisible()&&oItem.bEnabled){this.oItemNavigation.addItem(oItem,oItem.bSelected);}}}; UCF_PatternContainerTab.prototype.onlshotkey=function(oBrowserEvent){var oSelectedItem=this.aItems[this.iSelectedIndex];if(oSelectedItem.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(oSelectedItem.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_PatternContainerTab.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId==this.sId+"-menu"){this.toggleMenu();return;}else if(sSourceId==this.sId+"-itemmenu"){this.toggleItemMenu(oSource);return;}else if(sSourceId==this.sId+"-begin-btn-0"){this.firstPage();return;}else if(sSourceId==this.sId+"-end-btn-3"){this.lastPage();return;}else if(sSourceId==this.sId+"-prev-btn-1"){this.previousPage();return;}else if(sSourceId==this.sId+"-next-btn-2"){this.nextPage();return;}}; UCF_PatternContainerTab.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem");if(oItem.bEnabled&&oItem.iIndex!=this.iSelectedIndex){this.fireTabSelect(this.sId,oItem.sId);}}; UCF_PatternContainerTab.prototype.toggleMenu=function(){if(!this.sOptionMenuId)return;var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); if(!oMenuButtonRef)return;if(!this.oOptionMenu){this.fireMenuAccess(this.sId);this.oOptionMenu=this.oLS.oControlFactory.oGetControlById(this.sOptionMenuId,true);if(!this.oOptionMenu)return;this.oOptionMenu.setOpenerRef(oMenuButtonRef);this.oOptionMenu.setOpenerId(this.sId);this.oOptionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oOptionMenu.setOffsetTop(-1);this.oOptionMenu.setOffsetLeft(-1);this.oOptionMenu.attachEvent(this.oOptionMenu.E_EVENTS.Close,this,"onOptionClose")}if(this.bOptionMenuIsOpened){this.oOptionMenu.close();}else{this.oOptionMenu.open();}};UCF_PatternContainerTab.prototype.toggleItemMenu=function(oSource){if(!this.oItemMenu){ var sMenuId=oSource.getAttribute("menuid");if(!sMenuId)return;this.oItemMenu=this.oLS.oControlFactory.oGetControlById(sMenuId);this.oItemMenu.setOpenerRef(oSource);this.oItemMenu.setOpenerId(this.sId);this.oItemMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);}this.oItemMenu.attachEvent(this.oItemMenu.E_EVENTS.Select,this,"onMenuItemSelect");this.oItemMenu.attachEvent(this.oItemMenu.E_EVENTS.Close,this,"onMenuClose");this.oItemMenu.bFirstVisibleItemIndex=0;if(this.oItemMenu.bOpened){this.oItemMenu.close();}else{this.oItemMenu.open();var oMenuItems=this.oItemMenu.aItems;for(var i=0;i<oMenuItems.length;i++){if(oMenuItems[i].bChecked&&i!=this.iCurrentIndex)oMenuItems[i].setChecked(false);}this.oItemMenu.aItems[this.iSelectedIndex].setChecked(true);this.bMenuOpened=true;}}; UCF_PatternContainerTab.prototype.onMenuItemSelect=function(oEvent){var sItemId=oEvent.oGetParam("sItemId");if(sItemId){ var aMenuItems=this.oItemMenu.aItems;for(var i=0;i<aMenuItems.length;i++){var oItem=aMenuItems[i];if(oItem.sId==sItemId&&i!=this.iSelectedIndex){this.fireTabSelect(this.sId,this.aItems[i].sId);return;}}}}; UCF_PatternContainerTab.prototype.onMenuClose=function(oEvent){var oMenuButton=UCF_DomUtil.$(this.sId+'-menu');UCF_DomUtil.focusDomElement(oMenuButton);this.oItemMenu.detachEvent(this.oItemMenu.E_EVENTS.Close,this);this.oItemMenu.detachEvent(this.oItemMenu.E_EVENTS.Select,this,"onMenuItemSelect");};UCF_PatternContainerTab.prototype.onOptionClose=function(oEvent){var oMenuButton=UCF_DomUtil.$(this.sId+'-menu');UCF_DomUtil.focusDomElement(oMenuButton);this.oOptionMenu.detachEvent(this.oOptionMenu.E_EVENTS.Close,this);}; UCF_PatternContainerTab.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_PatternContainerTab.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_PatternContainerTab.prototype.nextPage=function(){this.iFirstVisibleItemIndex=this.iFirstVisibleItemIndex+this.iMaxVisibleItems;if(this.iFirstVisibleItemIndex>this.aItems.length-this.iMaxVisibleItems){this.iFirstVisibleItemIndex=this.aItems.length-this.iMaxVisibleItems;}this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerTab.prototype.previousPage=function(){this.iFirstVisibleItemIndex=this.iFirstVisibleItemIndex-this.iMaxVisibleItems;if(this.iFirstVisibleItemIndex<0){this.iFirstVisibleItemIndex=0;}this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerTab.prototype.firstPage=function(){this.iFirstVisibleItemIndex=0;this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerTab.prototype.lastPage=function(){this.iFirstVisibleItemIndex=this.aItems.length-this.iMaxVisibleItems;this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerTab.prototype.applyItemVisibility=function(){for(var iItemCount=0;iItemCount<this.aItems.length;iItemCount++){var bIsVisible=iItemCount>=this.iFirstVisibleItemIndex&&iItemCount<this.iFirstVisibleItemIndex+this.iMaxVisibleItems;this.aItems[iItemCount].bFirstVisibleItem=(this.iFirstVisibleItemIndex==iItemCount);if(iItemCount>0)this.aItems[iItemCount].bPreviousSelected=this.aItems[iItemCount-1].bSelected;this.aItems[iItemCount].bLastVisibleItem=(this.iFirstVisibleItemIndex+this.iMaxVisibleItems-1==iItemCount);this.aItems[iItemCount].bLastItem=(iItemCount==this.aItems.length-1);this.aItems[iItemCount].setVisible(bIsVisible);}}; UCF_PatternContainerTab.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource(),oSourceControl=oBrowserEvent.oGetSourceControl();if(oSource==this.oDomRef){oAccessibilityHelper.setControlType("PCTAB");oAccessibilityHelper.addTutor("SKIP");}else if(oSource.id==this.sId+"-menu"){oAccessibilityHelper.setControlType("PCTIT_MNU");oAccessibilityHelper.addTutor("PCTIT_MNU_TUT");}else if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("PCTAB_END");}else if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_PatternContainerTabItem")){oAccessibilityHelper.setControlType("PCTAB");oAccessibilityHelper.setItemIndex(oSourceControl.iItemIndex+1);oAccessibilityHelper.setItemCount(this.aItems.length);oAccessibilityHelper.setText(oSourceControl.sTitle);oAccessibilityHelper.setEnabled(oSourceControl.bEnabled);if(oSourceControl.iItemIndex==this.iSelectedIndex){oAccessibilityHelper.setSelected(true);}else{oAccessibilityHelper.addEnabledTutor("TS_ITM_NSEL_TUT",oSourceControl.bEnabled);}oAccessibilityHelper.addTutor("SKIP");}oBrowserEvent.cancelBubble();}; UCF_PatternContainerTab.prototype.aAttributeNames=["bHasOptionMenu","sOptionMenuId","bCollapsed","iMaxVisibleItems","iSelectedIndex","bScrollable","bHasContentConnector","sTooltip"]; UCF_PatternContainerTab.prototype.aMethodNames=[];  UCF_PatternContainerTab.prototype.bHasOptionMenu=false; UCF_PatternContainerTab.prototype.sOptionMenuId=''; UCF_PatternContainerTab.prototype.bCollapsed=false; UCF_PatternContainerTab.prototype.iMaxVisibleItems=7; UCF_PatternContainerTab.prototype.iSelectedIndex=0; UCF_PatternContainerTab.prototype.bScrollable=false; UCF_PatternContainerTab.prototype.bHasContentConnector=false; UCF_PatternContainerTab.prototype.sTooltip=''; UCF_PatternContainerTab.prototype.setDefaultValues=function(){this.bHasOptionMenu=false;this.sOptionMenuId='';this.bCollapsed=false;this.iMaxVisibleItems=7;this.iSelectedIndex=0;this.bScrollable=false;this.bHasContentConnector=false;this.sTooltip='';}; UCF_PatternContainerTab.prototype.fireMenuAccess=function(sId){var mParams={Id:sId};this.fireSemanticEvent("PatternContainerTab","MenuAccess",mParams);}; UCF_PatternContainerTab.prototype.fireTabSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.TabSelect)this.oLS.markDirty();this.fireSemanticEvent("PatternContainerTab","TabSelect",mParams);}; UCF_PatternContainerTab.prototype.fireScroll=function(sId,sFirstVisibleItemId){var mParams={Id:sId,FirstVisibleItemId:sFirstVisibleItemId};this.fireSemanticEvent("PatternContainerTab","Scroll",mParams);}; UCF_PatternContainerTab.prototype.fireHotkey=function(sId,sItemId,sHotkey,sProviderId){var mParams={Id:sId,ItemId:sItemId,Hotkey:sHotkey,ProviderId:sProviderId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Hotkey)this.oLS.markDirty();this.fireSemanticEvent("PatternContainerTab","Hotkey",mParams);};
function UCF_ItemListBoxDropDelegate(oLS,oDropTargetControl){UCF_DropDelegate.apply(this,[oLS]);this.setDropTargetControl(oDropTargetControl);this.iCurrentStep=0;this.oLS=oLS;};UCF_ItemListBoxDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DropDelegate"))(); UCF_ItemListBoxDropDelegate.prototype.oCreateDropDecorator=function(){return new(UCF_ClassLoader.oGetClass("UCF_ItemListBoxDropDecorator"))(this.oDropTargetControl,this.oLS);}; UCF_ItemListBoxDropDelegate.prototype.oGetDropLocation=function(oBrowserEvent){return this.oDropDecorator.oGetDropLocation();}; UCF_ItemListBoxDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oDropTargetControl.sDropTargetInfo;var oLocation=this.oGetDropLocation();var sKey=oLocation.sKey;var iOffset=oLocation.iOffset;var oDropTargetControl=this.oDropTargetControl;return function(sDragData,sMimeType){oDropTargetControl.fireDrop(oDropTargetControl.sId,sDragId,sDropTargetInfoId,sKey,iOffset,sDragData,sMimeType,sDragTags);};};
function UCF_DragAndDropManager(oBrowserWindow){this.oBrowserWindow=oBrowserWindow;this.iDragStartX=-1;this.iDragStartY=-1;this.sLastDragOverId=null;this.oLastHoveredDomRef=null;this.eDropEnabledCursor=this.CURSOR.ALLOWED;this.oGhost=null;this.oDragDecoration=null;this.oDropDecoration=null; this.setDragState(this.E_DRAGSTATE.NoDrag);this.oPreviouslyHoveredDomRef=null; this.bPreventContextMenu=false;this.sDelayedHoverCallId=null;this.sDragScrollIntervalId=null;this.sDragSourceId=null; this.iCurrentStepY=0;this.iCurrentStepX=0;};UCF_DragAndDropManager.prototype=new UCF_Object(); UCF_DragAndDropManager.prototype.iDDTHRESHOLD=6;UCF_DragAndDropManager.prototype.CURSOR={NONE:"",ALLOWED:"default",NOT_ALLOWED:"not-allowed",H_RESIZE:"col-resize",V_RESIZE:"row-resize"};UCF_DragAndDropManager.prototype.TAG_MATCHING={SEPERATOR:" ",WILDCARD:"*"}; UCF_DragAndDropManager.prototype.E_DRAGSTATE={DragPossible:0, Drag:1, DropPending:2, NoDrag:-1};UCF_DragAndDropManager.prototype.I_INTERVAL={DragHover:500,DragScroll:10}; UCF_DragAndDropManager.prototype.notifyMouseDown=function(oBrowserEvent){ if(this.oDragSession&&this.oDragSession.bDropPending)return;var iMouseButtonState=oBrowserEvent.eGetMouseButtonState();if(this.eDragState==this.E_DRAGSTATE.NoDrag){if(oBrowserEvent.eGetMouseButtonState()==oBrowserEvent.MOUSE_BUTTON_STATE.Left){this.initializeDragSession(oBrowserEvent);}}else{var bWasChordClick=iMouseButtonState==oBrowserEvent.MOUSE_BUTTON_STATE.Left_Right; if(UCF_UserAgent.bIsFirefox()){if(iMouseButtonState==oBrowserEvent.MOUSE_BUTTON_STATE.Right&&this.iMouseButtonState==oBrowserEvent.MOUSE_BUTTON_STATE.Left)bWasChordClick=true;else if(iMouseButtonState==oBrowserEvent.MOUSE_BUTTON_STATE.Left&&this.iMouseButtonState==oBrowserEvent.MOUSE_BUTTON_STATE.Right)bWasChordClick=true;}if(bWasChordClick){  this.fireDragEnd(oBrowserEvent,false);this.finishDragSession();  this.bPreventContextMenu=true;}else{  this.notifyMouseUp(oBrowserEvent);}}}; UCF_DragAndDropManager.prototype.initializeDragSession=function(oBrowserEvent){ this.iDragStartX=oBrowserEvent.iPageX();this.iDragStartY=oBrowserEvent.iPageY();this.bPreventContextMenu=false;var oDragSource=UCF_DomUtil.oGetParentByAttribute(oBrowserEvent.oGetSource(),"id");if(!oDragSource)return;this.sDragSourceId=oDragSource.id; this.iDDThreshold=this.iDDTHRESHOLD;var iDomDefinedThreshold=oBrowserEvent.oGetSource().getAttribute("iDDThreshold");if(iDomDefinedThreshold){this.iDDThreshold=iDomDefinedThreshold;}this.setDragState(this.E_DRAGSTATE.DragPossible); this.oBrowserWindow.attachBrowserEvent("mousemove",document);this.oBrowserWindow.attachBrowserEvent("mouseup",document); if(UCF_System.sDevice=="ff1"){var oSource=oBrowserEvent.oGetSource(),sMozUserSelect=UCF_DomUtil.sGetCurrentStyle(oSource,"-moz-user-select");if(sMozUserSelect=="none"){oBrowserEvent.cancel();oBrowserEvent.oDomEvent.returnValue=false;}}}; UCF_DragAndDropManager.prototype.bThresholdExceeded=function(oBrowserEvent){ return(Math.abs(this.iDragStartX-oBrowserEvent.iPageX())>this.iDDThreshold||Math.abs(this.iDragStartY-oBrowserEvent.iPageY())>this.iDDThreshold)}; UCF_DragAndDropManager.prototype.bCanStartDragSession=function(oBrowserEvent){ this.sCursorBefore=document.getElementById(this.sDragSourceId).style.cursor;this.oDragSession=new(UCF_ClassLoader.oGetClass("UCF_DragSession"))(oBrowserEvent);UCF_DomUtil.oGetTopWindow().oDragSession=this.oDragSession;return this.fireDragStart(oBrowserEvent);};UCF_DragAndDropManager.prototype.notifyMouseMove=function(oBrowserEvent){ if(!this.bStandAlone())this.transferDragSession(oBrowserEvent);if(this.oDragSession&&this.oDragSession.bDropPending)return;if(this.eDragState==this.E_DRAGSTATE.DragPossible){ if(!this.bThresholdExceeded(oBrowserEvent))return;var bHandled=this.bCanStartDragSession(oBrowserEvent);if(bHandled){this.setDragState(this.E_DRAGSTATE.Drag);  var oHoveredDomRef=this.oGetDragOverDomRef(oBrowserEvent);this.fireDragEvents(oBrowserEvent,oHoveredDomRef);}else{ oBrowserEvent.cancelBubble();this.finishDragSession(oBrowserEvent);}}else if(this.eDragState==this.E_DRAGSTATE.Drag){ var oHoveredDomRef=this.oGetDragOverDomRef(oBrowserEvent);this.fireDragEvents(oBrowserEvent,oHoveredDomRef);this.updateGhostAndDecorators(oBrowserEvent);}}; UCF_DragAndDropManager.prototype.fireDragEvents=function(oBrowserEvent,oHoveredDomRef){var sDebug="fireDragEvents ";if(!this.oDragSession)return false;if(!oHoveredDomRef)return false;var oNextDragOverWithId=UCF_DomUtil.oGetParentByAttribute(oHoveredDomRef,"id"),sDragOverId=(oNextDragOverWithId)?oNextDragOverWithId.getAttribute("id"):null,sLastDragOverId=this.sLastDragOverId,bHandled=false; sDebug+="dragover:"+sDragOverId+" sLastDragOver:"+sLastDragOverId; if(sLastDragOverId!=null&&sDragOverId!=sLastDragOverId){bHandled=this.fireDragLeave(oBrowserEvent,this.oLastHoveredDomRef);} if(sDragOverId!=null&&sDragOverId!=sLastDragOverId){bHandled=this.fireDragEnter(oBrowserEvent,oHoveredDomRef)||bHandled;}this.sLastDragOverId=sDragOverId;this.oLastHoveredDomRef=oNextDragOverWithId; bHandled=bHandled||this.fireDragOver(oBrowserEvent,oHoveredDomRef); bHandled=bHandled||this.fireDrag(oBrowserEvent); if(this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.STANDARD){ if(this.sDragScrollIntervalId){UCF_JsUtil.clearIntervalCall(this.sDragScrollIntervalId);}this.sDragScrollIntervalId=UCF_JsUtil.intervalCall(this.I_INTERVAL.DragScroll,this,"fireDragScroll",[oBrowserEvent,oHoveredDomRef,UCF_JsUtil.oClone(oBrowserEvent.oDomEvent,false)]); if(this.sDelayedHoverCallId){UCF_JsUtil.clearDelayedCall(this.sDelayedHoverCallId);}this.sDelayedHoverCallId=UCF_JsUtil.delayedCall(this.I_INTERVAL.DragHover,this,"fireDragHover",[oBrowserEvent,oHoveredDomRef,UCF_JsUtil.oClone(oBrowserEvent.oDomEvent,false)]);} if(oHoveredDomRef!=this.oPreviouslyHoveredDomRef&&this.oDragSession.eDragType!=this.oDragSession.DRAG_TYPE.NONE){ if(this.oPreviouslyHoveredDomRef){this.oPreviouslyHoveredDomRef.style.cursor=this.sOldCursor;}this.sOldCursor=oHoveredDomRef.style.cursor?oHoveredDomRef.style.cursor:this.CURSOR.ALLOWED;}this.oPreviouslyHoveredDomRef=oHoveredDomRef;if(this.oDragSession.eDragType!=this.oDragSession.DRAG_TYPE.NONE){var sCursor=this.bGetDropAllowed()?this.eDropEnabledCursor:this.CURSOR.NOT_ALLOWED;oHoveredDomRef.style.cursor=sCursor;if(this.oGhost){this.oGhost.setCursor(sCursor);}}return bHandled;}; UCF_DragAndDropManager.prototype.notifyMouseOver=function(oBrowserEvent){ if(this.bStandAlone())return;this.transferDragSession(oBrowserEvent);};UCF_DragAndDropManager.prototype.transferDragSession=function(oBrowserEvent){var oExternalDragSession=UCF_DomUtil.oGetTopWindow().oDragSession;if(oExternalDragSession){ if(!this.oDragSession){this.setDragState(this.E_DRAGSTATE.Drag);this.oDragSession=oExternalDragSession;this.oBrowserWindow.attachBrowserEvent("mousemove",document);this.transferGhost(oExternalDragSession);}else { this.setDragState(this.E_DRAGSTATE.Drag); if(this.oDragSession!=oExternalDragSession){this.oDragSession=oExternalDragSession;this.transferGhost(oExternalDragSession);}}}else{ if(this.oDragSession){this.finishDragSession();}}var oDragOverDomRef=this.oGetDragOverDomRef(oBrowserEvent);if(this.oGetGhost()){if(oDragOverDomRef.tagName=="IFRAME"){this.oGetGhost().hide();}else{this.oGetGhost().show();}}}; UCF_DragAndDropManager.prototype.transferGhost=function(oExternalDragSession){var sGhostHTML=oExternalDragSession.sGetGhostHTML();if(this.oGetGhost()){this.oGetGhost().doDestroy();this.oGhost=null;}if(sGhostHTML&&!this.oGetGhost()){var oContainer=document.createElement("div");oContainer.innerHTML=sGhostHTML;this.oBrowserWindow.oRootRef.appendChild(oContainer);this.oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(UCF_DomUtil.oGetFirstChild(oContainer));this.oGhost.create(this.oBrowserWindow.oRootRef);var oGhost=oExternalDragSession.oGhost;this.oGhost.setOffset(oGhost.iOffsetLeft,oGhost.iOffsetTop);}};UCF_DragAndDropManager.prototype.bStandAlone=function(){return false;}; UCF_DragAndDropManager.prototype.notifyMouseOut=function(oBrowserEvent){ if(this.bStandAlone())return; if(this.oGhost)this.oGhost.hide();};UCF_DragAndDropManager.prototype.notifyMouseUp=function(oBrowserEvent){if(this.oDragSession&&this.oDragSession.bDropPending)return;if(this.eDragState==this.E_DRAGSTATE.DragPossible){this.finishDragSession();oBrowserEvent.cancelBubble();}else if(this.eDragState==this.E_DRAGSTATE.Drag){this.cancelTimedEvents(); var bHandled=this.fireDrop(oBrowserEvent); this.fireDragEnd(oBrowserEvent,bHandled);if(this.oGhost){this.oGhost.destroy();this.oGhost=null;delete this.oGhost;}if(!this.oDragSession.bDropPending){this.finishDragSession();}oBrowserEvent.cancelBubble();}}; UCF_DragAndDropManager.prototype.notifyMouseClick=function(oBrowserEvent){this.notifyMouseUp(oBrowserEvent);}; UCF_DragAndDropManager.prototype.notifyEscapePressed=function(oBrowserEvent){this.cancelTimedEvents(); this.fireDragEnd(oBrowserEvent,false);if(this.oDragSession)this.finishDragSession(oBrowserEvent);}; UCF_DragAndDropManager.prototype.notifyContextMenu=function(oBrowserEvent){   if(this.bPreventContextMenu){this.bPreventContextMenu=false;oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_DragAndDropManager.prototype.fireDragStart=function(oBrowserEvent){var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragstart);var oDragSourceDomRef=document.getElementById(this.sDragSourceId);oNewBrowserEvent.setSource(oDragSourceDomRef);oNewBrowserEvent.oDragAndDropManager=this;this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDrag=function(oBrowserEvent){if(!this.oDragSession)return false;var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.drag);var oDragSourceDomRef=document.getElementById(this.sDragSourceId);oNewBrowserEvent.setSource(oDragSourceDomRef);oNewBrowserEvent.oDragAndDropManager=this;this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDragOver=function(oBrowserEvent,oHoveredDomRef){ var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.oDragAndDropManager=this;oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragover);oNewBrowserEvent.setSource(oHoveredDomRef);this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;};UCF_DragAndDropManager.prototype.fireDragHover=function(oBrowserEvent,oHoveredDomRef,oDomEvent){ var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oDomEvent);oNewBrowserEvent.oDragAndDropManager=this;oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.draghover);oNewBrowserEvent.setSource(oHoveredDomRef); if(this.sDelayedHoverCallId){UCF_JsUtil.clearDelayedCall(this.sDelayedHoverCallId);}this.sDelayedHoverCallId=UCF_JsUtil.delayedCall(this.I_INTERVAL.DragHover,this,"fireDragHover",[oNewBrowserEvent,oHoveredDomRef,UCF_JsUtil.oClone(oNewBrowserEvent.oDomEvent,false)]);this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;};UCF_DragAndDropManager.prototype.fireDragScroll=function(oBrowserEvent,oHoveredDomRef,oDomEvent){ var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oDomEvent);oNewBrowserEvent.oDragAndDropManager=this;oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragscroll);oNewBrowserEvent.setSource(oHoveredDomRef);this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);this.handleDragScroll(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDragEnd=function(oBrowserEvent,bDropHandled){ if(!this.oDragSession)return false; var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragend);var oDragSourceDomRef=document.getElementById(this.sDragSourceId);oNewBrowserEvent.setSource(oDragSourceDomRef);oNewBrowserEvent.oDragAndDropManager=this;oNewBrowserEvent.bDropHandled=bDropHandled;this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDrop=function(oBrowserEvent){  if(!this.oDragSession)return false;var oHoveredDomRef=this.oGetDragOverDomRef(oBrowserEvent),oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.oDragAndDropManager=this;oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.drop);oNewBrowserEvent.setSource(oHoveredDomRef);this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDragEnter=function(oBrowserEvent,oSource){ var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragenter);oNewBrowserEvent.setSource(oSource);oNewBrowserEvent.oDragAndDropManager=this;  this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.fireDragLeave=function(oBrowserEvent,oSource){if(!this.oDragSession){return false;}var oNewBrowserEvent=new(UCF_ClassLoader.oGetClass("UCF_BrowserEvent"))(oBrowserEvent.oDomEvent);oNewBrowserEvent.setName(this.oBrowserWindow.E_LS_EVENTS.dragleave);oNewBrowserEvent.setSource(oSource);oNewBrowserEvent.oDragAndDropManager=this;this.oBrowserWindow.processBrowserEvent(oNewBrowserEvent);return oNewBrowserEvent.bHandled;}; UCF_DragAndDropManager.prototype.finishDragSession=function(){this.iDragStartX=-1;this.iDragStartY=-1;this.cancelTimedEvents();if(this.oLastHoveredDomRef&&(this.sOldCursor||this.sOldCursor==="")){this.oLastHoveredDomRef.style.cursor=this.sOldCursor;}this.sLastDragOverId=null;this.setDragState(this.E_DRAGSTATE.NoDrag);this.oBrowserWindow.detachBrowserEvent("mousemove",document);this.oBrowserWindow.detachBrowserEvent("mouseup",document);if(this.oGhost){this.oGhost.destroy();this.oGhost=null;delete this.oGhost;}if(this.oDropDecoration){this.oDropDecoration.cleanUp();this.oDropDecoration=null;}this.cleanUpDropArea();this.cleanUpDragArea();if(this.oPreviouslyHoveredDomRef&&(this.sOldCursor||this.sOldCursor==="")){this.oPreviouslyHoveredDomRef.style.cursor=this.sOldCursor;}this.oPreviouslyHoveredDomRef=null;this.oDragSession=null;UCF_DomUtil.oGetTopWindow().oDragSession=null;this.setDropEnabledCursor(this.CURSOR.ALLOWED);}; UCF_DragAndDropManager.prototype.oGetDragOverDomRef=function(oBrowserEvent){var oHoveredDomRef=null;if(UCF_System.sDevice!="ie6")return oBrowserEvent.oGetSource();if(this.oGetGhost()){var bGhostWasVisble=this.oGetGhost().bVisible;this.oGetGhost().hide();}if(this.oDropDecoration){var bDropDecoratorWasVisible=this.oDropDecoration.bIsVisible();this.oDropDecoration.hide();}if(this.oDragDecoration)this.oDragDecoration.hide();oHoveredDomRef=UCF_DomUtil.oGetElementFromPoint(oBrowserEvent.iParentX(),oBrowserEvent.iParentY());if(this.oGetGhost()&&bGhostWasVisble)this.oGetGhost().show();if(this.oDropDecoration&&bDropDecoratorWasVisible)this.oDropDecoration.show();if(this.oDragDecoration)this.oDragDecoration.show();return oHoveredDomRef;}; UCF_DragAndDropManager.prototype.oGetGhost=function(){return this.oGhost;};UCF_DragAndDropManager.prototype.applyStandardGhost=function(oDomRefDragFragment){var oDomRefGhost=oDomRefDragFragment.cloneNode(true);oDomRefGhost.style.width=oDomRefDragFragment.offsetWidth;oDomRefGhost.style.height=oDomRefDragFragment.offsetHeight;this.oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oDomRefGhost,this.oBrowserWindow.oRootRef);this.oGhost.create(this.oBrowserWindow.oRootRef);this.oDragSession.setGhostHTML(this.oGhost.oGhostRef.innerHTML);this.oDragSession.oGhost=this.oGhost;if(oDomRefDragFragment.tagName=="TR"){for(var i=0;i<oDomRefDragFragment.cells.length;i++){oDomRefGhost.cells[i].width=oDomRefDragFragment.cells[i].offsetWidth;}}}; UCF_DragAndDropManager.prototype.oGetDropDecoration=function(){return this.oDropDecoration;};UCF_DragAndDropManager.prototype.cleanUpDragArea=function(){if(!this.oDragSession)return;this.oDragSession.sDragId="";this.oDragSession.eDragType=this.oDragSession.DRAG_TYPE.NONE;this.oDragSession.sDragTags="";if(this.oDragDecoration){this.oDragDecoration.cleanUp();this.oDragDecoration=null;}};UCF_DragAndDropManager.prototype.cleanUpDropArea=function(){if(!this.oDragSession)return;    this.oDropDecoration=null;this.oDragSession.sDropTags="";this.oDragSession.eDropType=this.oDragSession.DROP_TYPE.NONE;}; UCF_DragAndDropManager.prototype.initDragArea=function(sDragId,eDragType,sDragTags,oDragDecoration){   this.oDragSession.sDragId=sDragId; if(eDragType!=this.oDragSession.eDragType){switch(eDragType){case this.oDragSession.DRAG_TYPE.STANDARD:this.setDropEnabledCursor(this.CURSOR.ALLOWED);break;case this.oDragSession.DRAG_TYPE.H_RESIZE:this.setDropEnabledCursor(this.CURSOR.H_RESIZE);break;case this.oDragSession.DRAG_TYPE.V_RESIZE:this.setDropEnabledCursor(this.CURSOR.V_RESIZE);}this.oDragSession.eDragType=eDragType;}if(sDragTags)this.oDragSession.sDragTags=sDragTags;if(oDragDecoration){if(this.oDragDecoration)this.oDragDecoration.cleanUp();this.oDragDecoration=oDragDecoration;this.oDragDecoration.init(this.oDragSession);}}; UCF_DragAndDropManager.prototype.initDropArea=function(eDropType,sDropTags,oDropDecoration){     var oDragSession=UCF_DomUtil.oGetTopWindow().oDragSession;if(!oDragSession)return;this.oDragSession=oDragSession;this.oDragSession.eDropType=eDropType;this.oDragSession.sDropTags=sDropTags;if(oDropDecoration){  this.oDropDecoration=oDropDecoration;if(this.bGetDropAllowed()){}}return this.bGetDropAllowed();};UCF_DragAndDropManager.prototype.setDropEnabledCursor=function(eCursor){this.eDropEnabledCursor=eCursor;};UCF_DragAndDropManager.prototype.bGetDropAllowed=function(sDropTags){ if(this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.NONE)return false;if(typeof(sDropTags)=="undefined")sDropTags=this.oDragSession.sDropTags;return this.bGetTagMatch(this.oDragSession.sDragTags,sDropTags);}; UCF_DragAndDropManager.prototype.bGetTagMatch=function(sSourceTags,sTargetTags){var aSourceTags=sSourceTags.split(this.TAG_MATCHING.SEPERATOR);var aTargetTags=sTargetTags.split(this.TAG_MATCHING.SEPERATOR);for(var i=0;i<aSourceTags.length;i++){var sSourceTag=aSourceTags[i];for(var j=0;j<aTargetTags.length;j++){var sTargetTag=aTargetTags[j];if(this.bGetSingleTagMatch(sSourceTag,sTargetTag))return true;}}return false;}; UCF_DragAndDropManager.prototype.bGetSingleTagMatch=function(sSourceTag,sTargetTag){var iBase=-1;var iWildcard=sSourceTag.indexOf(this.TAG_MATCHING.WILDCARD);if(iWildcard!=-1){iBase=iWildcard;}iWildcard=sTargetTag.indexOf(this.TAG_MATCHING.WILDCARD);if(iWildcard!=-1){if(iBase==-1)iBase=iWildcard;else iBase=Math.min(iBase,iWildcard);}if(iBase!=-1){sSourceTag=sSourceTag.substr(0,iBase);sTargetTag=sTargetTag.substr(0,iBase);}return sSourceTag==sTargetTag;}; UCF_DragAndDropManager.prototype.handleDefaultDragStart=function(sDragId,sDragTags,oGhost){this.initDragArea(sDragId,this.oDragSession.DRAG_TYPE.STANDARD,sDragTags);if(oGhost){this.oGhost=oGhost;this.oGhost.create(this.oBrowserWindow.oRootRef);this.oDragSession.setGhostHTML(this.oGhost.oGhostRef.innerHTML);this.oDragSession.oGhost=oGhost; if(!this.oGhost.bHasOffsetSet()){var oDragFragmentRect=UCF_DomUtil.oGetObjectRect(UCF_DomUtil.$(sDragId));if(UCF_System.bIsRTL){this.oGhost.setOffset(-oDragFragmentRect.left-oDragFragmentRect.width+this.iDragStartX,oDragFragmentRect.top-this.iDragStartY);}else{this.oGhost.setOffset(oDragFragmentRect.left-this.iDragStartX,oDragFragmentRect.top-this.iDragStartY);}}}}; UCF_DragAndDropManager.prototype.handleCustomDragStart=function(sDragId,eDragCustomType,oDomRef,sDragFragmentId,sDragTags){this.initDragArea(sDragId,this.oDragSession.DRAG_TYPE.STANDARD,sDragTags);this.oDragSession.setCustomType(eDragCustomType);this.oDragSession.setCustomData({sDragFragmentId:sDragFragmentId});this.applyStandardGhost(oDomRef);var oDragFragmentRect=UCF_DomUtil.oGetObjectRect(oDomRef);this.oGhost.setOffset(oDragFragmentRect.left-this.iDragStartX,oDragFragmentRect.top-this.iDragStartY);}; UCF_DragAndDropManager.prototype.eGetDragState=function(){return this.eDragState;}; UCF_DragAndDropManager.prototype.setDragState=function(eDragState){this.eDragState=eDragState;if(eDragState==this.E_DRAGSTATE.Drag||eDragState==this.E_DRAGSTATE.DropPending){this.oBrowserWindow.lock(UCF_BrowserWindow.LOCKTYPES.DRAGDROP);}else{this.oBrowserWindow.unlock(UCF_BrowserWindow.LOCKTYPES.DRAGDROP);}}; UCF_DragAndDropManager.prototype.setDragData=function(sDragData,sMimeType){if(!this.oDragSession)return;this.oDragSession.setDragData(sDragData,sMimeType); if(this.oDragSession.bDropPending){this.finishDragSession();}};UCF_DragAndDropManager.prototype.cancelTimedEvents=function(){if(this.sDelayedHoverCallId){UCF_JsUtil.clearDelayedCall(this.sDelayedHoverCallId);this.sDelayedHoverCallId=null;}if(this.sDragScrollIntervalId){UCF_JsUtil.clearIntervalCall(this.sDragScrollIntervalId);this.sDragScrollIntervalId=null;}}; UCF_DragAndDropManager.prototype.handleDragScroll=function(oBrowserEvent){var oMouseLocation={x:oBrowserEvent.iClientX(),y:oBrowserEvent.iClientY()},oViewPort=UCF_DomUtil.oGetInnerSize(window),oScrollOffset=UCF_DomUtil.oGetScrollOffset(window);oViewPort.left=0;oViewPort.top=0;var iVerticalZone=Math.min(35,oViewPort.height / 4),iHorizontalZone=Math.min(35,oViewPort.width / 4),iScrollThresholdTop=oViewPort.top+iVerticalZone,iScrollThresholdBottom=oViewPort.top+oViewPort.height-iVerticalZone,iScrollThresholdLeft=oViewPort.left+iHorizontalZone,iScrollThresholdRight=oViewPort.left+oViewPort.width-iHorizontalZone,iStepY=0,iStepX=0;if(oMouseLocation.x<iScrollThresholdLeft){iStepX=-Math.round((iScrollThresholdLeft-oMouseLocation.x)/ iHorizontalZone*10);}else if(oMouseLocation.x>iScrollThresholdRight){iStepX=Math.round((oMouseLocation.x-iScrollThresholdRight)/ iHorizontalZone*10);}if(oMouseLocation.y<iScrollThresholdTop){iStepY=-Math.round((iScrollThresholdTop-oMouseLocation.y)/ iVerticalZone*10);}else if(oMouseLocation.y>iScrollThresholdBottom){iStepY=Math.round((oMouseLocation.y-iScrollThresholdBottom)/ iVerticalZone*10);}if(this.iCurrentStepX<iStepX)this.iCurrentStepX++;else if(this.iCurrentStepX>iStepX)this.iCurrentStepX--;if(this.iCurrentStepY<iStepY)this.iCurrentStepY++;else if(this.iCurrentStepY>iStepY)this.iCurrentStepY--;window.scrollBy(this.iCurrentStepX,this.iCurrentStepY);this.updateGhostAndDecorators(oBrowserEvent);}; UCF_DragAndDropManager.prototype.updateGhostAndDecorators=function(oBrowserEvent){ if(this.oDragDecoration){this.oDragDecoration.update(oBrowserEvent);}if(this.oGetGhost()){this.oGetGhost().setPosition(oBrowserEvent.iPageX(),oBrowserEvent.iPageY());}};
 function UCF_RatingIndicator(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_RatingIndicator.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RatingIndicator.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSourceControl();oAccessibilityHelper.setTooltip(oSource.oDomRef.title);}; UCF_RatingIndicator.prototype.aAttributeNames=[]; UCF_RatingIndicator.prototype.aMethodNames=[];  UCF_RatingIndicator.prototype.setDefaultValues=function(){};
 function UCF_DragSession(oBrowserEvent){this.sDragId=""; this.eDragType=this.DRAG_TYPE.NONE; this.eDropType=this.DROP_TYPE.NONE; this.sDragTags=""; this.sDropTags=""; this.oCustomData=null; this.sCustomType=""; this.sGhostHTML=null; this.oGhost=null; this.sDragData=null; this.sMimeType=null; this.bDropPending=false; this.fDragDataChangeListener;};UCF_DragSession.prototype=new UCF_Object();UCF_DragSession.prototype.DRAG_TYPE={NONE:0,STANDARD:1,H_RESIZE:2,V_RESIZE:3};UCF_DragSession.prototype.DROP_TYPE={NONE:0,STANDARD:1,H_INSERT:2,V_INSERT:3};UCF_DragSession.prototype.sGetDragId=function(){return this.sDragId;};UCF_DragSession.prototype.eGetDragType=function(){return this.eDragType;};UCF_DragSession.prototype.eGetDropType=function(){return this.eDropType;};UCF_DragSession.prototype.setCustomType=function(sCustomType){this.sCustomType=sCustomType;};UCF_DragSession.prototype.sGetCustomType=function(){return this.sCustomType;};UCF_DragSession.prototype.setCustomData=function(oCustomData){this.oCustomData=oCustomData;};UCF_DragSession.prototype.oGetCustomData=function(){return this.oCustomData;};UCF_DragSession.prototype.setGhostHTML=function(sGhostHTML){this.sGhostHTML=sGhostHTML;};UCF_DragSession.prototype.setDragTags=function(sDragTags){this.sDragTags=sDragTags;};UCF_DragSession.prototype.sGetGhostHTML=function(){return this.sGhostHTML;};UCF_DragSession.prototype.setDragData=function(sDragData,sMimeType){this.sDragData=sDragData;this.sMimeType=sMimeType;if(this.fDragDataChangeListener)this.fDragDataChangeListener.apply(this,[sDragData,sMimeType]);};UCF_DragSession.prototype.sGetDragData=function(){return this.sDragData;};UCF_DragSession.prototype.sGetMimeType=function(){return this.sMimeType;};UCF_DragSession.prototype.oGetGhost=function(){return this.oGhost;};UCF_DragSession.prototype.setGhost=function(oGhost){this.oGhost=oGhost;}; UCF_DragSession.prototype.setDragDataChangeListener=function(fChangeListener){this.fDragDataChangeListener=fChangeListener;};
 function UCF_Caption(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;this.initializeHandle(oDomRef);};UCF_Caption.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_Caption.prototype.bParentIsLayout=function(oDomRef){var oParent=oDomRef.parentNode;if(oParent==null)return false;var sCt=oParent.ct;return(sCt=="CL"||sCt=="FL"||sCt=="GLC"||sCt=="GL"||sCt=="MLC"||sCt=="ML"||sCt=="MG"||sCt=="PHM"||sCt=="RL"||sCt=="SL"||sCt=="SLC"||sCt==null);}; UCF_Caption.prototype.onlsaccessibility=function(oBrowserEvent){if(this.bIsNested&&!this.bParentIsLayout(this.oDomRef))return;var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sText=UCF_DomUtil.sGetInnerText(oSource.oDomRef);oAccessibilityHelper.setText(sText);oAccessibilityHelper.setTooltip(this.sTooltip);if(UCF_StringUtil.bIsEmpty(sText)&&UCF_StringUtil.bIsEmpty(this.sImageSrc))oAccessibilityHelper.setEmpty(true);var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}}; UCF_Caption.prototype.aAttributeNames=["sTooltip","sImageSrc","bIsNested","bIsDragHandle"]; UCF_Caption.prototype.aMethodNames=[];  UCF_Caption.prototype.sTooltip=''; UCF_Caption.prototype.sImageSrc=''; UCF_Caption.prototype.bIsNested=true; UCF_Caption.prototype.bIsDragHandle=false; UCF_Caption.prototype.setDefaultValues=function(){this.sTooltip='';this.sImageSrc='';this.bIsNested=true;this.bIsDragHandle=false;};
 function UCF_LayeredControl(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);this.iOffsetLeft=0;this.iOffsetTop=0;this.iOverlap=0;this.iTop;this.iLeft;this.iAlignment=UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT;this.bOpened=false;this.oOpenerRef=null;this.iOpenYDirection=1;if(this.oRootRef){this.oRootRef.style.zIndex="10";}this.oPlaceHolderRef=null;this.bMoveIntoViewPort=true;};UCF_LayeredControl.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_LayeredControl.ALIGNMENT={TOPLEFT:0,TOPRIGHT:1,BOTTOMLEFT:3,BOTTOMRIGHT:4,BROWSERCENTER:5,POSITION:6,MENUITEM:7}; UCF_LayeredControl.prototype.E_EVENTS={Close:0}; UCF_LayeredControl.prototype.destroy=function(){if(this.oPlaceHolderRef){var oParentRef=this.oRootRef.parentNode;if(oParentRef)oParentRef.removeChild(this.oRootRef);oParentRef=this.oPlaceHolderRef.parentNode;if(oParentRef)oParentRef.removeChild(this.oPlaceHolderRef);}}; UCF_LayeredControl.prototype.setOpenerRef=function(oDomRef){this.oOpenerRef=oDomRef;}; UCF_LayeredControl.prototype.checkRootRef=function(){var oLSRootRef=this.oLS.oGetRootRef();if(this.oRootRef.parentNode!=oLSRootRef&&UCF_DomUtil.bContains(oLSRootRef,this.oRootRef)){this.oPlaceHolderRef=document.createElement("span");this.oPlaceHolderRef.style.display="none";this.oPlaceHolderRef.id=this.sId+"-ph";this.oRootRef.parentNode.replaceChild(this.oPlaceHolderRef,this.oRootRef);oLSRootRef.appendChild(this.oRootRef);if(UCF_DomUtil.bContains(this.oRootRef,this.oDomRef)){  UCF_DomUtil.removePreviousIdDuplicates(this.oRootRef);}else{}}}; UCF_LayeredControl.prototype.bIsValid=function(){var oDomRef=UCF_DomUtil.$(this.sId),oRootRef=UCF_DomUtil.$(this.sId+"-r");oPlaceHolderRef=UCF_DomUtil.$(this.sId+"-ph");if(!oRootRef)oRootRef=oDomRef;if(this.oRootRef!=oRootRef)return false;if(this.oPlaceHolderRef){return(oPlaceHolderRef==this.oPlaceHolderRef&&oDomRef==this.oDomRef);}else{return(oDomRef==this.oDomRef);}}; UCF_LayeredControl.prototype.open=function(){this.openBase();}; UCF_LayeredControl.prototype.close=function(){this.closeBase();}; UCF_LayeredControl.prototype.openBase=function(){if(this.bOpened)return;this.checkRootRef(); with(this.oRootRef.style){visibility="visible";display="block";overflow="visible";}this.setPosition();this.setOpened(true);return true;}; UCF_LayeredControl.prototype.closeBase=function(){if(!this.bOpened)return false;with(this.oRootRef.style){top=(this.oRootRef.offsetHeight*-1)-1; visibility="hidden";display="none";}this.setOpened(false);this.fireEvent(this.E_EVENTS.Close);return true;}; UCF_LayeredControl.prototype.setAlignment=function(iAlignment){this.iAlignment=iAlignment;}; UCF_LayeredControl.prototype.setMoveIntoViewPort=function(bMoveIntoViewPort){this.bMoveIntoViewPort=bMoveIntoViewPort;}; UCF_LayeredControl.prototype.setOffsetLeft=function(iPixel){this.iOffsetLeft=iPixel;if(this.bOpened){ this.setPosition();}}; UCF_LayeredControl.prototype.setOffsetTop=function(iPixel){this.iOffsetTop=iPixel;if(this.bOpened){ this.setPosition();}}; UCF_LayeredControl.prototype.setOverlap=function(iPixel){this.iOverlap=iPixel;if(this.bOpened){ this.setPosition();}}; UCF_LayeredControl.prototype.setPosition=function(){var oRect=null;var iAlignment=this.iAlignment;if(UCF_System.bIsRTL){if(iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT){iAlignment=UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT){iAlignment=UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.TOPLEFT){iAlignment=UCF_LayeredControl.ALIGNMENT.TOPRIGHT;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.TOPRIGHT){iAlignment=UCF_LayeredControl.ALIGNMENT.TOPLEFT;}}if(this.oOpenerRef){oRect=this.oGetObjectRect(this.oOpenerRef);}else{oRect=this.oGetObjectRect(document.getElementsByTagName("BODY")[0]);}var iBodyHeight=window.document.body.scrollHeight, iBodyWidth=window.document.body.scrollWidth, iBodyClientHeight=window.document.body.clientHeight, iBodyClientWidth=window.document.body.clientWidth, iBodyScrollLeft=window.document.body.scrollLeft, iBodyScrollTop=window.document.body.scrollTop, iWidth=this.oRootRef.scrollWidth, iHeight=this.oRootRef.scrollHeight;  var oResultRect={top:oRect.top,left:oRect.left,width:oRect.width,height:oRect.height};if(iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT){oResultRect.top=oRect.top+oRect.height-this.iOverlap;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.TOPRIGHT){oResultRect.left=oRect.left+oRect.width-iWidth;oResultRect.top=oRect.top-iHeight+this.iOverlap;if(oResultRect.left+iWidth>iBodyWidth){oResultRect.left=oRect.left-iWidth;}if(oResultRect.top+iHeight>iBodyHeight){oResultRect.top=oRect.top-iHeight+oRect.height+this.iOverlap;}}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.TOPLEFT){oResultRect.top=oRect.top-iHeight+this.iOverlap;if(oResultRect.top+iHeight>iBodyHeight){oResultRect.top=oRect.top-iHeight+oRect.height+this.iOverlap;}}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT){oResultRect.top=oRect.top+oRect.height-this.iOverlap;oResultRect.left=oRect.left-iWidth+oRect.width;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.MENUITEM){oResultRect.top=oRect.top-2;if(UCF_System.bIsRTL){oResultRect.left=oRect.left-iWidth+2;if(oResultRect.left<0){oResultRect.left=oRect.left+oRect.width-2;}}else{oResultRect.left=oRect.left+oRect.width-2;if(oResultRect.left+iWidth>iBodyWidth){oResultRect.left=oRect.left-iWidth;}}if(oResultRect.top+iHeight>iBodyHeight){oResultRect.top=oRect.top-iHeight+oRect.height+this.iOverlap;}}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.POSITION){oResultRect.top=this.iTop;oResultRect.left=this.iLeft;}else if(iAlignment==UCF_LayeredControl.ALIGNMENT.BROWSERCENTER){oResultRect.top=Math.floor(iBodyClientHeight / 2-iHeight / 2)+iBodyScrollTop;oResultRect.left=Math.floor(iBodyClientWidth / 2-iWidth / 2)+iBodyScrollLeft;} if(iAlignment==UCF_LayeredControl.ALIGNMENT.MENUITEM||iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT||iAlignment==UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT){if(oResultRect.top+iHeight>iBodyClientHeight+iBodyScrollTop)oResultRect.top=oRect.top-iHeight+this.iOverlap;} if(iAlignment==UCF_LayeredControl.ALIGNMENT.TOPRIGHT||iAlignment==UCF_LayeredControl.ALIGNMENT.TOPLEFT){if(oResultRect.top<iBodyScrollTop)oResultRect.top=oRect.top+oRect.height-this.iOverlap;}if(this.bMoveIntoViewPort){   if(UCF_System.bIsRTL){if(oResultRect.left+iWidth>iBodyClientWidth){oResultRect.left=iBodyClientWidth-iWidth;}}else{if(oResultRect.left+iWidth>iBodyClientWidth+iBodyScrollLeft){oResultRect.left=iBodyClientWidth+iBodyScrollLeft-iWidth;}} if(oResultRect.top+iHeight>iBodyClientHeight+iBodyScrollTop){oResultRect.top=iBodyClientHeight+iBodyScrollTop-iHeight;} if(oResultRect.top<iBodyScrollTop)oResultRect.top=iBodyScrollTop; if(oResultRect.left<0)oResultRect.left=0;if(oResultRect.top<0)oResultRect.top=0;}oResultRect.top+=this.iOffsetTop;oResultRect.left+=this.iOffsetLeft;  if(oResultRect.top<oRect.top)this.iOpenYDirection=-1;with(this.oRootRef.style){top=oResultRect.top+"px";left=oResultRect.left+"px";right=null;}this.iTop=oResultRect.top;this.iLeft=oResultRect.left;this.redrawBlindLayer();}; UCF_LayeredControl.prototype.bGetOpened=function(){return this.bOpened;}; UCF_LayeredControl.prototype.sendToBack=function(){this.oDomRef.style.zIndex=10;}; UCF_LayeredControl.prototype.bringToFront=function(){this.oDomRef.style.zIndex=1000;}; UCF_LayeredControl.prototype.setLeft=function(iLeft){this.iLeft=iLeft;}; UCF_LayeredControl.prototype.setTop=function(iTop){this.iTop=iTop;}; UCF_LayeredControl.prototype.redrawBlindLayer=function(){if(!this.oBlindLayer)this.oBlindLayer=this.oLS.oGetBlindLayer();with(this.oBlindLayer.oDomRef.style){left=this.iLeft+"px";top=this.iTop+"px";width=this.oRootRef.scrollWidth+"px";height=this.oRootRef.scrollHeight+"px";}}; UCF_LayeredControl.prototype.onresize=function(){ if(this.sTimer){UCF_JsUtil.clearDelayedCall(this.sTimer);}this.sTimer=UCF_JsUtil.delayedCall(this.iDelay,this,"redrawBlindLayer");}; UCF_LayeredControl.prototype.setOpened=function(bOpened){this.bOpened=bOpened;if(!bOpened){this.oLS.releaseBlindLayer(this.oBlindLayer);}else{if(!this.oBlindLayer)this.oBlindLayer=this.oLS.oGetBlindLayer();}}; UCF_LayeredControl.prototype.bOpenedOnTop=function(){return this.iOpenYDirection==-1;};
 function UCF_Calculator(oDomRef,oLS,sId){UCF_Control.apply(this,arguments); var oDomRef=this.oCreateDom();oLS.oGetRootRef().appendChild(oDomRef);this.connectToDom(oDomRef);this.render(); this.sFormat=null;this.sDefaultDecimalSeparator=".";switch(this.oLS.oSystem.sLanguage.toUpperCase()){case "BE":case "BG":case "CS":case "DA":case "DE":case "EL":case "ES":case "ET":case "FI":case "FR":case "HR":case "HU":case "IS":case "IT":case "LT":case "LV":case "NO":case "PL":case "PT":case "Ro":case "RU":case "SK":case "SL":case "SQ":case "SV":case "TR":case "UK":this.sDefaultDecimalSeparator=",";break;}this.sDecimalSeparator=this.sDefaultDecimalSeparator; this.aInput=new Array(); this.aHistory=new Array(); this.oInputField=null; this.sValue==null; this.bOverwrite=false; this.sLastInput="NUMBER";UCF_LayeredControl.apply(this,[oDomRef,oLS]);};UCF_Calculator.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))(); UCF_Calculator.prototype.connectToDom=function(oDomRef){UCF_LayeredControl.prototype.connectToDom.apply(this,arguments);}; UCF_Calculator.prototype.oCreateDom=function(){var oDiv=document.createElement("DIV");oDiv.setAttribute("ct","Calculator");oDiv.setAttribute("id",this.sId);oDiv.style.position="absolute";oDiv.style.width="180px";oDiv.style.top="-1000";return oDiv;}; UCF_Calculator.prototype.E_EVENTS={Close:0,Select:1}; UCF_Calculator.prototype.setConnectedControl=function(oControl){this.oConnectedControl=oControl;}; UCF_Calculator.prototype.setFormat=function(sFormat){this.sFormat=sFormat; if(this.sFormat){if(sFormat.lastIndexOf(",")>sFormat.lastIndexOf("."))this.sDecimalSeparator=",";else if(sFormat.lastIndexOf(",")<sFormat.lastIndexOf("."))this.sDecimalSeparator=".";}}; UCF_Calculator.prototype.sGetDecimalSeparator=function(){return this.sDecimalSeparator;}; UCF_Calculator.prototype.sGetFormattedValue=function(sValue){var sFormattedValue=sValue,sOutValue;var sDecimalSeparator=this.sGetDecimalSeparator();var iLast=sFormattedValue.lastIndexOf(sDecimalSeparator);if(iLast>0){sFormattedValue=sFormattedValue.replace(/,/g,"#");sFormattedValue=sFormattedValue.replace(/\./g,"#");sLHS=sFormattedValue.substring(0,iLast);sRHS=sFormattedValue.substring(iLast+1,sFormattedValue.length);sFormattedValue=sLHS+sDecimalSeparator+sRHS;sFormattedValue=sFormattedValue.replace(/#/g,"");}else if(sDecimalSeparator==","){sFormattedValue=sFormattedValue.replace(/\./g,"");}else{sFormattedValue=sFormattedValue.replace(/,/g,"");}sOutValue=sFormattedValue; if(sDecimalSeparator==",")sFormattedValue=sFormattedValue.replace(/,/g,"\.");sFormattedValue=parseFloat(sFormattedValue);if(isNaN(sFormattedValue))return 0;else return sOutValue.toString();}; UCF_Calculator.prototype.setValue=function(sValue){var sFormattedValue=this.sGetFormattedValue(sValue);this.sValue=sFormattedValue;if(this.oInputField)this.oInputField.value=this.sValue;this.bOverwrite=true;}; UCF_Calculator.prototype.sGetValue=function(){return this.sValue;}; UCF_Calculator.prototype.open=function(){var oWindow=this.oLS.oBrowserWindow; oWindow.attachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent"); this.bOpen=true;this.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.setOverlap(1);this.setOpenerRef(this.oConnectedControl.oDomRef);this.render();this.openBase(); this.oInputField=UCF_DomUtil.$(this.sId+"-in");if(this.sValue)this.setValue(this.sValue);else this.setValue("0"); this.aInput=new Array();if(this.oLS.oSystem.bIs508){this.oInputField.focus();}else{UCF_DomUtil.$(this.sId+"-ce").focus();}}; UCF_Calculator.prototype.close=function(bCancelled){if(!this.bOpen)return; var oWindow=this.oLS.oBrowserWindow;oWindow.detachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent");UCF_DomUtil.setTabIndex(this.oDomRef,-1); this.sDecimalSeparator=this.sDefaultDecimalSeparator; this.bOpen=false;this.closeBase();if(bCancelled)this.oConnectedControl.focus();}; UCF_Calculator.prototype.onAnyEvent=function(oEvent){var oBrowserEvent=oEvent.oGetParam("oBrowserEvent");var oSource=oBrowserEvent.oGetSource(); if(oBrowserEvent.sGetName()=="click"&&oBrowserEvent.oGetSourceRoot()!=this.oDomRef&&oSource!=this.oConnectedControl.oHelpButtonRef){this.close(false);this.oConnectedControl.onlsblur(oBrowserEvent);if(oSource!=this.oConnectedControl.oDomRef){this.oConnectedControl.bNoBlur=false;this.oConnectedControl.onlsblur(oBrowserEvent);}}else if(oBrowserEvent.sGetName()=="lsfocuslost"&&UCF_System.sDevice!="sf3"&&UCF_System.sDevice!="ff1"){this.close(true);this.oConnectedControl.onlsblur(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_Calculator.prototype.addNumber=function(sValue){var sFieldValue=this.oInputField.value; if(sValue==this.sDecimalSeparator&&sFieldValue.indexOf(sValue)>0)return; if((sFieldValue=="0"||this.bOverwrite)&&sValue==this.sDecimalSeparator)this.oInputField.value="0"+this.sDecimalSeparator;else if(sFieldValue=="0"||this.bOverwrite)this.oInputField.value=sValue;else this.oInputField.value+=sValue;this.bOverwrite=false;this.sLastInput="NUMBER";}; UCF_Calculator.prototype.addOperator=function(sOperator){if(this.aHistory.length>1&&this.aHistory[this.aHistory.length-2]=="="){this.aInput=new Array();}if(this.sLastInput=="OPERATOR")return;this.aInput.push(this.oInputField.value);if(this.aInput.length>2){var sValue=this.aInput.join("");sValue=sValue.replace(/,/g,"\.");sValue=eval(sValue);if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;this.aInput=new Array();this.aInput.push(this.oInputField.value);}this.aInput.push(sOperator);this.bOverwrite=true;this.sLastInput="OPERATOR";}; UCF_Calculator.prototype.evaluate=function(){if(this.aHistory.length>1&&this.aHistory[this.aHistory.length-2]=="=")this.aInput[0]=this.oInputField.value;else this.aInput.push(this.oInputField.value);var sValue=this.aInput.join("");sValue=sValue.replace(/,/g,"\.");sValue=sValue.replace(/%/g,"");sValue=eval(sValue);if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;this.aInput=new Array();this.bOverwrite=true;}; UCF_Calculator.prototype.clearField=function(){this.oInputField.value="0";}; UCF_Calculator.prototype.clearAll=function(){this.oInputField.value="0";this.aInput=new Array();}; UCF_Calculator.prototype.clearLast=function(){if(this.oInputField.value.length==1)this.oInputField.value="0";else{this.oInputField.value=this.oInputField.value.substring(0,this.oInputField.value.length-1);}}; UCF_Calculator.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sBtnValue=oSource.id;sBtnValue=sBtnValue.replace(this.sId+"-","");this.aHistory.push(sBtnValue);switch(sBtnValue){case "0":this.addNumber(sBtnValue);break;case "1":this.addNumber(sBtnValue);break;case "2":this.addNumber(sBtnValue);break;case "3":this.addNumber(sBtnValue);break;case "4":this.addNumber(sBtnValue);break;case "5":this.addNumber(sBtnValue);break;case "6":this.addNumber(sBtnValue);break;case "7":this.addNumber(sBtnValue);break;case "8":this.addNumber(sBtnValue);break;case "9":this.addNumber(sBtnValue);break;case ".":this.addNumber(sBtnValue);break;case ",":this.addNumber(sBtnValue);break;case "+":this.addOperator(sBtnValue);break;case "-":this.addOperator(sBtnValue);break;case "/":this.addOperator(sBtnValue);break;case "*":this.addOperator(sBtnValue);break;case "sqrt":var sValue=this.oInputField.value;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/,/g,".");sValue=Math.sqrt(sValue);if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;break;case "%":var sValue=this.oInputField.value;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/,/g,".");if(this.aInput.length>1&&!isNaN(parseInt(this.aInput[0]))){sValue=this.aInput[0]/100*sValue;}this.bOverwrite=true;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;break;case "1/x":var sValue=this.oInputField.value;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/,/g,".");sValue=1 / sValue;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;break;case "+/-":var sValue=this.oInputField.value;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/,/g,".");sValue*=-1;if(this.sDecimalSeparator==",")sValue=sValue.toString().replace(/\./g,",");this.oInputField.value=sValue;break;case "=":this.evaluate();break;case "c":this.clearAll();break;case "ce":this.clearField();break;case "ok":case "ok-r":this.evaluate();this.fireEvent(this.E_EVENTS.Select,{value:this.oInputField.value});this.close(false);break;case "cancel":this.close(true);break;}};UCF_Calculator.prototype.onkeydown=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();if(iKey==UCF_KeyCodes.DELETE)this.clearAll();else if(iKey==UCF_KeyCodes.BACKSPACE)this.clearLast();else return;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_Calculator.prototype.onkeypress=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();var oSource=oBrowserEvent.oGetSource();var sKey=String.fromCharCode(iKey); if(sKey=="=")UCF_DomUtil.$(this.sId+"-=").click(); else if(sKey=="*")UCF_DomUtil.$(this.sId+"-*").click(); else if(sKey=="/")UCF_DomUtil.$(this.sId+"-/").click(); else if(sKey=="+")UCF_DomUtil.$(this.sId+"-+").click(); else if(sKey=="-")UCF_DomUtil.$(this.sId+"--").click(); else if(iKey==UCF_KeyCodes._0||iKey==UCF_KeyCodes.NUMPAD_0)UCF_DomUtil.$(this.sId+"-0").click(); else if(iKey==UCF_KeyCodes._1||iKey==UCF_KeyCodes.NUMPAD_1)UCF_DomUtil.$(this.sId+"-1").click(); else if(iKey==UCF_KeyCodes._2||iKey==UCF_KeyCodes.NUMPAD_2)UCF_DomUtil.$(this.sId+"-2").click(); else if(iKey==UCF_KeyCodes._3||iKey==UCF_KeyCodes.NUMPAD_3)UCF_DomUtil.$(this.sId+"-3").click(); else if(iKey==UCF_KeyCodes._4||iKey==UCF_KeyCodes.NUMPAD_4)UCF_DomUtil.$(this.sId+"-4").click(); else if(iKey==UCF_KeyCodes._5||iKey==UCF_KeyCodes.NUMPAD_5)UCF_DomUtil.$(this.sId+"-5").click(); else if(iKey==UCF_KeyCodes._6||iKey==UCF_KeyCodes.NUMPAD_6)UCF_DomUtil.$(this.sId+"-6").click(); else if(iKey==UCF_KeyCodes._7||iKey==UCF_KeyCodes.NUMPAD_7)UCF_DomUtil.$(this.sId+"-7").click(); else if(iKey==UCF_KeyCodes._8||iKey==UCF_KeyCodes.NUMPAD_8)UCF_DomUtil.$(this.sId+"-8").click(); else if(iKey==UCF_KeyCodes._9||iKey==UCF_KeyCodes.NUMPAD_9)UCF_DomUtil.$(this.sId+"-9").click(); else if(sKey==","||sKey==".")UCF_DomUtil.$(this.sId+"-"+this.sDecimalSeparator).click(); else if(iKey==UCF_KeyCodes.C)UCF_DomUtil.$(this.sId+"-c").click(); else if(iKey==UCF_KeyCodes.E||iKey==UCF_KeyCodes.DELETE)UCF_DomUtil.$(this.sId+"-ce").click(); else if(iKey==UCF_KeyCodes.R)UCF_DomUtil.$(this.sId+"-1/x").click(); else if(iKey==UCF_KeyCodes.S||(iKey==UCF_KeyCodes.Q&&oBrowserEvent.bAlt()))UCF_DomUtil.$(this.sId+"-sqrt").click(); else if(iKey==UCF_KeyCodes.F9)UCF_DomUtil.$(this.sId+"-+/-").click(); else if(iKey==UCF_KeyCodes.ENTER)UCF_DomUtil.$(this.sId+"-ok").click(); else if(iKey==UCF_KeyCodes.ESCAPE)UCF_DomUtil.$(this.sId+"-cancel").click();else if(iKey==UCF_KeyCodes.SPACE&&oSource.tagName!="INPUT"){oSource.click();oBrowserEvent.cancel();}else return;oBrowserEvent.cancelBubble();}; UCF_Calculator.prototype.render=function(){var oDomRef=this.oDomRef;var aCalculatorHtml=new Array();aCalculatorHtml.push("<div class=urCalc style=\"width:180px\">");aCalculatorHtml.push("<table cellpadding=0 cellspacing=1 border=0>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td colspan=5><input id=\""+this.sId+"-in\" type=\"text\" value=\"0\" class=\"urEdf2TxtEnbl urEdf2TxtRo\" readonly tabindex=\"0\" ti=\"0\" style=\"width:100%;text-align:right;\"></td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td colspan=4 align=right>"+this.sGetButtonHtml("ce")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("c")+"</td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("7")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("8")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("9")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("/")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("sqrt")+"</td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("4")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("5")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("6")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("*")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("%")+"</td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("1")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("2")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("3")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("-")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("1/x")+"</td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("0")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("+/-")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml(this.sDecimalSeparator)+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("+")+"</td>");aCalculatorHtml.push("<td>"+this.sGetButtonHtml("=")+"</td>");aCalculatorHtml.push("</tr>");var sOkButton=this.oLS.sGetText("SAPUR_CALC_OK");var sCancelButton=this.oLS.sGetText("SAPUR_CALC_CANCEL");if(sOkButton=="")sOkButton="Ok";if(sCancelButton=="")sCancelButton="Cancel";aCalculatorHtml.push("<tr>");aCalculatorHtml.push("<td colspan=5 align=center><a id=\""+this.sId+"-ok-r\" class=urBtnEmph href=\"javascript:void(0)\" tabindex=0 ti=0><span id=\""+this.sId+"-ok\" class=urBtnCnt>"+sOkButton+"</span></a>&nbsp;<a id=\""+this.sId+"-cancel\" class=urBtnStd href=\"javascript:void(0)\">"+sCancelButton+"</a></td>");aCalculatorHtml.push("</tr>");aCalculatorHtml.push("</table>");aCalculatorHtml.push("</div>");this.oDomRef.innerHTML=aCalculatorHtml.join("");}; UCF_Calculator.prototype.sGetButtonHtml=function(sText){var sHtml="";var sButtonTag="a";if(UCF_System.sDevice=="sf3")sButtonTag="span";sHtml="<"+sButtonTag+" id=\""+this.sId+"-"+sText+"\" class=lsCalcBtn href=\"javascript:void(0)\" tabindex=0 ti=0>"+sText+"</"+sButtonTag+">";return sHtml;}; UCF_Calculator.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.tagName=="INPUT"){oAccessibilityHelper.setText(oSource.value);oAccessibilityHelper.setControlType("CALC_I");oAccessibilityHelper.addTutor("CALC_I_TUT");}else{oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource));oAccessibilityHelper.setControlType("B");oAccessibilityHelper.addTutor("B_TUT");}};
 function UCF_BreadCrumbItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_BreadCrumbItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_BreadCrumbItem.prototype.aAttributeNames=["bSelected","sTooltip"]; UCF_BreadCrumbItem.prototype.aMethodNames=[];  UCF_BreadCrumbItem.prototype.bSelected=false; UCF_BreadCrumbItem.prototype.sTooltip=''; UCF_BreadCrumbItem.prototype.setDefaultValues=function(){this.bSelected=false;this.sTooltip='';};
 function UCF_PopupMenu(oDomRef,oLS){UCF_LayeredControl.apply(this,[oDomRef,oLS]);this.oSelectedItem=null;this.bIsSubMenu=false;this.oOpenerControl=null;this.sUserData="";this.oTooltipNode=null;this.bContentChanged=true; this.bRemoveOnClose=false; this.bAutoRefocus=true;this.sLastFocusedId=null;this.aItems=[]; this.oDomBody=oDomRef.getElementsByTagName("TBODY")[0];this.oDomHead=oDomRef.getElementsByTagName("THEAD")[0];this.oDomFoot=oDomRef.getElementsByTagName("TFOOT")[0];this.aDomItems=this.oDomBody.getElementsByTagName("TR");this.iMaxItems=this.iMaxVisibleItems;var oRootRef=this.oRootRef;if(!oRootRef)oRootRef=this.oDomRef;if(UCF_System.sDevice=="ff1"){this.oRootRef.style.width=(this.oRootRef.scrollWidth+2)+"px";this.oRootRef.firstChild.firstChild.style.width=(this.oRootRef.scrollWidth-2)+"px";}else{this.oRootRef.style.width=this.oRootRef.scrollWidth+"px";this.oRootRef.firstChild.firstChild.style.width=this.oRootRef.scrollWidth+"px";}this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(oRootRef,300);this.bIgnoreDefaultButton=true;this.bOverArrow=false;};UCF_PopupMenu.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))(); UCF_PopupMenu.prototype.E_EVENTS={Close:0,Select:1,NextMenu:2,PreviousMenu:3}; UCF_PopupMenu.prototype.applyHeight=function(){var aDomItems=this.aDomItems,iControlCount=0,oRootRef=this.oRootRef,oCols=this.oRootRef.getElementsByTagName("COL");if(this.bHeightChanged||oRootRef.scrollHeight>document.body.clientHeight){this.iMaxVisibleItems=Math.floor(document.body.clientHeight/19);this.bHeightChanged=true;}else{if(this.iMaxItems>0||this.iMaxItems<this.iMaxVisibleItems){this.iMaxVisibleItems=this.iMaxItems;}} if(this.iMaxVisibleItems==0){this.iMaxVisibleItems=this.aDomItems.length;}this.iFirstVisibleItemIdx=0;var bColumnsRendered=false;this.oDomHead.style.display="none";this.oDomFoot.style.display="none";this.iItemHeight=UCF_System.sDevice=="ff1"?19:18;if(this.bContentChanged){this.aItems=[];for(var iItemCount=0;iItemCount<aDomItems.length;iItemCount++){if(!bColumnsRendered&&aDomItems[iItemCount]&&aDomItems[iItemCount].childNodes.length==5){ for(var i=0;i<aDomItems[iItemCount].childNodes.length;i++){oCols[i].width=aDomItems[iItemCount].childNodes[i].offsetWidth;}bColumnsRendered=true;}if(aDomItems[iItemCount].getAttribute("ct")){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[iItemCount],true);oItem.oMenu=this;oItem.iIndex=iControlCount;this.aItems.push(oItem);iControlCount++;}aDomItems[iItemCount].style.display="";if(this.iMaxVisibleItems<aDomItems.length-1){ aDomItems[iItemCount].style.height=this.iItemHeight+"px";}if(iItemCount>=this.iMaxVisibleItems||iItemCount<this.iFirstVisibleItemIdx){aDomItems[iItemCount].style.display="none";}}}this.setScrollButtons();}; UCF_PopupMenu.prototype.setOpenEventName=function(sEventName){this.sOpenEventName=sEventName;}; UCF_PopupMenu.prototype.sGetOpenEventName=function(){return this.sOpenEventName?this.sOpenEventName:"";}; UCF_PopupMenu.prototype.setScrollButtons=function(){this.bScrollButtonsVisible=false;if(this.iMaxVisibleItems>=this.aDomItems.length-1)return;this.oDomHead.style.display="";this.oDomFoot.style.display="";this.bScrollButtonsVisible=true;if(this.iFirstVisibleItemIdx==0){this.oDomHead.firstChild.firstChild.className="urMnuScrUpDsbl";}else{this.oDomHead.firstChild.firstChild.className="urMnuScrUp";}if(this.aDomItems.length-1<=this.iFirstVisibleItemIdx+this.iMaxVisibleItems){this.oDomFoot.firstChild.firstChild.className="urMnuScrDwnDsbl";}else{this.oDomFoot.firstChild.firstChild.className="urMnuScrDwn";}}; UCF_PopupMenu.prototype.hideTooltip=function(oDomRef){if(!oDomRef)oDomRef=this.oLS.oBrowserWindow.oCurrentDomRef;if(!oDomRef)return;if(oDomRef.getAttribute&&(oDomRef.getAttribute("title")==""||oDomRef.getAttribute("title")==null)&&oDomRef.parentNode){this.hideTooltip(oDomRef.parentNode)}else{if(oDomRef.getAttribute&&oDomRef.getAttribute("title")!=null&&oDomRef.getAttribute("title")!=""){oDomRef.setAttribute("oldtitle",oDomRef.getAttribute("title"));oDomRef.setAttribute("title","");this.oTooltipNode=oDomRef;}}}; UCF_PopupMenu.prototype.showTooltip=function(){var oDomRef=this.oTooltipNode;if(oDomRef&&oDomRef.getAttribute("oldtitle")!=null&&oDomRef.getAttribute("oldtitle")!=""){oDomRef.setAttribute("title",oDomRef.getAttribute("oldtitle"));}}; UCF_PopupMenu.prototype.openAtControl=function(sControlId,bWithKeyboard,iAlignment){this.connectToDom(this.oDomRef);if(sControlId){this.setOpenerId(sControlId);this.oOpenerRef=UCF_DomUtil.$(sControlId);}if(typeof(iAlignment)=="number"){this.setAlignment(iAlignment)}this.open(bWithKeyboard);}; UCF_PopupMenu.prototype.bIsDropTarget=function(){return this.mEvents.Drop!=null;}; UCF_PopupMenu.prototype.open=function(bWithKeyboard){if(this.bOpened)return; this.hideTooltip();this.applyHeight();var oWindow=this.oLS.oBrowserWindow,oDomRef=this.oDomRef;if(this.mEvents.BeforeOpen){var sOpenerId=this.sOpenerId?this.sOpenerId:"";this.fireBeforeOpen(this.sId,sOpenerId,bWithKeyboard?true:false,this.iAlignment);return;} if(this.bAutoRefocus){this.sLastFocusedId=this.oLS.sGetFocusedElementId();}this.checkRootRef();  var oRootRef=this.oRootRef;if(!oRootRef)oRootRef=this.oDomRef;with(oRootRef.style){visibility="visible";display="";if(this.bIsSubMenu){iZIndex=parseInt(this.oParentMenu.oRootRef.style.zIndex);if(isNaN(iZIndex))iZIndex=0;zIndex=iZIndex+1;}}if(this.oAnim.bRunning){this.oAnim.callbackRemove();this.oAnim.finish();}this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(oRootRef,300);var oAnim=this.oAnim;oRootRef.style.width=oRootRef.offsetWidth;if(this.bIsSubMenu){oRootRef.style.height=oRootRef.scrollHeight+"px";oRootRef.style.width=oRootRef.scrollWidth+"px";this.removeOverflow();}else{oAnim.addInitialStyleValue("width",oRootRef.scrollWidth+"px");oAnim.addStyleChange("height","","px",1,oRootRef.scrollHeight,oAnim.M_TRANSITIONS.EaseIn);oAnim.callbackFinish(this,"removeOverflow");oAnim.play();}this.setOpened(true);this.attachBrowserEvent("mousemove",this.oDomRef);UCF_DomUtil.setTabIndex(oDomRef,0);this.sOpen2Call=UCF_JsUtil.delayedCall(1,this,"open2",[bWithKeyboard]);}; UCF_PopupMenu.prototype.open2=function(bWithKeyboard){ this.setPosition(); var oBrowserWindow=this.oLS.oBrowserWindow;oBrowserWindow.attachEvent(oBrowserWindow.E_EVENTS.AnyEvent,this,"onAnyEvent"); if(this.oLS.bIsLocked){this.oLS.attachEvent(this.oLS.E_EVENTS.Unlock,this,"onUnlock");}else{UCF_DomUtil.focusDomElement(this.oDomRef);} this.oDomRef.hideFocus=true;if(bWithKeyboard&&this.aItems.length>0){this.setSelectedItem(this.aItems[0]);}};UCF_PopupMenu.prototype.removeOverflow=function(){var oRootRef=this.oRootRef;if(!oRootRef)oRootRef=this.oDomRef;oRootRef.style.overflow="";}; UCF_PopupMenu.prototype.cancel=function(bForceClose){var oSelectedItem=this.oSelectedItem;if(oSelectedItem&&oSelectedItem.oSubMenu&&oSelectedItem.oSubMenu.bOpened){oSelectedItem.closeSubMenu();return;}if(!this.bIsSubMenu&&!bForceClose)return;this.close();}; UCF_PopupMenu.prototype.closeAll=function(){var oMenu=this;while(oMenu){oMenu.close();oMenu=oMenu.oParentMenu;}}; UCF_PopupMenu.prototype.onUnlock=function(oEvent){UCF_DomUtil.focusDomElement(this.oDomRef);this.oLS.detachEvent(this.oLS.E_EVENTS.Unlock,this);}; UCF_PopupMenu.prototype.collectFocusInfo=function(oFocusInfo){if(this.bAutoRefocus&&this.sLastFocusedId){var oFocusInfo2=new(UCF_ClassLoader.oGetClass("UCF_FocusInfo"))(this.oLS);oFocusInfo2.deserialize(this.sLastFocusedId);var oOpenerControl=this.oGetControlById(oFocusInfo2.sGetFocussedId());if(oOpenerControl){oFocusInfo.setFocussedId(oOpenerControl.sId);}}}; UCF_PopupMenu.prototype.close=function(bMouseDown){UCF_JsUtil.clearDelayedCall(this.sOpen2Call);var oWindow=this.oLS.oBrowserWindow,oSelectedItem=this.oSelectedItem;this.setOpened(false); this.showTooltip(); oWindow.detachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent");this.detachBrowserEvent("mousemove",this.oDomRef); if(oSelectedItem){oSelectedItem.bStaySelected=false;oSelectedItem.setSelected(false);oSelectedItem.closeSubMenu();this.oSelectedItem=null;}var oRootRef=this.oRootRef,oAnim=this.oAnim;if(!oRootRef)oRootRef=this.oDomRef;if(this.oAnim.bRunning)this.oAnim.finish();this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(oRootRef,300);var oAnim=this.oAnim;if(this.bIsSubMenu){this.hide();}else{oAnim.addStyleChange("height","","px",oRootRef.scrollHeight,1,oAnim.M_TRANSITIONS.EaseOut);oAnim.callbackFinish(this,"hide");oAnim.play();}this.fireEvent(this.E_EVENTS.Close,{});   if(!bMouseDown&&this.bAutoRefocus){this.oLS.focusElement(this.sLastFocusedId);}  if(this.bRemoveOnClose){UCF_JsUtil.delayedCall(0,this,"removeMenu");}}; UCF_PopupMenu.prototype.removeMenu=function(){for(var i=0;i<this.aItems.length;i++){var oItem=this.aItems[i];if(oItem.bHasSubMenu){ var oSubMenu=this.oLS.oControlFactory.oGetControlById(oItem.sSubMenuId,true);UCF_JsUtil.delayedCall(0,oSubMenu,"removeMenu");}}if(this.oRootRef&&this.oRootRef.parentNode)this.oRootRef.parentNode.removeChild(this.oRootRef);if(this.oPlaceHolderRef&&this.oPlaceHolderRef.parentNode)this.oPlaceHolderRef.parentNode.removeChild(this.oPlaceHolderRef);}; UCF_PopupMenu.prototype.hide=function(){UCF_JsUtil.clearDelayedCall(this.sOpen2Call);var oRootRef=this.oRootRef;if(!oRootRef)oRootRef=this.oDomRef;if(this.oAnim)this.oAnim.callbackRemove();with(oRootRef.style){top=(oRootRef.offsetHeight*-1)-1;}}; UCF_PopupMenu.prototype.oGetItem=function(iIndex){if(!this.aItems[iIndex])return null;return this.aItems[iIndex];}; UCF_PopupMenu.prototype.setSelectedItem=function(oItem,bAutoToggle){ if(this.oSelectedItem==oItem)return; if(this.oSelectedItem)this.oSelectedItem.setSelected(false,bAutoToggle); this.oSelectedItem=oItem; if(this.oSelectedItem)this.oSelectedItem.setSelected(true,bAutoToggle);}; UCF_PopupMenu.prototype.setIsSubMenu=function(bIsSubMenu){this.bIsSubMenu=bIsSubMenu;}; UCF_PopupMenu.prototype.focusNextItem=function(){var iSelectedIndex=0;if(this.oSelectedItem){iSelectedIndex=this.oSelectedItem.iIndex;this.oSelectedItem.setSelected(false,true);iSelectedIndex++;}if(iSelectedIndex==this.aItems.length)iSelectedIndex=0;this.scrollItemIntoView(iSelectedIndex);this.setSelectedItem(this.oGetItem(iSelectedIndex),false);}; UCF_PopupMenu.prototype.focusFirstItem=function(){var iSelectedIndex=0;this.scrollItemIntoView(iSelectedIndex);this.setSelectedItem(this.oGetItem(iSelectedIndex),false);}; UCF_PopupMenu.prototype.focusLastItem=function(){var iSelectedIndex=this.aItems.length-1;this.scrollItemIntoView(iSelectedIndex);this.setSelectedItem(this.oGetItem(iSelectedIndex),false);}; UCF_PopupMenu.prototype.focusPreviousItem=function(){var iSelectedIndex=0;if(this.oSelectedItem){iSelectedIndex=this.oSelectedItem.iIndex;this.oSelectedItem.setSelected(false,true);}iSelectedIndex--;if(iSelectedIndex==-1)iSelectedIndex=this.aItems.length-1;this.scrollItemIntoView(iSelectedIndex);this.setSelectedItem(this.oGetItem(iSelectedIndex),false);}; UCF_PopupMenu.prototype.scrollItemIntoView=function(iItemIndex){var iSeperators=0;for(var i=0;i<iItemIndex+1;i++){if(this.aItems[i].bHasSeparator)iSeperators++;}while(this.iFirstVisibleItemIdx>iItemIndex+iSeperators){this.scrollUp();}while(this.iFirstVisibleItemIdx+this.iMaxVisibleItems<=iItemIndex+iSeperators){this.scrollDown();}}; UCF_PopupMenu.prototype.focusSubMenu=function(){if(!this.oSelectedItem)return;this.oSelectedItem.openSubMenu();if(!this.oSelectedItem.oSubMenu){this.fireEvent(this.E_EVENTS.NextMenu,{});return;}this.oSelectedItem.oSubMenu.oDomRef.focus();this.oSelectedItem.oSubMenu.setSelectedItem(this.oSelectedItem.oSubMenu.oGetItem(0),false);}; UCF_PopupMenu.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=iKeyCode=oBrowserEvent.iKeyCode();if(oBrowserEvent.bCtrl()||oBrowserEvent.bAlt()){if(iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN){this.close();}return;}if(iKeyCode==UCF_KeyCodes.ESCAPE||iKeyCode==UCF_KeyCodes.F4){this.cancel(true);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.TAB){  this.cancel(true);}else if(iKeyCode==UCF_KeyCodes.ARROW_LEFT){this.cancel(false);if(!this.bIsSubMenu){this.fireEvent(this.E_EVENTS.PreviousMenu,{});}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.ARROW_DOWN){this.focusNextItem();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.ARROW_UP){this.focusPreviousItem();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.ARROW_RIGHT){this.focusSubMenu();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.HOME){this.focusFirstItem();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.END){this.focusLastItem();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_PopupMenu.prototype.onmousemove=function(oBrowserEvent){   var oSourceRoot=oBrowserEvent.oGetSourceRoot();if(this.oSelectedItem&&oSourceRoot!=this.oSelectedItem.oDomRef&&!this.oSelectedItem.bStaySelected){this.setSelectedItem(null);}}; UCF_PopupMenu.prototype.onmouseover=function(oBrowserEvent){if(oBrowserEvent.oGetSource().className.indexOf("urMnuScr")>-1){this.bOverArrow=true;}if(oBrowserEvent.oGetSource().className=="urMnuScrUp"){this.oInterval=UCF_JsUtil.intervalCall(100,this,"scrollUp");}else if(oBrowserEvent.oGetSource().className=="urMnuScrDwn"){this.oInterval=UCF_JsUtil.intervalCall(100,this,"scrollDown");}}; UCF_PopupMenu.prototype.onmouseout=function(oBrowserEvent){if(oBrowserEvent.oGetSource().className.indexOf("urMnuScr")==-1){this.bOverArrow=false;}if(this.oInterval){UCF_JsUtil.clearIntervalCall(this.oInterval);this.oInterval==null;}}; UCF_PopupMenu.prototype.onAnyEvent=function(oEvent){var oBrowserEvent=oEvent.oGetParam("oBrowserEvent"),oSourceRoot=oBrowserEvent.oGetSourceRoot(),oSource=oBrowserEvent.oGetSource(),sName=oBrowserEvent.sGetName();if(this.bOverArrow)return;if(sName=="mousedown"){if(!oSourceRoot||oSourceRoot==document||(oSourceRoot.getAttribute("ct")!="POMNI"&&!UCF_DomUtil.bContains(this.oOpenerRef,oSourceRoot)&&this.oOpenerRef!=oSource)||(oSourceRoot.getAttribute("ct")!="POMNI"&&oBrowserEvent.eGetMouseButtonState()==oBrowserEvent.MOUSE_BUTTON_STATE.Right)){this.close(true);}}else if(sName=="lsfocuslost"){this.bAutoRefocus=false;this.closeAll();}else if(sName=="mouseover"){if(this.oSelectedItem&&oSourceRoot!=this.oSelectedItem.oDomRef&&!this.oSelectedItem.bStaySelected){this.setSelectedItem(null);}}}; UCF_PopupMenu.prototype.openAtPosition=function(iLeft,iTop){if(iLeft>0)iLeft--;if(iTop>0)iTop--;this.setLeft(iLeft);this.setTop(iTop);this.setAlignment(UCF_LayeredControl.ALIGNMENT.POSITION);this.setOpenerRef(this.oDomRef);this.setOpenerId(this.sId);this.open();}; UCF_PopupMenu.prototype.oGetItemById=function(sId){for(var n=0;n<this.aItems.length;n++){if(this.aItems[n]&&this.aItems[n].sId==sId){return this.aItems[n];}}return null;}; UCF_PopupMenu.prototype.scrollUp=function(){if(this.iFirstVisibleItemIdx>0){this.iFirstVisibleItemIdx--;this.aDomItems[this.iFirstVisibleItemIdx].style.display="";var iLastItem=this.iFirstVisibleItemIdx+this.iMaxVisibleItems-1;if(iLastItem+1<this.aDomItems.length){this.aDomItems[iLastItem+1].style.display="none";}}this.setScrollButtons();}; UCF_PopupMenu.prototype.scrollDown=function(){var iLastItem=this.iFirstVisibleItemIdx+this.iMaxVisibleItems,iHideItem=this.iFirstVisibleItemIdx;if(iLastItem<this.aDomItems.length){this.aDomItems[iHideItem].style.display="none";this.iFirstVisibleItemIdx++;iLastItem=this.iFirstVisibleItemIdx+this.iMaxVisibleItems-1;this.aDomItems[iLastItem].style.display="";this.setScrollButtons();}}; UCF_PopupMenu.prototype.setOpenerId=function(sId){this.sOpenerId=sId;}; UCF_PopupMenu.prototype.setUserData=function(sUserData){this.sUserData=sUserData;}; UCF_PopupMenu.prototype.selectItem=function(){if(this.oSelectedItem){var bRadioItemChecked=this.oSelectedItem.bCanCheck&&this.oSelectedItem.bChecked&&this.oSelectedItem.sGroupId!="";if(this.oSelectedItem.bEnabled&&!this.oSelectedItem.bHasSubMenu&&!bRadioItemChecked){this.fireEvent(this.E_EVENTS.Select,{sItemId:this.oSelectedItem.sId});var sOpenerId=this.sOpenerId;if(!sOpenerId)sOpenerId="";var sItemId=this.oSelectedItem.sId,bChecked=this.oSelectedItem.bChecked,sUserData=this.sUserData;this.closeAll();this.fireSelect(this.sId,sItemId,sOpenerId,bChecked,sUserData);}else if(this.oSelectedItem.bEnabled&&bRadioItemChecked){this.closeAll();}}}; UCF_PopupMenu.prototype.onclick=function(oBrowserEvent){if(!this.bOverArrow){this.onlsselect(oBrowserEvent);}else{if(oBrowserEvent.oDomEvent.srcElement.className=="urMnuScrUp"){this.scrollUp();}else if(oBrowserEvent.oDomEvent.srcElement.className=="urMnuScrDwn"){this.scrollDown();}}}; UCF_PopupMenu.prototype.oncontextmenu=function(oBrowserEvent){this.onlsselect(oBrowserEvent);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_PopupMenu.prototype.onlsselect=function(oBrowserEvent){this.selectItem();}; UCF_PopupMenu.prototype.setRemoveOnClose=function(bRemoveOnClose){this.bRemoveOnClose=bRemoveOnClose;}; UCF_PopupMenu.prototype.setAutoRefocus=function(bAutoRefocus){this.bAutoRefocus=bAutoRefocus;}; UCF_PopupMenu.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(!this.oSelectedItem){oAccessibilityHelper.addTutor("UDNAV_TUT");oAccessibilityHelper.setControlType("POMN",[this.aItems.length]);return;}oAccessibilityHelper.setText(this.oSelectedItem.sText);oAccessibilityHelper.setHotkey(this.oSelectedItem.sHotkey);oAccessibilityHelper.setEnabled(this.oSelectedItem.bEnabled);oAccessibilityHelper.setControlType("POMN_I");oAccessibilityHelper.setItemCount(this.aItems.length);oAccessibilityHelper.setItemIndex(this.oSelectedItem.iIndex+1);if(this.oSelectedItem.bCanCheck){oAccessibilityHelper.setSelected(this.oSelectedItem.bChecked);if(this.oSelectedItem.bChecked){if(!this.oSelectedItem.sGroupId){oAccessibilityHelper.addEnabledTutor("POMN_I_SEL_TUT",this.oSelectedItem.bEnabled);}}else{oAccessibilityHelper.addEnabledTutor("POMN_I_NSEL_TUT",this.oSelectedItem.bEnabled);}}else{if(this.oSelectedItem.bHasSubMenu){oAccessibilityHelper.setControlType("POMN_ISMNU");oAccessibilityHelper.addEnabledTutor("POMN_ISMNU_TUT",this.oSelectedItem.bEnabled);}else{oAccessibilityHelper.addEnabledTutor("POMN_I_NSEL_TUT",this.oSelectedItem.bEnabled);}}oBrowserEvent.cancelBubble();}; UCF_PopupMenu.prototype.removeItem=function(oItem){this.bContentChanged=true;for(var i=0;i<this.aItems.length;i++){var oMenuItem=this.aItems[i];if(oMenuItem==oItem){oMenuItem.remove();return;}}}; UCF_PopupMenu.prototype.removeItems=function(){this.bContentChanged=true;for(var i=0;i<this.aItems.length;i++){var oMenuItem=this.aItems[i];oMenuItem.remove();}this.aItems=[];}; UCF_PopupMenu.prototype.addItem=function(sId,sText,bHasSeparator,bCanCheck,bChecked,bEnabled,sSubMenuId,bHasSubMenu,sShortcutText,bHasElipsis,sGroupId,bHasIcon,sEnabledIconSrc,sDisabledIconSrc){this.bContentChanged=true;var oItemDomRef=document.createElement("TR");oItemDomRef.setAttribute("ct","POMNI");oItemDomRef.setAttribute("id",sId);var oItem=this.oLS.oControlFactory.oGetControlByDomRef(oItemDomRef,true);oItem.oMenu=this;oItem.iIndex=this.aItems.length;oItem.sId=sId;oItem.sText=sText;oItem.bCanCheck=bCanCheck;oItem.bChecked=bChecked;oItem.bEnabled=bEnabled;oItem.sSubMenuId=sSubMenuId;oItem.bHasSubMenu=bHasSubMenu;oItem.bHasSeparator=bHasSeparator;oItem.sShortcutText=sShortcutText;oItem.bHasElipsis=bHasElipsis;oItem.sGroupId=sGroupId;oItem.bHasIcon=bHasIcon;oItem.sEnabledIconSrc=sEnabledIconSrc;oItem.sDisabledIconSrc=sDisabledIconSrc;oItem.append(this.oDomBody);this.aItems.push(oItem);}; UCF_PopupMenu.prototype.createDragDelegate=function(){if(!this.sDragSourceInfo)return;if(this.oDragDelegate)return;this.oDragDelegate=new(UCF_ClassLoader.oGetClass("UCF_PopupMenuDragDelegate"))(this.oLS,this);this.addDelegate(this.oDragDelegate);}; UCF_PopupMenu.prototype.createDropDelegate=function(){if(!this.sDropTargetInfo)return;if(this.oDropDelegate)return;this.oDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_PopupMenuDropDelegate"))(this.oLS,this);this.addDelegate(this.oDropDelegate);}; UCF_PopupMenu.prototype.destroy=function(){UCF_JsUtil.clearDelayedCall(this.sOpen2Call);var oWindow=this.oLS.oBrowserWindow;oWindow.detachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent");if(this.oAnim&&this.oAnim.bRunning){this.oAnim.callbackRemove();this.oAnim.finish();}UCF_LayeredControl.prototype.destroy.apply(this,arguments);}; UCF_PopupMenu.prototype.aAttributeNames=["iFirstVisibleItemIdx","iMaxVisibleItems","sDragSourceInfo","sDropTargetInfo"]; UCF_PopupMenu.prototype.aMethodNames=["openAtPosition","openAtControl","setRemoveOnClose","setAutoRefocus","addItem","removeItems"];  UCF_PopupMenu.prototype.iFirstVisibleItemIdx=0; UCF_PopupMenu.prototype.iMaxVisibleItems=0; UCF_PopupMenu.prototype.sDragSourceInfo=''; UCF_PopupMenu.prototype.sDropTargetInfo=''; UCF_PopupMenu.prototype.setDefaultValues=function(){this.iFirstVisibleItemIdx=0;this.iMaxVisibleItems=0;this.sDragSourceInfo='';this.sDropTargetInfo='';}; UCF_PopupMenu.prototype.fireSelect=function(sId,sItemId,sConnectedControlId,bChecked,sUserData){var mParams={Id:sId,ItemId:sItemId,ConnectedControlId:sConnectedControlId,Checked:bChecked,UserData:sUserData};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("PopupMenu","Select",mParams);}; UCF_PopupMenu.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("PopupMenu","Drag",mParams);}; UCF_PopupMenu.prototype.fireBeforeOpen=function(sId,sControlId,bWithKeyboard,iAlignment){var mParams={Id:sId,ControlId:sControlId,WithKeyboard:bWithKeyboard,Alignment:iAlignment};this.fireSemanticEvent("PopupMenu","BeforeOpen",mParams);}; UCF_PopupMenu.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,sItemId,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,ItemId:sItemId,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("PopupMenu","Drop",mParams);};UCF_PopupMenu.prototype.aPublicMethods=["removeItem","addItem"];
function UCF_ColumnLayoutSection(oDomRef){UCF_ControlInfo.apply(this,[oDomRef]);};UCF_ColumnLayoutSection.prototype=new(UCF_ClassLoader.oGetClass("UCF_ControlInfo"))(); UCF_ColumnLayoutSection.prototype.aAttributeNames=["sId","sAccessibilityDescription","sTooltip","sParentSectionId","sDefaultButtonId"]; UCF_ColumnLayoutSection.prototype.aMethodNames=[];  UCF_ColumnLayoutSection.prototype.sId=''; UCF_ColumnLayoutSection.prototype.sAccessibilityDescription=''; UCF_ColumnLayoutSection.prototype.sTooltip=''; UCF_ColumnLayoutSection.prototype.sParentSectionId=''; UCF_ColumnLayoutSection.prototype.sDefaultButtonId=''; UCF_ColumnLayoutSection.prototype.setDefaultValues=function(){this.sId='';this.sAccessibilityDescription='';this.sTooltip='';this.sParentSectionId='';this.sDefaultButtonId='';};
 function UCF_GridLayoutDropDelegate(oLS,oDropTargetControl){UCF_DropDelegate.apply(this,[oLS]);this.setDropTargetControl(oDropTargetControl);this.bInitialized=false;};UCF_GridLayoutDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DropDelegate"))(); UCF_GridLayoutDropDelegate.prototype.oCreateDropDecorator=function(){return new(UCF_ClassLoader.oGetClass("UCF_GridLayoutDropDecorator"))(this.oDropTargetControl,this.oLS);}; UCF_GridLayoutDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oDropTargetControl.sDropTargetInfo;var sCell=this.oDropDecorator.sCell;var iOffset=this.oDropDecorator.iOffset;var oDropTargetControl=this.oDropTargetControl; var iIndex=this.oDropDecorator.iIndex;return function(sDragData,sMimeType){ oDropTargetControl.fireDrop(oDropTargetControl.sId,sDragId,sDropTargetInfoId,sCell,iOffset,sDragData,sMimeType,sDragTags);};}; UCF_GridLayoutDropDelegate.prototype.onlsdragenter=function(oBrowserEvent){if(this.sDelayedCall){UCF_JsUtil.clearDelayedCall(this.sDelayedCall);this.sDelayedCall=null;}if(!this.bInitialized)UCF_DropDelegate.prototype.onlsdragenter.call(this,oBrowserEvent);this.bInitialized=true;oBrowserEvent.cancelBubble();}; UCF_GridLayoutDropDelegate.prototype.onlsdragover=function(oBrowserEvent){if(!this.bInitialized){this.onlsdragenter(oBrowserEvent);}UCF_DropDelegate.prototype.onlsdragover.call(this,oBrowserEvent);}; UCF_GridLayoutDropDelegate.prototype.onlsdragleave=function(oBrowserEvent){if(this.sDelayedCall){UCF_JsUtil.clearDelayedCall(this.sDelayedCall);}var that=this;this.sDelayedCall=UCF_JsUtil.delayedCall(1,this,"dolsdragleave",[oBrowserEvent.oDragAndDropManager]);};UCF_GridLayoutDropDelegate.prototype.dolsdragleave=function(oDragAndDropManager){  if(oDragAndDropManager.oDropDecoration==this.oDropDecorator){ oDragAndDropManager.cleanUpDropArea();}if(this.oDropDecorator)this.oDropDecorator.cleanUp(); this.bInitialized=false;}; UCF_GridLayoutDropDelegate.prototype.onlsdragend=function(oBrowserEvent){this.bInitialized=false;};UCF_GridLayoutDropDelegate.prototype.onlsdrop=function(oBrowserEvent){var oDropTargetControl=this.oGetDropTargetControl(oBrowserEvent);var oDragSession=oBrowserEvent.oDragAndDropManager.oDragSession;if(oBrowserEvent.oDragAndDropManager.bGetDropAllowed()){var sDragTags=oDragSession.sDragTags;var sDragData=oDragSession.sGetDragData();var sMimeType=oDragSession.sGetMimeType();var sDragId=oDragSession.sDragId; if(sDragData==null){oDragSession.setDragDataChangeListener(this.fGetDropCallBack(sDragId,sDragTags));oDragSession.bDropPending=true;oDropTargetControl.oLS.lock();}else{this.fGetDropCallBack(sDragId,sDragTags).apply(this,[sDragData,sMimeType]);}oBrowserEvent.bHandled=true;oBrowserEvent.cancelBubble();this.oDropDecorator.bDoNotCleanUp=true;}oBrowserEvent.oDragAndDropManager.cleanUpDropArea();};
 function UCF_BreadCrumb(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(!this.bEnabled&&!UCF_System.bIs508)return;if(this.sBehavior=="DEFAULT"){this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");UCF_DomUtil.setTabIndex(this.oDomRef,-1);this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);}this.bAllowTextSelection=true;};UCF_BreadCrumb.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_BreadCrumb.prototype.onlsfocus=function(oBrowserEvent){if(this.sBehavior!="DEFAULT")return;var oSource=oBrowserEvent.oGetSource(),aItems=this.oItemNavigation.aItems;if(oSource==this.oDomRef&&aItems!=null){aItems[aItems.length-1].focus();}}; UCF_BreadCrumb.prototype.onclick=function(oBrowserEvent){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();if(this.sBehavior=="SINGLELINK"&&this.bEnabled){this.fireActivate(this.sId);}}; UCF_BreadCrumb.prototype.onmousedown=function(oBrowserEvent){if(!UCF_System.bIs508&&this.bEnabled&&this.sBehavior=="DEFAULT"){this.oItemNavigation.bIgnoreFocus=true;var oSeparator=oBrowserEvent.oGetSource();if(oSeparator.tagName=="IMG")oSeparator=oSeparator.parentNode;if(oSeparator.getAttribute("idx")==null)return;var iIdx=parseInt(oSeparator.getAttribute("idx"));this.oItemNavigation.setFocusedIndex(iIdx);this.oItemNavigation.focusItemByIndex(iIdx);}}; UCF_BreadCrumb.prototype.onlsselect=function(oBrowserEvent){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();if(this.sBehavior=="SINGLELINK"&&this.bEnabled){this.fireActivate(this.sId);}}; UCF_BreadCrumb.prototype.onmouseover=function(oBrowserEvent){ window.status="";oBrowserEvent.oDomEvent.returnValue=true;}; UCF_BreadCrumb.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem");if(!oItem.bSelected&&this.bEnabled)this.fireSelect(this.sId,oItem.sId);}; UCF_BreadCrumb.prototype.createItems=function(){var aDomItems=this.oDomRef.childNodes;for(var i=0;i<aDomItems.length;i++){var oControlItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[i],true);if(oControlItem==null)continue;this.oItemNavigation.addItem(oControlItem,oControlItem.bSelected);this.oItemNavigation.aItems[this.oItemNavigation.aItems.length-1].iIndex=this.oItemNavigation.aItems.length;}}; UCF_BreadCrumb.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper; var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.addTooltip(this.sTooltip);if(this.sBehavior=="SINGLELINK"){oAccessibilityHelper.setControlType("BRC_SL");oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));if(this.bEnabled)oAccessibilityHelper.addTutor("SELECT_TUT");}else if(UCF_JsUtil.bInstanceOf(oSource,"UCF_BreadCrumbItem")&&this.sBehavior!="SINGLELINK"){oAccessibilityHelper.setControlType("BRC");oAccessibilityHelper.addTooltip(oSource.sTooltip);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setSelected(oSource.bSelected);oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex);oAccessibilityHelper.addTutor("LRNAV_TUT");if(!oSource.bSelected&&this.bEnabled){oAccessibilityHelper.addTutor("SELECT_TUT");}}}; UCF_BreadCrumb.prototype.aAttributeNames=["sBehavior","sTooltip","bEnabled"]; UCF_BreadCrumb.prototype.aMethodNames=[];  UCF_BreadCrumb.prototype.sBehavior="DEFAULT"; UCF_BreadCrumb.prototype.sTooltip=''; UCF_BreadCrumb.prototype.bEnabled=true; UCF_BreadCrumb.prototype.setDefaultValues=function(){this.sBehavior="DEFAULT";this.sTooltip='';this.bEnabled=true;}; UCF_BreadCrumb.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};this.fireSemanticEvent("BreadCrumb","Select",mParams);}; UCF_BreadCrumb.prototype.fireActivate=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Activate)this.oLS.markDirty();this.fireSemanticEvent("BreadCrumb","Activate",mParams);};
 function UCF_Ghost(oDomRef){this.iOffsetLeft=0;this.iOffsetTop=0;this.oDomRef=oDomRef;this.bApplyAlphaFilter=true;this.bVisible=true;this.bOffsetSet=false;};UCF_Ghost.prototype=new UCF_Object(); UCF_Ghost.prototype.create=function(oRootContainerDomRef){ var oDocument=UCF_DomUtil.oGetDocument(this.oDomRef);var oGhostRef=oDocument.createElement("DIV");oGhostRef.style.position="absolute";oGhostRef.style.zIndex=1000;oGhostRef.style.overflow="hidden";oGhostRef.style.top="-1000";oGhostRef.style.cursor="default"; if(this.oDomRef.tagName=="TR"){var oRowRef=this.createRow(oDocument,this.oDomRef.style.width,this.oDomRef.style.height);oRowRef.parentNode.replaceChild(this.oDomRef,oRowRef);this.oDomRef=this.oDomRef.parentNode.parentNode;}else if(this.oDomRef.tagName=="TD"||this.oDomRef.tagName=="TH"){var oRowRef=this.createRow(oDocument,this.oDomRef.style.width,this.oDomRef.style.height);oRowRef.appendChild(this.oDomRef);this.oDomRef=oRowRef.parentNode.parentNode;}oGhostRef.appendChild(this.oDomRef);this.oGhostRef=oGhostRef;oRootContainerDomRef.appendChild(oGhostRef);this.iOriginalWidth=oGhostRef.offsetWidth;this.iOriginalHeight=oGhostRef.offsetHeight;this.deleteIds(this.oGhostRef);if(!this.bApplyAlphaFilter)return; if(UCF_System.sDevice=="ie6"){oGhostRef.style.filter="progid:DXImageTransform.Microsoft.Alpha( style=1,opacity=80,finishOpacity=20,startX=0,finishX="+this.iOriginalWidth+",startY=0,finishY="+this.iOriginalHeight+")";}else{oGhostRef.style.opacity="0.6";}}; UCF_Ghost.prototype.applyAlphaFilter=function(bApplyAlphaFilter){this.bApplyAlphaFilter=bApplyAlphaFilter;}; UCF_Ghost.prototype.createRow=function(oDocument,sWidth,sHeight){var oTableRef=oDocument.createElement("TABLE");oTableRef.cellPadding="0";oTableRef.cellSpacing="0";oTableRef.border="0";oTableRef.style.tableLayout="fixed";oTableRef.style.borderCollapse="collapse";if(sWidth)oTableRef.style.width=sWidth;if(sHeight)oTableRef.style.height=sHeight;var oTableBody=oDocument.createElement("TBODY"),oTableRow=oDocument.createElement("TR");oTableBody.appendChild(oTableRow);oTableRef.appendChild(oTableBody);return oTableRow;}; UCF_Ghost.prototype.setOffset=function(iLeft,iTop){if(UCF_System.sDevice=="ie6"){this.iOffsetLeft=iLeft;this.iOffsetTop=iTop;}else{  this.iOffsetLeft=12;this.iOffsetTop=12;}this.bOffsetSet=true;}; UCF_Ghost.prototype.setPosition=function(iX,iY){if(UCF_System.bIsRTL){var iLeft=iX-this.iOffsetLeft-this.iOriginalWidth;}else{var iLeft=iX+this.iOffsetLeft;}var iTop=iY+this.iOffsetTop;this.oGhostRef.style.left=iLeft+"px";this.oGhostRef.style.top=iTop+"px"; var oViewportSize=UCF_DomUtil.oGetInnerSize(window);var scrollOffset=UCF_DomUtil.oGetScrollOffset(window);if(UCF_System.bIsRTL){}else{this.oGhostRef.style.width=Math.min(this.iOriginalWidth,Math.max(oViewportSize.width+scrollOffset.x-iLeft,0))+"px";}this.oGhostRef.style.height=Math.min(this.iOriginalHeight,Math.max(oViewportSize.height+scrollOffset.y-iTop,0))+"px";}; UCF_Ghost.prototype.destroy=function(){  if(!UCF_System.bUseAnimation){this.doDestroy();return;}var oAnimation=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oGhostRef,300);oAnimation.addInitialOpacityValue(100);oAnimation.addOpacityChange(100,20,oAnimation.M_TRANSITIONS.EaseIn);oAnimation.callbackFinish(this,"doDestroy");oAnimation.play();}; UCF_Ghost.prototype.doDestroy=function(){UCF_DomUtil.removeFromDom(this.oGhostRef);}; UCF_Ghost.prototype.show=function(){this.oGhostRef.style.display="block";this.bVisible=true;}; UCF_Ghost.prototype.hide=function(){this.oGhostRef.style.display="none";this.bVisible=false;}; UCF_Ghost.prototype.bHasOffsetSet=function(){return this.bOffsetSet;}; UCF_Ghost.prototype.setCursor=function(sCursor){this.setCursorRecursive(this.oGhostRef,sCursor);};UCF_Ghost.prototype.deleteIds=function(oDomRef){if(oDomRef.setAttribute)oDomRef.setAttribute("id","");for(var x=0;x<oDomRef.childNodes.length;x++)this.deleteIds(oDomRef.childNodes[x]);};UCF_Ghost.prototype.setCursorRecursive=function(oDomRef,sCursor){if(oDomRef.style)oDomRef.style.cursor=sCursor;var aChildren=oDomRef.childNodes;for(var x=0;x<aChildren.length;x++){this.setCursorRecursive(aChildren[x],sCursor);}};
 function UCF_Toolbar(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.bHasShowAllState)this.createItems();};UCF_Toolbar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_Toolbar.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();};UCF_Toolbar.prototype.onclick=function(oBrowserEvent){this.toggleItems(oBrowserEvent);};UCF_Toolbar.prototype.onlsenter=function(oBrowserEvent){this.toggleItems(oBrowserEvent);}; UCF_Toolbar.prototype.toggleItems=function(oBrowserEvent){if(!this.bHasShowAllState)return;var oSource=UCF_DomUtil.$(this.sId+"-tgl"),bOpen=(oSource.firstChild.className.indexOf("urTBtnExp")>-1);iKey=oBrowserEvent.iKeyCode();if(!oSource)return;if(bOpen){oSource.firstChild.className="urTBtnCol2";this.hideItems();}else{oSource.firstChild.className="urTBtnExp2";this.showItems();}this.bShowAll=!this.bShowAll;}; UCF_Toolbar.prototype.hideItems=function(){for(var i=0;i<=this.aItems.length-1;i++){this.aItems[i].style.display="none";}}; UCF_Toolbar.prototype.showItems=function(){for(var i=0;i<=this.aItems.length-1;i++){this.aItems[i].style.display="inline";}};UCF_Toolbar.prototype.createItems=function(){this.aItems=[];aItems=UCF_DomUtil.$(this.sId+"-itms").getElementsByTagName("SPAN");for(var i=0;i<=aItems.length-1;i++){if(aItems[i].getAttribute("cancollapse")=="true")this.aItems.push(aItems[i]);}}; UCF_Toolbar.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Toolbar.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Toolbar.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("T_END");}else if(oSource.children&&oSource.children[0].className.indexOf("Col")>-1){oAccessibilityHelper.addTutor("T_BTN_E");oAccessibilityHelper.addTutor("LN_TUT");}else if(oSource.children&&oSource.children[0].className.indexOf("Exp")>-1){oAccessibilityHelper.addTutor("T_BTN_C");oAccessibilityHelper.addTutor("LN_TUT");}else{oAccessibilityHelper.setControlType("T");oAccessibilityHelper.addTutor("GROUP_TUT");oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);}oBrowserEvent.cancelBubble();}; UCF_Toolbar.prototype.aAttributeNames=["sId","bHasShowAllState","bShowAll","sAccessibilityDescription"]; UCF_Toolbar.prototype.aMethodNames=[];  UCF_Toolbar.prototype.sId=''; UCF_Toolbar.prototype.bHasShowAllState=false; UCF_Toolbar.prototype.bShowAll=false; UCF_Toolbar.prototype.sAccessibilityDescription=''; UCF_Toolbar.prototype.setDefaultValues=function(){this.sId='';this.bHasShowAllState=false;this.bShowAll=false;this.sAccessibilityDescription='';};
 function UCF_MenuBar(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);UCF_DomUtil.setTabIndex(this.oDomRef,-1);};UCF_MenuBar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_MenuBar.prototype.onclick=function(oBrowserEvent){var oItem=oBrowserEvent.oGetSourceControl();if(this.oPopupMenu&&this.oPopupMenu.bOpened)this.oPopupMenu.close();else this.openMenu(oItem,false);}; UCF_MenuBar.prototype.onlsshow=function(oBrowserEvent){var oItem=oBrowserEvent.oGetSourceControl();if(this.oPopupMenu&&this.oPopupMenu.bOpened){this.oPopupMenu.close();}else{this.openMenu(oItem,true);}oBrowserEvent.cancel();}; UCF_MenuBar.prototype.onmouseover=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(!oSource.bEnabled){this.sStyles=null;return;}this.sStyles=oSource.oDomRef.className;UCF_DomUtil.setClass(oSource.oDomRef,this.sStyles+"Hover");this.reopenMenu(oSource);}; UCF_MenuBar.prototype.onmouseout=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(this.sStyles==null)return;UCF_DomUtil.setClass(oSource.oDomRef,this.sStyles);}; UCF_MenuBar.prototype.reopenMenu=function(oItem){if(this.oPopupMenu&&this.oPopupMenu.bOpened){this.oPopupMenu.close();this.openMenu(oItem,false);}}; UCF_MenuBar.prototype.openMenu=function(oItem,bWidthKeyboard){if(!oItem.bEnabled||oItem.sPopupMenuId=="")return;this.oPopupMenu=this.oLS.oControlFactory.oGetControlById(oItem.sPopupMenuId,true);this.oPopupMenu.setOpenerRef(oItem.oDomRef);this.oPopupMenu.setOpenerId(oItem.sId);this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.iOldFocusedIndex=this.oItemNavigation.iFocusedIndex;this.oItemNavigation.bIgnoreFocus=true;this.oPopupMenu.open(bWidthKeyboard);this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.Close,this,"onMenuClose");this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.NextMenu,this,"onNextMenu");this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.PreviousMenu,this,"onPreviousMenu");this.fireMenuAccess(this.sId,oItem.sId,oItem.sPopupMenuId);}; UCF_MenuBar.prototype.onMenuClose=function(oEvent){this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);this.oItemNavigation.focusItemByIndex(this.iOldFocusedIndex);}; UCF_MenuBar.prototype.onNextMenu=function(oEvent){this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.NextMenu,this);this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);this.oPopupMenu.close();this.oItemNavigation.setFocusedIndex(this.iOldFocusedIndex+1);this.openMenu(this.oItemNavigation.aItems[this.oItemNavigation.iFocusedIndex],true);}; UCF_MenuBar.prototype.onPreviousMenu=function(oEvent){this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.PreviousMenu,this);this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);this.oPopupMenu.close();this.oItemNavigation.setFocusedIndex(this.iOldFocusedIndex-1);this.openMenu(this.oItemNavigation.aItems[this.oItemNavigation.iFocusedIndex],true);}; UCF_MenuBar.prototype.onlsdown=function(oBrowserEvent){this.onlsshow(oBrowserEvent);}; UCF_MenuBar.prototype.createItems=function(){var aDomItems=this.oDomRef.childNodes;for(var i=0;i<aDomItems.length;i++){var oControlItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[i],true);if(oControlItem==null)continue;oControlItem.iIndex=i;if(oControlItem.bEnabled||window.UCF_System.bIs508)this.oItemNavigation.addItem(oControlItem,oControlItem.iIndex==0);}}; UCF_MenuBar.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(!UCF_JsUtil.bInstanceOf(oSource,"UCF_MenuBarItem"))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setEnabled(oSource.bEnabled);oAccessibilityHelper.setTooltip(oSource.sTooltip);oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex+1);oAccessibilityHelper.setControlType("MNB_I");oAccessibilityHelper.addEnabledTutor("MNB_I_TUT",oSource.bEnabled);}; UCF_MenuBar.prototype.aAttributeNames=["sTooltip"]; UCF_MenuBar.prototype.aMethodNames=[];  UCF_MenuBar.prototype.sTooltip=''; UCF_MenuBar.prototype.setDefaultValues=function(){this.sTooltip='';}; UCF_MenuBar.prototype.fireMenuAccess=function(sId,sItemId,sPopupMenuId){var mParams={Id:sId,ItemId:sItemId,PopupMenuId:sPopupMenuId};this.fireSemanticEvent("MenuBar","MenuAccess",mParams);};
 function UCF_HorizontalContextualPanelItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef.childNodes[1];};UCF_HorizontalContextualPanelItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_HorizontalContextualPanelItem.prototype.aAttributeNames=["iIndex","iSelectedTabMenuIndex","sTooltip","bEnabled","sAccessKey"]; UCF_HorizontalContextualPanelItem.prototype.aMethodNames=[];  UCF_HorizontalContextualPanelItem.prototype.iIndex=0; UCF_HorizontalContextualPanelItem.prototype.iSelectedTabMenuIndex=-1; UCF_HorizontalContextualPanelItem.prototype.sTooltip=''; UCF_HorizontalContextualPanelItem.prototype.bEnabled=true; UCF_HorizontalContextualPanelItem.prototype.sAccessKey=''; UCF_HorizontalContextualPanelItem.prototype.setDefaultValues=function(){this.iIndex=0;this.iSelectedTabMenuIndex=-1;this.sTooltip='';this.bEnabled=true;this.sAccessKey='';};
 function UCF_Calendar(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);};UCF_Calendar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Calendar.prototype.getEntries=function(aEntryDomRefs){if(!aEntryDomRefs&&aEntryDomRefs.length==0)return null;var aEntries=[];for(var i=0;i<aEntryDomRefs.length;i++){if(aEntryDomRefs[i].nodeType==1){var oEntry=this.getEntry(aEntryDomRefs[i]);aEntries.push(oEntry);oEntry.oParentControl=this;}}return aEntries;}; UCF_Calendar.prototype.getEntry=function(oEntryDomRef){if(!oEntryDomRef)return null;var oEntry=this.oLS.oControlFactory.oGetControlByDomRef(oEntryDomRef,true);oEntry.setCalendar(this);return oEntry;}; UCF_Calendar.prototype.getRect=function(oDomRef){var oRect={left:0,top:0,width:oDomRef.offsetWidth,height:oDomRef.offsetHeight},oOrig=oDomRef;while(oDomRef.tagName!="BODY"){if(oDomRef.tagName=="DIV"&&UCF_DomUtil.sGetCurrentStyle(oDomRef,"overflow")!="none")break;oRect.left+=oDomRef.offsetLeft;oRect.top+=oDomRef.offsetTop;oDomRef=oDomRef.offsetParent;}if(this.oLS.oSystem.bIsRTL){oRect.right=oDomRef.offsetWidth-oRect.left-oOrig.offsetWidth;}if(!oDomRef.currentStyle){ oRect.left--;oRect.top--;}return oRect;}; UCF_Calendar.prototype.sortRowEntries=function(oEntry1,oEntry2){if(oEntry1.fStartColumn-oEntry2.fStartColumn!=0){return oEntry1.fStartColumn-oEntry2.fStartColumn}return oEntry1.fStartRow-oEntry2.fStartRow;}; UCF_Calendar.prototype.sortColEntries=function(oEntry1,oEntry2){if(oEntry1.fStartRow-oEntry2.fStartRow!=0){return oEntry1.fStartRow-oEntry2.fStartRow}if(oEntry1.bIsClone&&!oEntry2.bIsClone){return oEntry1.fStartColumn+(0.005)-oEntry2.fStartColumn;}return oEntry1.fStartColumn-oEntry2.fStartColumn;}; UCF_Calendar.prototype.aGetColumns=function(){var aDomColumns=this.oDomRef.getElementsByTagName("TH"),aColumns=[];for(var i=1;i<aDomColumns.length;i++){var oRect=this.getRect(aDomColumns[i]);aColumns.push({oRect:oRect,oDomRef:aDomColumns[i]});}return aColumns;}; UCF_Calendar.prototype.aGetRows=function(){var aDomRows=this.oDomRef.getElementsByTagName("TR"),aRows=[];for(var i=1;i<aDomRows.length;i++){var oRect=this.getRect(aDomRows[i]);aRows.push({oRect:oRect,oDomRef:aDomRows[i]});}return aRows;}; UCF_Calendar.prototype.iGetEntryColumnWidth=function(aColumns,oEntry){var iStartColumn=Math.floor(oEntry.fStartColumn),iWidth=0;   for(var i=1;i<=oEntry.fDuration;i++){if(i+iStartColumn>aColumns.length)break;iWidth+=aColumns[i+iStartColumn-1].oRect.width;}var fLastColDuration=oEntry.fDuration-Math.floor(oEntry.fDuration);if(fLastColDuration>0){var iLastColIndex=Math.ceil(oEntry.fDuration)+iStartColumn;if(Math.floor(oEntry.fDuration)+iStartColumn<aColumns.length){var iLastColDurationWidth=aColumns[Math.floor(oEntry.fDuration)+iStartColumn].oRect.width*fLastColDuration;iWidth+=iLastColDurationWidth;}}return iWidth;}; UCF_Calendar.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Calendar.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);};
 function UCF_TabStrip(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bInitial=this.bScrollable;this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");if(this.aItems.length>0){this.oItemNavigation.oItemContainer=this.oDomRef.firstChild.firstChild;this.setDefaultButtonId(this.aItems[this.iCurrentIndex].sDefaultButtonId);}this.oItemNavigation.bIgnoreFocus=true;this.oItemNavigation.bControlTabChain=false; this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);this.oFocusDomRef=UCF_DomUtil.$(this.sId+'-ITBB'); this.oObserver=UCF_DomUtil.$(this.sId+'-observer');};UCF_TabStrip.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TabStrip.prototype.initialize=function(){if(this.aItems.length==0||!this.bScrollable)return;if(this.bExactTabAlignment)this.setExactTabAlignment();this.oScrollDomRef=UCF_DomUtil.$(this.sId+"-panel");this.oPreviousButton=UCF_DomUtil.$(this.sId+"-prev");this.oNextButton=UCF_DomUtil.$(this.sId+"-next");this.oMenuButton=UCF_DomUtil.$(this.sId+"-menu");this.iWidth=this.oDomRef.offsetWidth; if(this.oScrollDomRef.scrollHeight>this.oScrollDomRef.offsetHeight){ if(this.iFirstVisibleItemIdx>-1){this.oScrollDomRef.scrollTop=this.aItems[this.iFirstVisibleItemIdx].oDomRef.offsetTop;}else{this.scrollSelectedTabIntoView(true);}this.setNextButton();this.setPreviousButton();this.setMoreIndicator(null);this.oPreviousButton.style.visibility="visible";this.oNextButton.style.visibility="visible";this.oMenuButton.style.visibility="visible";} var oCurrentItem=this.aItems[this.iCurrentIndex];if(oCurrentItem)oCurrentItem.initialize();this.attachBrowserEvent("resize",this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);this.bInitial=false;}; UCF_TabStrip.prototype.onlsfocus=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource==this.oDomRef){this.aItems[this.iCurrentIndex].focus();}}; UCF_TabStrip.prototype.onresize=function(oBrowserEvent){if(this.sTimeOutId!=null){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"onAfterResize");oBrowserEvent.cancelBubble();}; UCF_TabStrip.prototype.onAfterResize=function(){if(!this.bIsValid()||this.iWidth==this.oDomRef.offsetWidth)return;if(this.bInitial==true)this.initialize();this.oScrollDomRef.scrollTop=this.aItems[this.iCurrentIndex].oDomRef.offsetTop;this.setNextButton();this.setPreviousButton();this.setMoreIndicator(null);if(this.oScrollDomRef.scrollHeight>this.oScrollDomRef.offsetHeight+4){this.oPreviousButton.style.visibility="visible";this.oNextButton.style.visibility="visible";this.oMenuButton.style.visibility="visible";}else{this.oPreviousButton.style.visibility="hidden";this.oNextButton.style.visibility="hidden";this.oMenuButton.style.visibility="hidden";}this.iWidth=this.oDomRef.offsetWidth;}; UCF_TabStrip.prototype.onkeydown=function(oBrowserEvent){if(oBrowserEvent.bAlt())return;this.selectByPaging(oBrowserEvent); if(oBrowserEvent.bCtrl()||oBrowserEvent.bShift())return;var oSource=oBrowserEvent.oGetSourceControl();if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.DELETE&&oSource.bIsClosable&&oSource.bEnabled)this.fireTabClose(this.sId,oSource.sId);oBrowserEvent.returnValue=false;}; UCF_TabStrip.prototype.selectByPaging=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(); if(oBrowserEvent.bCtrl()&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.PAGE_UP){var oItem=this.nextSelectable();}else if(oBrowserEvent.bCtrl()&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.PAGE_DOWN){var oItem=this.previousSelectable();}if(oItem==null)return;this.setSelectedDesign(oItem);this.oItemNavigation.setFocusedIndex(oItem.iIndex);UCF_DomUtil.setTabIndex(oSource.oFocusDomRef,-1);UCF_DomUtil.setTabIndex(oItem.oFocusDomRef,0);oItem.oFocusDomRef.focus();}; UCF_TabStrip.prototype.nextSelectable=function(){if(this.iCurrentIndex+1>=this.aItems.length)return;var i=this.iCurrentIndex+1,aItems=this.aItems,oItem=null;while(i<aItems.length){if(aItems[i].bEnabled){oItem=aItems[i];break;}i++;}return oItem;}; UCF_TabStrip.prototype.previousSelectable=function(){if(this.iCurrentIndex<0)return;var i=this.iCurrentIndex-1,aItems=this.aItems,oItem=null;while(i>=0){if(aItems[i].bEnabled){oItem=aItems[i];break;}i--;}return oItem;}; UCF_TabStrip.prototype.onscroll=function(oBrowserEvent){var oSource=UCF_DomUtil.oGetActiveElement(),oItem=UCF_DomUtil.oGetCTElement(oSource);if(oItem&&oItem.getAttribute("ct")=="TSITM"){this.setNextButton();this.setPreviousButton();this.setMoreIndicator(null);this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIdx].sId);}}; UCF_TabStrip.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),oNextButton=UCF_DomUtil.$(this.sId+"-next"),oMenuButton=UCF_DomUtil.$(this.sId+"-menu");if(oSource==oNextButton&&oSource.className.indexOf("Dsbl")==-1){this.nextPage();}else if(oSource==this.oPreviousButton&&oSource.className.indexOf("Dsbl")==-1){this.previousPage();}else if(oSource==oMenuButton){if(!this.oItemMenu){ var sMenuId=oSource.getAttribute("menuid");if(!sMenuId)return;this.oItemMenu=this.oLS.oControlFactory.oGetControlById(sMenuId);this.oItemMenu.setOpenerRef(oSource);this.oItemMenu.setOpenerId(this.sId);this.oItemMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);}this.oItemMenu.attachEvent(this.oItemMenu.E_EVENTS.Select,this,"onMenuItemSelect");this.oItemMenu.attachEvent(this.oItemMenu.E_EVENTS.Close,this,"onMenuClose");this.oItemMenu.bFirstVisibleItemIndex=0;if(this.oItemMenu.bOpened){this.oItemMenu.close();}else{this.oItemMenu.open();var oMenuItems=this.oItemMenu.aItems;for(var i=0;i<oMenuItems.length;i++){if(oMenuItems[i].bChecked&&i!=this.iCurrentIndex)oMenuItems[i].setChecked(false);}this.oItemMenu.aItems[this.iCurrentIndex].setChecked(true);this.bMenuOpened=true;}}oBrowserEvent.cancelBubble();}; UCF_TabStrip.prototype.onlshotkey=function(oBrowserEvent){var oSelectedItem=this.aItems[this.iCurrentIndex];if(oSelectedItem.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(oSelectedItem.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oSelectedItem.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_TabStrip.prototype.setExactTabAlignment=function(){this.getExactDimensions();}; UCF_TabStrip.prototype.getExactDimensions=function(){var oContent=UCF_DomUtil.$(this.sId+"-cnt"),oPanel=UCF_DomUtil.$(this.sId+"-panel"),iWidth=oContent.scrollWidth,iHeight=oContent.scrollHeight,iPanelHeight=oPanel.offsetHeight,aContent=oContent.childNodes;for(var i=0;i<aContent.length;i++){if(i==this.iCurrentIndex)continue;if(iHeight<aContent[i].scrollHeight)iHeight=aContent[i].scrollHeight;if(iWidth<aContent[i].scrollWidth)iWidth=aContent[i].scrollWidth;}oPanel=(this.bScrollable)?oPanel.parentNode:oPanel;iWidth+=oPanel.nextSibling.offsetWidth;iHeight+=iPanelHeight;this.setExactDimensions(iWidth,iHeight,aContent);}; UCF_TabStrip.prototype.setExactDimensions=function(iWidth,iHeight,aContent){this.oDomRef.style.width=iWidth;this.oDomRef.style.height=iHeight;for(i=0;i<aContent.length;i++){var oItem=this.aItems[i],oContent=aContent[i]; if(oItem.sScrollingMode=="NONE"&&!oItem.bHasToolbar){oContent.style.width="100%";oContent.style.height="100%";} else if(oItem.bHasToolbar){oContent.style.width="100%";oContent.style.height="100%";} else if(oItem.sScrollingMode!="NONE"&&!oItem.bHasToolbar){oContent.style.tableLayout="fixed";oContent.style.width="100%";}}this.showContent(this.aItems[this.iCurrentIndex]);}; UCF_TabStrip.prototype.scrollSelectedTabIntoView=function(bFireEvent){var iOldFirstVisibleItemIndex=this.iFirstVisibleItemIdx,iLastVisibleItemIdx=this.oGetLastVisibleItem().iIndex;oSelectedItem=this.aItems[this.iCurrentIndex];if(!this.bScrollable||oSelectedItem.Index>iOldFirstVisibleItemIndex||oSelectedItem.Index<iLastVisibleItemIdx)return;this.oScrollDomRef.scrollTop=oSelectedItem.oDomRef.offsetTop;this.oFirstVisibleItem=this.oGetFirstVisibleItem();this.iFirstVisibleItemIdx=this.oFirstVisibleItem.iIndex;if(iOldFirstVisibleItemIndex!=this.iFirstVisibleItemIdx&&bFireEvent){this.fireScroll(this.sId,this.oFirstVisibleItem.sId);}}; UCF_TabStrip.prototype.setMoreIndicator=function(oItem){var oNewFirst=(oItem!=null)?oItem:this.oGetFirstVisibleItem(),oOldFirst=this.oOldFirst; if(oOldFirst!=null&&oOldFirst.iIndex!=0){if(oOldFirst.iIndex==this.iCurrentIndex)oOldFirst.oDomRef.firstChild.className="lsTbsStartSel";else if(oOldFirst.iIndex==this.iCurrentIndex+1)oOldFirst.oDomRef.firstChild.className="lsTbsStartEndSel";else oOldFirst.oDomRef.firstChild.className="lsTbsStart";} if(oNewFirst.iIndex>0){if(oNewFirst.iIndex==this.iCurrentIndex)oNewFirst.oDomRef.firstChild.className="lsTbsFirstMoreSel";else oNewFirst.oDomRef.firstChild.className="lsTbsFirstMore";}this.oOldFirst=oNewFirst;this.iFirstVisibleItemIdx=oNewFirst.iIndex;}; UCF_TabStrip.prototype.oGetFirstInPreviousLine=function(){var oItem=this.aItems[this.iFirstVisibleItemIdx].oDomRef,iRefTop=oItem.offsetTop-oItem.offsetHeight,aItems=this.aItems;for(var i=0;i<aItems.length;i++){if(this.aItems[i].oDomRef.offsetTop==iRefTop)return this.aItems[i];}}; UCF_TabStrip.prototype.oGetFirstInNextLine=function(){var oItem=this.oGetLastVisibleItem();return this.aItems[oItem.iIndex+1];}; UCF_TabStrip.prototype.oGetFirstVisibleItem=function(){var aItems=this.aItems;for(var i=0;i<aItems.length;i++){if(aItems[i].oDomRef.offsetTop==this.oScrollDomRef.scrollTop){return aItems[i];}}}; UCF_TabStrip.prototype.oGetLastVisibleItem=function(){var aItems=this.aItems;for(var i=aItems.length-1;i>=0;i--){if(aItems[i].oDomRef.offsetTop==this.oScrollDomRef.scrollTop){return aItems[i];}}}; UCF_TabStrip.prototype.previousPage=function(){var oItem=this.oGetFirstInPreviousLine();this.setMoreIndicator(oItem);this.oScrollDomRef.scrollTop-=this.oScrollDomRef.offsetHeight;this.setPreviousButton();this.setNextButton();this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIdx].sId);}; UCF_TabStrip.prototype.nextPage=function(){var oItem=this.oGetFirstInNextLine();this.setMoreIndicator(oItem);this.oScrollDomRef.scrollTop+=this.oScrollDomRef.offsetHeight;this.setPreviousButton();this.setNextButton();this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIdx].sId);}; UCF_TabStrip.prototype.setNextButton=function(){if(!this.bScrollable)return;var oButton=UCF_DomUtil.$(this.sId+"-next");if(!oButton)return;var bEnabled=this.oScrollDomRef.scrollHeight>this.oScrollDomRef.scrollTop+this.oScrollDomRef.offsetHeight;oButton.className=bEnabled?"urBtnStd urPGBtn urPGHNxtPage":"urBtnStdDsbl urPGBtn urPGHNxtPageDsbl";}; UCF_TabStrip.prototype.setPreviousButton=function(){if(!this.bScrollable)return;var oButton=UCF_DomUtil.$(this.sId+"-prev");if(!oButton)return;var bEnabled=this.oScrollDomRef.scrollTop>0;oButton.className=bEnabled?"urBtnStd urPGBtn urPGHPrevPage":"urBtnStdDsbl urPGBtn urPGHPrevPageDsbl";}; UCF_TabStrip.prototype.onMenuItemSelect=function(oEvent){var sItemId=oEvent.oGetParam("sItemId");if(!sItemId)return;var oItem=this.oGetControlById(sItemId),oItem=this.aItems[oItem.iIndex];this.checkMenuItem(oItem);if(this.bClientTabSelect&&oItem.bClientTabSelect)this.setSelectedDesign(oItem);if(this.iCurrentIndex!=oItem.Index)this.fireTabSelect(this.sId,oItem.sId);if(!this.bScrollable)return;this.scrollSelectedTabIntoView(false);this.setPreviousButton();this.setNextButton();this.setMoreIndicator(null);}; UCF_TabStrip.prototype.checkMenuItem=function(oItem){if(this.oItemMenu){var oOldMenuItem=this.oItemMenu.aItems[this.iCurrentIndex],oNewMenuItem=this.oItemMenu.aItems[oItem.iIndex];oOldMenuItem.setChecked(false);oNewMenuItem.setChecked(true);}}; UCF_TabStrip.prototype.onMenuClose=function(oEvent){var oMenuButton=UCF_DomUtil.$(this.sId+'-menu');UCF_DomUtil.focusDomElement(oMenuButton);this.oItemMenu.detachEvent(this.oItemMenu.E_EVENTS.Close,this);this.oItemMenu.detachEvent(this.oItemMenu.E_EVENTS.Select,this,"onMenuItemSelect");}; UCF_TabStrip.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem"),oBrowserEvent=oEvent.oGetParam("oBrowserEvent"),oSourceElement=oBrowserEvent.oGetSource();if(!oItem.bEnabled)return;if(oItem.bEnabled&&oItem.bIsClosable&&oSourceElement&&oSourceElement.id.indexOf("-cl")>-1){this.fireTabClose(this.sId,oItem.sId);return;}else if(oItem.bEnabled&&oItem.iIndex!=this.iCurrentIndex){this.fireTabSelect(this.sId,oItem.sId);if(!this.bClientTabSelect||!oItem.bClientTabSelect)return;this.setSelectedDesign(oItem);return;}}; UCF_TabStrip.prototype.setSelectedDesign=function(oItem){var aItems=this.aItems,oNewTab=oItem.oDomRef,iSelectedIndex=this.iCurrentIndex,oOldTab=aItems[iSelectedIndex].oDomRef,iFirstItemIndex=(this.bScrollable)?this.oGetFirstVisibleItem().iIndex:0; oOldTab.className=oOldTab.className.replace("Sel","");oOldTab.firstChild.className=oOldTab.firstChild.className.replace("Sel","");oOldTab.lastChild.className=oOldTab.lastChild.className.replace("Sel","");if(iSelectedIndex<aItems.length-1&&iFirstItemIndex!=iSelectedIndex+1)aItems[iSelectedIndex+1].oDomRef.firstChild.className="lsTbsStart";oNewTab.className=oNewTab.className+"Sel";oNewTab.firstChild.className=oNewTab.firstChild.className+"Sel";oNewTab.lastChild.className=oNewTab.lastChild.className+"Sel";if(oItem.iIndex<aItems.length-1)aItems[oItem.iIndex+1].oDomRef.firstChild.className="lsTbsStartEndSel";this.hideContent(aItems[iSelectedIndex]);this.showContent(aItems[oItem.iIndex]);this.iCurrentIndex=oItem.iIndex;if(aItems[iSelectedIndex].sDefaultButtonId){this.setDefaultButtonId(aItems[oItem.iIndex].sDefaultButtonId);this.oLS.highlightDefaultButton(this.oDefaultButton);} this.notifyLayoutChange();}; UCF_TabStrip.prototype.hideContent=function(oItem){var oContent=UCF_DomUtil.$(oItem.sId+"-cnt");if(UCF_System.bIsRTL==false){oContent.style.position="absolute";oContent.style.top="-10000px";oContent.style.left="-10000px";oContent.style.visibility="hidden";}else{oContent.style.display="none";}}; UCF_TabStrip.prototype.showContent=function(oItem){var oContent=UCF_DomUtil.$(oItem.sId+"-cnt");if(UCF_System.bIsRTL==false){oContent.style.visibility="visible";oContent.style.position="static";}else{oContent.style.display="block";}}; UCF_TabStrip.prototype.createItems=function(){var aDomItems=UCF_DomUtil.$(this.sId+'-panel').childNodes;this.aItems=[];for(var iItemCount=0;iItemCount<aDomItems.length;iItemCount++){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[iItemCount],true);if(!UCF_JsUtil.bInstanceOf(oItem,"UCF_TabStripItem"))continue;this.aItems.push(oItem);if(oItem.bEnabled||UCF_System.bIs508){this.oItemNavigation.addItem(oItem,oItem.iIndex==this.iCurrentIndex);}}}; UCF_TabStrip.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_TabStrip.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_TabStrip.prototype.onlstabprevious=function(oBrowserEvent){if(UCF_JsUtil.bInstanceOf(oBrowserEvent.oGetSourceControl(),"UCF_TabStripItem")){ var oControl=this.oGetPreviousFocusableControl(); if(oControl){oControl.focus();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{  UCF_DomUtil.focusDomElement(document.body);}}}; UCF_TabStrip.prototype.onlstabnext=function(oBrowserEvent){if(UCF_JsUtil.bInstanceOf(oBrowserEvent.oGetSourceControl(),"UCF_TabStripItem")){ var oControl=this.oGetFirstFocusableChild();if(oControl){oControl.focus();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{var focussed=this.focusNextControl(); if(focussed){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{ UCF_DomUtil.focusDomElement(document.body);}}}}; UCF_TabStrip.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(UCF_JsUtil.bInstanceOf(oSource,"UCF_TabStripItem")){oAccessibilityHelper.setControlType("TS");oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);oAccessibilityHelper.setEnabled(oSource.bEnabled);oAccessibilityHelper.addTooltip(oSource.sTooltip);if(oSource.bHasTitleCaption){oAccessibilityHelper.addTooltip(oSource.oDomRef.captt);}oAccessibilityHelper.setAccessKey(oSource.sAccessKey);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex+1);if(oSource.iIndex!=this.iCurrentIndex&&oSource.bEnabled)oAccessibilityHelper.addTutor("SELECT_TUT");oAccessibilityHelper.setSelected(oSource.iIndex==this.iCurrentIndex);oAccessibilityHelper.addTutor("GROUP_TUT");oAccessibilityHelper.addTutor("LRNAV_TUT");}else if(oBrowserEvent.oGetSource().id.indexOf("-end")>-1&&oSource==this){oAccessibilityHelper.setControlType("TS_END");}oBrowserEvent.cancelBubble();}; UCF_TabStrip.prototype.destroy=function(){if(!this.bScrollable||this.aItems.length==0)return;UCF_Control.prototype.destroy.apply(this,arguments);this.detachBrowserEvent("resize",this.oScrollDomRef);this.detachBrowserEvent("scroll",this.oScrollDomRef);}; UCF_TabStrip.prototype.aAttributeNames=["iCurrentIndex","sHeight","sWidth","sAccessibilityDescription","iFirstVisibleItemIdx","bScrollable","bExactTabAlignment","bClientTabSelect"]; UCF_TabStrip.prototype.aMethodNames=[];  UCF_TabStrip.prototype.iCurrentIndex=0; UCF_TabStrip.prototype.sHeight=''; UCF_TabStrip.prototype.sWidth=''; UCF_TabStrip.prototype.sAccessibilityDescription=''; UCF_TabStrip.prototype.iFirstVisibleItemIdx=-1; UCF_TabStrip.prototype.bScrollable=false; UCF_TabStrip.prototype.bExactTabAlignment=true; UCF_TabStrip.prototype.bClientTabSelect=true; UCF_TabStrip.prototype.setDefaultValues=function(){this.iCurrentIndex=0;this.sHeight='';this.sWidth='';this.sAccessibilityDescription='';this.iFirstVisibleItemIdx=-1;this.bScrollable=false;this.bExactTabAlignment=true;this.bClientTabSelect=true;}; UCF_TabStrip.prototype.fireTabSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.TabSelect)this.oLS.markDirty();this.fireSemanticEvent("TabStrip","TabSelect",mParams);}; UCF_TabStrip.prototype.fireTabClose=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.TabClose)this.oLS.markDirty();this.fireSemanticEvent("TabStrip","TabClose",mParams);}; UCF_TabStrip.prototype.fireScroll=function(sId,sFirstVisibleItemId){var mParams={Id:sId,FirstVisibleItemId:sFirstVisibleItemId};this.fireSemanticEvent("TabStrip","Scroll",mParams);}; UCF_TabStrip.prototype.fireTabScroll=function(sId,sItemId,iScrollTop,iScrollLeft){var mParams={Id:sId,ItemId:sItemId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("TabStrip","TabScroll",mParams);}; UCF_TabStrip.prototype.fireHotkey=function(sId,sItemId,sHotkey,sProviderId){var mParams={Id:sId,ItemId:sItemId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("TabStrip","Hotkey",mParams);};
 function UCF_CalendarEntry(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oCalendar=null;this.iStartColumn=Math.floor(this.fStartColumn);this.iStartRow=Math.floor(this.fStartRow);this.fEndColumn=this.fStartColumn+this.fDuration;this.fEndRow=this.fStartRow+this.fDuration;this.bOpenStart=this.bStartsBeforeView;this.bOpenEnd=this.bEndsAfterView;this.bRowSpanned=true;};UCF_CalendarEntry.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_CalendarEntry.prototype.TextAlign={LEFT:0,CENTER:1,RIGHT:2}; UCF_CalendarEntry.prototype.onclick=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource(),oEntryTextRef=UCF_DomUtil.oGetParentByTagName(oEventDomRef,"A"),sId=this.sId,iCloneIndex=sId.indexOf("-clone-");if(iCloneIndex>-1)sId=sId.substring(0,iCloneIndex);if(this.bAdditionalTextClickable&&oEntryTextRef){this.fireAdditionalTextActivate(sId,this.oCalendar.sId)}else if(this.bSelectable){this.fireSelect(sId,this.oCalendar.sId)}}; UCF_CalendarEntry.prototype.setCalendar=function(oCalendar){this.oCalendar=oCalendar;}; UCF_CalendarEntry.prototype.applyStyles=function(){if(this.bOpenStart){if(this.bRowSpanned)if(this.oLS.oSystem.bIsRTL){this.oDomRef.style.borderRight="none";}else{this.oDomRef.style.borderLeft="none";}else this.oDomRef.style.borderTop="none";}if(this.bOpenEnd){if(this.bRowSpanned)if(this.oLS.oSystem.bIsRTL){this.oDomRef.style.borderLeft="none";}else{this.oDomRef.style.borderRight="none";}else this.oDomRef.style.borderBottom="none";}}; UCF_CalendarEntry.prototype.setPosition=function(iLeft,iTop,iWidth,iHeight,iRight){if(UCF_DomUtil.sGetCurrentStyle(this.oDomRef,"borderLeftWidth")!="1px"){iWidth++;}if(UCF_DomUtil.sGetCurrentStyle(this.oDomRef,"borderRightWidth")!="1px"){iWidth++;}if(iWidth<0||iHeight<0)return;if(this.oLS.oSystem.bIsRTL){if(!iRight)iRight=iLeft;this.oDomRef.style.right=iRight+"px";}else{this.oDomRef.style.left=iLeft+"px";}this.oDomRef.style.top=iTop+"px";this.oDomRef.style.width=iWidth+"px";this.oDomRef.style.height=iHeight+"px";}; UCF_CalendarEntry.prototype.setTextAlign=function(iTextAlign){if(iTextAlign==this.TextAlign.CENTER){this.oDomRef.style.textAlign="center";}else if(iTextAlign==this.TextAlign.RIGHT){this.oDomRef.style.textAlign="right";}};UCF_CalendarEntry.prototype.onlsselectmodifier=function(oBrowserEvent){var sId=this.sId,iCloneIndex=sId.indexOf("-clone-");if(iCloneIndex>-1)sId=sId.substring(0,iCloneIndex);if(oBrowserEvent.bCtrl()&&this.bAdditionalTextClickable){this.fireAdditionalTextActivate(sId,this.oCalendar.sId)}oBrowserEvent.cancel();}; UCF_CalendarEntry.prototype.onlsselect=function(oBrowserEvent){var sId=this.sId,iCloneIndex=sId.indexOf("-clone-");if(iCloneIndex>-1)sId=sId.substring(0,iCloneIndex);if(this.bSelectable){this.fireSelect(sId,this.oCalendar.sId)}oBrowserEvent.cancel();}; UCF_CalendarEntry.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sText=UCF_DomUtil.sGetInnerText(this.oDomRef)+" ";if(this.sStartDateText!=""){sText+=this.sStartDateText+" ";}if(this.sStartTimeText!=""){sText+=this.sStartTimeText+" ";}if((this.sStartTimeText!=""||this.sStartDateText!="")&&(this.sEndTimeText!=""||this.sEndDateText!="")){sText+="-";}if(this.sEndDateText!=""){sText+=this.sEndDateText+" ";}if(this.sEndTimeText!=""){sText+=this.sEndTimeText+" ";}oAccessibilityHelper.setText(sText);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("B");oAccessibilityHelper.setSelected(this.bSelected);var sRecurring=this.bReoccuring?"_RECURRING":"";if(this.bFullDay){oAccessibilityHelper.setControlType("CAL_ENTRY"+sRecurring+"_FDAY");}else{oAccessibilityHelper.setControlType("CAL_ENTRY"+sRecurring);}if(this.bAdditionalTextClickable){oAccessibilityHelper.addTutor("CAL_ENTRY_ADDL_TUT");}if(this.bSelected&&this.bSelectable){oAccessibilityHelper.addTutor("CAL_ENTRY_SEL_TUT");}if(!this.bSelected&&this.bSelectable){oAccessibilityHelper.addTutor("CAL_ENTRY_NSEL_TUT");}if(this.bStriped){oAccessibilityHelper.setCustomStatusText("CAL_ENTRY_TENTATIVE");}}; UCF_CalendarEntry.prototype.aAttributeNames=["fStartRow","fStartColumn","fDuration","bFullDay","sText","bAdditionalTextClickable","sStartDateText","sEndDateText","sStartTimeText","sEndTimeText","bStartsBeforeView","bEndsAfterView","bSelected","bSelectable","bReoccuring","sSemanticColor","bStriped"]; UCF_CalendarEntry.prototype.aMethodNames=[];  UCF_CalendarEntry.prototype.fStartRow=0; UCF_CalendarEntry.prototype.fStartColumn=0; UCF_CalendarEntry.prototype.fDuration=0; UCF_CalendarEntry.prototype.bFullDay=false; UCF_CalendarEntry.prototype.sText=''; UCF_CalendarEntry.prototype.bAdditionalTextClickable=false; UCF_CalendarEntry.prototype.sStartDateText=''; UCF_CalendarEntry.prototype.sEndDateText=''; UCF_CalendarEntry.prototype.sStartTimeText=''; UCF_CalendarEntry.prototype.sEndTimeText=''; UCF_CalendarEntry.prototype.bStartsBeforeView=false; UCF_CalendarEntry.prototype.bEndsAfterView=false; UCF_CalendarEntry.prototype.bSelected=false; UCF_CalendarEntry.prototype.bSelectable=false; UCF_CalendarEntry.prototype.bReoccuring=false; UCF_CalendarEntry.prototype.sSemanticColor="STANDARD"; UCF_CalendarEntry.prototype.bStriped=false; UCF_CalendarEntry.prototype.setDefaultValues=function(){this.fStartRow=0;this.fStartColumn=0;this.fDuration=0;this.bFullDay=false;this.sText='';this.bAdditionalTextClickable=false;this.sStartDateText='';this.sEndDateText='';this.sStartTimeText='';this.sEndTimeText='';this.bStartsBeforeView=false;this.bEndsAfterView=false;this.bSelected=false;this.bSelectable=false;this.bReoccuring=false;this.sSemanticColor="STANDARD";this.bStriped=false;}; UCF_CalendarEntry.prototype.fireSelect=function(sId,sCalendarId){var mParams={Id:sId,CalendarId:sCalendarId};this.fireSemanticEvent("CalendarEntry","Select",mParams);}; UCF_CalendarEntry.prototype.fireAdditionalTextActivate=function(sId,sCalendarId){var mParams={Id:sId,CalendarId:sCalendarId};this.fireSemanticEvent("CalendarEntry","AdditionalTextActivate",mParams);};
 function UCF_RadioButton(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.oImageRef=UCF_DomUtil.$(this.sId+"-img"); this.oFocusDomRef=UCF_DomUtil.$(this.sId+"-lbl");  this.aRadioButtons=new Array(); this.bTabIndexInitialized=false; this.bResetTabIndex=false; this.oSelected=null;  if(this.bUsedInSapTable)this.bNavigation=false;else this.bNavigation=true; if(this.oDataTip){this.oDataTip.setOpenerRef(this.oImageRef);if(this.bShowHelp){this.oDataTip.setHoverDomRef(this.oFocusDomRef);this.oDataTip.setHoverDomRefExcluded(this.oImageRef);}}};UCF_RadioButton.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RadioButton.prototype.bIsFocusable=function(){if(UCF_System.bIs508||(this.bEnabled&&!this.bReadonly))return((this.oFocusDomRef!=null)&&(this.oFocusDomRef.tabIndex>=0));else return false;}; UCF_RadioButton.prototype.onlsfocus=function(oBrowserEvent){if(!this.bTabIndexInitialized){this.initializeTabindex();this.bTabIndexInitialized=true;}var oSelected=this.oGetSelected(),oActiveElement=UCF_DomUtil.oGetActiveElement();if(oSelected!=null&&oActiveElement!=null&&oActiveElement==oSelected.oDomRef){this.oSelected.oFocusDomRef.focus();}else{if(!this.bTabIndexInitialized){UCF_DomUtil.setTabIndex(this.oFocusDomRef,0);}}}; UCF_RadioButton.prototype.onlsblur=function(oBrowserEvent){if(!this.bResetTabIndex)return;var aRadioButtons=this.aGetGroup(),selected=this.oGetSelected();if(selected){ UCF_DomUtil.setTabIndex(selected.oFocusDomRef,0);selected.bTabIndexInitialized=true;tabIndex=-1;}else{ tabIndex=0;}for(var i=0;i<aRadioButtons.length;i++){if(!aRadioButtons[i].bChecked){UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,tabIndex);aRadioButtons[i].bTabIndexInitialized=(selected!=null);}}this.bResetTabIndex=false;}; UCF_RadioButton.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;this.select();oBrowserEvent.cancelBubble();}; UCF_RadioButton.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_RadioButton.prototype.onkeydown=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();var aRadioButtons=this.aGetGroup(); if(iKey==UCF_KeyCodes.F2&&this.bUsedInSapTable){this.bNavigation=!this.bNavigation;for(var i=0;i<aRadioButtons.length;i++){aRadioButtons[i].bNavigation=this.bNavigation;}this.refocus(this.oFocusDomRef);oBrowserEvent.cancelBubble();}}; UCF_RadioButton.prototype.onmousedown=function(oBrowserEvent){this.initializeTabindex();this.bTabIndexInitialized=true;}; UCF_RadioButton.prototype.onmouseover=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly||this.bInvalid||this.sInputState=="ERROR"||this.sInputState=="WARNING")return;}; UCF_RadioButton.prototype.onmouseout=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly||this.bInvalid||this.sInputState=="ERROR"||this.sInputState=="WARNING")return;}; UCF_RadioButton.prototype.onlsright=function(oBrowserEvent){ if(!this.bNavigation)return;var oNext=this.oGetNext();if(oNext)oNext.select();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_RadioButton.prototype.onlsrightmodifier=function(oBrowserEvent){ if(!this.bNavigation)return; if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())return;var oNext=this.oGetNext();if(oNext)oNext.focus();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_RadioButton.prototype.onlsdown=function(oBrowserEvent){this.onlsright(oBrowserEvent);}; UCF_RadioButton.prototype.onlsdownmodifier=function(oBrowserEvent){this.onlsrightmodifier(oBrowserEvent);}; UCF_RadioButton.prototype.onlsleft=function(oBrowserEvent){ if(!this.bNavigation)return;var oPrevious=this.oGetPrevious();if(oPrevious)oPrevious.select();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_RadioButton.prototype.onlsleftmodifier=function(oBrowserEvent){ if(!this.bNavigation)return; if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())return;var oPrevious=this.oGetPrevious();if(oPrevious)oPrevious.focus();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_RadioButton.prototype.onlsup=function(oBrowserEvent){this.onlsleft(oBrowserEvent);}; UCF_RadioButton.prototype.onlsupmodifier=function(oBrowserEvent){this.onlsleftmodifier(oBrowserEvent);}; UCF_RadioButton.prototype.onlshome=function(oBrowserEvent){ if(!this.bNavigation)return;var aRadioButtons=this.aGetGroup();var oFirst=aRadioButtons[0];if(oFirst)oFirst.select();oBrowserEvent.cancelBubble();}; UCF_RadioButton.prototype.onlshomemodifier=function(oBrowserEvent){ if(!this.bNavigation)return; if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())return;var aRadioButtons=this.aGetGroup();var oFirst=aRadioButtons[0];oFirst.focus();oBrowserEvent.cancelBubble();}; UCF_RadioButton.prototype.onlsend=function(oBrowserEvent){ if(!this.bNavigation)return;var aRadioButtons=this.aGetGroup();var oLast=aRadioButtons[aRadioButtons.length-1];if(oLast)oLast.select();oBrowserEvent.cancelBubble();}; UCF_RadioButton.prototype.onlsendmodifier=function(oBrowserEvent){ if(!this.bNavigation)return; if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())return;var aRadioButtons=this.aGetGroup();var oLast=aRadioButtons[aRadioButtons.length-1];oLast.focus();oBrowserEvent.cancelBubble();}; UCF_RadioButton.prototype.onlsselect=function(oBrowserEvent){this.select();}; UCF_RadioButton.prototype.onlstabnext=function(oBrowserEvent){this.bResetTabIndex=true;}; UCF_RadioButton.prototype.onlstabprevious=function(oBrowserEvent){this.bResetTabIndex=true;}; UCF_RadioButton.prototype.select=function(){if(!this.bEnabled||this.bReadonly||this.bChecked)return;if(this.oDataTip&&this.oDataTip.sExplanationText)this.oDataTip.close();var aRadioButtons=this.aGetGroup();for(var i=0;i<aRadioButtons.length;i++){if(!this.aRadioButtons[i].bEnabled||aRadioButtons[i].bReadonly)continue;var previousClassName=aRadioButtons[i].oImageRef.className;if(this==aRadioButtons[i]){aRadioButtons[i].bChecked=true;aRadioButtons[i].oDomRef.checked=true;aRadioButtons[i].oImageRef.className='';aRadioButtons[i].oImageRef.className=previousClassName.replace("Off","On");UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,0);}else{if(aRadioButtons[i].bChecked){aRadioButtons[i].bChecked=false;aRadioButtons[i].oDomRef.checked=false;aRadioButtons[i].oImageRef.className='';aRadioButtons[i].oImageRef.className=previousClassName.replace("On","Off");}UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,-1);}}if(UCF_DomUtil.oGetActiveElement()!=this.oFocusDomRef)this.focus();else this.refocus(this.oFocusDomRef); this.fireChange(this.sId,this.bChecked);}; UCF_RadioButton.prototype.oGetNext=function(){var aRadioButtons=this.aGetGroup(); for(var i=0;i<aRadioButtons.length;i++){if(this==aRadioButtons[i])break;}for(var j=(i+1);j<aRadioButtons.length;j++){if(UCF_System.bIs508||(aRadioButtons[j].bEnabled&&!aRadioButtons[j].bReadonly))return aRadioButtons[j]}return null;}; UCF_RadioButton.prototype.oGetPrevious=function(){var aRadioButtons=this.aGetGroup();var oPrevious=null; for(var i=0;i<aRadioButtons.length;i++){if(this==aRadioButtons[i])break;if(UCF_System.bIs508||(aRadioButtons[i].bEnabled&&!aRadioButtons[i].bReadonly))oPrevious=aRadioButtons[i];}return oPrevious;}; UCF_RadioButton.prototype.aGetGroup=function(){if(this.aRadioButtons.length>0)return this.aRadioButtons;if(!this.oDomRef.name){this.aRadioButtons[0]=this;this.iIndex=1;}else{var aRadioButtonsRef=document.getElementsByName(this.oDomRef.name);var j=0;for(var i=0;i<aRadioButtonsRef.length;i++){if(aRadioButtonsRef[i].tagName=="INPUT"){if(this.oDomRef==aRadioButtonsRef[i])this.aRadioButtons[j]=this;else this.aRadioButtons[j]=this.oLS.oControlFactory.oGetControlByDomRef(aRadioButtonsRef[i],true);j++;if(aRadioButtonsRef[i]==this.oDomRef)this.iIndex=j;}}}return this.aRadioButtons;}; UCF_RadioButton.prototype.oGetSelected=function(){if(this.oSelected)return this.oSelected;var aRadioButtons=this.aGetGroup(); for(var i=0;i<aRadioButtons.length;i++){if(aRadioButtons[i].bChecked){this.oSelected=aRadioButtons[i];return this.oSelected;}}return null;}; UCF_RadioButton.prototype.focus=function(){if((!UCF_System.bIs508&&!this.bEnabled)||UCF_DomUtil.oGetActiveElement()==this.oFocusDomRef)return;var aRadioButtons=this.aGetGroup();for(var i=0;i<aRadioButtons.length;i++){if(!UCF_System.bIs508&&(!aRadioButtons[i].bEnabled||aRadioButtons[i].bReadonly))continue;if(this==aRadioButtons[i]){UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,0);}else{UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,-1);}aRadioButtons[i].bTabIndexInitialized=true;}UCF_DomUtil.focusDomElement(this.oFocusDomRef);}; UCF_RadioButton.prototype.initializeTabindex=function(){var oSelected=null;var aRadioButtons=this.aGetGroup(); if(aRadioButtons.length<=1)return; if(this.bTabIndexInitialized)return; for(var i=0;i<aRadioButtons.length;i++){if(aRadioButtons[i].bChecked){oSelected=aRadioButtons[i];UCF_DomUtil.setTabIndex(oSelected.oFocusDomRef,0);}else{UCF_DomUtil.setTabIndex(aRadioButtons[i].oFocusDomRef,-1);}aRadioButtons[i].bTabIndexInitialized=true;}if(oSelected)this.oSelected=oSelected;}; UCF_RadioButton.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("R"); var sControlText=this.sText,sLabelText=oAccessibilityHelper.sGetLabelText(this.sId),oLabel=oAccessibilityHelper.sGetLabel(this.sId);if(sControlText!=""&&sLabelText!=""){oAccessibilityHelper.setLabel(sLabelText+" - "+sControlText);}else{oAccessibilityHelper.setLabel(sLabelText+sControlText);} if(oLabel&&oLabel.bRequired)oAccessibilityHelper.setRequired(true); oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setSelected(this.bChecked);oAccessibilityHelper.setNotSelected(!this.bChecked);oAccessibilityHelper.setInvalid(this.bInvalid); if(this.iIndex>0){oAccessibilityHelper.setItemCount(this.aRadioButtons.length);oAccessibilityHelper.setItemIndex(this.iIndex);} oAccessibilityHelper.setTooltip(this.sTooltip); if(this.oDataTip)oAccessibilityHelper.setDataTip(this.oDataTip.sText); if(this.bNavigation){if(!this.bEnabled||this.bReadonly)oAccessibilityHelper.addTutor("R_DSBL_TUT");else if(this.bChecked)oAccessibilityHelper.addTutor("R_SEL_TUT");else oAccessibilityHelper.addTutor("R_TUT");}else{if(this.bEnabled&&!this.bReadonly&&!this.bChecked)oAccessibilityHelper.addTutor("SELECT_TUT");}}; UCF_RadioButton.prototype.aAttributeNames=["bChecked","bEnabled","bReadonly","sText","sTooltip","bShowHelp","sInputState","bUsedInSapTable","sAccessKey"]; UCF_RadioButton.prototype.aMethodNames=[];  UCF_RadioButton.prototype.bChecked=false; UCF_RadioButton.prototype.bEnabled=true; UCF_RadioButton.prototype.bReadonly=false; UCF_RadioButton.prototype.sText=''; UCF_RadioButton.prototype.sTooltip=''; UCF_RadioButton.prototype.bShowHelp=false; UCF_RadioButton.prototype.sInputState="NONE"; UCF_RadioButton.prototype.bUsedInSapTable=false; UCF_RadioButton.prototype.sAccessKey=''; UCF_RadioButton.prototype.setDefaultValues=function(){this.bChecked=false;this.bEnabled=true;this.bReadonly=false;this.sText='';this.sTooltip='';this.bShowHelp=false;this.sInputState="NONE";this.bUsedInSapTable=false;this.sAccessKey='';}; UCF_RadioButton.prototype.fireChange=function(sId,bChecked){var mParams={Id:sId,Checked:bChecked};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("RadioButton","Change",mParams);}; UCF_RadioButton.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("RadioButton","DoubleClick",mParams);};
 function UCF_ColumnLayout(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bInitialized=false;this.oSectionsList=null;this.oNavigationTree=null;this.oActiveSection=null;this.iActiveIndex=-1;this.bSkipped=false;this.bMoved=false;};UCF_ColumnLayout.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ColumnLayout.prototype.init=function(){if(!this.aSectionsList){this.aSectionsList=this.getSectionList();}if(!this.oNavigationTree){this.oNavigationTree=this.oGetNavigationTree();}  this.oGetNextControl();this.bInitialized=true;}; UCF_ColumnLayout.prototype.getSectionList=function(){var oDomSections=UCF_DomUtil.$(this.sId+"-sections");if(oDomSections){var aChildNodes=UCF_DomUtil.childNodes(oDomSections,"SPAN"),aSectionsList=[],oSection;for(var i=0;i<aChildNodes.length;i++){oSection=new(UCF_ClassLoader.oGetClass("UCF_ColumnLayoutSection"))(aChildNodes[i]);aSectionsList.push(oSection)}if(aSectionsList.length>0)return aSectionsList;} var aTableRows=this.oDomRef.rows;for(var iRows=1;iRows<aTableRows.length;iRows++){var aTableCells=aTableRows[iRows].cells;for(var iCells=0;iCells<aTableCells.length;iCells++){var oCell=aTableCells[iCells].setAttribute("sectionid","ur-pseudosection");}}return[{sId:"ur-pseudosection",sParentSectionId:""}];}; UCF_ColumnLayout.prototype.oGetNavigationTree=function(){var aTableRows=this.oDomRef.rows,aNavigationTree=new Array();this.aSectionNames=new Array(); for(var iSections=0;iSections<this.aSectionsList.length;iSections++){var oSection=this.aSectionsList[iSections];oSection.iIndex=iSections;this.aSectionNames[oSection.sId]=oSection;} for(var iSections=0;iSections<this.aSectionsList.length;iSections++){var oSection=this.aSectionsList[iSections];if(oSection.sParentSectionId){var oParentSection=this.aSectionNames[oSection.sParentSectionId];oSection.oParentSection=oParentSection;}} for(var iSections=0;iSections<this.aSectionsList.length;iSections++){var oSection=this.aSectionsList[iSections];oSection.iSectionsTabIndex=0; for(var iRows=1;iRows<aTableRows.length;iRows++){var aTableCells=aTableRows[iRows].cells,iColumn=-1;for(var iCells=0;iCells<aTableCells.length;iCells++){var oTableCell=aTableCells[iCells],sCellSectionId=oTableCell.getAttribute("sectionid"),bIgnoreCell=oTableCell.getAttribute("ignore")=="true";if(bIgnoreCell)continue;if(sCellSectionId!=null&&sCellSectionId!=""&&!this.aSectionNames[sCellSectionId]){sCellSectionId="";oTableCell.setAttribute("sectionid","");}iColumn++;if(oSection.sId==sCellSectionId){ if(false){oTableCell.setAttribute("iSectionsTabIndex",oSection.iSectionsTabIndex);oTableCell.style.border="solid 2px "+this.aSectionColors[iSections];}oSection.iSectionsTabIndex++;if(!oSection.aCells)oSection.aCells=[];oSection.aCells.push(oTableCell);}else{ if(sCellSectionId!=null&&sCellSectionId==""){oSection=this.aSectionsList[0];if(!oSection.aCells)oSection.aCells=[];oSection.iSectionsTabIndex++;oSection.aCells.push(oTableCell);oTableCell.setAttribute("ignore","true");continue;}var oTempSection=this.aSectionNames[sCellSectionId];if(!oTempSection)continue; while(oTempSection&&oTempSection.oParentSection&&!oTempSection.bChecked){if(oTempSection.oParentSection.sId==oSection.sId){if(!oSection.aCells)oSection.aCells=[];oSection.aCells.push(oTempSection); oTempSection.bChecked=true;oTempSection.iStartRow=oTableCell.parentNode.rowIndex;oTempSection.iStartColumn=oTableCell.cellIndex;}oTempSection=oTempSection.oParentSection;}}}}}this.iIndexCounter=0;for(var iSections=0;iSections<this.aSectionsList.length;iSections++){var oSection=this.aSectionsList[iSections];this.buildCellTabIndex(oSection);}}; UCF_ColumnLayout.prototype.buildCellTabIndex=function(oSection){ if(oSection.bProcessed)return; oSection.bProcessed=true; if(!oSection.aCells)return; if(!this.aTabOrderCells)this.aTabOrderCells=[];var oParallelSections=[],oLastCell=null; for(var iCells=0;iCells<oSection.aCells.length;iCells++){var oCell=oSection.aCells[iCells]; if(oCell.tagName){   oCell.setAttribute("cltabindex",this.iIndexCounter);this.aTabOrderCells.push({oCell:oCell,oSection:oSection}); oLastCell=oCell;this.iIndexCounter++;}else{ var oSubSection=oCell;if(iCells>0&&oLastCell&&oSubSection.iStartRow==oLastCell.parentNode.rowIndex){oParallelSections.push(oCell);}else{ this.buildCellTabIndex(oSubSection);}}}for(var i=0;i<oParallelSections.length;i++){this.buildCellTabIndex(oParallelSections[i]);}}; UCF_ColumnLayout.prototype.oGetNextControl=function(){var oControl=null;oFocusableControl=this.oGetFirstFocusableChild(); if(!oFocusableControl)return null;if(this.iActiveIndex>=this.aTabOrderCells.length){this.oGetPreviousControl();return null}else{this.iActiveIndex++;if(this.iActiveIndex>this.aTabOrderCells.length-1)return this.oGetNextControl();oControl=this.oGetFirstFocusableChildRecursive(this.aTabOrderCells[this.iActiveIndex].oCell);this.oActiveSection=this.aTabOrderCells[this.iActiveIndex].oSection;if(!oControl){this.oActiveSection=null;return this.oGetNextControl();}else{return oControl;}}}; UCF_ColumnLayout.prototype.oGetPreviousControl=function(){var oControl=null,oFocusableControl=this.oGetFirstFocusableChild(); if(!oFocusableControl)return null;if(this.iActiveIndex<0){this.oGetNextControl();return null;}else{this.iActiveIndex--;if(this.iActiveIndex<0)return this.oGetPreviousControl();oControl=this.oGetLastFocusableChildRecursive(this.aTabOrderCells[this.iActiveIndex].oCell);this.oActiveSection=this.aTabOrderCells[this.iActiveIndex].oSection;if(!oControl){this.oActiveSection=null;return this.oGetPreviousControl();}else{return oControl;}}}; UCF_ColumnLayout.prototype.onlscontainerblur=function(oBrowserEvent){UCF_DomUtil.setTabIndex(UCF_DomUtil.$(this.sId+"-endpoint"),0);}; UCF_ColumnLayout.prototype.onlscontainerfocus=function(oBrowserEvent){if(!this.bInitialized)this.init(); if(!UCF_DomUtil.bContains(this.oDomRef,oBrowserEvent.oFromElement)){this.oLastAccessibilitySection=null;} var oSource=oBrowserEvent.oGetSource();if(oBrowserEvent.oGetSourceControl()!=this){for(var i=0;i<this.aTabOrderCells.length;i++){if(UCF_DomUtil.bContains(this.aTabOrderCells[i].oCell,oSource)){ this.iActiveIndex=i;this.oActiveSection=this.aTabOrderCells[i].oSection;return;}}}UCF_Control.prototype.onlscontainerfocus.apply(this,arguments);}; UCF_ColumnLayout.prototype.onlsfocus=function(oBrowserEvent){if(!this.bInitialized)this.init();var oSource=oBrowserEvent.oGetSource();  if(oSource.getAttribute("fr")&&oSource.getAttribute("fr")=="CLC"){this.focusPreviousCellControl(oBrowserEvent);}  else if(oSource.getAttribute("fr")&&oSource.getAttribute("fr")=="CLCE"){var bNext=this.focusNextCellControl(oBrowserEvent);if(!bNext){if(this.oDomRef.nextSibling)this.oDomRef.nextSibling.focus();}}else if(oSource.getAttribute("fr")&&oSource.getAttribute("fr")=="CLKEYENTER"){this.iActiveIndex=-1;this.focusNextCellControl(oBrowserEvent);}else if(oSource.getAttribute("id")&&oSource.getAttribute("id").indexOf("-endpoint")>-1){this.iActiveIndex=this.aTabOrderCells.length;this.focusPreviousCellControl(oBrowserEvent)}this.bIgnoreFocus=false;}; UCF_ColumnLayout.prototype.focusNextCellControl=function(oBrowserEvent){var oControl=this.oGetNextControl();if(oControl){oControl.moveFocus();this.bMoved=oBrowserEvent.sGetName()=="lsfocus";oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{ this.oActiveSection=null;this.oLastAccessibilitySection=null; var oDomElem=this.oDomRef;while(oDomElem&&oDomElem.ti!="0"){if(!oDomElem.nextSibling){oDomElem=oDomElem.parentNode;}else{oDomElem=oDomElem.nextSibling;if(!UCF_DomUtil.bIsVisible(oDomElem))continue;if(oDomElem&&oDomElem.ti=="0")break;if(oDomElem.firstChild&&UCF_DomUtil.bIsVisible(oDomElem.firstChild))oDomElem=this.oGetFirstTabindexedChild(oDomElem.firstChild);}}if(oDomElem){UCF_DomUtil.focusDomElement(oDomElem);return true;}if(this.focusNextControl()){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return true;}else{ UCF_DomUtil.setTabIndex(UCF_DomUtil.$(this.sId+"-endpoint"),0);this.oLS.focusEnd();return true;}}return false;}; UCF_ColumnLayout.prototype.oGetFirstTabindexedChild=function(oDomRef){while(oDomRef&&UCF_DomUtil.bIsVisible(oDomRef)){if(oDomRef.getAttribute("ti")=="0"){return oDomRef;}if(oDomRef.firstChild){return this.oGetFirstTabindexedChild(oDomRef.firstChild);}oDomRef=oDomRef.nextSibling;}}; UCF_ColumnLayout.prototype.focusPreviousCellControl=function(oBrowserEvent){var oControl=this.oGetPreviousControl();if(oControl){var oLastChild=oControl.oGetLastFocusableChild();if(oLastChild){oLastChild.moveFocus();}else{oControl.moveFocus();}this.bMoved=oBrowserEvent.sGetName()=="lsfocus";oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{ this.oActiveSection=null;this.oLastAccessibilitySection=null;if(this.focusPreviousControl()){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return true;}else{document.body.focus();}}return false;}; UCF_ColumnLayout.prototype.onlsskipback=function(oBrowserEvent){var oCell=null,oSection=null,oSection=this.aTabOrderCells[this.iActiveIndex].oSection;if(!oSection||!oSection.aCells||oSection.aCells.length==0){this.handleSkipBack(oBrowserEvent);return;}oCell=oSection.aCells[0];for(var i=this.iActiveIndex;i>=0;i--){ if(this.aTabOrderCells[i].oCell==oCell){this.iActiveIndex=i; if(this.focusPreviousCellControl(oBrowserEvent)){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}return;}}this.handleSkipBack(oBrowserEvent);}; UCF_ColumnLayout.prototype.onlsskipforward=function(oBrowserEvent){var oCell=null,oSection=this.aTabOrderCells[this.iActiveIndex].oSection,iStartIndex=this.iActiveIndex;if(!oSection&&!oSection.aCells||oSection.aCells.length==0){this.handleSkipForward(oBrowserEvent);return;}oCell=oSection.aCells[oSection.aCells.length-1];for(var i=this.iActiveIndex;i<this.aTabOrderCells.length;i++){if(this.aTabOrderCells[i].oCell==oCell){this.iActiveIndex=i;if(this.focusNextCellControl(oBrowserEvent)){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}return;}}this.handleSkipForward(oBrowserEvent);}; UCF_ColumnLayout.prototype.onlsaccessibility=function(oBrowserEvent){  if(this.bMoved){this.bMoved=false;return;}if(this.oActiveSection){if(this.oLastAccessibilitySection!=this.oActiveSection){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sSectionText="",oParentSection=this.oActiveSection.oParentSection,oLastParentSection=null;if(this.oLastAccessibilitySection){oLastParentSection=this.oLastAccessibilitySection.oParentSection;}var aSections=[],sSeparatorText=oAccessibilityHelper.sGetText("SEPARATOR");aSections.push(this.oActiveSection);  while(oParentSection&&(oLastParentSection!=oParentSection)){aSections.push(oParentSection);oParentSection=oParentSection.oParentSection;if(oLastParentSection){oLastParentSection=oLastParentSection.oParentSection;}} for(var i=aSections.length-1;i>=0;i--){if(aSections[i].sAccessibilityDescription){if(sSectionText)sSectionText+=" "+sSeparatorText+" ";sSectionText+=aSections[i].sAccessibilityDescription;}if(aSections[i].sTooltip){oAccessibilityHelper.addTooltip(aSections[i].sTooltip);}}if(sSectionText){oAccessibilityHelper.setGroupText(sSectionText);}oAccessibilityHelper.addTutor("SKIP");this.oLastAccessibilitySection=this.oActiveSection;}}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_ColumnLayout.prototype.aAttributeNames=[]; UCF_ColumnLayout.prototype.aMethodNames=[];  UCF_ColumnLayout.prototype.setDefaultValues=function(){};
 function UCF_Shuttle(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_Shuttle.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Shuttle.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");if((oSource.className=="urPGBtn urPGVA")||(oSource.className=="urPGBtn urPGHA")){this.fireAdd(this.sId);}if((oSource.className=="urPGBtn urPGVAA")||(oSource.className=="urPGBtn urPGHAA")){this.fireAddAll(this.sId);}if((oSource.className=="urPGBtn urPGVR")||(oSource.className=="urPGBtn urPGHR")){this.fireRemove(this.sId);}if((oSource.className=="urPGBtn urPGVRA")||(oSource.className=="urPGBtn urPGHRA")){this.fireRemoveAll(this.sId);}}; UCF_Shuttle.prototype.onkeydown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");var iKeyCode=oBrowserEvent.iKeyCode(); if(iKeyCode==UCF_KeyCodes.SPACE){if((oSource.className=="urPGBtn urPGVA")||(oSource.className=="urPGBtn urPGHA")){this.fireAdd(this.sId);}if((oSource.className=="urPGBtn urPGVAA")||(oSource.className=="urPGBtn urPGHAA")){this.fireAddAll(this.sId);}if((oSource.className=="urPGBtn urPGVR")||(oSource.className=="urPGBtn urPGHR")){this.fireRemove(this.sId);}if((oSource.className=="urPGBtn urPGVRA")||(oSource.className=="urPGBtn urPGHRA")){this.fireRemoveAll(this.sId);}}}; UCF_Shuttle.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("B");if((oSource.className.indexOf("urPGVAA")>-1)||(oSource.className.indexOf("urPGHAA")>-1))oAccessibilityHelper.addTutor("PG_AA");else if((oSource.className.indexOf("urPGVA")>-1)||(oSource.className.indexOf("urPGHA")>-1))oAccessibilityHelper.addTutor("PG_A");if((oSource.className.indexOf("urPGVRA")>-1)||(oSource.className.indexOf("urPGHRA")>-1))oAccessibilityHelper.addTutor("PG_RA");else if((oSource.className.indexOf("urPGVR")>-1)||(oSource.className.indexOf("urPGHR")>-1))oAccessibilityHelper.addTutor("PG_R");if(oSource.className.indexOf("Dsbl")>-1)oAccessibilityHelper.addTutor("DISABLED");else{oAccessibilityHelper.addTutor("B_TUT");}}; UCF_Shuttle.prototype.aAttributeNames=[]; UCF_Shuttle.prototype.aMethodNames=[];  UCF_Shuttle.prototype.setDefaultValues=function(){}; UCF_Shuttle.prototype.fireAdd=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Shuttle","Add",mParams);}; UCF_Shuttle.prototype.fireRemoveAll=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Shuttle","RemoveAll",mParams);}; UCF_Shuttle.prototype.fireAddAll=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Shuttle","AddAll",mParams);}; UCF_Shuttle.prototype.fireRemove=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Shuttle","Remove",mParams);};
 function UCF_ImageDragDelegate(oLS,oDragSourceControl){UCF_DragDelegate.apply(this,[oLS]);this.setDragSourceControl(oDragSourceControl);};UCF_ImageDragDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DragDelegate"))(); UCF_ImageDragDelegate.prototype.oGetGhost=function(){var oImage=document.createElement("DIV");var oTemp=document.createElement("div");oTemp.appendChild(this.oDragSourceControl.oDomRef.cloneNode(true)); oImage.innerHTML=oTemp.innerHTML;return new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oImage);};
 function UCF_ProgressIndicator(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ProgressIndicator.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ProgressIndicator.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("PRI");with(oAccessibilityHelper){switch(this.sBarColor){case "POSITIVE":addSemantic("POSITIVE");break;case "CRITICAL":addSemantic("CRITICALVALUE");break;case "NEGATIVE":addSemantic("NEGATIVE");break;}}}; UCF_ProgressIndicator.prototype.aAttributeNames=["sBarColor","sTooltip"]; UCF_ProgressIndicator.prototype.aMethodNames=[];  UCF_ProgressIndicator.prototype.sBarColor="NEUTRAL"; UCF_ProgressIndicator.prototype.sTooltip=''; UCF_ProgressIndicator.prototype.setDefaultValues=function(){this.sBarColor="NEUTRAL";this.sTooltip='';};
 function UCF_ScrollContainer(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.sScrollingMode!="NONE"){var oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(oScrollDomRef);this.attachBrowserEvent("scroll",oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.addDelegate(this.oScrollArea);}if(this.oScrollArea){ this.oLS.attachEvent(this.oLS.E_EVENTS.Lock,this,"onLsLock");} this.setDefaultButtonId(this.sDefaultButtonId);};UCF_ScrollContainer.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ScrollContainer.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_ScrollContainer.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_ScrollContainer.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_ScrollContainer.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();this.oScrollArea=null;this.oLS.detachEvent(this.oLS.E_EVENTS.Lock,this,"onLsLock");}}; UCF_ScrollContainer.prototype.onScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollTop,iScrollLeft);}; UCF_ScrollContainer.prototype.onLsLock=function(oEvent){if(this.oScrollArea){   this.oScrollArea.cleanUpScrollTiming();}}; UCF_ScrollContainer.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_ScrollContainer.prototype.setScrollPosition=function(iScrollTop,iScrollLeft){this.oScrollArea.setScrollPosition(iScrollTop,iScrollLeft);}; UCF_ScrollContainer.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;if(this.bIsLayout)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource.getAttribute("Id")==this.sId+"-end"){oAccessibilityHelper.setControlType("G_END");}else{if(this.sAccessibilityDescription!=""){oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);}else{ var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}}oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("G");oAccessibilityHelper.addTutor("GROUP_TUT");}}; UCF_ScrollContainer.prototype.aAttributeNames=["sScrollingMode","sAccessibilityDescription","bIsLayout","sDefaultButtonId","sTooltip","iScrollTop","iScrollLeft","sHotkeysId"]; UCF_ScrollContainer.prototype.aMethodNames=["setScrollPosition"];  UCF_ScrollContainer.prototype.sScrollingMode="AUTO"; UCF_ScrollContainer.prototype.sAccessibilityDescription=''; UCF_ScrollContainer.prototype.bIsLayout=true; UCF_ScrollContainer.prototype.sDefaultButtonId=''; UCF_ScrollContainer.prototype.sTooltip=''; UCF_ScrollContainer.prototype.iScrollTop=0; UCF_ScrollContainer.prototype.iScrollLeft=0; UCF_ScrollContainer.prototype.sHotkeysId=''; UCF_ScrollContainer.prototype.setDefaultValues=function(){this.sScrollingMode="AUTO";this.sAccessibilityDescription='';this.bIsLayout=true;this.sDefaultButtonId='';this.sTooltip='';this.iScrollTop=0;this.iScrollLeft=0;this.sHotkeysId='';}; UCF_ScrollContainer.prototype.fireScroll=function(sId,iScrollTop,iScrollLeft){var mParams={Id:sId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("ScrollContainer","Scroll",mParams);}; UCF_ScrollContainer.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("ScrollContainer","Hotkey",mParams);};
 function UCF_DragSourceInfo(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_DragSourceInfo.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_DragSourceInfo.prototype.sGetTags=function(){return this.sTags;}; UCF_DragSourceInfo.prototype.sGetData=function(){return this.sData;}; UCF_DragSourceInfo.prototype.sGetMimeType=function(){return this.sMimeType;}; UCF_DragSourceInfo.prototype.aAttributeNames=["sTags","sData","sMimeType"]; UCF_DragSourceInfo.prototype.aMethodNames=[];  UCF_DragSourceInfo.prototype.sTags=''; UCF_DragSourceInfo.prototype.sData=''; UCF_DragSourceInfo.prototype.sMimeType='text/plain'; UCF_DragSourceInfo.prototype.setDefaultValues=function(){this.sTags='';this.sData='';this.sMimeType='text/plain';}; UCF_DragSourceInfo.prototype.fireDataAccess=function(sId,sControlId){var mParams={Id:sId,ControlId:sControlId};this.fireSemanticEvent("DragSourceInfo","DataAccess",mParams);};UCF_DragSourceInfo.prototype.aPublicMethods=["sGetTags","sGetData","sGetMimeType"];
 function UCF_Splitter(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.mSashInfo=null;  this.mCells=null; this.iCollapseSize=25;this.mPreviousCellSize={};  this.oSashDomRef=UCF_DomUtil.$(this.sId+"-div");this.oSashBlindLayer=null;};UCF_Splitter.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_Splitter.prototype.E_SIZEMODE={RELATIVE:"RELATIVE",ABSOLUTE:"ABSOLUTE"};UCF_Splitter.prototype.E_COLLAPSE_DIRECTION={PREVIOUS:"PREVIOUS",NEXT:"NEXT",NONE:"NONE"};UCF_Splitter.prototype.E_DIRECTION={COLUMN:"columnresize", ROW:"rowresize"};UCF_Splitter.prototype.E_CT={  CELL:"SPCE",SPLITTER:"SP"};UCF_Splitter.prototype.E_CSSTYPE={SASH_COLUMN_RESIZE:"urSpTVs",SASH_COLUMN_RESIZE_HOVER:"urSpTVsH",SASH_COLUMN_RESIZE_ACTIVE:"urSpTVsA",SASH_COLUMN_FIX:"urSpTVsD",SASH_COLUMN_Invisible:"urSpTVsI",SASH_ROW_RESIZE:"urSpTHs",SASH_ROW_RESIZE_HOVER:"urSpTHsH",SASH_ROW_RESIZE_ACTIVE:"urSpTHsA",SASH_ROW_FIX:"urSpTHsD",SASH_ROW_INVISIBLE:"urSpTHsI",BACKGROUND:"urSpTSB"};UCF_Splitter.prototype.ACCESS_TYPE={DRAG_START:false,DRAG:true,DRAG_END:false};UCF_Splitter.prototype.E_MOVETYPE={RESIZABLE:"RESIZABLE",FIX:"FIX",INVISIBLE:"INVISIBLE"};UCF_Splitter.prototype.oGetSplitterRef=function(){if(this.oSplitter&&this.oSplitter!=null){var oSplitter=UCF_DomUtil.$(this.oSplitter);}else{var oSplitter=UCF_DomUtil.oGetCTElement(this.oDomRef);while(oSplitter!=null&&!UCF_DomUtil.bIsCTInstanceOf(oSplitter,this.E_CT.SPLITTER)){oSplitter=UCF_DomUtil.oGetCTElement(oSplitter.parentNode);}this.oSplitter=oSplitter.id;}return UCF_DomUtil.firstChild(oSplitter,"TABLE");};  UCF_Splitter.prototype.oGetSashType=function(oBrowserEvent){var oSash=UCF_DomUtil.oGetTPElement(oBrowserEvent.oGetSource());if(oSash!=null){if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_COLUMN_RESIZE)){return{eDirection:this.E_DIRECTION.COLUMN,eMoveType:this.E_MOVETYPE.RESIZABLE};}else if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_ROW_RESIZE)){return{eDirection:this.E_DIRECTION.ROW,eMoveType:this.E_MOVETYPE.RESIZABLE};}else if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_COLUMN_FIX)){return{eDirection:this.E_DIRECTION.COLUMN,eMoveType:this.E_MOVETYPE.FIX};}else if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_ROW_FIX)){return{eDirection:this.E_DIRECTION.ROW,eMoveType:this.E_MOVETYPE.FIX};}else if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_COLUMN_INVISIBLE)){return{eDirection:this.E_DIRECTION.COLUMN,eMoveType:this.E_MOVETYPE.INVISIBLE};}else if(UCF_DomUtil.bIsTPInstanceOf(oSash,this.E_CSSTYPE.SASH_ROW_INVISIBLE)){return{eDirection:this.E_DIRECTION.ROW,eMoveType:this.E_MOVETYPE.INVISIBLE};}}return{eDirection:null,eMoveType:null};}; UCF_Splitter.prototype.sGetSubControlId=function(oDomRef){if(UCF_JsUtil.bInstanceOf(oDomRef,"UCF_BrowserEvent")){oDomElement=UCF_DomUtil.oGetTPElement(oDomRef.oGetSource());}else{oDomElement=oDomRef;}while(oDomElement!=null&&!oDomElement.id){oDomElement=oDomElement.parentNode;}if(oDomElement!=null){return oDomElement.id;}return "";}; UCF_Splitter.prototype.bIsResizeableVerticalSash=function(oBrowserEvent){var oSashType=this.oGetSashType(oBrowserEvent);return oSashType.eDirection==this.E_DIRECTION.COLUMN&&oSashType.eMoveType==this.E_MOVETYPE.RESIZABLE;}; UCF_Splitter.prototype.bIsResizeableHorizontalSash=function(oBrowserEvent){var oSashType=this.oGetSashType(oBrowserEvent);return oSashType.eDirection==this.E_DIRECTION.ROW&&oSashType.eMoveType==this.E_MOVETYPE.RESIZABLE;}; UCF_Splitter.prototype.bIsVerticalSash=function(){if(this.mSashInfo&&this.mSashInfo.type&&this.mSashInfo.type.eDirection&&this.mSashInfo.type.eDirection==this.E_DIRECTION.COLUMN){return true;}return false;}; UCF_Splitter.prototype.bIsHorizontalSash=function(){if(this.mSashInfo&&this.mSashInfo.type&&this.mSashInfo.type.eDirection&&this.mSashInfo.type.eDirection==this.E_DIRECTION.ROW){return true;}return false;}; UCF_Splitter.prototype.onmousedown=function(oBrowserEvent){oBrowserEvent.cancel();}; UCF_Splitter.prototype.onmouseover=function(oBrowserEvent){var oSash=UCF_DomUtil.oGetTPElement(oBrowserEvent.oGetSource());var eDirection=this.oGetSashType(oBrowserEvent).eDirection;var eMoveType=this.oGetSashType(oBrowserEvent).eMoveType;if(eDirection!=null&&eMoveType!=null&&eMoveType==this.E_MOVETYPE.RESIZABLE){if(eDirection==this.E_DIRECTION.COLUMN){UCF_DomUtil.setClass(oSash,this.E_CSSTYPE.SASH_COLUMN_RESIZE_HOVER);}else if(eDirection==this.E_DIRECTION.ROW){ UCF_DomUtil.setClass(oSash,this.E_CSSTYPE.SASH_ROW_RESIZE_HOVER);}else{}}}; UCF_Splitter.prototype.onmouseout=function(oBrowserEvent){var oSash=UCF_DomUtil.oGetTPElement(oBrowserEvent.oGetSource());var eDirection=this.oGetSashType(oBrowserEvent).eDirection;var eMoveType=this.oGetSashType(oBrowserEvent).eMoveType;if(eDirection!=null&&eMoveType!=null&&eMoveType==this.E_MOVETYPE.RESIZABLE){if(eDirection==this.E_DIRECTION.COLUMN){UCF_DomUtil.setClass(oSash,this.E_CSSTYPE.SASH_COLUMN_RESIZE);}else if(eDirection==this.E_DIRECTION.ROW){UCF_DomUtil.setClass(oSash,this.E_CSSTYPE.SASH_ROW_RESIZE);}else{}}}; UCF_Splitter.prototype.ondblclick=function(oBrowserEvent){if(this.oAnim&&this.oAnim!=null){this.oAnim.finish();}var oSplitter=this.oGetSplitterRef();if(this.mSashInfo&&this.mSashInfo.iSashNumber){var iPosition=this.mSashInfo.iSashNumber;var eDirection=this.mSashInfo.type.eDirection;var eMoveType=this.mSashInfo.type.eMoveType;var sSashID=this.mSashInfo.sSashId;}else{var oSash=UCF_DomUtil.oGetTPElement(oBrowserEvent.oGetSource());if(oSash!=null){var sSashID=oSash.id;var eDirection=this.oGetSashType(oBrowserEvent).eDirection;var eMoveType=this.oGetSashType(oBrowserEvent).eMoveType;if(eDirection!=null){if(eDirection==this.E_DIRECTION.COLUMN){var iPosition=parseInt(oSash.getAttribute("prevcol"));}else if(eDirection==this.E_DIRECTION.ROW){var iPosition=parseInt(oSash.getAttribute("prevrow"));}else{var iPosition=-1;}}}else{}}if(eDirection!=null){if(iPosition!=null&&iPosition>-1){this.mCells=this.aGetElements(eDirection,oSplitter,iPosition);var sIdPrev=this.mCells.prev[0];var oPreviousCell=this.oGetControlById(sIdPrev);var sIdNext=this.mCells.next[0];var oNextCell=this.oGetControlById(sIdNext);this.fireDoubleClick(this.sId,this.mCells.prevCells.join(","),this.mCells.nextCells.join(","),iPosition,eDirection==this.E_DIRECTION.COLUMN,eMoveType);if(this.mPreviousCellSize[sIdPrev]||this.mPreviousCellSize[sIdPrev]==null){var iSizePrevious=this.iGetSize(eDirection,oPreviousCell.oDomRef);var iSizeNext=this.iGetSize(eDirection,oNextCell.oDomRef);this.mPreviousCellSize[sIdPrev]={prev:iSizePrevious,next:iSizeNext};if(oPreviousCell.sCollapseDirection==this.E_COLLAPSE_DIRECTION.PREVIOUS){var iNewSizePrev=0;var iNewSizeNext=iSizePrevious+iSizeNext;}else if(oPreviousCell.sCollapseDirection==this.E_COLLAPSE_DIRECTION.NEXT){var iNewSizePrev=iSizePrevious+iSizeNext;var iNewSizeNext=0;}if(oPreviousCell.sCollapseDirection&&oPreviousCell.sCollapseDirection!=this.E_COLLAPSE_DIRECTION.NONE){this.setCellSize(eDirection,iPosition,iNewSizePrev);this.setCellSize(eDirection,iPosition+1,iNewSizeNext);this.fireCollapse(this.sId,eDirection==this.E_DIRECTION.COLUMN,iNewSizePrev,iNewSizeNext,this.sWidthSizeModeOfColums=="ABSOLUTE",this.mCells.prevCells.join(","),oPreviousCell.iWidth==-1,this.mCells.nextCells.join(","),oNextCell.iWidth==-1);}}else{if(oPreviousCell.sCollapseDirection&&oPreviousCell.sCollapseDirection!=this.E_COLLAPSE_DIRECTION.NONE){this.setCellSize(eDirection,iPosition,this.mPreviousCellSize[sIdPrev].prev);this.setCellSize(eDirection,iPosition+1,this.mPreviousCellSize[sIdPrev].next);this.fireExpand(this.sId,eDirection==this.E_DIRECTION.COLUMN,this.mPreviousCellSize[sIdPrev].prev,this.mPreviousCellSize[sIdPrev].next,this.sWidthSizeModeOfColums=="ABSOLUTE",this.mCells.prevCells.join(","),oPreviousCell.iWidth==-1,this.mCells.nextCells.join(","),oNextCell.iWidth==-1);this.mPreviousCellSize[sIdPrev]=null;}}}oBrowserEvent.cancelBubble();}};   UCF_Splitter.prototype.onlsdragstart=function(oBrowserEvent){if(!this.mSashInfo||this.mSashInfo!=null){var oDragAndDropManager=oBrowserEvent.oDragAndDropManager;if(this.bIsResizeableVerticalSash(oBrowserEvent)){if(null!=oDragAndDropManager){oDragAndDropManager.initDragArea(this.sId,oDragAndDropManager.oDragSession.DRAG_TYPE.H_RESIZE,"");}this.activate(oBrowserEvent); oBrowserEvent.cancelBubble(); oBrowserEvent.bHandled=true;}else if(this.bIsResizeableHorizontalSash(oBrowserEvent)){if(null!=oDragAndDropManager){oDragAndDropManager.initDragArea(this.sId,oDragAndDropManager.oDragSession.DRAG_TYPE.V_RESIZE,"");}this.activate(oBrowserEvent); oBrowserEvent.cancelBubble(); oBrowserEvent.bHandled=true;}else{}}return this.ACCESS_TYPE.DRAG_START;};   UCF_Splitter.prototype.onlsdragend=function(oBrowserEvent){this.deactivate(oBrowserEvent);if(this.mSashInfo&&this.mSashInfo!=null){oBrowserEvent.cancelBubble();}return this.ACCESS_TYPE.DRAG_END;}; UCF_Splitter.prototype.activate=function(oBrowserEvent){if(this.mSashInfo==null){if(this.oAnim&&this.oAnim!=null){this.oAnim.finish();}this.mSashInfo={};var oSash=UCF_DomUtil.oGetTPElement(oBrowserEvent.oGetSource()); this.mSashInfo.sSashId=oSash.id;var oSplitter=this.oGetSplitterRef(); this.mSashInfo.sSplitterId=oSplitter.id; this.mSashInfo.type=this.oGetSashType(oBrowserEvent);{var tbody=UCF_DomUtil.firstChild(oSplitter,"TBODY");if(this.bIsVerticalSash()){ var iPosition=parseInt(oSash.getAttribute("prevcol"));this.mCells=this.aGetColumnElements(oSplitter,iPosition);var sId=this.mCells.prev[0];var oPreviousCell=this.oGetControlById(sId);var sId=this.mCells.next[0];var oNextCell=this.oGetControlById(sId);this.mSashInfo.iSashNumber=iPosition; this.mSashInfo.iPreviousDefaultSize=oPreviousCell.iWidth; this.mSashInfo.iNextDefaultSize=oNextCell.iWidth;this.mSashInfo.bPreviousElementsDefault=oPreviousCell.iWidth==-1;this.mSashInfo.bNextElementsDefault=oNextCell.iWidth==-1;this.mSashInfo.iMiddleOfSashSize=Math.round(oSash.offsetWidth / 2);}else { var iPosition=parseInt(oSash.getAttribute("prevrow"));this.mCells=this.aGetRowElements(oSplitter,iPosition);var sId=this.mCells.prevRow;var oPreviousCell=this.oGetControlById(sId);var sId=this.mCells.nextRow;var oNextCell=this.oGetControlById(sId);this.mSashInfo.iSashNumber=iPosition; this.mSashInfo.iPreviousDefaultSize=oPreviousCell.iHeight; this.mSashInfo.iNextDefaultSize=oNextCell.iHeight;this.mSashInfo.bPreviousElementsDefault=oPreviousCell.iHeight==-1;this.mSashInfo.bNextElementsDefault=oNextCell.iHeight==-1;this.mSashInfo.iMiddleOfSashSize=Math.round(oSash.offsetHeight / 2);}}this.mSashInfo.iPreviousElementsSize=this.iGetSize(this.mSashInfo.type.eDirection,this.mCells.prev);this.mSashInfo.iNextElementsSize=this.iGetSize(this.mSashInfo.type.eDirection,this.mCells.next); var oSplitterPosition=this.oGetObjectRect(oSplitter);var oSashPosition=this.oGetObjectRect(oSash);var oParent=this.oDomRef.parentNode;this.mSashInfo.oParentPosition=this.oGetObjectRect(oParent);  var oParentControl=this.oGetParent();if(!(oParentControl instanceof UCF_SplitterCell)){ if(this.bIsVerticalSash()){this.mSashInfo.iStartPositionY=oSashPosition.top;this.mSashInfo.iStartPositionX=oBrowserEvent.iClientX()+this.mSashInfo.oParentPosition.left;}else{this.mSashInfo.iStartPositionY=oBrowserEvent.iClientY()+this.mSashInfo.oParentPosition.top;this.mSashInfo.iStartPositionX=oSashPosition.left;}}else{this.mSashInfo.iStartPositionY=oSashPosition.top-this.mSashInfo.oParentPosition.top;this.mSashInfo.iStartPositionX=oSashPosition.left-this.mSashInfo.oParentPosition.left;}this.mSashInfo.iSashOffsetHeight=oSash.offsetHeight;this.mSashInfo.iSashOffsetWidth=oSash.offsetWidth;if(this.oBackgroundDomRef){   if(this.bIsVerticalSash()){this.oBackgroundDomRef.style.top=this.mSashInfo.iStartPositionY+"px";this.oBackgroundDomRef.style.left=(this.mSashInfo.iStartPositionX-parseInt(this.mSashInfo.iPreviousElementsSize)-this.mSashInfo.iMiddleOfSashSize)+"px";this.oBackgroundDomRef.style.height=this.mSashInfo.iSashOffsetHeight+"px";this.oBackgroundDomRef.style.width=(parseInt(this.mSashInfo.iPreviousElementsSize)+parseInt(this.mSashInfo.iNextElementsSize)+parseInt(this.mSashInfo.iSashOffsetWidth))+"px";}else {this.mSashInfo.iStartPositionX=oSashPosition.left;this.oBackgroundDomRef.style.top=(this.mSashInfo.iStartPositionY-parseInt(this.mSashInfo.iPreviousElementsSize)-this.mSashInfo.iMiddleOfSashSize)+"px";this.oBackgroundDomRef.style.left=(this.mSashInfo.iStartPositionX)+"px";this.oBackgroundDomRef.style.height=(parseInt(this.mSashInfo.iPreviousElementsSize)+parseInt(this.mSashInfo.iNextElementsSize)+parseInt(this.mSashInfo.iSashOffsetHeight))+"px";this.oBackgroundDomRef.style.width=this.mSashInfo.iSashOffsetWidth+"px";}UCF_DomUtil.setClass(this.oBackgroundDomRef,this.E_CSSTYPE.BACKGROUND);this.oBackgroundBlindLayer=this.oLS.oGetBlindLayer();this.oBackgroundBlindLayer.oDomRef.zIndex=9; this.oBackgroundBlindLayer.oDomRef.style.top=this.oBackgroundDomRef.style.top;this.oBackgroundBlindLayer.oDomRef.style.left=this.oBackgroundDomRef.style.left;this.oBackgroundBlindLayer.oDomRef.style.height=this.oBackgroundDomRef.style.height;this.oBackgroundBlindLayer.oDomRef.style.width=this.oBackgroundDomRef.style.width;}{this.oSashDomRef.style.zIndex=10; if(this.bIsVerticalSash()){this.oSashDomRef.style.top=(this.mSashInfo.iStartPositionY)+"px";this.oSashDomRef.style.left=(this.mSashInfo.iStartPositionX-(parseInt(this.mSashInfo.iSashOffsetWidth)/ 2))+"px";this.oSashDomRef.style.height=this.mSashInfo.iSashOffsetHeight+"px";this.oSashDomRef.style.width=this.mSashInfo.iSashOffsetWidth+"px";UCF_DomUtil.setClass(this.oSashDomRef,this.E_CSSTYPE.SASH_COLUMN_RESIZE_ACTIVE);}else {this.oSashDomRef.style.top=(this.mSashInfo.iStartPositionY-(parseInt(this.mSashInfo.iSashOffsetHeight)/ 2))+"px";this.oSashDomRef.style.left=(this.mSashInfo.iStartPositionX)+"px";this.oSashDomRef.style.height=this.mSashInfo.iSashOffsetHeight+"px";this.oSashDomRef.style.width=this.mSashInfo.iSashOffsetWidth+"px";UCF_DomUtil.setClass(this.oSashDomRef,this.E_CSSTYPE.SASH_ROW_RESIZE_ACTIVE);}     this.oSashBlindLayer=this.oLS.oGetBlindLayer();this.oSashBlindLayer.oDomRef.zIndex=9; this.oSashBlindLayer.oDomRef.style.top=this.oSashDomRef.style.top;this.oSashBlindLayer.oDomRef.style.left=this.oSashDomRef.style.left;this.oSashBlindLayer.oDomRef.style.height=this.oSashDomRef.style.height;this.oSashBlindLayer.oDomRef.style.width=this.oSashDomRef.style.width;  }   this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oSashDomRef);this.oAnim.addOpacityChange(0,100,this.oAnim.M_TRANSITIONS.EaseIn);this.oAnim.addInitialStyleValue("display","inline");this.oAnim.addInitialOpacityValue(0);this.oAnim.callbackFinish(this,"activateFinish");this.oAnim.play();}};UCF_Splitter.prototype.activateFinish=function(){if(this.oBackgroundDomRef){this.oBackgroundDomRef.style.display="inline";}}; UCF_Splitter.prototype.deactivate=function(oBrowserEvent){if(this.oAnim&&this.oAnim!=null){this.oAnim.finish();}if(this.oSashDomRef!=null){if(this.oAnim&&this.oAnim!=null){this.oAnim.finish();}this.iClientX=oBrowserEvent.iClientX();this.iClientY=oBrowserEvent.iClientY();this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oSashDomRef);this.oAnim.addOpacityChange(100,0,this.oAnim.M_TRANSITIONS.EaseIn);this.oAnim.addFinalStyleValue("display","none");this.oAnim.addInitialOpacityValue(0);this.oAnim.callbackFinish(this,"deactivateFinish");this.oAnim.play();}}; UCF_Splitter.prototype.deactivateFinish=function(){if(this.mSashInfo!=null){var oSplitter=this.oGetSplitterRef();if(this.bIsVerticalSash()){var oPreviousElements=UCF_DomUtil.$(this.mCells.prev[0]);var oNextElements=UCF_DomUtil.$(this.mCells.next[0]); var iClientX=this.iClientX;{var curX=iClientX-parseInt(this.mSashInfo.iStartPositionX)-this.mSashInfo.oParentPosition.left-this.mSashInfo.iMiddleOfSashSize;}var iDifferencePreviousElements=parseInt(curX)-(parseInt(this.oSashDomRef.offsetWidth)/ 2);var iDifferenceNextElements=(parseInt(this.oSashDomRef.offsetWidth)/ 2)-parseInt(curX);var iPreviousElementsOffsetWidth=oPreviousElements.offsetWidth;var iNextElementsOffsetWidth=oNextElements.offsetWidth;var iPreviousWidth;var iNextWidth;if(this.mSashInfo.bPreviousElementsDefault&&this.mSashInfo.bNextElementsDefault){ iPreviousWidth=Math.abs(Math.floor(iDifferencePreviousElements+iPreviousElementsOffsetWidth));if(iPreviousWidth<1){iPreviousWidth=1;iNextWidth=iPreviousElementsOffsetWidth+iNextElementsOffsetWidth-1;}else{iNextWidth=Math.abs(Math.ceil(iNextElementsOffsetWidth-iDifferencePreviousElements));}if(this.sWidthSizeModeOfColums==this.E_SIZEMODE.RELATIVE){iPreviousWidth=Math.ceil((iPreviousWidth / oSplitter.offsetWidth)*100);iNextWidth=Math.ceil((iNextWidth / oSplitter.offsetWidth)*100);}}else if(this.sWidthSizeModeOfColums==this.E_SIZEMODE.RELATIVE){ var iPreviousElementsWidth=parseInt(oPreviousElements.width);if(!this.mSashInfo.bPreviousElementsDefault){  var iPaneSize=Math.floor((1+iDifferencePreviousElements / iPreviousElementsOffsetWidth)*iPreviousElementsWidth);if(iPaneSize>=parseInt(oNextElements.width)+iPreviousElementsWidth){iPaneSize=parseInt(oNextElements.width)+iPreviousElementsWidth-1;}if(iPaneSize>0){for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).width=iPaneSize+"%";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).width="1%";}}iPreviousWidth=parseInt(oPreviousElements.width);}else{iPreviousWidth=Math.ceil((oPreviousElements.offsetWidth / oSplitter.offsetWidth)*100);}if(!this.mSashInfo.bNextElementsDefault){  if(this.mSashInfo.bPreviousElementsDefault){iPreviousElementsWidth=(parseInt(oNextElements.width)*iPreviousElementsOffsetWidth)/ iNextElementsOffsetWidth;}var iPaneSize=Math.ceil((-iDifferencePreviousElements / iPreviousElementsOffsetWidth)*parseInt(iPreviousElementsWidth))+parseInt(oNextElements.width);if(iPaneSize>=parseInt(oNextElements.width)+parseInt(iPreviousElementsWidth)){iPaneSize=parseInt(oNextElements.width)+parseInt(iPreviousElementsWidth)-1;}if(iPaneSize>0){for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).width=iPaneSize+"%";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).width="1%";}}iNextWidth=parseInt(oNextElements.width);}else{iNextWidth=Math.ceil((oNextElements.offsetWidth / oSplitter.offsetWidth)*100);}}else {if(!this.mSashInfo.bPreviousElementsDefault){var iPaneSizeOfPreviousElements=parseInt(oPreviousElements.width)+iDifferencePreviousElements;if(iPaneSizeOfPreviousElements>=parseInt(iPreviousElementsOffsetWidth)+parseInt(iNextElementsOffsetWidth)-this.iCollapseSize){ iPaneSizeOfPreviousElements=parseInt(iPreviousElementsOffsetWidth)+parseInt(iNextElementsOffsetWidth)-1;}if(iPaneSizeOfPreviousElements<this.iCollapseSize){ for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).width="1px";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).width=iPaneSizeOfPreviousElements+"px";}}iPreviousWidth=parseInt(oPreviousElements.width);}else{iPreviousWidth=oPreviousElements.offsetWidth;}if(!this.mSashInfo.bNextElementsDefault){var iPaneSizeOfNextElements=parseInt(oNextElements.width)+iDifferenceNextElements;if((iPreviousElementsOffsetWidth+iDifferencePreviousElements)<this.iCollapseSize){ iPaneSizeOfNextElements=parseInt(iPreviousElementsOffsetWidth)+parseInt(iNextElementsOffsetWidth)-1;}if(iPaneSizeOfNextElements<this.iCollapseSize){ for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).width="1px";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).width=iPaneSizeOfNextElements+"px";}}iNextWidth=parseInt(oNextElements.width);}else{iNextWidth=oNextElements.offsetWidth;}this.refreshTable(oSplitter);}for(iPos=0;iPos<oPreviousElements.length;iPos++){oPreviousElements[iPos].width=UCF_DomUtil.$(this.mCells.prev[0]).width;oPreviousElementIds.push(UCF_DomUtil.firstChild(oPreviousElements[iPos],"DIV").id);       }for(iPos=0;iPos<oNextElements.length;iPos++){oNextElements[iPos].width=UCF_DomUtil.$(this.mCells.next[0]).width;oNextElementIds.push(UCF_DomUtil.firstChild(oNextElements[iPos],"DIV").id);        }this.fireMoveEnd(this.sId,this.bIsVerticalSash(),iPreviousWidth,iNextWidth,this.sWidthSizeModeOfColums=="ABSOLUTE",this.mCells.prevCells.join(","),this.mSashInfo.bPreviousElementsDefault,this.mCells.nextCells.join(","),this.mSashInfo.bNextElementsDefault);}else { var iClientY=this.iClientY;{var curY=iClientY-parseInt(this.mSashInfo.iStartPositionY)-this.mSashInfo.oParentPosition.top-this.mSashInfo.iMiddleOfSashSize;}var tbody=UCF_DomUtil.firstChild(this.oDomRef.firstChild,"TBODY");var trs=UCF_DomUtil.childNodes(tbody,"TR");var oPreviousElements=UCF_DomUtil.$(this.mCells.prev[0]).parentNode;var oNextElements=UCF_DomUtil.$(this.mCells.next[0]).parentNode;if(trs.length>=2){var iDifferencePreviousElements=parseInt(curY)-(parseInt(this.oSashDomRef.offsetHeight)/ 2);var iDifferenceNextElements=(parseInt(this.oSashDomRef.offsetHeight)/ 2)-parseInt(curY);var iPreviousElementsOffsetHeight=oPreviousElements.offsetHeight;var iNextElementsOffsetHeight=oNextElements.offsetHeight;var iPreviousHeight;var iNextHeight;if(this.mSashInfo.bPreviousElementsDefault&&this.mSashInfo.bNextElementsDefault){ iPreviousHeight=Math.abs(Math.floor(iDifferencePreviousElements+iPreviousElementsOffsetHeight));if(iNextHeight<1){iPreviousHeight=1;iNextHeight=iPreviousElementsOffsetHeight+iNextElementsOffsetHeight-1;}else{iNextHeight=Math.abs(Math.ceil(iNextElementsOffsetHeight-iDifferencePreviousElements));}if(this.sHeightSizeModeOfRows==this.E_SIZEMODE.RELATIVE){iPreviousWidth=Math.ceil((iPreviousWidth / oSplitter.offsetHeight)*100);iNextWidth=Math.ceil((iNextWidth / oSplitter.offsetHeight)*100);}}else if(this.sHeightSizeModeOfRows==this.E_SIZEMODE.RELATIVE){ var oPreviousElementsHeight=oPreviousElements.height;if(!this.mSashInfo.bPreviousElementsDefault){  var iPaneSize=Math.floor((1+iDifferencePreviousElements / oPreviousElements.offsetHeight)*parseInt(oPreviousElements.height));if(iPaneSize>=parseInt(oNextElements.height)+parseInt(oPreviousElements.height)){iPaneSize=parseInt(oNextElements.height)+parseInt(oPreviousElements.height)-1;}if(iPaneSize>0){for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).parentNode.height=iPaneSize+"%";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).parentNode.height="1%";}}iPreviousHeight=parseInt(oPreviousElements.height);}else{iPreviousHeight=Math.ceil((oPreviousElements.offsetHeight / oSplitter.offsetHeight)*100);}if(!this.mSashInfo.bNextElementsDefault){  if(this.mSashInfo.bPreviousElementsDefault){oPreviousElementsHeight=(parseInt(oNextElements.height)*iPreviousElementsOffsetHeight)/ iNextElementsOffsetHeight;}var iPaneSize=Math.ceil((-iDifferencePreviousElements / iPreviousElementsOffsetHeight)*parseInt(oPreviousElementsHeight))+parseInt(oNextElements.height);if(iPaneSize>=parseInt(oNextElements.height)+parseInt(oPreviousElementsHeight)){iPaneSize=parseInt(oNextElements.height)+parseInt(oPreviousElementsHeight)-1;}if(iPaneSize>0){for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).parentNode.height=iPaneSize+"%";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).parentNode.height="1%";}}iNextHeight=parseInt(oNextElements.height);}else{iNextHeight=Math.ceil((oNextElements.offsetHeight / oSplitter.offsetHeight)*100);}}else {var iPreviousElementsOffsetHeight=oPreviousElements.offsetHeight;if(!this.mSashInfo.bPreviousElementsDefault){var iPaneSizeOfPreviousElements=parseInt(oPreviousElements.height)+iDifferencePreviousElements;if(iPaneSizeOfPreviousElements>=parseInt(iPreviousElementsOffsetHeight)+parseInt(iNextElementsOffsetHeight)-this.iCollapseSize){ iPaneSizeOfPreviousElements=parseInt(iPreviousElementsOffsetHeight)+parseInt(iNextElementsOffsetHeight)-1;}if(iPaneSizeOfPreviousElements<this.iCollapseSize){ for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).parentNode.height="1px";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.prev.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.prev[iPanesPosition]).parentNode.height=iPaneSizeOfPreviousElements+"px";}}iPreviousHeight=parseInt(oPreviousElements.height);}else{iPreviousHeight=iPreviousElementsOffsetHeight;}if(!this.mSashInfo.bNextElementsDefault){var iPaneSizeOfNextElements=parseInt(oNextElements.height)+iDifferenceNextElements;if((iPreviousElementsOffsetHeight+iDifferencePreviousElements)<this.iCollapseSize){ iPaneSizeOfNextElements=parseInt(iPreviousElementsOffsetHeight)+parseInt(iNextElementsOffsetHeight)-1;}if(iPaneSizeOfNextElements<this.iCollapseSize){ for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).parentNode.height="1px";}}else{for(iPanesPosition=0;iPanesPosition<this.mCells.next.length;iPanesPosition++){UCF_DomUtil.$(this.mCells.next[iPanesPosition]).parentNode.height=iPaneSizeOfNextElements+"px";}}iNextHeight=parseInt(oNextElements.height);}else{iNextHeight=iNextElementsOffsetHeight;}}this.refreshTable(oSplitter);}   this.fireMoveEnd(this.sId,this.bIsVerticalSash(),iPreviousHeight,iNextHeight,this.sHeightSizeModeOfRows=="ABSOLUTE",this.mCells.prevCells.join(","),this.mSashInfo.bPreviousElementsDefault,this.mCells.nextCells.join(","),this.mSashInfo.bNextElementsDefault);}if(this.oBackgroundBlindLayer){this.oLS.releaseBlindLayer(this.oBackgroundBlindLayer);}if(this.oBackgroundDomRef){this.oBackgroundDomRef.style.display="none";}if(this.oSashBlindLayer){this.oLS.releaseBlindLayer(this.oSashBlindLayer);}if(this.oSashDomRef){this.oSashDomRef.style.display="none";}this.mSashInfo=null;}}; UCF_Splitter.prototype.onlsdrag=function(oBrowserEvent){if(this.mSashInfo==null){return;}else{if(this.bIsVerticalSash()){  {var curX=oBrowserEvent.iClientX()-parseInt(this.mSashInfo.iStartPositionX)-this.mSashInfo.oParentPosition.left-this.mSashInfo.iMiddleOfSashSize;}{if(this.mSashInfo.iPreviousElementsSize!=null&&this.mSashInfo.iNextElementsSize!=null){if( parseInt(this.mSashInfo.iPreviousElementsSize)+parseInt(curX)<0||parseInt(this.mSashInfo.iNextElementsSize)-parseInt(curX)<0){}else{ this.oSashDomRef.style.left=oBrowserEvent.iClientX()-this.mSashInfo.oParentPosition.left-this.mSashInfo.iMiddleOfSashSize; this.oSashBlindLayer.oDomRef.style.left=this.oSashDomRef.style.left;}}}}else{ {var curY=oBrowserEvent.iClientY()-parseInt(this.mSashInfo.iStartPositionY)-this.mSashInfo.oParentPosition.top;}if( parseInt(this.mSashInfo.iPreviousElementsSize)+parseInt(curY)<-1||parseInt(this.mSashInfo.iNextElementsSize)-parseInt(curY)<-1){}else{ this.oSashDomRef.style.top=oBrowserEvent.iClientY()-this.mSashInfo.oParentPosition.top; this.oSashBlindLayer.oDomRef.style.top=this.oSashDomRef.style.top;}}}return this.ACCESS_TYPE.DRAG;}; UCF_Splitter.prototype.onlsskipforward=function(oBrowserEvent){var div=UCF_DomUtil.oGetCTElement(oBrowserEvent.oGetSource());while(div!=null&&!UCF_DomUtil.bIsCTInstanceOf(div,this.E_CT.CELL)){div=UCF_DomUtil.oGetCTElement(div.parentNode);}if(div!=null){var oDomElement=UCF_DomUtil.oGetParentByTagName(div,"TD");var tr=UCF_DomUtil.oGetParentByTagName(oBrowserEvent.oGetSource(),"TR");var firstTr=UCF_DomUtil.firstChild(tr.parentNode,"TR");if(tr==firstTr){oDomElement=UCF_DomUtil.nextSibling(oDomElement,"TD");}if(oDomElement!=null){oDomElement=UCF_DomUtil.nextSibling(oDomElement,"TD");}if(oDomElement==null){oDomElement=UCF_DomUtil.oGetParentByTagName(oBrowserEvent.oGetSource(),"TR"); oDomElement=UCF_DomUtil.nextSibling(oDomElement,"TR"); if(oDomElement==null){ return;}oDomElement=UCF_DomUtil.nextSibling(oDomElement,"TR"); oDomElement=UCF_DomUtil.firstChild(oDomElement,"TD");}oDomElement=UCF_DomUtil.firstChild(oDomElement,"DIV"); UCF_DomUtil.focusDomElement(oDomElement);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_Splitter.prototype.onlsskipback=function(oBrowserEvent){var div=UCF_DomUtil.oGetCTElement(oBrowserEvent.oGetSource());while(div!=null&&!UCF_DomUtil.bIsCTInstanceOf(div,this.E_CT.CELL)){div=UCF_DomUtil.oGetCTElement(div.parentNode);}if(div!=null){var oDomElement=UCF_DomUtil.oGetParentByTagName(div,"TD");var tr=UCF_DomUtil.oGetParentByTagName(oBrowserEvent.oGetSource(),"TR");var firstTr=UCF_DomUtil.firstChild(tr.parentNode,"TR");if(tr==firstTr){oDomElement=UCF_DomUtil.previousSibling(oDomElement,"TD"); if(oDomElement!=null){oDomElement=UCF_DomUtil.previousSibling(oDomElement,"TD");}else{ return;}}else{oDomElement=UCF_DomUtil.previousSibling(oDomElement,"TD"); if(oDomElement==null){oDomElement=UCF_DomUtil.oGetParentByTagName(oBrowserEvent.oGetSource(),"TR"); oDomElement=UCF_DomUtil.previousSibling(oDomElement,"TR"); oDomElement=UCF_DomUtil.previousSibling(oDomElement,"TR"); oDomElement=UCF_DomUtil.lastChild(oDomElement,"TD");}}oDomElement=UCF_DomUtil.firstChild(oDomElement,"DIV");   UCF_DomUtil.focusDomElement(oDomElement);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_Splitter.prototype.onlsaccessibility=function(oBrowserEvent){var oSrcControl=oBrowserEvent.oGetSourceControl();if(oSrcControl==this||(UCF_JsUtil.bInstanceOf(oSrcControl,"UCF_SplitterRow")&&oSrcControl.oGetParent()==this)||(UCF_JsUtil.bInstanceOf(oSrcControl,"UCF_SplitterCell")&&oSrcControl.oGetParent().oGetParent()==this)){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType(this.E_CT.SPLITTER);oAccessibilityHelper.addTutor("GROUP_TUT");}}; UCF_Splitter.prototype.iGetSize=function(eDirection,oObject){if(oObject.length){var iSize=-1;for(i=0;i<oObject.length;i++){if(typeof oObject[i]=="string"){var oDomRef=UCF_DomUtil.$(oObject[i]);}else{var oDomRef=oObject[i];}{if(eDirection==this.E_DIRECTION.COLUMN){if(!oDomRef.width||oDomRef.width.indexOf("%")>-1||oDomRef.width==""){ iSize=oDomRef.offsetWidth;}else{ iSize=oDomRef.width;break;}}else if(eDirection==this.E_DIRECTION.ROW){if(!oDomRef.height||oDomRef.height.indexOf("%")>-1||oDomRef.height==""){ iSize=oDomRef.offsetHeight;}else{ iSize=oDomRef.height;break;}}}}return parseInt(iSize);}else{return this.iGetSize(eDirection,new Array(oObject));}};UCF_Splitter.prototype.aGetElements=function(eDirection,oSplitterTable,iPosition){if(eDirection==this.E_DIRECTION.COLUMN){return this.aGetColumnElements(oSplitterTable,iPosition);}else if(eDirection==this.E_DIRECTION.ROW){return this.aGetRowElements(oSplitterTable,iPosition);}}; UCF_Splitter.prototype.aGetColumnElements=function(oSplitterTable,iPosition){var colgroup=UCF_DomUtil.firstChild(oSplitterTable,"COLGROUP");var cols=UCF_DomUtil.childNodes(colgroup,"COL"); if(iPosition>-1&&cols[(iPosition)*2].id){var oPreviousCol=(cols[(iPosition)*2].id);}else{}if((iPosition+1)*2<cols.length&&cols[(iPosition+1)*2].id){var oNextCol=(cols[(iPosition+1)*2].id);}else{} var oPreviousSplitterCells=new Array(); var oNextSplitterCells=new Array();{var tbody=UCF_DomUtil.firstChild(oSplitterTable,"TBODY");var oTr=UCF_DomUtil.firstChild(tbody,"TR");for(iTrRow=0;oTr!=null;iTrRow++){if(iTrRow % 2==0){var tds=UCF_DomUtil.childNodes(oTr,"TD");if(iTrRow==0){var oDiv=UCF_DomUtil.firstChild(tds[(iPosition)*2],"DIV");oPreviousSplitterCells.push(oDiv.id);if(tds[(iPosition+1)*2]){var oDiv=UCF_DomUtil.firstChild(tds[(iPosition+1)*2],"DIV");oNextSplitterCells.push(oDiv.id);}}else{var oDiv=UCF_DomUtil.firstChild(tds[iPosition],"DIV");oPreviousSplitterCells.push(oDiv.id);if(tds[iPosition+1]){var oDiv=UCF_DomUtil.firstChild(tds[iPosition+1],"DIV");oNextSplitterCells.push(oDiv.id);}}}oTr=UCF_DomUtil.nextSibling(oTr,"TR");}}if(this.oLS.oSystem.bIsRTL){return{prev:new Array(oNextCol),next:new Array(oPreviousCol),prevCol:oNextCol,nextCol:oPreviousCol,prevCells:oNextSplitterCells,nextCells:oPreviousSplitterCells};}else{return{prev:new Array(oPreviousCol),next:new Array(oNextCol),prevCol:oPreviousCol,nextCol:oNextCol,prevCells:oPreviousSplitterCells,nextCells:oNextSplitterCells};}}; UCF_Splitter.prototype.aGetRowElements=function(oSplitterTable,iPosition){ var aPreviousSplitterCells=new Array(); var aNextSplitterCells=new Array();var tbody=UCF_DomUtil.firstChild(oSplitterTable,"TBODY");var trs=UCF_DomUtil.childNodes(tbody,"TR"); var oPreviousRow=trs[(iPosition)*2];var oNextRow=trs[(iPosition+1)*2];{var tds=UCF_DomUtil.childNodes(oPreviousRow,"TD");if(iPosition==0){ for(p=0;(p*2)<tds.length;p++){var oDiv=UCF_DomUtil.firstChild(tds[p*2],"DIV");if(oDiv.id){aPreviousSplitterCells.push(oDiv.id);}else{}}}else{ for(p=0;p<tds.length;p++){var oDiv=UCF_DomUtil.firstChild(tds[p],"DIV");if(oDiv.id){aPreviousSplitterCells.push(oDiv.id);}else{}}}}{ var tds=UCF_DomUtil.childNodes(oNextRow,"TD");for(p=0;p<tds.length;p++){var oDiv=UCF_DomUtil.firstChild(tds[p],"DIV");if(oDiv.id){aNextSplitterCells.push(oDiv.id);}else{}}}var mParameters={prev:aPreviousSplitterCells,next:aNextSplitterCells,prevRow:oPreviousRow.id,nextRow:oNextRow.id,prevCells:aPreviousSplitterCells,nextCells:aNextSplitterCells};return mParameters;};UCF_Splitter.prototype.setCellSize=function(eDirection,iPosition,iSize){if(eDirection==this.E_DIRECTION.COLUMN){return this.setColumnWidth(iPosition,iSize);}else if(eDirection==this.E_DIRECTION.ROW){return this.setRowHeight(iPosition,iSize);}};UCF_Splitter.prototype.setColumnWidth=function(iPosition,iSize){var oSplitter=this.oGetSplitterRef();var iSize=parseInt(iSize);if(iSize>0){var mElements=this.aGetColumnElements(oSplitter,parseInt(iPosition)); for(iPanesPosition=0;iPanesPosition<mElements.prev.length;iPanesPosition++){if(this.sWidthSizeModeOfColums==this.E_SIZEMODE.RELATIVE){UCF_DomUtil.$(mElements.prev[iPanesPosition]).width=iSize+"%";}else {UCF_DomUtil.$(mElements.prev[iPanesPosition]).width=iSize+"px";}}}else{var mElements=this.aGetColumnElements(oSplitter,parseInt(iPosition));for(iPanesPosition=0;iPanesPosition<mElements.prev.length;iPanesPosition++){UCF_DomUtil.$(mElements.prev[iPanesPosition]).width="1*";}}};UCF_Splitter.prototype.setSplitterWidth=function(iSize){var oSplitter=this.oGetSplitterRef();var iSize=parseInt(iSize);if(iSize>0){if(this.sWidthSizeMode==this.E_SIZEMODE.RELATIVE){oSplitter.width=iSize+"%";return;}else {oSplitter.width=iSize+"px";return;}}else{oSplitter.width="100%";}};UCF_Splitter.prototype.setRowHeight=function(iPosition,iSize){var oSplitter=this.oGetSplitterRef();var iSize=parseInt(iSize);if(iSize>0){var mElements=this.aGetRowElements(oSplitter,parseInt(iPosition)); for(iPanesPosition=0;iPanesPosition<mElements.prev.length;iPanesPosition++){if(this.sHeightSizeModeOfRows==this.E_SIZEMODE.RELATIVE){UCF_DomUtil.$(mElements.prev[iPanesPosition]).height=iSize+"%";}else {UCF_DomUtil.$(mElements.prev[iPanesPosition]).height=iSize+"px";}}}else{var mElements=this.aGetRowElements(oSplitter,parseInt(iPosition));for(iPanesPosition=0;iPanesPosition<mElements.prev.length;iPanesPosition++){UCF_DomUtil.$(mElements.prev[iPanesPosition]).height="1*";}}};UCF_Splitter.prototype.setSplitterHeight=function(iSize){var oSplitter=this.oGetSplitterRef();var iSize=parseInt(iSize);if(iSize>0){if(this.sHeightSizeMode==this.E_SIZEMODE.RELATIVE){oSplitter.height=iSize+"%";return;}else {oSplitter.height=iSize+"px";return;}}else{oSplitter.height="100%";}}; UCF_Splitter.prototype.refreshTable=function(oTableDomRef){if(oTableDomRef.refresh){oTableDomRef.refresh();}else {  oTableDomRef.style.MozOpacity="0.97";this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.MozOpacity="0.98"},10);this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.MozOpacity="0.99"},200);this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.MozOpacity="1.00"},1000);oTableDomRef.style.top=oTableDomRef.style.top+1;this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.top=""},10);this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.top=oTableDomRef.style.top+1},900);this.oAccessibilityInfoInterval=setInterval(function(){oTableDomRef.style.top=""},1000);}}; UCF_Splitter.prototype.aAttributeNames=["sId","iWidth","sWidthSizeMode","sWidthSizeModeOfColums","iHeight","sHeightSizeMode","sHeightSizeModeOfRows"]; UCF_Splitter.prototype.aMethodNames=["setColumnWidth","setSplitterWidth","setRowHeight","setSplitterHeight"];  UCF_Splitter.prototype.sId=''; UCF_Splitter.prototype.iWidth=-1; UCF_Splitter.prototype.sWidthSizeMode="RELATIVE"; UCF_Splitter.prototype.sWidthSizeModeOfColums="ABSOLUTE"; UCF_Splitter.prototype.iHeight=-1; UCF_Splitter.prototype.sHeightSizeMode="RELATIVE"; UCF_Splitter.prototype.sHeightSizeModeOfRows="ABSOLUTE"; UCF_Splitter.prototype.setDefaultValues=function(){this.sId='';this.iWidth=-1;this.sWidthSizeMode="RELATIVE";this.sWidthSizeModeOfColums="ABSOLUTE";this.iHeight=-1;this.sHeightSizeMode="RELATIVE";this.sHeightSizeModeOfRows="ABSOLUTE";}; UCF_Splitter.prototype.fireMoveEnd=function(sId,bIsColumnResize,iPrevious,iNext,bIsAbsolute,sPreviousElements,bIsDefaultSizeInPreviousElements,sNextElements,bIsDefaultSizeInNextElements){var mParams={Id:sId,IsColumnResize:bIsColumnResize,Previous:iPrevious,Next:iNext,IsAbsolute:bIsAbsolute,PreviousElements:sPreviousElements,IsDefaultSizeInPreviousElements:bIsDefaultSizeInPreviousElements,NextElements:sNextElements,IsDefaultSizeInNextElements:bIsDefaultSizeInNextElements};this.fireSemanticEvent("Splitter","MoveEnd",mParams);}; UCF_Splitter.prototype.fireScroll=function(sId,sCellId,iScrollTop,iScrollLeft){var mParams={Id:sId,CellId:sCellId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("Splitter","Scroll",mParams);}; UCF_Splitter.prototype.fireDoubleClick=function(sId,sPreviousElements,sNextElements,iPosition,bIsVerticalSash,sSashType){var mParams={Id:sId,PreviousElements:sPreviousElements,NextElements:sNextElements,Position:iPosition,IsVerticalSash:bIsVerticalSash,SashType:sSashType};this.fireSemanticEvent("Splitter","DoubleClick",mParams);}; UCF_Splitter.prototype.fireExpand=function(sId,bIsColumnResize,iPrevious,iNext,bIsAbsolute,sPreviousElements,bIsDefaultSizeInPreviousElements,sNextElements,bIsDefaultSizeInNextElements){var mParams={Id:sId,IsColumnResize:bIsColumnResize,Previous:iPrevious,Next:iNext,IsAbsolute:bIsAbsolute,PreviousElements:sPreviousElements,IsDefaultSizeInPreviousElements:bIsDefaultSizeInPreviousElements,NextElements:sNextElements,IsDefaultSizeInNextElements:bIsDefaultSizeInNextElements};this.fireSemanticEvent("Splitter","Expand",mParams);}; UCF_Splitter.prototype.fireCollapse=function(sId,bIsColumnResize,iPrevious,iNext,bIsAbsolute,sPreviousElements,bIsDefaultSizeInPreviousElements,sNextElements,bIsDefaultSizeInNextElements){var mParams={Id:sId,IsColumnResize:bIsColumnResize,Previous:iPrevious,Next:iNext,IsAbsolute:bIsAbsolute,PreviousElements:sPreviousElements,IsDefaultSizeInPreviousElements:bIsDefaultSizeInPreviousElements,NextElements:sNextElements,IsDefaultSizeInNextElements:bIsDefaultSizeInNextElements};this.fireSemanticEvent("Splitter","Collapse",mParams);}; UCF_Splitter.prototype.fireResize=function(sId,sCellId){var mParams={Id:sId,CellId:sCellId};this.fireSemanticEvent("Splitter","Resize",mParams);};
 function UCF_CheckBoxGroup(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(!UCF_System.bIs508){ } this.aCheckBoxes=new Array();};UCF_CheckBoxGroup.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_CheckBoxGroup.prototype.aGetGroup=function(){if(this.aCheckBoxes.length>0)return this.aCheckBoxes;var aCheckBoxesRef=this.oDomRef.getElementsByTagName("input"),j=0;for(var i=0;i<aCheckBoxesRef.length;i++){if(aCheckBoxesRef[i].ct=="C"){this.aCheckBoxes[j]=this.oLS.oControlFactory.oGetControlById(aCheckBoxesRef[i].id,true);j++;}}return this.aCheckBoxes;}; UCF_CheckBoxGroup.prototype.focus=function(){if(UCF_System.bIs508){UCF_DomUtil.focusDomElement(this.oFocusDomRef);}else{var oControl=this.oGetFirstFocusableChild();if(oControl&&oControl.oFocusDomRef)UCF_DomUtil.focusDomElement(oControl.oFocusDomRef);}}; UCF_CheckBoxGroup.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_CheckBoxGroup.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_CheckBoxGroup.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;var oSource=oBrowserEvent.oGetSource(),oLabel=oAccessibilityHelper.sGetLabel(this.sId); if(oSource==this.oDomRef){ var aCheckBoxes=oSource.getElementsByTagName("TD");var iItemCount=aCheckBoxes.length;oAccessibilityHelper.setControlType("CG",new Array(iItemCount.toString())); var checkBoxes=this.aGetGroup(),bEnabled=false,bReadonly=true;for(var i in checkBoxes){if(checkBoxes[i].bEnabled)bEnabled=true;if(!checkBoxes[i].bReadonly)bReadonly=false;}if(!bEnabled)oAccessibilityHelper.setEnabled(bEnabled);if(bReadonly)oAccessibilityHelper.setReadonly(bReadonly); if(this.sAccessibilityDescription==""){oAccessibilityHelper.setLabel(oAccessibilityHelper.sGetLabelText(this.sId));}else{oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);} if(oLabel&&oLabel.bRequired)oAccessibilityHelper.setRequired(true); oAccessibilityHelper.addTutor("GROUP_TUT");} else{oAccessibilityHelper.setControlType("CG_END");}}; UCF_CheckBoxGroup.prototype.aAttributeNames=["sAccessibilityDescription"]; UCF_CheckBoxGroup.prototype.aMethodNames=[];  UCF_CheckBoxGroup.prototype.sAccessibilityDescription=''; UCF_CheckBoxGroup.prototype.setDefaultValues=function(){this.sAccessibilityDescription='';};
function UCF_SapTableHierarchicalCell(oDomRef,oTable){UCF_SapTableBaseCell.apply(this,arguments);};UCF_SapTableHierarchicalCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableBaseCell"))();UCF_SapTableHierarchicalCell.prototype.setCellState=function(){ if(this.sStatus=="EXPANDED"||this.sStatus=="EXPANDEDMINUS"||this.sStatus=="EXPANDEDTOP"){this.oAccessibilityHelper.setExpanded(true);}if(this.sStatus=="COLLAPSED"||this.sStatus=="COLLAPSEDPLUS"){this.oAccessibilityHelper.setCollapsed(true);}if(this.iLevel==0&&this.sCellDesign=="GROUP_LEVEL1"){if(this.oAccessInfo.eAction==this.oTable.ACTION.HIERARCHY_EXPAND){this.oAccessibilityHelper.setControlType("ST_HDRGRPEXP");}else if(this.oAccessInfo.eAction==this.oTable.ACTION.HIERARCHY_COLLAPSE){this.oAccessibilityHelper.setControlType("ST_HDRGRPCOL");}else{this.oAccessibilityHelper.setControlType("ST_HDRGRP");}}else if(this.iLevel==0&&(this.sCellDesign=="TOTAL"||this.sCellDesign=="SUBTOTAL"||this.sCellDesign=="SUBTOTAL_LIGHT")){}else{ if(this.sStatus=="MARKTOTALS") this.oAccessibilityHelper.setLevel(this.iLevel);else this.oAccessibilityHelper.setLevel(this.iLevel+1);}};UCF_SapTableHierarchicalCell.prototype.sGetTutorInfo=function(){if(this.bStatusEnabled){var sAltAction=this.oTable.sGetAlternativeAction(this.oAccessInfo);if(sAltAction==this.oTable.ACTION.HIERARCHY_ALTERNATIVE){}else if(sAltAction==this.oTable.ACTION.HIERARCHY_EXPAND){ }else if(sAltAction==this.oTable.ACTION.HIERARCHY_COLLAPSE){ }}return "";}; UCF_SapTableHierarchicalCell.prototype.aAttributeNames=["bIsSelected","bIsSecondarySelected","sCellDesign","sHeaderCellIds","iLevel","sStatus","bStatusEnabled"]; UCF_SapTableHierarchicalCell.prototype.aMethodNames=[];  UCF_SapTableHierarchicalCell.prototype.bIsSelected=false; UCF_SapTableHierarchicalCell.prototype.bIsSecondarySelected=false; UCF_SapTableHierarchicalCell.prototype.sCellDesign="STANDARD"; UCF_SapTableHierarchicalCell.prototype.sHeaderCellIds=''; UCF_SapTableHierarchicalCell.prototype.iLevel=0; UCF_SapTableHierarchicalCell.prototype.sStatus="NONE"; UCF_SapTableHierarchicalCell.prototype.bStatusEnabled=true; UCF_SapTableHierarchicalCell.prototype.setDefaultValues=function(){this.bIsSelected=false;this.bIsSecondarySelected=false;this.sCellDesign="STANDARD";this.sHeaderCellIds='';this.iLevel=0;this.sStatus="NONE";this.bStatusEnabled=true;};
 function UCF_ThresholdSlider(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(!this.bIsInteractive)return;this.iTotalWidth=parseInt(this.oDomRef.getAttribute("iTotalwidth"));this.iTotalSubUnits=parseInt(this.oDomRef.getAttribute("iTotalsubunits"));this.iUnitWidth=parseInt(this.oDomRef.getAttribute("iUnitwidth"));this.iInitDisplay=parseInt(this.oDomRef.getAttribute("iColoredBarSubUnits"));this.iLastSubUnits=this.iInitDisplay;this.bDragging=false;this.createThresholds();};UCF_ThresholdSlider.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ThresholdSlider.prototype.onmouseover=function(oBrowserEvent){if(!this.bIsInteractive)return;var oSlider=UCF_DomUtil.$(this.sId+"-slider");if(oSlider!=null)UCF_DomUtil.addClass(oSlider,"lsTSLsliderHover");}; UCF_ThresholdSlider.prototype.onmouseout=function(oBrowserEvent){if(!this.bIsInteractive)return;var oSlider=UCF_DomUtil.$(this.sId+"-slider");if(oSlider!=null)UCF_DomUtil.removeClass(oSlider,"lsTSLsliderHover");};UCF_ThresholdSlider.prototype.onclick=function(oBrowserEvent){if(!this.bThresholdsAvailable())return;this.bEscaped=false;if(this.oRect==null)this.oRect=UCF_DomUtil.oGetObjectRect(this.oDomRef);  if(this.oRect.left<oBrowserEvent.iClientX()){var iMargin=oBrowserEvent.iClientX()-this.oRect.left;}else{var iMargin=(oBrowserEvent.iClientX()+document.body.scrollLeft)-this.oRect.left;}if(UCF_System.bIsRTL){iMargin=this.oDomRef.offsetWidth-iMargin+10;}if(iMargin>this.iTotalWidth){iMargin=this.iTotalWidth;}var iSubUnits=this.calcSubUnits(iMargin);if(!this.bIsInteractive){this.fireActivate(this.sId,iSubUnits);return} if(this.bDragging){return;}var oThreshold=this.getThreshold(iSubUnits);if(oThreshold!=null){this.setThresholdType(oThreshold);this.updateTooltip(oThreshold);}if(iSubUnits!=null){this.setBarWidth(iSubUnits);this.setSliderPosition(iSubUnits);}this.iColoredBarSubUnits=iSubUnits;this.iInitDisplay=iSubUnits;this.fireChange(this.sId,iSubUnits);}; UCF_ThresholdSlider.prototype.onlsup=function(oBrowserEvent){if(!UCF_System.bIsRTL){this.incrementByKey(1);}else{this.decrementByKey(1);}oBrowserEvent.cancel();}; UCF_ThresholdSlider.prototype.onlsprevious=function(oBrowserEvent){if(!UCF_System.bIsRTL){this.incrementByKey(1);}else{this.decrementByKey(1);}oBrowserEvent.cancel();}; UCF_ThresholdSlider.prototype.onlsdown=function(oBrowserEvent){if(!UCF_System.bIsRTL){this.decrementByKey(1);}else{this.incrementByKey(1);}oBrowserEvent.cancel();}; UCF_ThresholdSlider.prototype.onlsnext=function(oBrowserEvent){if(!UCF_System.bIsRTL){this.decrementByKey(1);}else{this.incrementByKey(1);}oBrowserEvent.cancel();};UCF_ThresholdSlider.prototype.onkeydown=function(oBrowserEvent){if(oBrowserEvent.bAlt()||oBrowserEvent.bShift())return;var iKey=oBrowserEvent.iKeyCode(); if(oBrowserEvent.bCtrl()){if(iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_RIGHT){var iDiff=(this.iDiffToNextUntit()>0)?this.iDiffToNextUntit():this.iSubUnitsPerUnit;this.incrementByKey(iDiff);}else if(iKey==UCF_KeyCodes.ARROW_DOWN||iKey==UCF_KeyCodes.ARROW_LEFT){var iDiff=(this.iDiffToPrevUntit()>0)?this.iDiffToPrevUntit():this.iSubUnitsPerUnit;this.decrementByKey(iDiff);}} if(!oBrowserEvent.bCtrl()){if(iKey==UCF_KeyCodes.PLUS){this.incrementByKey(1);oBrowserEvent.cancel();}else if(iKey==UCF_KeyCodes.MINUS){this.decrementByKey(1);oBrowserEvent.cancel();}}}; UCF_ThresholdSlider.prototype.onlsend=function(oBrowserEvent){var oThreshold=this.aThresholds[this.aThresholds.length-1];this.setSliderPosition(this.iTotalSubUnits);this.setBarWidth(this.iTotalSubUnits);this.setThresholdType(oThreshold);this.updateTooltip(oThreshold);this.refocus(this.oDomRef);oBrowserEvent.cancel();}; UCF_ThresholdSlider.prototype.onlshome=function(oBrowserEvent){var oThreshold=this.aThresholds[0];this.setSliderPosition(0);this.setBarWidth(0);this.setThresholdType(oThreshold);this.updateTooltip(oThreshold);this.refocus(this.oDomRef);oBrowserEvent.cancel();}; UCF_ThresholdSlider.prototype.iDiffToNextUntit=function(){var iDiff=this.iTotalSubUnits-this.iColoredBarSubUnits;iDiff=iDiff % this.iSubUnitsPerUnit;return iDiff;}; UCF_ThresholdSlider.prototype.iDiffToPrevUntit=function(){var iDiff=this.iColoredBarSubUnits % this.iSubUnitsPerUnit;return iDiff;}; UCF_ThresholdSlider.prototype.incrementByKey=function(iDiff){if(this.iColoredBarSubUnits<this.iTotalSubUnits){this.setSliderPosition(this.iColoredBarSubUnits+iDiff);this.setBarWidth(this.iColoredBarSubUnits+iDiff); var oThreshold=this.getThreshold(this.iColoredBarSubUnits);if(oThreshold!=null){this.setThresholdType(oThreshold);this.updateTooltip(oThreshold); if(this.sTimeOutId!=null){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"refocus");}}}; UCF_ThresholdSlider.prototype.decrementByKey=function(iDiff){if(this.iColoredBarSubUnits>0){this.setSliderPosition(this.iColoredBarSubUnits-iDiff);this.setBarWidth(this.iColoredBarSubUnits-iDiff); var oThreshold=this.getThreshold(this.iColoredBarSubUnits);if(oThreshold!=null){this.setThresholdType(oThreshold);this.updateTooltip(oThreshold); if(this.sTimeOutId!=null){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"refocus");}}}; UCF_ThresholdSlider.prototype.onlstabprevious=function(){if(!this.bIsInteractive)return;if(this.bFireChange()){this.fireChange(this.sId,this.iColoredBarSubUnits);this.iInitDisplay=this.iColoredBarSubUnits;}}; UCF_ThresholdSlider.prototype.onlstabnext=function(){if(!this.bIsInteractive)return;if(this.bFireChange()){this.fireChange(this.sId,this.iColoredBarSubUnits);this.iInitDisplay=this.iColoredBarSubUnits;}}; UCF_ThresholdSlider.prototype.bFireChange=function(){if(this.iLastSubUnits!=this.iColoredBarSubUnits){this.iLastSubUnits=this.iColoredBarSubUnits;return true;}return false;};UCF_ThresholdSlider.prototype.calcSubUnits=function(iMargin){iMargin /=this.iSubUnitWidth;return iMargin=Math.round(iMargin);}; UCF_ThresholdSlider.prototype.createThresholds=function(){if(!this.bThresholdsAvailable())return;var aDomRef=UCF_DomUtil.$(this.sId+"-thold").childNodes;this.aThresholds=[];for(var i=0;i<aDomRef.length;i++){var oThreshold=this.oLS.oControlFactory.oGetControlByDomRef(aDomRef[i],true);if(oThreshold==null)continue;this.aThresholds.push(oThreshold);}};UCF_ThresholdSlider.prototype.bThresholdsAvailable=function(){return UCF_DomUtil.$(this.sId+"-thold")!=null;}; UCF_ThresholdSlider.prototype.getThreshold=function(iBarPosition){if(iBarPosition<this.aThresholds[0].iPosition||(iBarPosition>this.aThresholds[0].iPosition&&iBarPosition<this.aThresholds[1].iPosition)){return this.aThresholds[0];}if(iBarPosition>=this.aThresholds[this.aThresholds.length-1].iPosition){return this.aThresholds[this.aThresholds.length-1];}for(var i=0;i<this.aThresholds.length;i++){if(iBarPosition==this.aThresholds[i].iPosition||(i>0&&i<this.aThresholds.length-1&&iBarPosition>this.aThresholds[i-1].iPosition&&iBarPosition<this.aThresholds[i+1].iPosition)){return this.aThresholds[i];}}return null;}; UCF_ThresholdSlider.prototype.setThresholdType=function(oThreshold){if(oThreshold.sSemantic==null)return;var sStyle="lsTSL_"+oThreshold.sSemantic,oDomRef=this.oDomRef.getElementsByTagName("IMG")[0];oDomRef.className=sStyle;}; UCF_ThresholdSlider.prototype.setBarWidth=function(iSubUnits){if(!this.bIsInteractive)return; if(iSubUnits>=this.iTotalSubUnits)iSubUnits=this.iTotalSubUnits;var iColoredWidth=iSubUnits*this.iSubUnitWidth,iGrayedoutWidth=this.iTotalWidth-iColoredWidth,aImages=this.oDomRef.getElementsByTagName("IMG"); if(iColoredWidth>0&&iColoredWidth<=this.iTotalWidth)iColoredWidth-=1;if(iGrayedoutWidth>0&&iGrayedoutWidth<=this.iTotalWidth)iGrayedoutWidth-=1;  if(iColoredWidth==0){aImages[0].style.display="none";aImages[1].style.display="inline";}else if(iGrayedoutWidth==0){aImages[0].style.borderWidth="1px 1px 1px 1px";aImages[0].style.display="inline";aImages[1].style.display="none";}else if(iSubUnits<this.iTotalSubUnits&&iSubUnits>0){aImages[0].style.borderWidth="1px 0px 1px 1px";aImages[0].style.display="inline";aImages[1].style.display="inline";} aImages[0].style.width=iColoredWidth;aImages[1].style.width=iGrayedoutWidth;this.iColoredBarSubUnits=iSubUnits;}; UCF_ThresholdSlider.prototype.setSliderPosition=function(iSubUnits){if(!this.bIsInteractive)return;var oSlider=UCF_DomUtil.$(this.sId+"-slider");var iMargin=iSubUnits*this.iSubUnitWidth;iMargin-=7;if(iMargin<-2)iMargin=-2;if(iMargin>this.iTotalWidth){iMargin=this.iTotalWidth;}if(!UCF_System.bIsRTL)oSlider.style.marginLeft=iMargin;else oSlider.style.marginRight=iMargin;}; UCF_ThresholdSlider.prototype.setInitDisplay=function(){var iSubUnits=this.iInitDisplay;var oThreshold=this.getThreshold(iSubUnits);if(oThreshold!=null){this.setThresholdType(oThreshold);}if(iSubUnits!=null){this.setBarWidth(iSubUnits);this.setSliderPosition(iSubUnits);}}; UCF_ThresholdSlider.prototype.updateTooltip=function(oThreshold){if(oThreshold==null)return;this.oDomRef.title=this.sTooltip;if(this.sText!="")this.oDomRef.title+=" - "+this.sText;if(oThreshold.sTooltip!="")this.oDomRef.title+=" - "+oThreshold.sTooltip;}; UCF_ThresholdSlider.prototype.onlsdragstart=function(oBrowserEvent){var oSlider=UCF_DomUtil.$(this.sId+"-slider");if(oBrowserEvent.oGetSource()!=oSlider)return;oBrowserEvent.bHandled=true;if(this.oRect==null)this.oRect=UCF_DomUtil.oGetObjectRect(this.oDomRef);this.iOffsetX=0;this.iOffsetX=(!UCF_System.bIsRTL)?oBrowserEvent.oDragAndDropManager.iDragStartX-this.oRect.left-parseInt(UCF_DomUtil.$(this.sId+"-slider").style.marginLeft):20;oBrowserEvent.oDragAndDropManager.startDragSession(this.sId+"-slider","",UCF_DragSession.DRAG_TYPE.NONE,null,null);}; UCF_ThresholdSlider.prototype.onlsdrag=function(oBrowserEvent){this.bDragging=true;var oSlider=UCF_DomUtil.$(this.sId+"-slider"),iMouseX=oBrowserEvent.iPageX(),iMargin=iMouseX-this.oRect.left-this.iOffsetX+7;if(UCF_System.bIsRTL){iMargin=this.oDomRef.offsetWidth-iMargin;}if(iMargin<0)iMargin=0;iMargin=Math.max(-7,iMargin);if(iMargin>this.iTotalWidth)iMargin=this.iTotalWidth;var iSubUnits=this.calcSubUnits(iMargin);if(iSubUnits!=null){var oThreshold=this.getThreshold(iSubUnits);this.setSliderPosition(iSubUnits);this.setBarWidth(iSubUnits);}if(oThreshold!=null){this.setThresholdType(oThreshold);this.updateTooltip(oThreshold);}}; UCF_ThresholdSlider.prototype.onlsdragend=function(oBrowserEvent){if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.ESCAPE){this.setInitDisplay();this.bEscaped=true;}else{this.fireChange(this.sId,this.iColoredBarSubUnits);this.iInitDisplay=this.iColoredBarSubUnits;}this.bDragging=false;}; UCF_ThresholdSlider.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(!UCF_JsUtil.bInstanceOf(oSource,"UCF_ThresholdSlider"))return;var sLabel=oAccessibilityHelper.sGetLabelText(this.sId),iCount=Math.floor(this.iColoredBarSubUnits / this.iSubUnitsPerUnit);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.addTooltip(this.oDomRef.title);oAccessibilityHelper.setControlType("SLIDER");oAccessibilityHelper.setItemCount(this.iTotalUnits);oAccessibilityHelper.setItemIndex(iCount);if(this.bIsInteractive){oAccessibilityHelper.addTutor("LRNAV_TUT");}}; UCF_ThresholdSlider.prototype.aAttributeNames=["sTooltip","bShowUnits","iTotalUnits","iSubUnitsPerUnit","iSubUnitWidth","iColoredBarSubUnits","bIsInteractive","sText"]; UCF_ThresholdSlider.prototype.aMethodNames=[];  UCF_ThresholdSlider.prototype.sTooltip='control tooltip'; UCF_ThresholdSlider.prototype.bShowUnits=true; UCF_ThresholdSlider.prototype.iTotalUnits=10; UCF_ThresholdSlider.prototype.iSubUnitsPerUnit=1; UCF_ThresholdSlider.prototype.iSubUnitWidth=10; UCF_ThresholdSlider.prototype.iColoredBarSubUnits=5; UCF_ThresholdSlider.prototype.bIsInteractive=true; UCF_ThresholdSlider.prototype.sText=''; UCF_ThresholdSlider.prototype.setDefaultValues=function(){this.sTooltip='control tooltip';this.bShowUnits=true;this.iTotalUnits=10;this.iSubUnitsPerUnit=1;this.iSubUnitWidth=10;this.iColoredBarSubUnits=5;this.bIsInteractive=true;this.sText='';}; UCF_ThresholdSlider.prototype.fireChange=function(sId,iColoredBarSubUnits){var mParams={Id:sId,ColoredBarSubUnits:iColoredBarSubUnits};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("ThresholdSlider","Change",mParams);}; UCF_ThresholdSlider.prototype.fireActivate=function(sId,iColoredBarSubUnits){var mParams={Id:sId,ColoredBarSubUnits:iColoredBarSubUnits};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Activate)this.oLS.markDirty();this.fireSemanticEvent("ThresholdSlider","Activate",mParams);};
 function UCF_SapTableDragDropDelegate(oLS,oSapTable){this.oLS=oLS;this.oSapTable=oSapTable;this.oDropDecoration=null;};UCF_SapTableDragDropDelegate.prototype=new UCF_Object(); UCF_SapTableDragDropDelegate.prototype.I_AUTOSCROLL_THRESHOLD=20;UCF_SapTableDragDropDelegate.prototype.onlsdraghover=function(oBrowserEvent){if(!this.oSapTable.sDropTargetInfo)return;var oScrollV=this.oSapTable.oScrollV;if(!oScrollV)return;var oAccessInfo=oScrollV.oGetAccessInfo(oBrowserEvent,oScrollV.ACCESS_TYPE.MOUSE),oContentDomRef=UCF_DomUtil.$(this.oSapTable.sId+"-content");oTableDomRef=UCF_DomUtil.oGetFirstChild(UCF_DomUtil.oGetFirstChild(oContentDomRef)),oRect=UCF_DomUtil.oGetObjectRect(oTableDomRef),oFirstRowDomRef=oTableDomRef.rows[0];if(!oFirstRowDomRef)return; var sRR=oFirstRowDomRef.getAttribute("rr");if(!sRR||sRR==-1){oRect.top+=oFirstRowDomRef.offsetHeight;oRect.height-=oFirstRowDomRef.offsetHeight;}if(oBrowserEvent.iPageY()<oRect.top+this.I_AUTOSCROLL_THRESHOLD){oScrollV.scrollTo(oAccessInfo,oScrollV.iFirstVisibleItem-oScrollV.iSmallChange);}else if(oBrowserEvent.iPageY()>oRect.top+oRect.height-this.I_AUTOSCROLL_THRESHOLD){oScrollV.scrollTo(oAccessInfo,oScrollV.iFirstVisibleItem+oScrollV.iSmallChange);}}; UCF_SapTableDragDropDelegate.prototype.onlsdragstart=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG_START);}; UCF_SapTableDragDropDelegate.prototype.onlsdrag=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG);}; UCF_SapTableDragDropDelegate.prototype.onlsdragend=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG_END);}; UCF_SapTableDragDropDelegate.prototype.onlsdragover=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG_OVER);}; UCF_SapTableDragDropDelegate.prototype.onlsdrop=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DROP);}; UCF_SapTableDragDropDelegate.prototype.onlsdragenter=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG_ENTER);}; UCF_SapTableDragDropDelegate.prototype.onlsdragleave=function(oBrowserEvent){this.handleDragDrop(oBrowserEvent,this.oSapTable.ACCESS_TYPE.DRAG_LEAVE);}; UCF_SapTableDragDropDelegate.prototype.DRAG_CUSTOM_TYPE={NONE:null,COL_RESIZE:"tableColumResize",COL_DRAG:"tableColumReorder",ROW_DRAG:"tableRowDrag"}; UCF_SapTableDragDropDelegate.prototype.cleanUpDragDrop=function(){if(this.oDropDecoration)this.oDropDecoration.cleanUp();this.oDropDecoration=null;}; UCF_SapTableDragDropDelegate.prototype.handleDragDrop=function(oBrowserEvent,eAccessType){if(!this.oSapTable.bInitBeforeHandling())return false;var oAccessInfo=null,oDragAndDropManager=oBrowserEvent.oDragAndDropManager;if(eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_OVER){if(this.oDropDecoration)this.oDropDecoration.update(oBrowserEvent);}else if(eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_LEAVE){if(this.oDropDecoration){this.oDropDecoration.cleanUp();this.oDropDecoration=null;oDragAndDropManager.cleanUpDropArea();}}else if(eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_START){ oAccessInfo=this.oSapTable.oGetAccessInfo(oBrowserEvent,eAccessType);if(oAccessInfo){if(oAccessInfo.eAction==this.oSapTable.ACTION.COL_RESIZE){this.handleColumnResize(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.oSapTable.SUBCONTROL.HEADER_CELL){this.handleColumnDragAndInsert(oAccessInfo);}else if(oAccessInfo.eSubControlType==this.oSapTable.SUBCONTROL.SELECTION_CELL||(oBrowserEvent.oGetSourceControl()&&oBrowserEvent.oGetSourceControl().bIsDragHandle==true)){this.handleRowDragAndInsert(oAccessInfo);}}}else{ if(!oAccessInfo)oAccessInfo=this.oSapTable.oGetAccessInfo(oBrowserEvent,eAccessType);if(oAccessInfo){if(oDragAndDropManager.oDragSession.sGetCustomType()==this.DRAG_CUSTOM_TYPE.COL_RESIZE){this.handleColumnResize(oAccessInfo);}else if(oDragAndDropManager.oDragSession.sGetCustomType()==this.DRAG_CUSTOM_TYPE.COL_DRAG){this.handleColumnDragAndInsert(oAccessInfo);}else if(oDragAndDropManager.oDragSession.sGetCustomType()==this.DRAG_CUSTOM_TYPE.ROW_DRAG){this.handleRowDragAndInsert(oAccessInfo);}else{ this.handleRowDragAndInsert(oAccessInfo);} if(eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_END){this.cleanUpDragDrop();oAccessInfo.bHandled=true;}}}return this.oSapTable.bSetEventReturnState(oBrowserEvent,oAccessInfo?oAccessInfo.bHandled:false);}; UCF_SapTableDragDropDelegate.prototype.handleRowDragAndInsert=function(oAccessInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager;if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_START){ var sDragSourceInfoId=this.oSapTable.sDragSourceInfo;if(!sDragSourceInfoId)return;var oDragSourceInfoControl=this.oSapTable.oGetControlById(sDragSourceInfoId);if(!oDragSourceInfoControl)return;var sTags=oDragSourceInfoControl.sGetTags();if(!sTags)return;if(!this.bIsDragPossible(oAccessInfo))return; if(this.oSapTable.mEvents.Drag){this.oSapTable.fireDrag(this.oSapTable.sId,sDragSourceInfoId);}var sRowDragData=oAccessInfo.oCellInfo.oDomRefRow.getAttribute("sDragData"); if(oDragSourceInfoControl.mEvents.DataAccess){oDragSourceInfoControl.fireDataAccess(sDragSourceInfoId,this.oSapTable.sId);} else if(sRowDragData){this.oLS.setDragData(sRowDragData,oDragSourceInfoControl.sGetMimeType());}else{ this.oLS.setDragData(oDragSourceInfoControl.sGetData(),oDragSourceInfoControl.sGetMimeType());} var oGhost=this.oCreateGhost();oAccessInfo.oBrowserEvent.bHandled=true;oDragAndDropManager.oDragSession.setCustomType(this.DRAG_CUSTOM_TYPE.ROW_DRAG);oDragAndDropManager.handleDefaultDragStart(this.oSapTable.sId,sTags,oGhost);oAccessInfo.oBrowserEvent.cancelBubble();oAccessInfo.oBrowserEvent.cancel();}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_ENTER){ var oSelectionCellInfo=this.oSapTable.oGetSelectionCellInfoByDomRef(oAccessInfo.oSubControlDomRef),oSelectionCellInfoBefore=oSelectionCellInfo?this.oSapTable.oGetCellInfo(oSelectionCellInfo.iRowIndex-1,oSelectionCellInfo.iColIndex):null,oSelectionCellInfoAfter=oSelectionCellInfo?this.oSapTable.oGetCellInfo(oSelectionCellInfo.iRowIndex+oSelectionCellInfo.iRowSpan,oSelectionCellInfo.iColIndex):null; var oCustomData=oDragAndDropManager.oDragSession.oGetCustomData();var oDropRasterDataBefore=null,oDropRasterDataAfter=null;var sDropTargetInfoId=this.oSapTable.sDropTargetInfo;if(!sDropTargetInfoId)return;var oDropTargetInfoControl=this.oSapTable.oGetControlById(sDropTargetInfoId);if(!oDropTargetInfoControl)return;var sDropTags=oDropTargetInfoControl.sGetTags();if(!sDropTags)return;if(!oDragAndDropManager.bGetDropAllowed(sDropTags))return;if(oAccessInfo.eSubControlType!=this.oSapTable.SUBCONTROL.STANDARD_CELL&&oAccessInfo.eSubControlType!=this.oSapTable.SUBCONTROL.SELECTION_CELL&&oAccessInfo.eSubControlType!=this.oSapTable.SUBCONTROL.HIERARCHY_CELL&&!(this.oSapTable.iRowCount==0&&this.oSapTable.SUBCONTROL.TABLE))return; var iGap=0;if(this.oSapTable.iRowCount>0){var iFirstDataColumn=0; if(oSelectionCellInfo&&oSelectionCellInfo.oDomRefCell){iGap=oSelectionCellInfo.oDomRefCell.scrollWidth;iFirstDataColumn=1;}var oFirstDataCell=this.oSapTable.oGetCellInfo(oAccessInfo.oCellInfo.iRowIndex,iFirstDataColumn);if(oFirstDataCell.eCellType==this.oSapTable.SUBCONTROL.HIERARCHY_CELL){var oSubTableRef=UCF_DomUtil.oGetFirstChild(oFirstDataCell.oDomRefCell);iGap-=7;iGap+=oSubTableRef.rows[0].cells[0].clientWidth;iGap+=oSubTableRef.rows[0].cells[1].clientWidth;}}var oDomRefMaster=UCF_DomUtil.$(this.oSapTable.sId+"-"+this.oSapTable.SUFFIX.CONTENT_TD),oHoveredCellRect=UCF_DomUtil.oGetObjectRect(oAccessInfo.oSubControlDomRef),iSnapRange=parseInt(oHoveredCellRect.height/2),oMasterRect=UCF_DomUtil.oGetObjectRect(oDomRefMaster),oDecorationBoundaries={top:oHoveredCellRect.top,left:oMasterRect.left+iGap,width:oMasterRect.width-iGap,height:oHoveredCellRect.height};if(this.oSapTable.iRowCount==0){var oMainTableDomRef=UCF_DomUtil.oGetFirstChild(UCF_DomUtil.oGetFirstChild(oDomRefMaster));var iFirstRealRow=0;while(oMainTableDomRef.rows[iFirstRealRow].cells[0].tagName=="TH")iFirstRealRow++;var oFirstRowDomRef=oMainTableDomRef.rows[iFirstRealRow].cells[0];oDecorationBoundaries.top=UCF_DomUtil.oGetObjectRect(oFirstRowDomRef).top;iSnapRange=oMasterRect.height;}else if(oAccessInfo.oSubControlDomRef.getAttribute("tp")=="ER"){return;} var oDecoration=new(UCF_ClassLoader.oGetClass("UCF_DragDropDecoration"))(this.oSapTable.oLS,oDomRefMaster,oDecorationBoundaries);oDecoration.setArrowOffset(iGap);oDecoration.addRasterPoint(0,iSnapRange,oDropRasterDataBefore);if(this.oSapTable.iRowCount>0)oDecoration.addRasterPoint(oDecorationBoundaries.height,iSnapRange,oDropRasterDataAfter);this.oDropDecoration=oDecoration;oDragAndDropManager.initDropArea(oDragAndDropManager.oDragSession.DROP_TYPE.V_INSERT,sDropTags,oDecoration);oDecoration.init(oDragAndDropManager.oDragSession);}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_LEAVE){ if(this.oDropDecoration){this.oDropDecoration.cleanUp();this.oDropDecoration=null;}oDragAndDropManager.cleanUpDropArea();}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DROP){ var eDragType=oDragAndDropManager.oDragSession.eDragType;if(eDragType==oDragAndDropManager.oDragSession.DRAG_TYPE.NONE)return;var oDragSession=oDragAndDropManager.oDragSession;var sDragTags=oDragSession.sDragTags;var sDragData=oDragSession.sGetDragData();var sMimeType=oDragSession.sGetMimeType();var sDragId=oDragSession.sDragId;if(!oAccessInfo.oCellInfo)return;var sDropTargetInfoId=this.oSapTable.sDropTargetInfo;var oDropTargetInfoControl=this.oSapTable.oGetControlById(sDropTargetInfoId);if(!oDropTargetInfoControl)return;var sDropTags=oDropTargetInfoControl.sGetTags();if(!sDropTags)return;if(!oDragAndDropManager.bGetDropAllowed(sDropTags))return;this.iRowIndex=this.oSapTable.iGetAppDefinedRowIndex(oAccessInfo.oCellInfo); var oDropCellRect=UCF_DomUtil.oGetObjectRect(oAccessInfo.oCellInfo.oDomRefCell);this.iOffset=-1;var iMouseY=oAccessInfo.oBrowserEvent.iPageY();if(iMouseY>oDropCellRect.top+(oDropCellRect.height / 2)){this.iOffset=1;} if(this.oSapTable.iRowCount==0){this.iOffset=0;this.iRowIndex="";}else{ if(this.iRowIndex<0)return;if(oAccessInfo.oSubControlDomRef.getAttribute("tp")=="ER")return;}oAccessInfo.oBrowserEvent.bHandled=true; if(sDragData==null){oDragSession.setDragDataChangeListener(this.fGetDropCallBack(sDragId,sDragTags));oDragSession.bDropPending=true;this.oSapTable.oLS.lock();}else{this.fGetDropCallBack(sDragId,sDragTags).apply(this,[sDragData,sMimeType]);}}}; UCF_SapTableDragDropDelegate.prototype.bIsDragPossible=function(oAccessInfo){ var oSourceControl=oAccessInfo.oBrowserEvent.oGetSourceControl(),iRowIndex=oAccessInfo.oCellInfo.iRowIndex,oSelectionCell=this.oSapTable.oGetRowReferenceCell(iRowIndex);if(oSourceControl&&oSourceControl.bIsDragHandle==true&&oSelectionCell==null)return true; var oCell=this.oSapTable.oGetSelectionCellInfoByDomRef(oAccessInfo.oSubControlDomRef);var aSelectedInfo=this.oSapTable.aGetSelectedRows();for(var x=0;x<aSelectedInfo.length;x++){if(aSelectedInfo[x]==oCell){return true;}}return false;}; UCF_SapTableDragDropDelegate.prototype.oCreateGhost=function(){ var oGhostTable=document.createElement("TABLE");oGhostTable.cellSpacing=0;oGhostTable.cellPadding=0;var oTableBody=document.createElement("TBODY");oGhostTable.appendChild(oTableBody);var aSelectedRows=this.oSapTable.aGetSelectedRows();for(var iRows=0;iRows<aSelectedRows.length;iRows++){var oRowClone=aSelectedRows[iRows].oDomRefRow.cloneNode(true); oRowClone.removeChild(oRowClone.getElementsByTagName("TD")[0]);oTableBody.appendChild(oRowClone);}var oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oGhostTable);oGhost.setOffset(12,12);return oGhost;};UCF_SapTableDragDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oSapTable.sDropTargetInfo;var iRowIndex=this.iRowIndex;var iOffset=this.iOffset;var oDropTargetControl=this.oSapTable;return function(sDragData,sMimeType){oDropTargetControl.fireDrop(oDropTargetControl.sId,sDragId,sDropTargetInfoId,iRowIndex,iOffset,sDragData,sMimeType,sDragTags);};}; UCF_SapTableDragDropDelegate.prototype.handleColumnDragAndInsert=function(oAccessInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager;if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_START){if(oAccessInfo.eSubControlType==this.oSapTable.SUBCONTROL.HEADER_CELL){ var sDragFlavors=this.sGetDragFlavorsByDomRef(oDomRef);if(sDragFlavors!=""){oDragAndDropManager.handleCustomDragStart(this.oSapTable.sId,this.DRAG_CUSTOM_TYPE.COL_DRAG,oAccessInfo.oSubControlDomRef,oAccessInfo.sSubControlId,sDragFlavors);}oAccessInfo.bHandled=true;}}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_ENTER){ var oDropCellInfo=this.oSapTable.oGetHeaderCellInfoByDomRef(oAccessInfo.oSubControlDomRef),oDropCellInfoBefore=oDropCellInfo?this.oSapTable.oGetCellInfo(oDropCellInfo.iRowIndex,oDropCellInfo.iColIndex-1):null,oDropCellInfoAfter=oDropCellInfo?this.oSapTable.oGetCellInfo(oDropCellInfo.iRowIndex,oDropCellInfo.iColIndex+oDropCellInfo.iColSpan):null;this.handleStandardInsertDragEnter(oDragAndDropManager,false,UCF_DomUtil.$(this.oSapTable.sId+"-"+this.oSapTable.SUFFIX.CONTENT_TD),oDropCellInfo?oDropCellInfo.oDomRefCell:null,oDropCellInfoBefore?oDropCellInfoBefore.oDomRefCell:null,oDropCellInfoAfter?oDropCellInfoAfter.oDomRefCell:null,oAccessInfo);}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_LEAVE){ var oHeaderCellInfo=this.oSapTable.oGetHeaderCellInfoByDomRef(oAccessInfo.oSubControlDomRef);if(this.oDropDecoration){this.oDropDecoration.cleanUp();this.oDropDecoration=null;}oDragAndDropManager.cleanUpDropArea();}else if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DROP){ var oRasterPoint=oDragAndDropManager.oGetDropDecoration()?oDragAndDropManager.oGetDropDecoration().oGetRasterPoint():null;if(oRasterPoint){var oCustomData=oDragAndDropManager.oDragSession.oGetCustomData();this.oSapTable.fireColumnReorder(this.oSapTable.sId,oCustomData.sDragFragmentId,oRasterPoint.sInsertRefId,oRasterPoint.bInsertModeBefore?this.oSapTable.EVENT_PARAM_MAP_INSERT_MODE.BEFORE:this.oSapTable.EVENT_PARAM_MAP_INSERT_MODE.AFTER);oAccessInfo.bHandled=true;}}}; UCF_SapTableDragDropDelegate.prototype.handleColumnResize=function(oAccessInfo){if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_START){ var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oCustomData=null,oDecoration=null,oHeaderRect=null,oTableRect=null,oDecorationBoundaries=null;this.initColumnResize(oAccessInfo,this.oSapTable.oGetHeaderCellInfoByDomRef(oAccessInfo.oSubControlDomRef));oCustomData=oDragAndDropManager.oDragSession.oGetCustomData();if(oCustomData.bCanResize){if(oCustomData.oDecorationBoundaries){oDecorationBoundaries=oCustomData.oDecorationBoundaries}else{ oHeaderRect=oCustomData.oSrcHeaderRect;oTableRect=oCustomData.oTableRect;oDecorationBoundaries={top:oHeaderRect.top+oHeaderRect.height,left:oCustomData.iMinHorizontalMove,width:oCustomData.iMaxHorizontalMove-oCustomData.iMinHorizontalMove,height:oTableRect.height-(oHeaderRect.top-oTableRect.top+oHeaderRect.height)};}oDecoration=new(UCF_ClassLoader.oGetClass("UCF_DragDropDecoration"))(this.oSapTable.oLS,this.oSapTable.oDomRef,oDecorationBoundaries);oDragAndDropManager.initDragArea(this.oSapTable.sId,oDragAndDropManager.oDragSession.DRAG_TYPE.H_RESIZE,"",oDecoration);oDecoration.init(oDragAndDropManager.oDragSession);oDragAndDropManager.oDragSession.setCustomType(this.DRAG_CUSTOM_TYPE.COL_RESIZE);oAccessInfo.bHandled=true;}}if(oAccessInfo.eAccessType==this.oSapTable.ACCESS_TYPE.DRAG_END){ var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oCustomData=null;this.calculateColumnResize(oAccessInfo);oCustomData=oDragAndDropManager.oDragSession.oGetCustomData();this.internalFireColumnResize(oCustomData);this.cleanUpColumnResize();}}; UCF_SapTableDragDropDelegate.prototype.internalFireColumnResize=function(oCustomData){this.oSapTable.fireColumnResize(this.oSapTable.sId,oCustomData.sColWidths);}; UCF_SapTableDragDropDelegate.prototype.bIsColumnResizable=function(oHeaderCellInfo){return oHeaderCellInfo.oDomRefCell.getAttribute("resizable")!=null;};UCF_SapTableDragDropDelegate.prototype.cleanUpColumnResize=function(){}; UCF_SapTableDragDropDelegate.prototype.initColumnResize=function(oAccessInfo,oSrcHeaderCellInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oDomRefContainer=this.oSapTable.oDomRef,oResizeInfo={},oDomRefContentTable=UCF_DomUtil.$(this.oSapTable.sId+"-"+this.oSapTable.SUFFIX.CONTENT_TD).getElementsByTagName("TABLE")[0],oDomRefColGroup=oDomRefContentTable.getElementsByTagName("COLGROUP")[0];aDomRefCols=oDomRefColGroup?oDomRefColGroup.getElementsByTagName("COL"):null; oResizeInfo.oTableRect=UCF_DomUtil.oGetObjectRect(oDomRefContentTable);oResizeInfo.oSrcHeaderRect=UCF_DomUtil.oGetObjectRect(oSrcHeaderCellInfo.oDomRefCell);oResizeInfo.iMinHorizontalMove=UCF_System.bIsRTL?oResizeInfo.oSrcHeaderRect.left+oResizeInfo.oSrcHeaderRect.width-this.oSapTable.MIN_COL_WIDTH:oResizeInfo.oSrcHeaderRect.left+this.oSapTable.MIN_COL_WIDTH;oResizeInfo.iMaxHorizontalMove=oResizeInfo.iMinHorizontalMove;oResizeInfo.aAllHeaderResizeInfos=[];oResizeInfo.iNextColumnsTotalWidth=0;oResizeInfo.iSrcIndex=-1;oResizeInfo.bCanResize=false;oResizeInfo.sColWidths="";if(aDomRefCols){var iRowIndex=oSrcHeaderCellInfo.iRowIndex,oCurrHeaderCellInfo=this.oSapTable.oGetCellInfo(iRowIndex,0),oHeaderResizeInfo=null,oCurrHeaderSize=null,iCellCount=0;while(oCurrHeaderCellInfo!=null){if(this.oSapTable.bIsColumnHeader(oCurrHeaderCellInfo)){oCurrHeaderSize=UCF_DomUtil.oGetObjectSize(oCurrHeaderCellInfo.oDomRefCell);oHeaderResizeInfo={oSrcHeaderCellInfo:oCurrHeaderCellInfo,iWidthBefore:oCurrHeaderSize.iWidth,iWidthAfter:-1,bIsResizable:this.bIsColumnResizable(oCurrHeaderCellInfo),sWidthUnitAfter:null,iWidthAmountAfter:-1,sWidthUnitBefore:null,iWidthAmountBefore:-1,sOrignalStyleWidth:aDomRefCols[iCellCount].style.width};if(oCurrHeaderCellInfo==oSrcHeaderCellInfo){oResizeInfo.iSrcIndex=oResizeInfo.aAllHeaderResizeInfos.length;}if(oHeaderResizeInfo.sOrignalStyleWidth){var iWidthAmount=parseInt(oHeaderResizeInfo.sOrignalStyleWidth),sWidthAmount=new String(iWidthAmount),sWidthUnit=oHeaderResizeInfo.sOrignalStyleWidth.substr(sWidthAmount.length);if(sWidthUnit=="%"){oHeaderResizeInfo.iWidthAmountBefore=iWidthAmount;oHeaderResizeInfo.sWidthUnitBefore="%";}else if(oResizeInfo.iSrcIndex!=-1){ oHeaderResizeInfo.iWidthAmountBefore=oHeaderResizeInfo.iWidthBefore;oHeaderResizeInfo.sWidthUnitBefore="px";}else{oHeaderResizeInfo.iWidthAmountBefore=iWidthAmount;oHeaderResizeInfo.sWidthUnitBefore=sWidthUnit;}}if(oResizeInfo.iSrcIndex!=-1){ if(oHeaderResizeInfo.bIsResizable){if(UCF_System.bIsRTL){oResizeInfo.iMinHorizontalMove+=-oHeaderResizeInfo.iWidthBefore+this.oSapTable.MIN_COL_WIDTH;}else{oResizeInfo.iMaxHorizontalMove+=oHeaderResizeInfo.iWidthBefore-this.oSapTable.MIN_COL_WIDTH;}if(oCurrHeaderCellInfo!=oSrcHeaderCellInfo)oResizeInfo.bCanResize=true;}if(oCurrHeaderCellInfo!=oSrcHeaderCellInfo&&oHeaderResizeInfo.bIsResizable)oResizeInfo.iNextColumnsTotalWidth+=oHeaderResizeInfo.iWidthBefore;}else{  oHeaderResizeInfo.iWidthAfter=oHeaderResizeInfo.iWidthBefore;oHeaderResizeInfo.sWidthUnitAfter=oHeaderResizeInfo.sWidthUnitBefore;oHeaderResizeInfo.iWidthAmountAfter=oHeaderResizeInfo.iWidthAmountBefore;}oResizeInfo.aAllHeaderResizeInfos[oResizeInfo.aAllHeaderResizeInfos.length]=oHeaderResizeInfo;}oCurrHeaderCellInfo=this.oSapTable.oGetCellInfo(iRowIndex,oCurrHeaderCellInfo.iColIndex+oCurrHeaderCellInfo.iColSpan);iCellCount++;}oDragAndDropManager.oDragSession.setCustomData(oResizeInfo);}};UCF_SapTableDragDropDelegate.prototype.calculateColumnResize=function(oAccessInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oResizeInfo=oDragAndDropManager.oDragSession.oGetCustomData(),oCurrHeaderResizeInfo=null,iCurrHorizontalMove=Math.min(Math.max(oResizeInfo.iMinHorizontalMove,oAccessInfo.oBrowserEvent.iPageX()),oResizeInfo.iMaxHorizontalMove),iResultWidth=UCF_System.bIsRTL?(oResizeInfo.oSrcHeaderRect.left+oResizeInfo.oSrcHeaderRect.width)-iCurrHorizontalMove:iCurrHorizontalMove-oResizeInfo.oSrcHeaderRect.left,iOldTotalWidth=oResizeInfo.iNextColumnsTotalWidth,iNewTotalWidth=iOldTotalWidth-(iResultWidth-oResizeInfo.aAllHeaderResizeInfos[oResizeInfo.iSrcIndex].iWidthBefore),iWidthLeftOver=iNewTotalWidth,iPercentTotalValue=0,iPercentNewTotalWidthInPx=0,aPercentColumnInfos=new Array(),mPixelCorrectionColumns={}, iPixelCorrectionColumns=0;for(var i=0;i<oResizeInfo.aAllHeaderResizeInfos.length;i++){oCurrHeaderResizeInfo=oResizeInfo.aAllHeaderResizeInfos[i];if(i>=oResizeInfo.iSrcIndex){if(i==oResizeInfo.iSrcIndex){oCurrHeaderResizeInfo.iWidthAfter=iResultWidth;}else{if(oCurrHeaderResizeInfo.bIsResizable){oCurrHeaderResizeInfo.iWidthAfter=Math.max(this.oSapTable.MIN_COL_WIDTH,Math.round(iNewTotalWidth/iOldTotalWidth*(oCurrHeaderResizeInfo.iWidthBefore)));iWidthLeftOver-=oCurrHeaderResizeInfo.iWidthAfter;if(oCurrHeaderResizeInfo.iWidthAfter>this.oSapTable.MIN_COL_WIDTH){mPixelCorrectionColumns[i]=oCurrHeaderResizeInfo;iPixelCorrectionColumns++;}}else{oCurrHeaderResizeInfo.iWidthAfter=oCurrHeaderResizeInfo.iWidthBefore;oCurrHeaderResizeInfo.iWidthAmountAfter=oCurrHeaderResizeInfo.iWidthAmountBefore;oCurrHeaderResizeInfo.sWidthUnitAfter=oCurrHeaderResizeInfo.sWidthUnitBefore;}}}} while(iWidthLeftOver!=0&&iPixelCorrectionColumns>0){var iWidthBeforeCorrection=-1,iStep=Math.max(1,Math.floor(Math.abs(iWidthLeftOver)/iPixelCorrectionColumns));if(iWidthLeftOver<0)iStep*=-1;for(var m in mPixelCorrectionColumns){if(iWidthLeftOver==0)break;oCurrHeaderResizeInfo=mPixelCorrectionColumns[m];iWidthBeforeCorrection=oCurrHeaderResizeInfo.iWidthAfter;oCurrHeaderResizeInfo.iWidthAfter=Math.max(this.oSapTable.MIN_COL_WIDTH,oCurrHeaderResizeInfo.iWidthAfter+iStep);iWidthLeftOver+=(iWidthBeforeCorrection-oCurrHeaderResizeInfo.iWidthAfter);if(oCurrHeaderResizeInfo.iWidthAfter<=this.oSapTable.MIN_COL_WIDTH){delete mPixelCorrectionColumns[m];iPixelCorrectionColumns--;}}} if(iWidthLeftOver!=0)oResizeInfo.aAllHeaderResizeInfos[oResizeInfo.iSrcIndex].iWidthAfter+=iWidthLeftOver; for(var i=0;i<oResizeInfo.aAllHeaderResizeInfos.length;i++){oCurrHeaderResizeInfo=oResizeInfo.aAllHeaderResizeInfos[i];if(oCurrHeaderResizeInfo.sWidthUnitBefore=="%"||!oCurrHeaderResizeInfo.sOrignalStyleWidth){aPercentColumnInfos[aPercentColumnInfos.length]=oCurrHeaderResizeInfo;iPercentNewTotalWidthInPx+=oCurrHeaderResizeInfo.iWidthAfter;}else if(oCurrHeaderResizeInfo.iWidthAmountAfter==-1){ oCurrHeaderResizeInfo.iWidthAmountAfter=oCurrHeaderResizeInfo.iWidthAfter;oCurrHeaderResizeInfo.sWidthUnitAfter="px";}} var iWidthLeftOver=100,iPercentNewWidthInPc=0,aModifiedPercentColumns=[];for(var i=0;i<aPercentColumnInfos.length;i++){oPercentColumnInfo=aPercentColumnInfos[i];if(oPercentColumnInfo.iWidthAmountAfter==-1){ iPercentNewWidthInPc=parseInt(100*oPercentColumnInfo.iWidthAfter/iPercentNewTotalWidthInPx);oPercentColumnInfo.iWidthAmountAfter=iPercentNewWidthInPc;oPercentColumnInfo.sWidthUnitAfter="%";aModifiedPercentColumns.push(oPercentColumnInfo);}iWidthLeftOver-=oPercentColumnInfo.iWidthAmountAfter;}   if(aModifiedPercentColumns.length>0&&iWidthLeftOver!=0){var iCurrIndex=aModifiedPercentColumns.length-1,iStep=(iWidthLeftOver>0)?1:-1;while(iWidthLeftOver!=0){aModifiedPercentColumns[iCurrIndex].iWidthAmountAfter+=iStep;iWidthLeftOver-=iStep;iCurrIndex--;if(iCurrIndex<0)iCurrIndex=aModifiedPercentColumns.length-1;}} for(var i=0;i<oResizeInfo.aAllHeaderResizeInfos.length;i++){oCurrHeaderResizeInfo=oResizeInfo.aAllHeaderResizeInfos[i];oResizeInfo.sColWidths+=oCurrHeaderResizeInfo.iWidthAmountAfter+oCurrHeaderResizeInfo.sWidthUnitAfter+";";}}; UCF_SapTableDragDropDelegate.prototype.handleStandardInsertDragEnter=function(oDragAndDropManager,bVerticalInsert,oDomRefMaster,oHeaderCellDomRef,oDomRefBeforeDropCell,oDomRefAfterDropCell,oAccessInfo){ var oCustomData=oDragAndDropManager.oDragSession.oGetCustomData();var sDropFlavors="",oDropRasterDataBefore=null,oDropRasterDataAfter=null; if(bVerticalInsert){var sDropTargetInfoId=this.oSapTable.sDropTargetInfo;if(!sDropTargetInfoId)return;var oDropTargetInfoControl=this.oSapTable.oGetControlById(sDropTargetInfoId);if(!oDropTargetInfoControl)return;var sDropTags=oDropTargetInfoControl.sGetTags();if(!sDropTags)return;sDropFlavors=sDropTags;if(!oDragAndDropManager.bGetDropAllowed(sDropFlavors))return;}else{if(!oHeaderCellDomRef){return;}sDropFlavors=this.sGetDragFlavorsByDomRef(oHeaderCellDomRef);}if(oHeaderCellDomRef){if(oDragAndDropManager.bGetDropAllowed(sDropFlavors)){oDropRasterDataBefore={sInsertRefId:oHeaderCellDomRef.id,bInsertModeBefore:true};oDropRasterDataAfter={sInsertRefId:oHeaderCellDomRef.id,bInsertModeBefore:false};}else{if(oDomRefBeforeDropCell){var sDropFlavorsBefore=this.sGetDragFlavorsByDomRef(oDomRefBeforeDropCell);if(oDragAndDropManager.bGetDropAllowed(sDropFlavorsBefore)){sDropFlavors=sDropFlavorsBefore;oDropRasterDataBefore={sInsertRefId:oDomRefBeforeDropCell.id,bInsertModeBefore:false};}}if(oDomRefAfterDropCell){var sDropFlavorsAfter=this.sGetDragFlavorsByDomRef(oDomRefAfterDropCell);if(oDragAndDropManager.bGetDropAllowed(sDropFlavorsAfter)){sDropFlavors=sDropFlavorsAfter;oDropRasterDataAfter={sInsertRefId:oDomRefAfterDropCell.id,bInsertModeBefore:true};}}}}if(oDropRasterDataBefore||oDropRasterDataAfter||bVerticalInsert){if(!oAccessInfo.oCellInfo)return;var oDecoration=null,oDropCellRect=null,oMasterRect=UCF_DomUtil.oGetObjectRect(oDomRefMaster),iSnapRange=0,oDecorationBoundaries=null;iGap=oHeaderCellDomRef?oHeaderCellDomRef.scrollWidth:0,oDropCellRect=UCF_DomUtil.oGetObjectRect(oHeaderCellDomRef?oHeaderCellDomRef:oAccessInfo.oCellInfo.oDomRefRow.cells[0]);if(bVerticalInsert){iSnapRange=parseInt(oDropCellRect.height/2),oDecorationBoundaries={top:oDropCellRect.top,left:oDropCellRect.left+iGap,width:oMasterRect.width-(oDropCellRect.left-oMasterRect.left+iGap),height:oDropCellRect.height};var bShowTopDecorator=true,bShowBottomDecorator=true;if(oAccessInfo.oCellInfo.oDomRefCell.tagName=="TH"){bShowTopDecorator=false;}else if(this.oSapTable.iRowCount==0){UCF_DomUtil.oGetFirstChild(oDomRefMaster).rows[0];var oFirstRowDomRef=UCF_DomUtil.oGetFirstChild(oDomRefMaster).rows[0].cells[0];oDecorationBoundaries.top=UCF_DomUtil.oGetObjectRect(oFirstRowDomRef).top;}if(oHeaderCellDomRef){if(!oDropRasterDataBefore)bShowTopDecorator=false;if(!oDropRasterDataAfter)bShowBottomDecorator=false;}if(!bShowTopDecorator&&!bShowBottomDecorator)return; oDecoration=new(UCF_ClassLoader.oGetClass("UCF_DragDropDecoration"))(this.oSapTable.oLS,oDomRefMaster,oDecorationBoundaries);oDecoration.setArrowOffset(iGap);if(bShowTopDecorator)oDecoration.addRasterPoint(0,iSnapRange,oDropRasterDataBefore);if(bShowBottomDecorator)oDecoration.addRasterPoint(oDecorationBoundaries.height,iSnapRange,oDropRasterDataAfter);}else{iSnapRange=parseInt(oDropCellRect.width/2),oDecorationBoundaries={top:oDropCellRect.top+oDropCellRect.height,left:oDropCellRect.left,width:oDropCellRect.width,height:oMasterRect.height-(oDropCellRect.top-oMasterRect.top+oDropCellRect.height)};oDecoration=new(UCF_ClassLoader.oGetClass("UCF_DragDropDecoration"))(this.oSapTable.oLS,oDomRefMaster,oDecorationBoundaries);oDecoration.setArrowOffset(oDropCellRect.height);if(oDropRasterDataBefore)oDecoration.addRasterPoint(UCF_System.bIsRTL?oDecorationBoundaries.width:0,iSnapRange,oDropRasterDataBefore);if(oDropRasterDataAfter)oDecoration.addRasterPoint(UCF_System.bIsRTL?0:oDecorationBoundaries.width,iSnapRange,oDropRasterDataAfter);}this.oDropDecoration=oDecoration;oDragAndDropManager.initDropArea(bVerticalInsert?oDragAndDropManager.oDragSession.DROP_TYPE.V_INSERT:oDragAndDropManager.oDragSession.DROP_TYPE.H_INSERT,sDropFlavors,oDecoration);oDecoration.init(oDragAndDropManager.oDragSession);}};UCF_SapTableDragDropDelegate.prototype.sGetDragFlavorsByDomRef=function(oDomRef){var sDragFlavors=oDomRef.getAttribute("dragFlavors");return(sDragFlavors)?sDragFlavors:"";};UCF_SapTableDragDropDelegate.prototype.sGetDropFlavorsByDomRef=function(oDomRef){var sDropFlavors=oDomRef.getAttribute("dropFlavors");return(sDropFlavors)?sDropFlavors:"";};
 function UCF_EventHandler(oLS){UCF_Object.apply(this);this.oLS=oLS;this.oLS.attachEvent(this.oLS.E_EVENTS.SemanticEvent,this,"onSemanticEvent"); this.oQueue=new(UCF_ClassLoader.oGetClass("UCF_EventQueue"))(); this.mFormQueues={}; this.oWEQueue=new(UCF_ClassLoader.oGetClass("UCF_WaitingEventQueue"))();}UCF_EventHandler.prototype=new UCF_Object(); UCF_EventHandler.prototype.E_KEY={ACTION:"ClientAction",CARDINALITY:"EnqueueCardinality",TRANSPORT:"TransportMethod",RESPONSE:"ResponseData",ACTIONURL:"ActionUrl",PREPARESCRIPT:"PrepareScript"}; UCF_EventHandler.prototype.E_ACTION={SUBMIT:"submit",SUBMITASYNC:"submitAsync",ENQUEUE:"enqueue",NONE:"none"}; UCF_EventHandler.prototype.E_CARDINALITY={MULTIPLE:"multiple",SINGLE:"single",NONE:"none"}; UCF_EventHandler.prototype.E_RESPONSE_DATA={FULL:"full",DELTA:"delta"}; UCF_EventHandler.prototype.destroy=function(){this.oLS.detachEvent(this.oLS.E_EVENTS.SemanticEvent,this);}; UCF_EventHandler.prototype.oGetFormQueue=function(oForm){var oFormQueue=this.mFormQueues[oForm.sId];if(!oFormQueue){oFormQueue=new(UCF_ClassLoader.oGetClass("UCF_EventQueue"))();this.mFormQueues[oForm.sId]=oFormQueue;oForm.attachEvent(oForm.E_EVENTS.Destroy,this,"onFormDestroy");}return oFormQueue;}; UCF_EventHandler.prototype.onFormDestroy=function(oEvent){var oFormId=oEvent.oGetParam("Id"),oForm=this.oLS.oControlFactory.oGetControlById(oFormId),oQueue=this.mFormQueues[oFormId];if(oQueue){oQueue.reset();delete this.mFormQueues[oFormId];}oForm.detachEvent(oForm.E_EVENTS.Destroy,this,"onFormDestroy");}; UCF_EventHandler.prototype.setPendingRequestHandler=function(oPendingRequestHandlerObject,sPendingRequestHandlerFunction){this.oPendingRequestHandlerObject=oPendingRequestHandlerObject;this.sPendingRequestHandlerFunction=sPendingRequestHandlerFunction;}; UCF_EventHandler.prototype.sendFormRequest=function(oForm,oQueue){var oPendingRequest=new(UCF_ClassLoader.oGetClass("UCF_PendingRequest"))(oQueue);oPendingRequest.setForm(oForm);this.processPendingRequest(oPendingRequest);}; UCF_EventHandler.prototype.sendXmlHttpRequest=function(sActionUrl,oForm,oQueue){var oPendingRequest=new(UCF_ClassLoader.oGetClass("UCF_PendingRequest"))(oQueue);if(oForm){oPendingRequest.setForm(oForm);}oPendingRequest.setActionUrl(sActionUrl);this.processPendingRequest(oPendingRequest);}; UCF_EventHandler.prototype.processPendingRequest=function(oPendingRequest){this.oLS.processPendingRequest(oPendingRequest);if(oPendingRequest.bIsSuspended()){ oPendingRequest.attachEvent(oPendingRequest.M_EVENTS.Send,this,"onPendingRequestSend");}else{ this.sendPendingRequest(oPendingRequest);}}; UCF_EventHandler.prototype.onPendingRequestSend=function(oEvent){var oPendingRequest=oEvent.oGetParam("oPendingRequest");oPendingRequest.detachEvent(oPendingRequest.M_EVENTS.Send,this);this.sendPendingRequest(oPendingRequest);}; UCF_EventHandler.prototype.sendPendingRequest=function(oPendingRequest){var oQueue=oPendingRequest.oGetQueue(),iType=oPendingRequest.iGetType();var mTransportMap=oQueue.mGetTransportMap();oQueue.reset();this.oLS.bDirty=false;if(iType==UCF_PendingRequest.FORM){var oForm=oPendingRequest.oGetForm();oForm.putHiddenFieldsByMap(mTransportMap);this.oWEQueue.setProcessingLock(false);oForm.submit();}else if(iType==UCF_PendingRequest.XMLHTTP){var sActionUrl=oPendingRequest.sGetActionUrl(); var oForm=oPendingRequest.oGetForm();if(oForm!=null){this.copyHiddenFieldsToTransportMap(oForm,mTransportMap);}UCF_RequestUtil.sendAsyncRequest(sActionUrl,"POST",mTransportMap,this,"onXmlHttpResponse");}}; UCF_EventHandler.prototype.copyHiddenFieldsToTransportMap=function(oForm,mTransportMap){var thisForm=oForm.oDomRef; for(var i=0;i<thisForm.elements.length;i++){var srcElem=thisForm.elements[i];if(srcElem.type=="hidden"&&srcElem.name){if(mTransportMap[srcElem.name]){}mTransportMap[srcElem.name]=srcElem.value;}}}; UCF_EventHandler.prototype.onXmlHttpResponse=function(oResponse){if(oResponse.bSuccess&&!oResponse.oParseError){this.oLS.oPageUpdater.processUpdateDocument(oResponse.oDocument);this.oWEQueue.setProcessingLock(false);var bCcontainsSyncSubmit=this.refireWaitingEvents(); if(!bCcontainsSyncSubmit)this.oLS.unlock();}else{if(oResponse.oParseError){var oParseError=oResponse.oParseError,sErrorText="Reason: "+oParseError.reason+"\n"+"Location: "+oParseError.url+"\n"+"Source: "+oParseError.srcText+"\n"+"Line: "+oParseError.line+"\n"+"Column: "+oParseError.linepos;}this.oLS.destroy(oResponse.sText);}}; UCF_EventHandler.prototype.onSemanticEvent=function(oEvent){var oSemanticEvent=oEvent.oGetParam("oSemanticEvent"); if(this.bSpecialActions(oSemanticEvent))return;this.processSemanticEvent(oSemanticEvent);}; UCF_EventHandler.prototype.processSemanticEvent=function(oSemanticEvent){ if(oSemanticEvent.bIsCanceled())return;  var eClientAction=this.E_ACTION.ENQUEUE,eEnqueueCardinality=this.E_CARDINALITY.MULTIPLE,eResponseData=this.E_RESPONSE_DATA.FULL,sActionUrl=null,sPrepareScript="";var ucfParam=oSemanticEvent.mGetUcfParameters();if(ucfParam!=null){    sPrepareScript=ucfParam[this.E_KEY.PREPARESCRIPT]||sPrepareScript;if(sPrepareScript!=""){var func=new Function("oSemanticEvent","oLS",sPrepareScript);var bOk=func(oSemanticEvent.oGetInterface(),this.oLS.oGetInterface());if(bOk===false)return;}eClientAction=ucfParam[this.E_KEY.ACTION]||eClientAction;eEnqueueCardinality=ucfParam[this.E_KEY.CARDINALITY]||eEnqueueCardinality;eResponseData=ucfParam[this.E_KEY.RESPONSE]||eResponseData;sActionUrl=ucfParam[this.E_KEY.ACTIONURL]||sActionUrl;} var oEventQueue=this.oQueue; var oFormControl=oSemanticEvent.oGetForm(); if(oFormControl){oEventQueue=this.oGetFormQueue(oFormControl);}else{ if(!this.oLS.bIsMainLS()){oSemanticEvent.setSourceLS(this.oLS);var oMainEventHandler=this.oLS.oGetMainLS().oEventHandler;oMainEventHandler.processSemanticEvent(oSemanticEvent);return;} var oPage=this.oLS.oGetPage();if(oPage!=null){var sFormId=oPage.sFormId;if(sFormId){oFormControl=this.oLS.oControlFactory.oGetControlById(sFormId);}}}  var bDoLock=false; if(eClientAction==this.E_ACTION.SUBMIT||eClientAction==this.E_ACTION.SUBMITASYNC){bDoLock=true;if(eClientAction==this.E_ACTION.SUBMIT){this.oLS.lock();}} if(this.oWEQueue.bIsProcessingLock()){this.oWEQueue.oEnqueue(oSemanticEvent);return;} if(bDoLock){this.oWEQueue.setProcessingLock(true);} if(eClientAction==this.E_ACTION.ENQUEUE||eClientAction==this.E_ACTION.SUBMIT||eClientAction==this.E_ACTION.SUBMITASYNC){if(eEnqueueCardinality==this.E_CARDINALITY.SINGLE||eEnqueueCardinality==this.E_CARDINALITY.MULTIPLE){var item=new(UCF_ClassLoader.oGetClass("UCF_EventQueueItem"))(oSemanticEvent);if(eEnqueueCardinality==this.E_CARDINALITY.SINGLE){ oEventQueue.purgeByItem(item);}oEventQueue.addItem(item);}} if(eClientAction==this.E_ACTION.SUBMIT||eClientAction==this.E_ACTION.SUBMITASYNC){if(eResponseData==this.E_RESPONSE_DATA.FULL){ if(!oFormControl){oFormControl=this.oCreateForm();} if(sActionUrl){oFormControl.setAction(sActionUrl);}this.sendFormRequest(oFormControl,oEventQueue);}else if(eResponseData==this.E_RESPONSE_DATA.DELTA){ if(!sActionUrl){if(oFormControl){sActionUrl=oFormControl.sGetAction();}} if(!sActionUrl){sActionUrl=document.location.href;}this.sendXmlHttpRequest(sActionUrl,oFormControl,oEventQueue);}}}; UCF_EventHandler.prototype.refireWaitingEvents=function(){var oSemanticEvent,bCcontainsSyncSubmit=false;if(this.oWEQueue.iGetLength()<1)return false;if(this.oWEQueue.bIsRefireLock())return this.oWEQueue.bContainsSyncSubmit();this.oWEQueue.setRefireLock(true);while(!this.oWEQueue.bIsProcessingLock()&&this.oWEQueue.iGetLength()>0){oSemanticEvent=this.oWEQueue.oDequeue();var sId=oSemanticEvent.mGetParameters()["Id"];var oSourceLS=oSemanticEvent.oGetSourceLS();if(!oSourceLS)oSourceLS=this.oLS;if(sId&&oSourceLS.oControlFactory.oGetControlById(sId)){if(this.oWEQueue.bIsSyncSubmit(oSemanticEvent))bCcontainsSyncSubmit=true;this.processSemanticEvent(oSemanticEvent);}else{}}this.oWEQueue.setRefireLock(false);return bCcontainsSyncSubmit;}; UCF_EventHandler.prototype.oCreateForm=function(){var oFormRef=document.createElement("form");oFormRef.method="POST";document.body.appendChild(oFormRef);var oForm=new(UCF_ClassLoader.oGetClass("UCF_Form"))(oFormRef,this.oLS);oForm.initialize();return oForm;}; UCF_EventHandler.prototype.sSerializeForTrace=function(oSemanticEvent){var aBuff=[];aBuff.push("SemanticEvent");aBuff.push("\n");aBuff.push("sControl: ");aBuff.push(oSemanticEvent.sGetControl());aBuff.push("\n");aBuff.push("sName: ");aBuff.push(oSemanticEvent.sGetName());aBuff.push("\n");aBuff.push("sParameters: ");aBuff.push(this.sSerializeSectionForTrace(oSemanticEvent.mGetParameters()));aBuff.push("\n");aBuff.push("sUcfParameters: ");aBuff.push(this.sSerializeSectionForTrace(oSemanticEvent.mGetUcfParameters()));aBuff.push("\n");aBuff.push("sCustomParameters: ");aBuff.push(this.sSerializeSectionForTrace(oSemanticEvent.mGetCustomParameters()));aBuff.push("\n");return aBuff.join("");}; UCF_EventHandler.prototype.sSerializeSectionForTrace=function(obj){return(obj==null)?"":UCF_JsUtil.sSerialize(obj);}; UCF_EventHandler.prototype.bSpecialActions=function(oSemanticEvent){var sControlId=oSemanticEvent.mGetParameters()["Id"];if(sControlId.indexOf("_test_")!=0)return false;if(sControlId=="_test_waitingQueueLock"){this.oWEQueue.setProcessingLock(true);return true;}if(sControlId=="_test_waitingQueueUnlock"){this.oWEQueue.setProcessingLock(false);return true;}if(sControlId=="_test_waitingQueueRefire"){this.refireWaitingEvents();return true;}if(sControlId=="_test_WaitingQueueIndexOfSyncSubmit"){alert("Index of SyncSubmit in Queue:"+this.oWEQueue.iIndexOfSyncSubmit());return true;}if(sControlId=="_test_debugger"){debugger;return true;}return false;};
 function UCF_Button(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.bIgnoreDefaultButton=true;this.bAllowTextSelection=true;this.rootClassName=""; if(this.oDataTip){this.oDataTip.setHoverDomRef(this.oFocusDomRef);this.oDataTip.setOpenerRef(this.oFocusDomRef);this.oDataTip.bShowOnActivate=false;if(this.sTooltip!=""||UCF_System.bIs508){this.oDataTip.setAlignment(UCF_LayeredControl.ALIGNMENT.TOPLEFT);this.oDataTip.setMoveIntoViewPort(false);}}};UCF_Button.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Button.prototype.M_EVENTS={Press:0}; UCF_Button.prototype.onclick=function(oBrowserEvent){ this.handleClick(oBrowserEvent,false);}; UCF_Button.prototype.onlsselect=function(oBrowserEvent){ this.handleClick(oBrowserEvent,true);}; UCF_Button.prototype.handleClick=function(oBrowserEvent,bWithKeyboard){ oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!this.bEnabled)return;if(this.oDataTip)this.oDataTip.close();if((this.bHasPopupMenuSection&&!UCF_DomUtil.bContains(this.oDomRef,oBrowserEvent.oGetSource()))||(this.bHasPopupMenu&&!this.bHasPopupMenuSection)){this.toggleMenu(bWithKeyboard);}else{if(this.oPopupMenu&&this.oPopupMenu.bOpened)this.oPopupMenu.close(); this.firePress(this.sId);this.fireEvent(this.M_EVENTS.Press,{sId:this.sId});}}; UCF_Button.prototype.onlsshow=function(oBrowserEvent){ if(!this.bEnabled)return;if(this.bHasPopupMenu){this.toggleMenu(true);oBrowserEvent.cancel();}}; UCF_Button.prototype.openMenu=function(bWithKeyboard){if(!this.bHasPopupMenu||this.sPopupMenuId==""||this.oGetControlById(this.sPopupMenuId)==null)return;if(!this.oPopupMenu)this.oPopupMenu=this.oGetControlById(this.sPopupMenuId,true);this.oPopupMenu.setAutoRefocus(true); if(this.oPopupMenu.bOpened)return;this.oPopupMenu.setOpenerRef(this.oDomRef);this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oPopupMenu.open(bWithKeyboard);}; UCF_Button.prototype.toggleMenu=function(bWithKeyboard){if(!this.bHasPopupMenu)return;if(this.sPopupMenuId==""||(this.sPopupMenuId!=""&&this.oGetControlById(this.sPopupMenuId)==null)){ this.fireMenuAccess(this.sId,this.sPopupMenuId);return;}if(!this.oPopupMenu)this.oPopupMenu=this.oGetControlById(this.sPopupMenuId,true);if(this.oPopupMenu.bOpened){this.oPopupMenu.close();}else{this.fireMenuAccess(this.sId,this.sPopupMenuId);this.openMenu(bWithKeyboard);}}; UCF_Button.prototype.setEnabled=function(bEnabled){if(this.bEnabled==bEnabled)return;if(bEnabled)this.oDomRef.className=this.oDomRef.className.replace("Dsbl","");else this.oDomRef.className=this.oDomRef.className+"Dsbl";this.bEnabled=bEnabled;}; UCF_Button.prototype.setPopupMenuId=function(sPopupMenuId){if(this.oPopupMenu&&this.oPopupMenu.sId!=sPopupMenuId){ if(this.oPopupMenu.bOpened)this.oPopupMenu.close();this.oPopupMenu=null;}this.sPopupMenuId=sPopupMenuId;}; UCF_Button.prototype.bIsDefaultButton=function(bDefault){this.bDefaultButton=bDefault;if(!this.bEnabled)return; if(bDefault){ this.rootClassName=this.oDomRef.className;this.oDomRef.className=this.rootClassName+" "+this.rootClassName+"DB";}else{ this.oDomRef.className=this.rootClassName;}}; UCF_Button.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sCt="B";oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setHotkey(this.sHotkey);var sText=UCF_DomUtil.sGetInnerText(this.oDomRef);if(sText!=null&&!UCF_StringUtil.bIsEmpty(sText)){oAccessibilityHelper.setText(sText);}oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setTooltip(this.sTooltip); if(this.sDesign=="TOGGLE")sCt="TGB";oAccessibilityHelper.setControlType(sCt);if(this.bHasPopupMenuSection){oAccessibilityHelper.setControlType("B_MNU");if(this.mEvents.Press)oAccessibilityHelper.addEnabledTutor("B_MNUSEC_TUT",this.bEnabled);else oAccessibilityHelper.addEnabledTutor("MENU_TUT",this.bEnabled);}else if(this.bHasPopupMenu){oAccessibilityHelper.setControlType("B_MNU");oAccessibilityHelper.addEnabledTutor("MENU_TUT",this.bEnabled);}else if(this.sDesign=="TOGGLE"){oAccessibilityHelper.setToggled(this.bDown);oAccessibilityHelper.setNotToggled(!this.bDown);oAccessibilityHelper.addEnabledTutor("TGL_TUT",this.bEnabled);}else if(this.bDown||this.bUp){oAccessibilityHelper.setNotPressed(this.bUp);oAccessibilityHelper.setPressed(this.bDown);oAccessibilityHelper.addEnabledTutor("B_TUT",this.bEnabled);}else{oAccessibilityHelper.addEnabledTutor("B_TUT",this.bEnabled);}}; UCF_Button.prototype.aAttributeNames=["sDesign","sTooltip","bEnabled","bShowHelp","bDown","bHasPopupMenu","sPopupMenuId","bHasPopupMenuSection","sAccessKey","sHotkey","bUp"]; UCF_Button.prototype.aMethodNames=["openMenu","setEnabled","setPopupMenuId"];  UCF_Button.prototype.sDesign="STANDARD"; UCF_Button.prototype.sTooltip=''; UCF_Button.prototype.bEnabled=true; UCF_Button.prototype.bShowHelp=false; UCF_Button.prototype.bDown=false; UCF_Button.prototype.bHasPopupMenu=false; UCF_Button.prototype.sPopupMenuId=''; UCF_Button.prototype.bHasPopupMenuSection=false; UCF_Button.prototype.sAccessKey=''; UCF_Button.prototype.sHotkey="NONE"; UCF_Button.prototype.bUp=false; UCF_Button.prototype.setDefaultValues=function(){this.sDesign="STANDARD";this.sTooltip='';this.bEnabled=true;this.bShowHelp=false;this.bDown=false;this.bHasPopupMenu=false;this.sPopupMenuId='';this.bHasPopupMenuSection=false;this.sAccessKey='';this.sHotkey="NONE";this.bUp=false;}; UCF_Button.prototype.firePress=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Button","Press",mParams);}; UCF_Button.prototype.fireMenuAccess=function(sId,sPopupMenuId){var mParams={Id:sId,PopupMenuId:sPopupMenuId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.MenuAccess)this.oLS.markDirty();this.fireSemanticEvent("Button","MenuAccess",mParams);}; UCF_Button.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Button","DoubleClick",mParams);};
 function UCF_ComboBoxListBox(oDomRef,oLS){if(arguments.length==0)return; UCF_LayeredControl.apply(this,[oDomRef,oLS]); this.oTableRef=this.oDomRef.firstChild; this.iMinWidth=this.oTableRef.offsetWidth;this.oDomRef.style.width=this.iMinWidth;this.iScrollbarWidth=20;this.iBorderWidth=this.oDomRef.offsetWidth-this.oTableRef.offsetWidth;this.iBorderHeight=this.oDomRef.offsetHeight-this.oTableRef.offsetHeight;;this.iCurrentHeight=0;this.iItemHeight=18; this.bReadonly=false;  this.mItems={};this.aItemsDomRef=[];this.aItems=[];this.sFirstVisibleItemKey="";this.sLastVisibleItemKey="";var aItemsDomRef=this.oDomRef.getElementsByTagName("tr");var oItem=null;var j=0;for(var i=0;i<aItemsDomRef.length;i++){if(!aItemsDomRef[i].getAttribute("ct"))continue;oItem=this.oLS.oGetControlByDomRef(aItemsDomRef[i]);this.aItems.push(oItem);this.aItemsDomRef[j]=aItemsDomRef[i];this.mItems[oItem.sKey]=aItemsDomRef[i];if(j==0){this.sFirstVisibleItemKey=oItem.sKey;}else{this.sLastVisibleItemKey=oItem.sKey;}if(aItemsDomRef[i].offsetHeight>this.iItemHeight){this.iItemHeight=aItemsDomRef[i].offsetHeight;}j++;} this.oSelectedItem=null; this.oEventDefaultHandler=null;};UCF_ComboBoxListBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))(); UCF_ComboBoxListBox.prototype.E_EVENTS={Close:0,Select:1,Activate:2}; UCF_ComboBoxListBox.prototype.collectFocusInfo=function(oFocusInfo){if(this.oEventDefaultHandler){oFocusInfo.setApplyControl(this.oEventDefaultHandler);};}; UCF_ComboBoxListBox.prototype.setEventDefaultHandler=function(oEventSource){this.oEventDefaultHandler=oEventSource;}; UCF_ComboBoxListBox.prototype.onclick=function(oBrowserEvent){if(this.bReadonly)return;var sKey=this.sGetActiveItem(oBrowserEvent);if(sKey==null)return;var sValue=this.sGetItemValue(sKey);var sEventName=oBrowserEvent.sGetName();this.fireEvent(this.E_EVENTS.Select,{sKey:sKey,sValue:sValue,bFireSelect:true,sEventName:sEventName});this.fireEvent(this.E_EVENTS.Close);oBrowserEvent.cancelBubble();}; UCF_ComboBoxListBox.prototype.oncontextmenu=function(oBrowserEvent){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_ComboBoxListBox.prototype.onlsfocus=function(oBrowserEvent){   oBrowserEvent.cancelBubble();}; UCF_ComboBoxListBox.prototype.onmousedown=function(oBrowserEvent){this.fireEvent(this.E_EVENTS.Activate);oBrowserEvent.cancelBubble();}; UCF_ComboBoxListBox.prototype.onmouseover=function(oBrowserEvent){if(this.bReadonly)return;var oItem=this.oLS.oGetControlByDomRef(oBrowserEvent.oGetSourceRoot());if(!UCF_JsUtil.bInstanceOf(oItem,"UCF_ItemListBoxItem"))return;if(this.oSelectedItem)this.oSelectedItem.select(false);oItem.select(true);this.oSelectedItem=oItem;}; UCF_ComboBoxListBox.prototype.onmouseout=function(oBrowserEvent){if(!this.bIsPopup)return;var sKey=this.sGetActiveItem(oBrowserEvent);if(sKey==null)return;}; UCF_ComboBoxListBox.prototype.sGetItemValue=function(sKey){if(!this.mItems[sKey])return; var oItem=this.oLS.oGetControlByDomRef(this.mItems[sKey]);var sValue="";if(this.sFirstValueVisibility=="VISIBLE"||this.sSecondValueVisibility=="NONE")sValue=oItem.sValue1;else if(this.sSecondValueVisibility!="NONE")sValue=oItem.sValue2;return sValue;}; UCF_ComboBoxListBox.prototype.sGetItemDescription=function(sKey){if(!this.mItems[sKey])return; var oItem=this.oLS.oGetControlByDomRef(this.mItems[sKey]);var sDescription="";if(this.sFirstValueVisibility=="DESCRIPTIVE")sDescription=oItem.sValue1;else if(this.sSecondValueVisibility=="DESCRIPTIVE")sDescription=oItem.sValue2;return sDescription;}; UCF_ComboBoxListBox.prototype.iGetItemIndex=function(sKey){var oItem=this.mItems[sKey];if(!oItem)return 0;return oItem.rowIndex+1;}; UCF_ComboBoxListBox.prototype.bIsValid=function(){var oRootRef=UCF_DomUtil.$(this.sId+"-r");if(this.oRootRef&&this.oRootRef!=oRootRef){return false;}else{return true}}; UCF_ComboBoxListBox.prototype.sGetValueFromCell=function(oCellRef){var oTextNode=oCellRef.firstChild;return oTextNode.nodeValue;}; UCF_ComboBoxListBox.prototype.sGetActiveItem=function(oBrowserEvent){var oDomRef=oBrowserEvent.oGetSource();var sKey=null; if(oDomRef.tagName=="TD")oDomRef=oDomRef.parentNode;if(oDomRef.tagName=="TR"){oItem=this.oLS.oGetControlByDomRef(oDomRef);if(oItem)sKey=oItem.sKey;}return sKey;}; UCF_ComboBoxListBox.prototype.sGetPrevItem=function(sKey){var sPreviousKey=null;var oItem=this.mItems[sKey];var oPreviousItem=null;if(oItem){oPreviousItem=oItem.previousSibling; while(oPreviousItem&&oPreviousItem.style.display=="none"){oPreviousItem=oPreviousItem.previousSibling;}if(oPreviousItem){sPreviousKey=oPreviousItem.getAttribute("k");}}return sPreviousKey;}; UCF_ComboBoxListBox.prototype.sGetNextItem=function(sKey){var sNextKey=null;var oItem=this.mItems[sKey];var oNextItem=null;if(oItem){oNextItem=oItem.nextSibling;while(oNextItem&&oNextItem.style.display=="none"){oNextItem=oNextItem.nextSibling;}if(oNextItem){sNextKey=oNextItem.getAttribute("k");}}return sNextKey;}; UCF_ComboBoxListBox.prototype.oGetItemValueColumn=function(oItem){var oCols=oItem.getElementsByTagName("TD");for(var i=0;i<oCols.length;i++){var oImg=oCols[i].getElementsByTagName("IMG");if(oCols[i].className!="urCob2IDscr"&&oImg.length===0){return oCols[i];}}return null;}; UCF_ComboBoxListBox.prototype.sFindItem=function(sSearchString,sStartKey){var bStartSearch=false;var oFirstFoundItem=null;var oFoundItem=null;var oItem=null;if(!sSearchString)return;if(!sStartKey)bStartSearch=true;for(var sKey in this.mItems){if(sStartKey==sKey){bStartSearch=true;}oItem=this.oLS.oGetControlByDomRef(this.mItems[sKey]);if(this.sFirstValueVisibility!="NONE"){if(oItem.bMatchValue1(sSearchString)){if(bStartSearch){oFoundItem=oItem;if(sStartKey!=sKey)break;}else if(!oFirstFoundItem){oFirstFoundItem=oItem;}}}if(this.sSecondValueVisibility!="NONE"){if(oItem.bMatchValue2(sSearchString)){if(bStartSearch){oFoundItem=oItem;if(sStartKey!=sKey)break;}else if(!oFirstFoundItem){oFirstFoundItem=oItem;}}}}if((!oFoundItem||oFoundItem==this.oSelectedItem)&&oFirstFoundItem)oFoundItem=oFirstFoundItem;if(oFoundItem){if(oFoundItem!=this.oSelectedItem){if(this.oSelectedItem)this.oSelectedItem.select(false);oFoundItem.select(true);this.oSelectedItem=oFoundItem;}return this.oSelectedItem.sKey;}return null;}; UCF_ComboBoxListBox.prototype.bIsAvailable=function(){return this.bAvailable;}; UCF_ComboBoxListBox.prototype.bSetItemSelected=function(sKey,bSelect,bClear){var bSelectionChanged=false;for(var sItemKey in this.mItems){if(sItemKey==sKey){if(bSelect&&this.mItems[sKey].className!="urIlb2ISel"){this.mItems[sKey].className="urIlb2ISel";bSelectionChanged=true;}else if(!bSelect&&this.mItems[sKey].className=="urIlb2ISel"){this.mItems[sKey].className="";bSelectionChanged=true;}}else if(bClear&&this.mItems[sItemKey].className=="urIlb2ISel"){this.mItems[sItemKey].className="";bSelectionChanged=true;}}this.scrollIntoView(sKey);var oItem=this.oLS.oGetControlByDomRef(this.mItems[sKey]);this.oSelectedItem=oItem;return bSelectionChanged;}; UCF_ComboBoxListBox.prototype.scrollIntoView=function(sKey){ if(this.oDomRef.style.overflowY!="scroll")return; var oSelectedRef=this.mItems[sKey];if(!oSelectedRef)return;var iScrollTop=this.oDomRef.scrollTop;var iHeight=this.oDomRef.offsetHeight;var iPosTop=oSelectedRef.offsetTop;var oFirstVisibleItem=this.mItems[this.sFirstVisibleItemKey];var iItemHeight=parseInt(oFirstVisibleItem.offsetHeight); if(iPosTop<iScrollTop){this.oDomRef.scrollTop=iPosTop;} if(iPosTop+iItemHeight>iScrollTop+iHeight){this.oDomRef.scrollTop=iPosTop-iHeight+iItemHeight+2;}}; UCF_ComboBoxListBox.prototype.sGetFirstItemKey=function(){return this.sFirstVisibleItemKey;}; UCF_ComboBoxListBox.prototype.sGetSelectedItemKey=function(){if(this.oSelectedItem)return this.oSelectedItem.sKey;else return null;}; UCF_ComboBoxListBox.prototype.sGetLastItemKey=function(){return this.sLastVisibleItemKey;}; UCF_ComboBoxListBox.prototype.clearSelection=function(){if(this.oSelectedItem)this.oSelectedItem.select(false);this.oSelectedItem=null;}; UCF_ComboBoxListBox.prototype.selectItem=function(sKey){var oItem=this.oLS.oGetControlByDomRef(this.mItems[sKey]);if(!oItem)return;if(this.oSelectedItem)this.oSelectedItem.select(false);oItem.select(true);this.oSelectedItem=oItem;this.scrollIntoView(sKey);}; UCF_ComboBoxListBox.prototype.selectFirstItem=function(){this.selectItem(this.sFirstVisibleItemKey);}; UCF_ComboBoxListBox.prototype.selectLastItem=function(){this.selectItem(this.sLastVisibleItemKey);}; UCF_ComboBoxListBox.prototype.pageDown=function(){var oItemKey=this.sGetFirstItemKey();var sEventName="pagedown";if(this.oSelectedItem){oItemKey=this.oSelectedItem.sKey;}for(var i=0;i<this.iVisibleItems-1;i++){oItemKey=this.sGetNextItem(oItemKey);if(!oItemKey){oItemKey=this.sGetLastItemKey();break;}}this.bSetItemSelected(oItemKey,true,true);if(this.oSelectedItem){this.fireEvent(this.E_EVENTS.Select,{sKey:this.oSelectedItem.sKey,sValue:this.sGetItemValue(this.oSelectedItem.sKey),bFireSelect:false,sEventName:sEventName});}}; UCF_ComboBoxListBox.prototype.pageUp=function(){var oItemKey=this.sGetFirstItemKey();var sEventName="pageup";if(this.oSelectedItem){oItemKey=this.oSelectedItem.sKey;}for(var i=0;i<this.iVisibleItems-1;i++){oItemKey=this.sGetPrevItem(oItemKey);if(!oItemKey){oItemKey=this.sGetFirstItemKey();break;}}this.bSetItemSelected(oItemKey,true,true);if(this.oSelectedItem){this.fireEvent(this.E_EVENTS.Select,{sKey:this.oSelectedItem.sKey,sValue:this.sGetItemValue(this.oSelectedItem.sKey),bFireSelect:false,sEventName:sEventName});}}; UCF_ComboBoxListBox.prototype.applyHeight=function(){ var iItemCount=this.aItemsDomRef.length,iHeight=this.aItemsDomRef.length*this.iItemHeight;if(iItemCount==0)iHeight=this.iItemHeight;var iItemHeight=this.iItemHeight,iNewHeight=iHeight;     var oObjRect=this.oGetObjectRect(this.oOpenerRef),iTopSpace=(oObjRect.top-document.body.scrollTop)-1, iBottomSpace=parseInt(document.body.clientHeight)-(oObjRect.top-document.body.scrollTop)-oObjRect.height-1, iMaxBottomItems=Math.floor(iBottomSpace/iItemHeight),iMaxTopItems=Math.floor(iTopSpace/iItemHeight),bDisplayBelow=true;if(iMaxBottomItems>=3||(iMaxTopItems<=3&&iMaxBottomItems>1)){bDisplayBelow=true;}else if(iMaxTopItems>=3||(iMaxBottomItems<1&&iMaxBottomItems==1)){bDisplayBelow=false;}var iDisplayItems=iItemCount;if(this.iVisibleItems>0)iDisplayItems=Math.min(iItemCount,this.iVisibleItems);if(iDisplayItems===0)iDisplayItems=1;iDisplayItems=Math.min(iDisplayItems,bDisplayBelow?iMaxBottomItems:iMaxTopItems);iNewHeight=iDisplayItems*this.iItemHeight; this.oScrollRef=this.oDomRef;this.oScrollRef.style.height=iNewHeight+"px";this.oRootRef.style.height=iNewHeight+"px";if(iNewHeight>0&&iNewHeight<iHeight){this.oScrollRef.style.overflowY="scroll";}else{this.oScrollRef.style.overflowY="hidden";}}; UCF_ComboBoxListBox.prototype.setWidth=function(iWidth){iWidth=parseInt(iWidth);if(!iWidth||iWidth<=0)return;this.oTableRef.style.width="100%";if(iWidth<this.iMinWidth+this.iScrollbarWidth)iWidth=this.iMinWidth+this.iScrollbarWidth;this.oDomRef.style.overflowX="hidden";this.oDomRef.style.width=iWidth;}; UCF_ComboBoxListBox.prototype.setReadonly=function(bSet){if((bSet&&this.bReadonly)||(!bSet&&!this.bReadonly)){return;}if(bSet){this.oDomRef.className+="Ro";this.bReadonly=true;}else{this.oDomRef.className=this.oDomRef.className.replace("Ro","");this.bReadonly=false;}}; UCF_ComboBoxListBox.prototype.iGetItemCount=function(){if(this.aItemsDomRef)return this.aItemsDomRef.length;else return 0;}; UCF_ComboBoxListBox.prototype.aAttributeNames=["iVisibleItems","sHeight","sIconVisibility","sFirstValueVisibility","sSecondValueVisibility","bAvailable","sServerFilter","bComplete","bFiltered"]; UCF_ComboBoxListBox.prototype.aMethodNames=[];  UCF_ComboBoxListBox.prototype.iVisibleItems=10; UCF_ComboBoxListBox.prototype.sHeight='0'; UCF_ComboBoxListBox.prototype.sIconVisibility="NONE"; UCF_ComboBoxListBox.prototype.sFirstValueVisibility="VISIBLE"; UCF_ComboBoxListBox.prototype.sSecondValueVisibility="NONE"; UCF_ComboBoxListBox.prototype.bAvailable=true; UCF_ComboBoxListBox.prototype.sServerFilter=''; UCF_ComboBoxListBox.prototype.bComplete=true; UCF_ComboBoxListBox.prototype.bFiltered=true; UCF_ComboBoxListBox.prototype.setDefaultValues=function(){this.iVisibleItems=10;this.sHeight='0';this.sIconVisibility="NONE";this.sFirstValueVisibility="VISIBLE";this.sSecondValueVisibility="NONE";this.bAvailable=true;this.sServerFilter='';this.bComplete=true;this.bFiltered=true;};UCF_ComboBoxListBox.prototype.aPublicMethods=["bIsAvailable"];
 function UCF_TextBar(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_TextBar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TextBar.prototype.onlsaccessibility=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sText=UCF_DomUtil.sGetInnerText(oControl.oDomRef); oAccessibilityHelper.setText(sText);}; UCF_TextBar.prototype.aAttributeNames=[]; UCF_TextBar.prototype.aMethodNames=[];  UCF_TextBar.prototype.setDefaultValues=function(){};
 function UCF_SapTableCSDragDropDelegate(oLS,oSapTable){UCF_SapTableDragDropDelegate.apply(this,[oLS,oSapTable]);};UCF_SapTableCSDragDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableDragDropDelegate"))();UCF_SapTableCSDragDropDelegate.prototype.RESIZE_MAX_PULL=100;UCF_SapTableCSDragDropDelegate.prototype.RESIZE_MAX_SCROLL_STEP=30;UCF_SapTableCSDragDropDelegate.prototype.MIN_NONE_FIXED_SEGMENT_WIDTH=100; UCF_SapTableCSDragDropDelegate.prototype.onlsdragscroll=function(oBrowserEvent){var oDragAndDropManager=oBrowserEvent.oDragAndDropManager,oDragSession=oDragAndDropManager.oDragSession;if(this.oSapTable.oScrollH&&oDragSession.eDragType==oDragSession.DRAG_TYPE.H_RESIZE){var oResizeInfo=oDragSession.oGetCustomData();if(oResizeInfo.eSegmentColType==this.oSapTable.SEGMENT_COL.NONE_FIXED){var oSegmentsVisibleRect=oResizeInfo.oSegmentsVisibleRect,iLeftPull=Math.min(this.RESIZE_MAX_PULL,Math.max(0,oSegmentsVisibleRect.left-oBrowserEvent.iPageX())),iRightPull=Math.min(this.RESIZE_MAX_PULL,Math.max(0,oBrowserEvent.iPageX()-(oSegmentsVisibleRect.left+oSegmentsVisibleRect.width)));if(iLeftPull>0||iRightPull>0){var iScrollPos=this.oSapTable.iGetHorizontalScrollPosition(oResizeInfo.oSegment),iResultScrollPosition=0; if(iLeftPull>0){if(iScrollPos<oResizeInfo.iMinScrollPosition)return;iResultScrollPosition=Math.round(iScrollPos-(this.RESIZE_MAX_SCROLL_STEP*(iLeftPull/this.RESIZE_MAX_PULL)));}else if(iRightPull>0){iResultScrollPosition=Math.round(iScrollPos+(this.RESIZE_MAX_SCROLL_STEP*(iRightPull/this.RESIZE_MAX_PULL)));}iResultScrollPosition=Math.min(oResizeInfo.iMaxScrollPosition,Math.max(oResizeInfo.iMinScrollPosition,iResultScrollPosition));if(iScrollPos!=iResultScrollPosition){this.oSapTable.setHorizontalScrollPosition(iResultScrollPosition);this.oSapTable.updateHorizontalScrollUI();}}}}};UCF_SapTableCSDragDropDelegate.prototype.oGetColSegmentsRect=function(eColSegmentType){var oRect={top:0,left:0,width:0,height:0},oFirstSegment=null;for(var iRowSegmentIndex=0;iRowSegmentIndex<this.oSapTable.aDomRefSegmentMatrix.length;iRowSegmentIndex++){var oColSegment=this.oSapTable.aDomRefSegmentMatrix[iRowSegmentIndex][eColSegmentType];if(oColSegment&&iRowSegmentIndex!=this.oSapTable.SEGMENT_ROW.HEADER){if(!oFirstSegment)oFirstSegment=UCF_DomUtil.oGetObjectRect(oColSegment.parentNode);oRect.height+=oColSegment.parentNode.offsetHeight;}}oRect.width=oFirstSegment.width;oRect.top=oFirstSegment.top;oRect.left=oFirstSegment.left;return oRect;}; UCF_SapTableCSDragDropDelegate.prototype.initColumnResize=function(oAccessInfo,oSrcCellInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oSegment=this.oSapTable.oGetSegmentOfCell(oSrcCellInfo),eSegmentColType=this.oSapTable.eGetSegmentColType(oSegment),iSegmentFirstColIndex=this.oSapTable.iGetFirstInternalColIndexOfSegment(oSegment),oFirstCellInfo=this.oSapTable.oGetCellInfo(oSrcCellInfo.iRowIndex,iSegmentFirstColIndex),oSegmentsVisibleRect=this.oGetColSegmentsRect(eSegmentColType),oSrcCellRect=UCF_DomUtil.oGetObjectRect(oSrcCellInfo.oDomRefCell),oFirstCellRect=UCF_DomUtil.oGetObjectRect(oFirstCellInfo.oDomRefCell),iSrcCellOffsetLeft=oSrcCellRect.left-oFirstCellRect.left; oResizeInfo={oSegment:oSegment,eSegmentColType:eSegmentColType,oSegmentsVisibleRect:oSegmentsVisibleRect,oSrcCellInfo:oSrcCellInfo,oInitialSrcCellRect:oSrcCellRect,iMinScrollPosition:-1,iMaxScrollPosition:-1,bCanResize:false,iResultWidth:-1}; oResizeInfo.oDecorationBoundaries={top:oSegmentsVisibleRect.top,left:oSegmentsVisibleRect.left,width:oSegmentsVisibleRect.width,height:oSegmentsVisibleRect.height};if(eSegmentColType==this.oSapTable.SEGMENT_COL.NONE_FIXED){var iScrollPos=this.oSapTable.iGetHorizontalScrollPosition(oSegment);oResizeInfo.iMinScrollPosition=iSrcCellOffsetLeft+this.oSapTable.MIN_COL_WIDTH;oResizeInfo.iMaxScrollPosition=this.oSapTable.iGetSegmentWidth(oSegment)*2;if(iScrollPos<oResizeInfo.iMinScrollPosition){var iOffset=oResizeInfo.iMinScrollPosition-iScrollPos;oResizeInfo.oDecorationBoundaries.left+=iOffset;oResizeInfo.oDecorationBoundaries.width-=iOffset;}oResizeInfo.bCanResize=true;}else if(eSegmentColType==this.oSapTable.SEGMENT_COL.LEFT_FIXED){var oHeaderNonFixedSegment=this.oSapTable.aDomRefSegmentMatrix[this.oSapTable.SEGMENT_ROW.HEADER][this.oSapTable.SEGMENT_COL.NONE_FIXED];oSegmentsVisibleRect=this.oGetColSegmentsRect(eSegmentColType);oResizeInfo.oDecorationBoundaries.left=oSrcCellRect.left+this.oSapTable.MIN_COL_WIDTH;if(oHeaderNonFixedSegment){var iNoneFixedSegmentWidth=oHeaderNonFixedSegment.offsetWidth;oResizeInfo.oDecorationBoundaries.width=(oSrcCellRect.width+iNoneFixedSegmentWidth)-this.MIN_NONE_FIXED_SEGMENT_WIDTH-this.oSapTable.MIN_COL_WIDTH;oResizeInfo.bCanResize=true;}}oDragAndDropManager.oDragSession.setCustomData(oResizeInfo);};UCF_SapTableCSDragDropDelegate.prototype.calculateColumnResize=function(oAccessInfo){var oDragAndDropManager=oAccessInfo.oBrowserEvent.oDragAndDropManager,oResizeInfo=oDragAndDropManager.oDragSession.oGetCustomData(),iDragPos=Math.min(Math.max(oResizeInfo.oDecorationBoundaries.left,oAccessInfo.oBrowserEvent.iPageX()),oResizeInfo.oDecorationBoundaries.left+oResizeInfo.oDecorationBoundaries.width);if(oResizeInfo.eSegmentColType==this.oSapTable.SEGMENT_COL.NONE_FIXED){var oSrcCellRect=UCF_DomUtil.oGetObjectRect(oResizeInfo.oSrcCellInfo.oDomRefCell);oResizeInfo.iResultWidth=iDragPos-oSrcCellRect.left;}else if(oResizeInfo.eSegmentColType==this.oSapTable.SEGMENT_COL.LEFT_FIXED){oResizeInfo.iResultWidth=iDragPos-oResizeInfo.oInitialSrcCellRect.left;}this.oSapTable.setColumnWidth(oResizeInfo.oSrcCellInfo.iColIndex,oResizeInfo.iResultWidth);};UCF_SapTableCSDragDropDelegate.prototype.internalFireColumnResize=function(oResizeInfo){this.oSapTable.fireColumnResize(this.oSapTable.sId,oResizeInfo.oSrcCellInfo.oDomRefCell.getAttribute("id"),oResizeInfo.iResultWidth);};
function UCF_CalendarRowHeader(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_CalendarRowHeader.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_CalendarRowHeader.prototype.onmouseover=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.id&&oSource.id==this.sId+"-txt"&&oSource.offsetWidth>this.oDomRef.offsetWidth){oSource.title=this.sText;}}; UCF_CalendarRowHeader.prototype.aAttributeNames=["sText","bHasChildRows","bExpanded","bExpandable","iLevel","bClickable","bSelected"]; UCF_CalendarRowHeader.prototype.aMethodNames=[];  UCF_CalendarRowHeader.prototype.sText=''; UCF_CalendarRowHeader.prototype.bHasChildRows=false; UCF_CalendarRowHeader.prototype.bExpanded=false; UCF_CalendarRowHeader.prototype.bExpandable=false; UCF_CalendarRowHeader.prototype.iLevel=0; UCF_CalendarRowHeader.prototype.bClickable=false; UCF_CalendarRowHeader.prototype.bSelected=false; UCF_CalendarRowHeader.prototype.setDefaultValues=function(){this.sText='';this.bHasChildRows=false;this.bExpanded=false;this.bExpandable=false;this.iLevel=0;this.bClickable=false;this.bSelected=false;};
 function UCF_AppletContainer(oDomRef,oLS){UCF_ActiveComponent.apply(this,[oDomRef,oLS]);};UCF_AppletContainer.prototype=new(UCF_ClassLoader.oGetClass("UCF_ActiveComponent"))(); UCF_AppletContainer.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSourceControl();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("AP");oAccessibilityHelper.addTutor("GROUP_TUT");}; UCF_AppletContainer.prototype.aAttributeNames=["sLifeCycle"]; UCF_AppletContainer.prototype.aMethodNames=["setKeepAlive"];  UCF_AppletContainer.prototype.sLifeCycle="BROWSER"; UCF_AppletContainer.prototype.setDefaultValues=function(){this.sLifeCycle="BROWSER";};
 function UCF_PageHeader(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_PageHeader.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PageHeader.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_PageHeader.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_PageHeader.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("PH_END");}else{oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("PHM");oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addTutor("GROUP_TUT");}}; UCF_PageHeader.prototype.aAttributeNames=["sTitle","sTooltip","bShowTitle"]; UCF_PageHeader.prototype.aMethodNames=[];  UCF_PageHeader.prototype.sTitle=''; UCF_PageHeader.prototype.sTooltip=''; UCF_PageHeader.prototype.bShowTitle=true; UCF_PageHeader.prototype.setDefaultValues=function(){this.sTitle='';this.sTooltip='';this.bShowTitle=true;};
  function UCF_FreeContextualArea(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); if(this.bExpandable){this.oExpandIcon=document.getElementById(this.sId+"-exp");this.oContent=document.getElementById(this.sId+"-cnt");this.oExpander=new(UCF_ClassLoader.oGetClass("UCF_Expander"))(this.oContent);}};UCF_FreeContextualArea.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_FreeContextualArea.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId.indexOf("-exp")>-1&&this.bExpandable)this.toggle(oBrowserEvent);else if(sSourceId.indexOf("-pers")>-1)this.firePersonalize(this.sId);}; UCF_FreeContextualArea.prototype.onkeydown=function(oBrowserEvent){if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl()||oBrowserEvent.bShift())return;var iKey=oBrowserEvent.iKeyCode(),oSource=oBrowserEvent.oGetSource(),sSourceId=oSource.getAttribute("id");if((iKey==UCF_KeyCodes.NUMPAD_MINUS||iKey==UCF_KeyCodes.NUMPAD_PLUS)&&this.bExpandable)this.toggle(oBrowserEvent);else if(iKey==UCF_KeyCodes.ENTER&&sSourceId.indexOf("-pers")>-1)this.firePersonalize(this.sId);}; UCF_FreeContextualArea.prototype.toggle=function(oBrowserEvent){var sSourceId=oBrowserEvent.oGetSource().id,bIsFCA=(UCF_JsUtil.bInstanceOf(oBrowserEvent.oGetSourceControl(),"UCF_FreeContextualArea")&&sSourceId.indexOf("-pers")==-1&&sSourceId.indexOf("-end")==-1);if(!bIsFCA)return;if(this.bExpanded){this.oExpandIcon.className="urFRAExpClo";UCF_DomUtil.$(this.sId+"-cnt").style.display="none";this.fireCollapse(this.sId);}else{this.oExpandIcon.className="urFRAExpOp";UCF_DomUtil.$(this.sId+"-cnt").style.display="block";this.fireExpand(this.sId);}this.bExpanded=!this.bExpanded;}; UCF_FreeContextualArea.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource==this.oDomRef){oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("FRA");if(this.bExpandable){if(this.bExpanded){oAccessibilityHelper.setExpanded(this.bExpanded);oAccessibilityHelper.addTutor("GROUPCOLL_TUT");}else{oAccessibilityHelper.setCollapsed(!this.bExpanded);oAccessibilityHelper.addTutor("GROUPEXP_NO_ENTER_TUT");}}else{oAccessibilityHelper.addTutor("GROUP_TUT");}}else if(oSource.id.indexOf("-pers")>-1){oAccessibilityHelper.setControlType("PERS");oAccessibilityHelper.addTutor("LN_TUT");}else if(oSource.id.indexOf("-end")>-1){oAccessibilityHelper.setControlType("G_END");}}; UCF_FreeContextualArea.prototype.aAttributeNames=["sTitle","bExpandable","bExpanded","bPersonalizable","sDefaultButtonId"]; UCF_FreeContextualArea.prototype.aMethodNames=[];  UCF_FreeContextualArea.prototype.sTitle='Title'; UCF_FreeContextualArea.prototype.bExpandable=false; UCF_FreeContextualArea.prototype.bExpanded=true; UCF_FreeContextualArea.prototype.bPersonalizable=false; UCF_FreeContextualArea.prototype.sDefaultButtonId=''; UCF_FreeContextualArea.prototype.setDefaultValues=function(){this.sTitle='Title';this.bExpandable=false;this.bExpanded=true;this.bPersonalizable=false;this.sDefaultButtonId='';}; UCF_FreeContextualArea.prototype.fireExpand=function(sId){var mParams={Id:sId};this.fireSemanticEvent("FreeContextualArea","Expand",mParams);}; UCF_FreeContextualArea.prototype.fireCollapse=function(sId){var mParams={Id:sId};this.fireSemanticEvent("FreeContextualArea","Collapse",mParams);}; UCF_FreeContextualArea.prototype.firePersonalize=function(sId){var mParams={Id:sId};this.fireSemanticEvent("FreeContextualArea","Personalize",mParams);};
 function UCF_PageUpdater(oLS){UCF_Object.apply(this);this.oLS=oLS;this.mWaitingUpdates={};this.iWaitingUpdates=0; UCF_JsUtil.delayedCall(0,this,"initialize");}UCF_PageUpdater.prototype=new UCF_Object(); UCF_PageUpdater.prototype.initialize=function(){var oInitialUpdateRef=UCF_DomUtil.$("UCF_InitialUpdate");if(!oInitialUpdateRef)return;var sXMLText=oInitialUpdateRef.innerHTML,oXMLDoc=UCF_JsUtil.oParseXMLDocument(sXMLText);if(!oXMLDoc.documentElement)return; UCF_JsUtil.removeComments(oXMLDoc.documentElement);this.processUpdateDocument(oXMLDoc);oInitialUpdateRef.parentNode.removeChild(oInitialUpdateRef);}; UCF_PageUpdater.prototype.processUpdateDocument=function(oDocument){var oRootRef=oDocument.documentElement,aUpdates=oRootRef.childNodes,oUpdateRef,sWindowId,oTargetLS;for(var i=0;i<aUpdates.length;i++){oUpdateRef=aUpdates[i];sWindowId=oUpdateRef.getAttribute("windowid");if(sWindowId&&sWindowId!=this.oLS.sGetMainWindowId()){this.processPopupWindowUpdate(sWindowId,oUpdateRef);}else{this.processUpdates(oUpdateRef);}}}; UCF_PageUpdater.prototype.processPopupWindowUpdate=function(sWindowId,oUpdateRef){var oPopupManager=this.oLS.oGetPopupManagerInternal(),oTargetLS=oPopupManager.oGetLSByPopupId(sWindowId);  if(oTargetLS){oTargetLS.oPageUpdater.processUpdates(oUpdateRef);}else{if(this.iWaitingUpdates==0){oPopupManager.attachEvent(oPopupManager.E_EVENTS.WindowOpen,this,"onWindowOpen");}this.iWaitingUpdates++;     if(!this.mWaitingUpdates[sWindowId]){this.mWaitingUpdates[sWindowId]=[];}else{}this.mWaitingUpdates[sWindowId].push(oUpdateRef);}}; UCF_PageUpdater.prototype.onWindowOpen=function(oEvent){var oPopupManager=this.oLS.oGetPopupManagerInternal(),oTargetLS=oEvent.oGetParam("oTargetLS"),sWindowId=oEvent.oGetParam("sPopupId"),aUpdateRefs=this.mWaitingUpdates[sWindowId];delete this.mWaitingUpdates[sWindowId];this.iWaitingUpdates--;if(this.iWaitingUpdates==0){oPopupManager.detachEvent(oPopupManager.E_EVENTS.WindowOpen,this);}     for(var i=0;i<aUpdateRefs.length;i++){   var oPopupWindow=oPopupManager.oGetPopupById(sWindowId);if(oPopupWindow)oPopupWindow.preparePositionChange();if(!oPopupWindow&&i>0){break;}oTargetLS.oPageUpdater.processUpdates(aUpdateRefs[i]);}}; UCF_PageUpdater.prototype.processUpdates=function(oNode){var aUpdates=oNode.childNodes,oUpdateRef,sCommand,sContent; for(var i=0;i<aUpdates.length;i++){oUpdateRef=aUpdates[i];sCommand=oUpdateRef.tagName;switch(sCommand){case "style-update":this.updateStyle(oUpdateRef);break;}} for(var i=0;i<aUpdates.length;i++){oUpdateRef=aUpdates[i];sCommand=oUpdateRef.tagName;switch(sCommand){case "content-update":this.updateContent(oUpdateRef);break;case "control-update":this.updateControl(oUpdateRef);break;case "html-update": this.updateControl(oUpdateRef);break;case "initialize-ids":this.initializedIds(oUpdateRef);break;}} if(UCF_UserAgent.bIsIE()&&(typeof document.activeElement=="undefined"||!document.activeElement||!document.activeElement.tagName))document.body.setActive();this.oLS.purgeControls();this.oLS.processInitializeIDs(); for(var i=0;i<aUpdates.length;i++){oUpdateRef=aUpdates[i];sCommand=oUpdateRef.tagName;switch(sCommand){case "script-call":this.callScript(oUpdateRef);break;}}}; UCF_PageUpdater.prototype.initializedIds=function(oUpdateRef){var sHTML=oUpdateRef.firstChild.nodeValue,oRootRef=this.oLS.oGetRootRef(),oSpanRef=document.createElement("span");oSpanRef.innerHTML=sHTML;oRootRef.appendChild(oSpanRef.firstChild);}; UCF_PageUpdater.prototype.updateStyle=function(oUpdateRef){var oRootRef=this.oLS.oGetRootRef(),oDiv=document.createElement("div");oDiv.style.display="none";oRootRef.appendChild(oDiv);  if(UCF_UserAgent.bIsIE())oDiv.innerHTML="<input type=hidden>"+oUpdateRef.firstChild.nodeValue;else oDiv.innerHTML=oUpdateRef.firstChild.nodeValue;}; UCF_PageUpdater.prototype.updateContent=function(oUpdateRef){var sId=oUpdateRef.getAttribute("id"),sHTML=oUpdateRef.firstChild.nodeValue,oControl=this.oLS.oControlFactory.oGetControlById(sId),oRootRef=oControl.oRootRef,oParentRef=oRootRef.parentNode;oRootRef.innerHTML=sHTML;}; UCF_PageUpdater.prototype.updateControl=function(oUpdateRef){var sId=oUpdateRef.getAttribute("id"),sHTML=oUpdateRef.firstChild.nodeValue,oControl=this.oLS.oControlFactory.oGetControlById(sId),oRootRef=oControl.oRootRef,oParentRef=oRootRef.parentNode;if(UCF_System.sDevice=="ie6"){oRootRef.outerHTML=sHTML;}else{var oTemp=document.createElement("div");oTemp.innerHTML=sHTML; oParentRef.replaceChild(oTemp.firstChild,oRootRef); while(oTemp.firstChild){oParentRef.appendChild(oTemp.firstChild);}}}; UCF_PageUpdater.prototype.callScript=function(oUpdateRef){var sScript=oUpdateRef.firstChild.nodeValue;eval(sScript);};
 function UCF_TimeTrigger(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.sTimerId=null;this.iDelayMilliseconds=this.iDelay*1000;};UCF_TimeTrigger.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TimeTrigger.prototype.initialize=function(){if(!this.bEnabled)return;var oBrowserWindow=this.oLS.oBrowserWindow;oBrowserWindow.attachEvent(oBrowserWindow.E_EVENTS.Lock,this,"stop");oBrowserWindow.attachEvent(oBrowserWindow.E_EVENTS.Unlock,this,"start");if(!oBrowserWindow.bIsLocked())this.start();}; UCF_TimeTrigger.prototype.destroy=function(){this.stop();var oBrowserWindow=this.oLS.oBrowserWindow;oBrowserWindow.detachEvent(oBrowserWindow.E_EVENTS.Lock,this);oBrowserWindow.detachEvent(oBrowserWindow.E_EVENTS.Unlock,this);}; UCF_TimeTrigger.prototype.trigger=function(){var oBrowserWindow=this.oLS.oBrowserWindow;if(!oBrowserWindow.bIsLocked()){if(this.oLS.bIsDirty()){var sFocusedIdElement=this.oLS.sGetFocusedElementId();UCF_DomUtil.refocusDomElement(UCF_DomUtil.oGetActiveElement());this.oLS.focusElement(sFocusedIdElement)}this.fireTrigger(this.sId);this.start();}}; UCF_TimeTrigger.prototype.start=function(){ this.stop();this.sTimerId=UCF_JsUtil.delayedCall(this.iDelayMilliseconds,this,"trigger");}; UCF_TimeTrigger.prototype.stop=function(){if(this.sTimerId){UCF_JsUtil.clearDelayedCall(this.sTimerId);this.sTimerId=null;}}; UCF_TimeTrigger.prototype.aAttributeNames=["bEnabled","iDelay"]; UCF_TimeTrigger.prototype.aMethodNames=[];  UCF_TimeTrigger.prototype.bEnabled=true; UCF_TimeTrigger.prototype.iDelay=5; UCF_TimeTrigger.prototype.setDefaultValues=function(){this.bEnabled=true;this.iDelay=5;}; UCF_TimeTrigger.prototype.fireTrigger=function(sId){var mParams={Id:sId};this.fireSemanticEvent("TimeTrigger","Trigger",mParams);};
 function UCF_PatternContainerSequenceItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef.firstChild;};UCF_PatternContainerSequenceItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PatternContainerSequenceItem.prototype.bGetVisible=function(){return this.oDomRef.style.display!="none";}; UCF_PatternContainerSequenceItem.prototype.setVisible=function(bVisible){var oContentConnector=UCF_DomUtil.$(this.sId+"-c"),oContentConnectorA=UCF_DomUtil.$(this.sId+"-ca"),oContentConnectorN=UCF_DomUtil.$(this.sId+"-cn"),oDomRef=this.oDomRef;oDomRefA=UCF_DomUtil.$(this.sId+"-a"),oDomRefN=UCF_DomUtil.$(this.sId+"-n");if(bVisible){oDomRef.style.display="";oDomRefN.style.display="";if(oContentConnector)oContentConnector.style.display="";if(oContentConnectorN)oContentConnectorN.style.display="";if(this.bFirstVisibleItem){oDomRefA.style.display="none";if(oContentConnectorA)oContentConnectorA.style.display="none";}else{oDomRefA.style.display="";if(oContentConnectorA)oContentConnectorA.style.display="";}}else{if(oContentConnector){oContentConnector.style.display="none";oContentConnectorN.style.display="none";oContentConnectorA.style.display="none";}oDomRef.style.display="none";oDomRefA.style.display="none";oDomRefN.style.display="none";}}; UCF_PatternContainerSequenceItem.prototype.aAttributeNames=["bRequired","sStatus","sTooltipStepNumber","sTooltipTitle","sTooltipStatus","bEnabled"]; UCF_PatternContainerSequenceItem.prototype.aMethodNames=[];  UCF_PatternContainerSequenceItem.prototype.bRequired=false; UCF_PatternContainerSequenceItem.prototype.sStatus="NONE"; UCF_PatternContainerSequenceItem.prototype.sTooltipStepNumber=''; UCF_PatternContainerSequenceItem.prototype.sTooltipTitle=''; UCF_PatternContainerSequenceItem.prototype.sTooltipStatus=''; UCF_PatternContainerSequenceItem.prototype.bEnabled=true; UCF_PatternContainerSequenceItem.prototype.setDefaultValues=function(){this.bRequired=false;this.sStatus="NONE";this.sTooltipStepNumber='';this.sTooltipTitle='';this.sTooltipStatus='';this.bEnabled=true;};
 function UCF_Tree(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.sScrollingMode!="NONE"){this.oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.addDelegate(this.oScrollArea);}this.oFocussedNode=null;this.bForwardedFromOutside=false;this.oChildrenRef=UCF_DomUtil.$(this.sId+"-child"); if(!this.oChildrenRef)this.oChildrenRef=this.oScrollDomRef;this.oSkipStartRef=UCF_DomUtil.$(this.sId+"-skipstart");this.oSkipEndRef=UCF_DomUtil.$(this.sId+"-skipend");this.oFocusDomRef=this.oSkipStart;   this.attachBrowserEvent("contextmenu",this.oRootRef);};UCF_Tree.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Tree.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_Tree.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}this.detachBrowserEvent("contextmenu",this.oRootRef);}; UCF_Tree.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled)return;var oSourceRef=oBrowserEvent.oGetSource(),sAccessFragment=oSourceRef.getAttribute("acf");if(sAccessFragment=="expall"){this.fireExpandAll(this.sId);}if(sAccessFragment=="colall"){this.fireCollapseAll(this.sId);}}; UCF_Tree.prototype.onlscollapseall=function(oBrowserEvent){if(!this.bEnabled)return;this.fireCollapseAll(this.sId);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_Tree.prototype.onlsdown=function(oBrowserEvent){if(this.oFocussedNode==null){this.focusNode(this.oGetFirstNode());}else{this.focusNode(this.oFocussedNode.oGetNextNode());}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_Tree.prototype.onlsup=function(oBrowserEvent){if(this.oFocussedNode==null){this.focusNode(this.oGetLastNode());}else{this.focusNode(this.oFocussedNode.oGetPreviousNode());}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_Tree.prototype.onlsfocus=function(oBrowserEvent){var oFocusDomRef=oBrowserEvent.oGetSource(),oFromElementRef=oBrowserEvent.oGetFromElement(),bFromOutside=!UCF_DomUtil.bContains(this.oRootRef,oFromElementRef),oNode,oControl; UCF_DomUtil.setTabIndex(this.oSkipStartRef,-1);UCF_DomUtil.setTabIndex(this.oSkipEndRef,-1); if(oFocusDomRef!=this.oSkipStartRef&&oFocusDomRef!=this.oSkipEndRef){return;} if(bFromOutside){ if(!this.oFocussedNode){oNode=this.oGetFirstNode();}else{oNode=this.oFocussedNode;} UCF_JsUtil.delayedCall(0,this,"focusNodeFromOutside",[oNode]);}oBrowserEvent.cancelBubble();}; UCF_Tree.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Tree.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Tree.prototype.collectFocusInfo=function(oFocusInfo){var sFocussedNodeId="";if(this.oFocussedNode){sFocussedNodeId=this.oFocussedNode.sId;}oFocusInfo.setApplyControl(this);oFocusInfo.addParam("sFocussedNodeId",sFocussedNodeId);}; UCF_Tree.prototype.applyFocusInfo=function(oFocusInfo){var sId=oFocusInfo.oGetParam("sFocussedNodeId"),oNode=this.oGetControlById(sId);if(!oNode){oNode=this.oGetFirstNode();}this.focusNode(oNode);}; UCF_Tree.prototype.focusNodeFromOutside=function(oNode){this.bForwardedFromOutside=true;this.focusNode(oNode);}; UCF_Tree.prototype.focusNode=function(oNode){if(oNode){if(this.oFocussedNode){UCF_DomUtil.setTabIndex(this.oFocussedNode.oFocusDomRef,-1);}UCF_DomUtil.setTabIndex(oNode.oFocusDomRef,0);UCF_DomUtil.focusDomElement(oNode.oFocusDomRef);this.oFocussedNode=oNode;}}; UCF_Tree.prototype.onScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollTop,iScrollLeft);}; UCF_Tree.prototype.collapseAllNodes=function(){var aChildNodes=this.aGetChildNodes();for(var i=0;i<aChildNodes.length;i++){aChildNodes[i].collapseRecursive();}this.focusNode(this.oGetFirstNode());}; UCF_Tree.prototype.expandAllNodes=function(){var aChildNodes=this.aGetChildNodes();for(var i=0;i<aChildNodes.length;i++){aChildNodes[i].expandRecursive();}}; UCF_Tree.prototype.aGetChildNodes=function(){if(!this.oChildrenRef)return[];var aChildRefs=this.oChildrenRef.childNodes,aChildRef,aChildNodes=[];for(var i=0;i<aChildRefs.length;i++){aChildRef=aChildRefs[i];if(aChildRef.getAttribute("ct")){aChildNodes.push(this.oGetControlByDomRef(aChildRef,true));}}return aChildNodes;}; UCF_Tree.prototype.oGetFirstNode=function(){if(!this.oChildrenRef)return null;var oNodeRef=this.oChildrenRef.firstChild,oNode=null;if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);return oNode;}; UCF_Tree.prototype.oGetLastNode=function(){if(!this.oChildrenRef)return null;var oNodeRef=this.oChildrenRef.lastChild,oNode=null,oLastChild;if(oNodeRef)oNodeRef=oNodeRef.previousSibling;if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);oLastChild=oNode.oGetLastChild();while(oLastChild){oNode=oLastChild;oLastChild=oNode.oGetLastChild();}return oNode;}; UCF_Tree.prototype.oGetNextNode=function(){return null;}; UCF_Tree.prototype.oGetPreviousNode=function(){return null;}; UCF_Tree.prototype.oGetNextSibling=function(){return null;}; UCF_Tree.prototype.oGetPreviousSibling=function(){return null;}; UCF_Tree.prototype.sGetAccChildren=function(){return this.oLS.sGetText("SAPUR_ACC_TREE_CHILDREN");}; UCF_Tree.prototype.onlsaccessibility=function(oBrowserEvent){var oFromElementRef=oBrowserEvent.oGetFromElement(),bFromOutside=!UCF_DomUtil.bContains(this.oRootRef,oFromElementRef);if(bFromOutside||this.bForwardedFromOutside){this.bForwardedFromOutside=false;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setParentText(this.sTitle);oAccessibilityHelper.setParentControlType("TR");oAccessibilityHelper.setParentTooltip(this.sTooltip);oAccessibilityHelper.addTutor("TR_TUT");}oBrowserEvent.cancelBubble();}; UCF_Tree.prototype.onmousemove=function(oBrowserEvent){this.createDragDelegate();}; UCF_Tree.prototype.createDragDelegate=function(){if(this.oDragDelegate)return;this.oDragDelegate=new(UCF_ClassLoader.oGetClass("UCF_TreeDragDelegate"))(this.oLS,this);this.addDelegate(this.oDragDelegate);}; UCF_Tree.prototype.createDropDelegate=function(){if(this.oDropDelegate)return;this.oDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_TreeDropDelegate"))(this.oLS,this);this.addDelegate(this.oDropDelegate);}; UCF_Tree.prototype.aAttributeNames=["sTitle","sTooltip","bCanCollapseAll","bCanExpandAll","bEnabled","sScrollingMode","iScrollTop","iScrollLeft","bDropBug"]; UCF_Tree.prototype.aMethodNames=["collapseAllNodes","expandAllNodes"];  UCF_Tree.prototype.sTitle=''; UCF_Tree.prototype.sTooltip=''; UCF_Tree.prototype.bCanCollapseAll=true; UCF_Tree.prototype.bCanExpandAll=false; UCF_Tree.prototype.bEnabled=true; UCF_Tree.prototype.sScrollingMode="NONE"; UCF_Tree.prototype.iScrollTop=0; UCF_Tree.prototype.iScrollLeft=0; UCF_Tree.prototype.bDropBug=false; UCF_Tree.prototype.setDefaultValues=function(){this.sTitle='';this.sTooltip='';this.bCanCollapseAll=true;this.bCanExpandAll=false;this.bEnabled=true;this.sScrollingMode="NONE";this.iScrollTop=0;this.iScrollLeft=0;this.bDropBug=false;}; UCF_Tree.prototype.fireCollapseAll=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CollapseAll)this.oLS.markDirty();this.fireSemanticEvent("Tree","CollapseAll",mParams);}; UCF_Tree.prototype.fireExpandAll=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ExpandAll)this.oLS.markDirty();this.fireSemanticEvent("Tree","ExpandAll",mParams);}; UCF_Tree.prototype.fireNodeSelect=function(sId,sNodeId){var mParams={Id:sId,NodeId:sNodeId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.NodeSelect)this.oLS.markDirty();this.fireSemanticEvent("Tree","NodeSelect",mParams);}; UCF_Tree.prototype.fireNodeDeselect=function(sId,sNodeId){var mParams={Id:sId,NodeId:sNodeId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.NodeDeselect)this.oLS.markDirty();this.fireSemanticEvent("Tree","NodeDeselect",mParams);}; UCF_Tree.prototype.fireNodeExpand=function(sId,sNodeId){var mParams={Id:sId,NodeId:sNodeId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.NodeExpand)this.oLS.markDirty();this.fireSemanticEvent("Tree","NodeExpand",mParams);}; UCF_Tree.prototype.fireNodeCollapse=function(sId,sNodeId){var mParams={Id:sId,NodeId:sNodeId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.NodeCollapse)this.oLS.markDirty();this.fireSemanticEvent("Tree","NodeCollapse",mParams);}; UCF_Tree.prototype.fireNodeContextMenu=function(sId,sNodeId,iLeft,iTop){var mParams={Id:sId,NodeId:sNodeId,Left:iLeft,Top:iTop};this.fireSemanticEvent("Tree","NodeContextMenu",mParams);}; UCF_Tree.prototype.fireNodeDrop=function(sId,sNodeId,sDropControlId){var mParams={Id:sId,NodeId:sNodeId,DropControlId:sDropControlId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.NodeDrop)this.oLS.markDirty();this.fireSemanticEvent("Tree","NodeDrop",mParams);}; UCF_Tree.prototype.fireScroll=function(sId,iScrollTop,iScrollLeft){var mParams={Id:sId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("Tree","Scroll",mParams);}; UCF_Tree.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,sNodeId,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,NodeId:sNodeId,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("Tree","Drop",mParams);}; UCF_Tree.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};this.fireSemanticEvent("Tree","Drag",mParams);};
 function UCF_GridLayoutDragDelegate(oLS,oDragSourceControl){UCF_DragDelegate.apply(this,[oLS]);this.setDragSourceControl(oDragSourceControl);};UCF_GridLayoutDragDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DragDelegate"))(); UCF_GridLayoutDragDelegate.prototype.onlsdragstart=function(oBrowserEvent){ this.oDragSourceControl.bDragStartedHere=true;var sDragSourceInfoId=this.oDragSourceControl.sDragSourceInfo;if(!sDragSourceInfoId)return;var oDragSourceInfoControl=this.oDragSourceControl.oGetControlById(sDragSourceInfoId);if(!oDragSourceInfoControl)return;var sTags=oDragSourceInfoControl.sGetTags();if(!sTags)return;if(!this.bIsDragPossible(oBrowserEvent))return;var oDragAndDropManager=oBrowserEvent.oDragAndDropManager; if(this.oDragSourceControl.mEvents.Drag){this.oDragSourceControl.fireDrag(this.oDragSourceControl.sId,sDragSourceInfoId);}var iHoveredCell=this.iGetHoveredCell(oBrowserEvent);var oTBody=this.oDragSourceControl.oDomRef.childNodes[0];this.oDraggedCell=oTBody.childNodes[iHoveredCell].cells[0];var oCellControl=this.oDragSourceControl.oGetControlByDomRef(this.oDraggedCell,true); if(oDragSourceInfoControl.mEvents.DataAccess){oDragSourceInfoControl.fireDataAccess(sDragSourceInfoId,this.oDragSourceControl.sId);}else if(oCellControl.sDragData){this.oLS.setDragData(oCellControl.sDragData,oDragSourceInfoControl.sGetMimeType());}else{ this.oLS.setDragData(oDragSourceInfoControl.sGetData(),oDragSourceInfoControl.sGetMimeType());}var oGhost=this.oGetGhost(oBrowserEvent);this.oDraggedCell.style.display="none";oBrowserEvent.bHandled=true;oBrowserEvent.cancelBubble();oDragAndDropManager.handleDefaultDragStart(this.oDragSourceControl.sId,sTags,oGhost);}; UCF_GridLayoutDragDelegate.prototype.oGetGhost=function(oBrowserEvent){var iHoveredCell=this.iGetHoveredCell(oBrowserEvent),oTBody=this.oDragSourceControl.oDomRef.childNodes[0],oCell=UCF_DomUtil.oGetFirstChild(oTBody.childNodes[iHoveredCell]),oGhostDomRef=oCell.cloneNode(true),oStyle=oGhostDomRef.style,oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oGhostDomRef),oPosition=UCF_DomUtil.oGetObjectRect(oCell),iOffsetX=oPosition.left-oBrowserEvent.oDragAndDropManager.iDragStartX,iOffsetY=oPosition.top-oBrowserEvent.oDragAndDropManager.iDragStartY;oStyle.width=oCell.offsetWidth+"px";oStyle.height=oCell.offsetHeight+"px";oGhost.applyAlphaFilter(false);oGhost.setOffset(iOffsetX,iOffsetY);return oGhost;}; UCF_GridLayoutDragDelegate.prototype.bIsDragPossible=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl();return oSourceControl&&oSourceControl.bIsDragHandle==true;}; UCF_GridLayoutDragDelegate.prototype.onlsdragend=function(oBrowserEvent){var bDropHandled=oBrowserEvent.bDropHandled; if(this.oDraggedCell&&!bDropHandled){this.oDraggedCell.style.display="block";this.oDraggedCell=null;}this.oDragSourceControl.bDragStartedHere=false;};UCF_GridLayoutDragDelegate.prototype.iGetHoveredCell=function(oBrowserEvent){var oDomRef=this.oDragSourceControl.oDomRef;if(oDomRef.childNodes.length!=1)return-1;var oTBody=oDomRef.childNodes[0];var aTRs=oTBody.childNodes;var oSource=oBrowserEvent.oGetSource();for(var x=0;x<aTRs.length;x++){if(aTRs[x].childNodes.length!=1)return-1;var oTD=aTRs[x].childNodes[0];if(UCF_DomUtil.bContains(oTD,oSource)){return x;}}return-1;};
 function UCF_AccessibilityInfo(){UCF_Object.apply(this);this.bRunning=false;};UCF_AccessibilityInfo.prototype=new UCF_Object(); UCF_AccessibilityInfo.prototype.trigger=function(){ if(!this.bRunning){this.start();}else{this.stop();}}; UCF_AccessibilityInfo.prototype.start=function(){if(!UCF_System.bClientDebug)return;var oDoc=UCF_DomUtil.oGetDocument();var oDiv=oDoc.createElement("div");with(oDiv.style){position="absolute";left="10px";height="2em"; color="#000"; backgroundColor="#FF7";border="1px solid #888";margin="3px";padding="2px";overflow="auto";fontSize="0.7em";zIndex=9999; filter="alpha(opacity=100)";opacity=1;}if(UCF_System.bIs508){oDiv.innerHTML="Accessibility Info - Ready";}else{oDiv.innerHTML="Accessibility Info - Accessibility mode is disabled";}oDoc.body.appendChild(oDiv);this.oDiv=oDiv;UCF_DomUtil.attachEvent(this.oDiv,"selectstart",function(){return false;});this.updatePanePosition();var oHelper=this;this.sOut="";if(UCF_System.bIs508){this.oHelperInterval=setInterval(function(){oHelper.updateAccessibilityInfo()},250);}this.eventForwarder=function(){oHelper.onScrollOrResize();};UCF_DomUtil.attachEvent(oDiv,"click",function(){if(window.clipboardData&&clipboardData.setData){clipboardData.setData("Text",oHelper.sOut);}return false;});UCF_DomUtil.attachEvent(window,"scroll",this.eventForwarder);UCF_DomUtil.attachEvent(window,"resize",this.eventForwarder);this.bRunning=true;}; UCF_AccessibilityInfo.prototype.stop=function(){var oDoc=UCF_DomUtil.oGetDocument();oDoc.body.removeChild(this.oDiv);if(this.oHelperInterval){clearInterval(this.oHelperInterval);}UCF_DomUtil.detachEvent(window,"scroll",this.eventForwarder);UCF_DomUtil.detachEvent(window,"resize",this.eventForwarder);this.bRunning=false;}; UCF_AccessibilityInfo.prototype.updateAccessibilityInfo=function(){try{var oDoc=UCF_DomUtil.oGetDocument();if(oDoc.activeElement&&oDoc.activeElement==this.oDiv)return;if(UCF_System.sAccessibility=="ARIA"){if(oDoc.activeElement){var sOut=UCF_DomUtil.sGetARIAInfo(oDoc.activeElement);if(this.sOut!=sOut){this.sOut=sOut;}this.oDiv.innerHTML="ARIAINFO: "+sOut;}else if(oDoc.activeElement==oDoc.body){this.oDiv.innerHTML="ARIA Info - Ready";}else{this.oDiv.innerHTML="ARIA Info - No text available";}}else{if(oDoc.activeElement&&oDoc.activeElement.title){var sOut=oDoc.activeElement.title;if(this.sOut!=sOut){this.sOut=sOut;}this.oDiv.innerHTML="ACC: "+oDoc.activeElement.title;}else if(oDoc.activeElement==oDoc.body){this.oDiv.innerHTML="Accessibility Info - Ready";}else{this.oDiv.innerHTML="ACC: No text available";}}}catch(e){}}; UCF_AccessibilityInfo.prototype.onScrollOrResize=function(){this.updatePanePosition();}; UCF_AccessibilityInfo.prototype.updatePanePosition=function(){var oDoc=UCF_DomUtil.oGetDocument();this.oDiv.style.top=oDoc.body.clientHeight-this.oDiv.offsetHeight-6+oDoc.body.scrollTop+"px";this.oDiv.style.width=oDoc.body.clientWidth-20+"px";};
 function UCF_ItemListItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef;};UCF_ItemListItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ItemListItem.prototype.aAttributeNames=[]; UCF_ItemListItem.prototype.aMethodNames=[];  UCF_ItemListItem.prototype.setDefaultValues=function(){};
 function UCF_CalendarDayView(oDomRef,oLS){UCF_Calendar.apply(this,[oDomRef,oLS]);this.bInitial=true;};UCF_CalendarDayView.prototype=new(UCF_ClassLoader.oGetClass("UCF_Calendar"))(); UCF_CalendarDayView.prototype.initialize=function(){var oFirstCellDomRef=UCF_DomUtil.$(this.sId+"-start");if(!oFirstCellDomRef)return;var oFirstRowDomRef=oFirstCellDomRef.parentNode,oTBodyDomRef=oFirstRowDomRef.parentNode,iNumberOfRows=oTBodyDomRef.childNodes.length;this.fRowHeight=oTBodyDomRef.offsetHeight / iNumberOfRows;if(this.bInitial){ this.oScrollAreaDomRef=UCF_DomUtil.$(this.sId+"-scrl");if(!this.bScrollable){this.oScrollAreaDomRef.style.height=this.oScrollAreaDomRef.scrollHeight;this.oScrollAreaDomRef.parentNode.style.height=this.oScrollAreaDomRef.scrollHeight;}this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oScrollAreaDomRef);this.oScrollArea.setScrollPosition(Math.floor(this.fRowHeight*this.fScrollTop),0);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.attachBrowserEvent("scroll",this.oScrollAreaDomRef);this.addDelegate(this.oScrollArea);this.attachBrowserEvent("resize",this.oDomRef);this.bInitial=false;} var oDomColumns=this.oDomRef.getElementsByTagName("TH"),oTable=UCF_DomUtil.$(this.sId+"-tbl"),iMinWidth=((oDomColumns.length+1)*50);if(this.oDomRef.offsetWidth<iMinWidth){oTable.style.width=iMinWidth+"px";if(!this.bInitial)this.detachBrowserEvent("resize",this.oDomRef);this.oDomRef.style.overflowX="visible";this.oDomRef.offsetWidth;if(!this.bInitial)this.attachBrowserEvent("resize",this.oDomRef);}else{oTable.style.width="100%";}this.initializeMatrix();for(var i=0;i<this.aColumns.length;i++){UCF_DomUtil.setTabIndex(this.aColumns[i].oDomRef,0);} var oFullDayEntriesDomRef=UCF_DomUtil.$(this.sId+"-entries-fullday"),oEntriesDomRef=UCF_DomUtil.$(this.sId+"-entries"); if(oFullDayEntriesDomRef){this.aFullEntries=this.getFullDayEntries(oFullDayEntriesDomRef.childNodes);this.aFullEntries.sort(this.sortColEntries);this.drawFulldayEntries();} if(oEntriesDomRef){this.aEntries=this.getEntries(oEntriesDomRef.childNodes);this.aEntries.sort(this.sortRowEntries);for(var i=0;i<this.aEntries.length;i++){this.aEntries[i].iIndex=i;}this.drawEntries();}this.aKeyboardColumnNavigation=[];this.aColumnEntryCounts=[];this.aColumnFullEntryCounts=[];for(var i=0;i<this.aColumns.length;i++){this.aKeyboardColumnNavigation[i]=[];this.aColumnEntryCounts[i]=0;this.aColumnFullEntryCounts[i]=0;this.aKeyboardColumnNavigation[i].push(this.aColumns[i].oDomRef);for(var j=0;j<this.aFullEntries.length;j++){var iStartColumn=Math.floor(this.aFullEntries[j].fStartColumn);var iEndColumn=Math.ceil(this.aFullEntries[j].fStartColumn+this.aFullEntries[j].fDuration);if(iStartColumn<=i&&iEndColumn>i&&(this.aFullEntries[j].bSelectable||UCF_System.bIs508)){this.aKeyboardColumnNavigation[i].push(this.aFullEntries[j].oDomRef);this.aColumnFullEntryCounts[i]++;this.aFullEntries[j].iDayIndex=this.aColumnFullEntryCounts[i];}}for(var j=0;j<this.aEntries.length;j++){var iStartColumn=Math.floor(this.aEntries[j].fStartColumn);if(iStartColumn==i&&(this.aEntries[j].bSelectable||UCF_System.bIs508)){this.aKeyboardColumnNavigation[i].push(this.aEntries[j].oDomRef);this.aColumnEntryCounts[i]++;this.aEntries[j].iDayIndex=this.aColumnEntryCounts[i];}}}}; UCF_CalendarDayView.prototype.destroy=function(){this.detachBrowserEvent("resize",this.oDomRef);this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}; UCF_CalendarDayView.prototype.initializeMatrix=function(){this.aColumns=this.aGetColumns();this.aRows=this.aGetRows();var oColCells=this.oScrollAreaDomRef.getElementsByTagName("TD");for(var iCols=0;iCols<this.aColumns.length;iCols++){this.aColumns[iCols].iRowsPerDay=this.aRows.length;if(iCols<this.aColumns.length-1){if(!oColCells[iCols+1].currentStyle){ this.aColumns[iCols].oRect.width--;}oColCells[iCols].style.width=this.aColumns[iCols].oRect.width;}}}; UCF_CalendarDayView.prototype.aGetRows=function(){var aDomRows=this.oScrollAreaDomRef.getElementsByTagName("TR"),aRows=[];for(var i=0;i<aDomRows.length;i++){var oRect=this.getRect(aDomRows[i]);aRows.push({oRect:oRect,oDomRef:aDomRows[i]});}return aRows;}; UCF_CalendarDayView.prototype.getFullDayEntries=function(aEntryDomRefs){if(!aEntryDomRefs&&aEntryDomRefs.length==0)return null;var aEntries=[];for(var i=0;i<aEntryDomRefs.length;i++){if(aEntryDomRefs[i].nodeType==1){var oEntry=this.getEntry(aEntryDomRefs[i]);aEntries.push(oEntry);oEntry.oParentControl=this;}}return aEntries;}; UCF_CalendarDayView.prototype.getEntries=function(aEntryDomRefs){if(!aEntryDomRefs&&aEntryDomRefs.length==0)return null;var aEntries=[],iEntryLength=aEntryDomRefs.length;for(var i=0;i<iEntryLength;i++){if(aEntryDomRefs[i].nodeType==1){ var oEntry=this.getEntry(aEntryDomRefs[i]); oEntry.iEndColumn=oEntry.iStartColumn;oEntry.fEndColumn=oEntry.fStartColumn; oEntry.bRowSpanned=false;var fDuration=oEntry.fDuration,iCurrentCol=oEntry.iStartColumn;if(iCurrentCol>=this.aColumns.length)continue;if(oEntry.fStartRow>this.aColumns[iCurrentCol].iRowsPerDay)continue;if(fDuration+oEntry.fStartRow>this.aColumns[iCurrentCol].iRowsPerDay){while(fDuration>0){if(iCurrentCol>=this.aColumns.length)break;if(oEntry.fStartRow>this.aColumns[iCurrentCol].iRowsPerDay)break;oEntry.iEndColumn++;oEntry.fEndColumn++;fDuration=fDuration-this.aColumns[iCurrentCol].iRowsPerDay;iCurrentCol++;}}if(oEntry.iEndColumn>oEntry.iStartColumn){var iEndColumn=oEntry.iEndColumn,iStartColumn=oEntry.iStartColumn; var fDuration=oEntry.fDuration;oEntry.fDuration=this.aColumns[oEntry.iStartColumn].iRowsPerDay-oEntry.fStartRow;fDuration-=oEntry.fDuration;fDuration++;oEntry.iStartColumn=iStartColumn;oEntry.iEndColumn=iStartColumn;var iIndex=0;for(var j=iStartColumn+1;j<iEndColumn+1;j++){if(!this.aColumns[j])break; iIndex++;if(UCF_DomUtil.$(oEntry.sId+"-clone"+iIndex))break;var oEntryDomClone=oEntry.oDomRef.cloneNode(true);oEntryDomClone.setAttribute("id",oEntry.sId+"-clone-"+iIndex);oEntry.oDomRef.parentNode.appendChild(oEntryDomClone);var oEntryClone=this.getEntry(oEntryDomClone);oEntry.bOpenEnd=true;oEntryClone.iStartColumn=j;oEntryClone.fStartColumn=j;oEntryClone.iEndColumn=j;oEntryClone.fStartRow=0; oEntryClone.bRowSpanned=false;if(fDuration<this.aColumns[j].iRowsPerDay){oEntryClone.fDuration=fDuration-1;}else{oEntryClone.fDuration=this.aColumns[j].iRowsPerDay;}fDuration=fDuration-oEntryClone.fDuration;oEntryClone.fEndRow=oEntryClone.fStartRow+oEntryClone.fDuration;oEntryClone.iEndRow=Math.floor(oEntryClone.fEndRow);oEntryClone.setCalendar(this);if(fDuration<this.aColumns[j].iRowsPerDay){oEntryClone.bOpenStart=true;}else{oEntryClone.bOpenStart=true;oEntryClone.bOpenEnd=true;}oEntryClone.bIsClone=true;aEntries.push(oEntryClone);if(fDuration<=0)break;}}aEntries.push(oEntry);oEntry.setCalendar(this);}}return aEntries;}; UCF_CalendarDayView.prototype.onclick=function(oBrowserEvent){ var oEventDomRef=oBrowserEvent.oGetSource(),oCellRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"cidx");if(oCellRef&&!oBrowserEvent.bGetCancelBubble()){var iRow=parseInt(oCellRef.getAttribute("ridx")),iCol=parseInt(oCellRef.getAttribute("cidx")),bFullDay=oCellRef.getAttribute("fr")!=null;if(isNaN(iRow)){this.fireHeaderSelect(this.sId,iCol);}else{this.fireCellSelect(this.sId,iRow,iCol,bFullDay);}} var oSourceControl=oBrowserEvent.oGetSourceControl();if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")){var iScrollTop=this.oScrollAreaDomRef.scrollTop;this.focusElementFromNavigation(oSourceControl.oDomRef);if(iScrollTop>0){this.oScrollArea.setScrollPosition(iScrollTop,0);}}else{var oTh=UCF_DomUtil.oGetParentByTagName(oEventDomRef,"TH");if(oTh){this.focusElementFromNavigation(oTh);}}}; UCF_CalendarDayView.prototype.onresize=function(oBrowserEvent){this.oDomRef.style.overflowX="hidden";if(this.sTimerId)UCF_JsUtil.clearDelayedCall(this.sTimerId);this.sTimerId=UCF_JsUtil.delayedCall(10,this,"initialize");oBrowserEvent.cancelBubble();}; UCF_CalendarDayView.prototype.onScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop"),fScrollTop=iScrollTop / this.fRowHeight;this.fireScroll(this.sId,fScrollTop);}; UCF_CalendarDayView.prototype.calculateFulldayEntryPositions=function(){var oEntries=this.aFullEntries,iColCount=this.aColumns.length,iEndCol=0,aParallelRows=new Array(),aEndCols=new Array();aEndCols[0]=0; aParallelRows[0]=new Array();  for(var n=0;n<oEntries.length;n++){var iLevelCount=0; while(aEndCols[iLevelCount]>oEntries[n].fStartColumn&&iLevelCount<aEndCols.length){iLevelCount++;if(!aParallelRows[iLevelCount]){aParallelRows[iLevelCount]=new Array();}}aEndCols[iLevelCount]=oEntries[n].fEndColumn;aParallelRows[iLevelCount].push(oEntries[n]);oEntries[n].iLevel=iLevelCount; if(iEndCol<oEntries[n].fEndColumn){iEndCol=oEntries[n].fEndColumn;}} for(var x=0;x<aParallelRows.length;x++){for(var y=0;y<aParallelRows[x].length;y++){aParallelRows[x][y].iLevel=x;aParallelRows[x][y].iMaxLevels=aEndCols.length;}}this.aEndCols=aEndCols;}; UCF_CalendarDayView.prototype.drawFulldayEntries=function(){this.calculateFulldayEntryPositions();var oFullDayCell=UCF_DomUtil.$(this.sId+"-fixed"),aFullEntries=this.aFullEntries,aEndCols=this.aEndCols;if(!oFullDayCell)return; var iHeight=(5+(aEndCols.length*16));if(oFullDayCell.offsetHeight!=iHeight){oFullDayCell.style.height=iHeight+"px";}for(var n=0;n<aFullEntries.length;n++){this.drawFulldayEntry(aFullEntries[n]);}}; UCF_CalendarDayView.prototype.drawFulldayEntry=function(oFulldayEntry){var iStartColumn=Math.floor(oFulldayEntry.fStartColumn),oTbl=UCF_DomUtil.$(this.sId+"-tbl"),oRectOrig=this.aColumns[iStartColumn].oRect,iColWidth=oRectOrig.width,oRect={top:oRectOrig.top,left:oRectOrig.left+1,width:oRectOrig.width,height:oRectOrig.height,right:oRectOrig.right};oRect.top=oRect.top+oRect.height;oRect.height=16; oRect.top=oRect.top+((oRect.height*oFulldayEntry.iLevel)+1);   for(var i=1;i<oFulldayEntry.fDuration;i++){if(this.aColumns.length==i+iStartColumn){oFulldayEntry.bOpenEnd=true;break;}oRect.width+=this.aColumns[i+iStartColumn].oRect.width;}var fLastColDuration=oFulldayEntry.fDuration-Math.floor(oFulldayEntry.fDuration);if(fLastColDuration>0){var iLastColDurationWidth=this.aColumns[Math.ceil(oFulldayEntry.fDuration)+iStartColumn].oRect.width*fLastColDuration;oRect.width+=iLastColDurationWidth;} if(oRect.width+oRect.left>oTbl.offsetWidth){oRect.width=oTbl.offsetWidth-oRect.left-1;}oFulldayEntry.applyStyles();oFulldayEntry.setPosition(oRect.left,oRect.top,oRect.width,oRect.height,oRect.right);}; UCF_CalendarDayView.prototype.calculateEntryPositions=function(){var aEntries=this.aEntries,iColCount=this.aColumns.length,aEntryCols=new Array(); for(var i=0;i<iColCount;i++){aEntryCols.push(new Array());} for(var i=0;i<aEntries.length;i++){var iStartCol=Math.floor(aEntries[i].fStartColumn);aEntryCols[iStartCol].push(aEntries[i]);} for(var i=0;i<iColCount;i++){var iEndRow=0,aParallelCols=new Array(),aEndRows=new Array();aEndRows.push(0);aParallelCols.push(new Array());for(var n=0;n<aEntryCols[i].length;n++){var iLevelCount=0;while(aEndRows[iLevelCount]>aEntryCols[i][n].fStartRow&&iLevelCount<aEndRows.length){iLevelCount++;if(!aParallelCols[iLevelCount])aParallelCols[iLevelCount]=new Array();}aEndRows[iLevelCount]=aEntryCols[i][n].fEndRow;aParallelCols[iLevelCount].push(aEntryCols[i][n]);aEntryCols[i][n].iLevel=iLevelCount;if(iEndRow<aEntryCols[i][n].fEndRow)iEndRow=aEntryCols[i][n].fEndRow;} for(var x=0;x<aParallelCols.length;x++){for(var y=0;y<aParallelCols[x].length;y++){aParallelCols[x][y].iLevel=x;aParallelCols[x][y].iMaxLevels=aEndRows.length;aParallelCols[x][y].iSpannedColumns=aEndRows.length-x;bFound=false;for(iNextCol=x+1;iNextCol<aParallelCols.length;iNextCol++){for(iNextColEntryCount=0;iNextColEntryCount<aParallelCols[iNextCol].length;iNextColEntryCount++){if(!(aParallelCols[x][y].fEndRow<aParallelCols[iNextCol][iNextColEntryCount].fStartRow||aParallelCols[x][y].fStartRow>aParallelCols[iNextCol][iNextColEntryCount].fEndRow)){bFound=true;break;}}if(bFound)break;}if(bFound)aParallelCols[x][y].iSpannedColumns=1;}}}}; UCF_CalendarDayView.prototype.drawEntries=function(){this.calculateEntryPositions();for(var i=0;i<this.aEntries.length;i++){this.drawEntry(this.aEntries[i]);}}; UCF_CalendarDayView.prototype.drawEntry=function(oEntry){var iColSpace=6,iStartColumn=Math.floor(oEntry.fStartColumn),oRectOrig=this.aColumns[iStartColumn].oRect,oRect={top:oRectOrig.top,left:oRectOrig.left+1,width:oRectOrig.width,height:oRectOrig.height,right:oRectOrig.right},iColWidth=oRect.width-iColSpace; if(this.bScrollable&&oEntry.fStartColumn==this.aColumns.length-1){iColWidth=iColWidth-16;}var iMinWidth=Math.floor(iColWidth / oEntry.iMaxLevels);oRect.left=oRect.left+oEntry.iLevel*iMinWidth-1,oRect.right=oRect.right+oEntry.iLevel*iMinWidth-1,oRect.top=oRect.top+Math.floor(this.fRowHeight*oEntry.fStartRow),oRect.width=iMinWidth*oEntry.iSpannedColumns,oRect.height=Math.ceil(this.fRowHeight*oEntry.fDuration);   var iColLeft=oRect.left-oRectOrig.left; if(iColLeft+oRect.width==iMinWidth*oEntry.iMaxLevels){oRect.width=iColWidth-(iMinWidth*oEntry.iLevel-1);}oEntry.applyStyles();oEntry.setPosition(oRect.left,oRect.top,oRect.width,oRect.height,oRect.right);}; UCF_CalendarDayView.prototype.onlsnext=function(oBrowserEvent){if(!this.oFocusPosition)return;var iKey=oBrowserEvent.iKeyCode(),bAlt=oBrowserEvent.bAlt();if(iKey==UCF_KeyCodes.ARROW_UP&&!bAlt&&this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn][this.oFocusPosition.iItem].tagName!="TH"){this.focusItem(this.oFocusPosition.iColumn,0);}else{this.focusItem(this.oFocusPosition.iColumn+1,0);}}; UCF_CalendarDayView.prototype.onlsprevious=function(oBrowserEvent){if(!this.oFocusPosition)return;var iKey=oBrowserEvent.iKeyCode(),bAlt=oBrowserEvent.bAlt();if(iKey==UCF_KeyCodes.ARROW_UP&&!bAlt&&this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn][this.oFocusPosition.iItem].tagName!="TH"){this.focusItem(this.oFocusPosition.iColumn,0);}else{this.focusItem(this.oFocusPosition.iColumn-1,0);}}; UCF_CalendarDayView.prototype.focusItem=function(iColumn,iItem){var oDomRef=null;if(this.oFocusPosition){oDomRef=this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn][this.oFocusPosition.iItem];if(oDomRef)UCF_DomUtil.setTabIndex(oDomRef,-1);}if(!this.aColumns)return;if(iColumn==-1){iColumn=this.aColumns.length-1;}else if(iColumn>this.aColumns.length-1){iColumn=0;}if(iItem==-1){iColumn--;iItem=this.aKeyboardColumnNavigation[iColumn].length-1;}else if(iItem>this.aKeyboardColumnNavigation[iColumn].length-1){iColumn++;iItem=0;}if(iColumn==-1){iColumn=this.aColumns.length-1;iItem=0;}else if(iColumn>this.aColumns.length-1){iColumn=0;iItem=0;}this.oFocusPosition={iColumn:iColumn,iItem:iItem};var oDomRef=this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn][this.oFocusPosition.iItem];if(oDomRef){UCF_DomUtil.setTabIndex(oDomRef,0);oDomRef.focus();}}; UCF_CalendarDayView.prototype.focusElementFromNavigation=function(oDomRef){if(!this.aKeyboardColumnNavigation)return;for(var i=0;i<this.aKeyboardColumnNavigation.length;i++){for(var j=0;j<this.aKeyboardColumnNavigation[i].length;j++){if(oDomRef==this.aKeyboardColumnNavigation[i][j]){this.focusItem(i,j);return;}}}this.focusItem(0,0);}; UCF_CalendarDayView.prototype.onlsfocus=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource();if(oEventDomRef==this.oFocusDomRef){UCF_DomUtil.setTabIndex(this.oFocusDomRef,-1);this.bInitialFocus=true;this.focusItem(0,0);}if(!this.oFocusPosition){this.focusItem(0,0);oBrowserEvent.cancel();}}; UCF_CalendarDayView.prototype.onlstop=function(oBrowserEvent){if(!this.oFocusPosition)return;this.focusItem(this.oFocusPosition.iColumn,0);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlsbottom=function(oBrowserEvent){if(!this.oFocusPosition)return;this.focusItem(this.oFocusPosition.iColumn,this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn].length-1);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlshome=function(oBrowserEvent){if(!this.aKeyboardColumnNavigation)return;this.focusItem(0,0);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlsend=function(oBrowserEvent){if(!this.aKeyboardColumnNavigation)return;this.focusItem(this.aKeyboardColumnNavigation.length-1,0);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlspageup=function(oBrowserEvent){if(!this.oFocusPosition)return;this.focusItem(this.oFocusPosition.iColumn,0);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlspagedown=function(oBrowserEvent){if(!this.oFocusPosition)return;this.focusItem(this.oFocusPosition.iColumn,this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn].length-1);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_CalendarDayView.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_CalendarDayView.prototype.onlstabnext=function(oBrowserEvent){if(!this.oFocusPosition)return;if(this.oFocusPosition&&this.oFocusPosition.iColumn==this.aKeyboardColumnNavigation.length-1&&this.oFocusPosition.iItem==this.aKeyboardColumnNavigation[this.oFocusPosition.iColumn].length-1){if(this.focusNextControl()){UCF_DomUtil.setTabIndex(this.oFocusDomRef,0);oBrowserEvent.cancel();}return;}this.focusItem(this.oFocusPosition.iColumn,this.oFocusPosition.iItem+1);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.onlstabprevious=function(oBrowserEvent){if(this.oFocusPosition.iColumn==0&&this.oFocusPosition.iItem==0){if(this.focusPreviousControl()){UCF_DomUtil.setTabIndex(this.oFocusDomRef,0);oBrowserEvent.cancel();}return;}this.focusItem(this.oFocusPosition.iColumn,this.oFocusPosition.iItem-1);oBrowserEvent.cancel();}; UCF_CalendarDayView.prototype.collectFocusInfo=function(oFocusInfo){if(this.oFocusPosition){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iColumn",this.oFocusPosition.iColumn);oFocusInfo.addParam("iItem",this.oFocusPosition.iItem);}}; UCF_CalendarDayView.prototype.applyFocusInfo=function(oFocusInfo){this.oFocusPosition={iColumn:oFocusInfo.oGetParam("iColumn"),iItem:oFocusInfo.oGetParam("iItem")};this.focusItem(this.oFocusPosition.iColumn,this.oFocusPosition.iItem);}; UCF_CalendarDayView.prototype.onlsaccessibility=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl();if(oSourceControl!=this&&!(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource(),bIsColumn=oSource.tagName=="TH";if(bIsColumn){var sText="";if(this.bInitialFocus){if(this.oDomRef.getAttribute("tp")=="D"){oAccessibilityHelper.setControlType("CAL_D");}else{oAccessibilityHelper.setControlType("CAL_MD",new Array(""+(oSource.parentNode.childNodes.length-1)));}sText+=this.sAccessibilityDescription;oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addTutor("CAL_D_TUT");this.bInitialFocus=false;}if(oSource.parentNode.childNodes.length>2){if(sText.length>0)sText+=" - ";sText+=UCF_DomUtil.sGetInnerText(oSource);sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL",new Array(""+oSource.cellIndex,""+(oSource.parentNode.childNodes.length-1)));var iFullDayEntriesOfDay=this.aColumnFullEntryCounts[oSource.cellIndex-1],iEntriesOfDay=this.aColumnEntryCounts[oSource.cellIndex-1];if(iEntriesOfDay==1)sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_ENTRY_1");else sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_ENTRY",new Array(""+iEntriesOfDay));if(iFullDayEntriesOfDay==1)sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_FULLENTRY_1");else sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_FULLENTRY",new Array(""+iFullDayEntriesOfDay));oAccessibilityHelper.addTutor("CAL_DCOL_ENTRY_TUT");oAccessibilityHelper.addTutor("CAL_DCOL_TUT");if(this.bIsClickable)oAccessibilityHelper.addTutor("CAL_DCOL_CLK_TUT");}else{if(sText.length>0)sText+=" - ";sText+=UCF_DomUtil.sGetInnerText(oSource);if(this.aEntries.length==1)sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_ENTRY_1");else sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_ENTRY",new Array(""+this.aEntries.length));if(this.aFullEntries.length==1)sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_FULLENTRY_1");else sText+=" - "+oAccessibilityHelper.sGetText("CAL_DCOL_FULLENTRY",new Array(""+this.aFullEntries.length));oAccessibilityHelper.addTutor("CAL_DCOL_ENTRY_TUT");}oAccessibilityHelper.setText(sText);oBrowserEvent.cancelBubble();}else if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")){var oEntry=oBrowserEvent.oGetSourceControl();oAccessibilityHelper.setItemIndex(oEntry.iDayIndex);if(oEntry.bFullDay){oAccessibilityHelper.setItemCount(this.aColumnFullEntryCounts[this.oFocusPosition.iColumn]);}else{oAccessibilityHelper.setItemCount(this.aColumnEntryCounts[this.oFocusPosition.iColumn]);}var oLegendDomRef=UCF_DomUtil.$(this.sId+'-legend');if(oLegendDomRef)oAccessibilityHelper.setLegendJSDomRef(oLegendDomRef);var sSemantic=oSourceControl.bStriped?oSourceControl.sSemanticColor+"_STRIPED":oSourceControl.sSemanticColor;oAccessibilityHelper.addSemantic(sSemantic);oBrowserEvent.cancelBubble();}}; UCF_CalendarDayView.prototype.aAttributeNames=["bScrollable","fScrollTop","sTooltip","sAccessibilityDescription"]; UCF_CalendarDayView.prototype.aMethodNames=[];  UCF_CalendarDayView.prototype.bScrollable=true; UCF_CalendarDayView.prototype.fScrollTop=0; UCF_CalendarDayView.prototype.sTooltip=''; UCF_CalendarDayView.prototype.sAccessibilityDescription=''; UCF_CalendarDayView.prototype.setDefaultValues=function(){this.bScrollable=true;this.fScrollTop=0;this.sTooltip='';this.sAccessibilityDescription='';}; UCF_CalendarDayView.prototype.fireCellSelect=function(sId,iRowIndex,iColIndex,bFullday){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex,Fullday:bFullday};this.fireSemanticEvent("CalendarDayView","CellSelect",mParams);}; UCF_CalendarDayView.prototype.fireCellSelectMore=function(sId,iRowIndex,iColIndex){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellSelectMore)this.oLS.markDirty();this.fireSemanticEvent("CalendarDayView","CellSelectMore",mParams);}; UCF_CalendarDayView.prototype.fireHeaderSelect=function(sId,iColIndex){var mParams={Id:sId,ColIndex:iColIndex};this.fireSemanticEvent("CalendarDayView","HeaderSelect",mParams);}; UCF_CalendarDayView.prototype.fireScroll=function(sId,fScrollTop){var mParams={Id:sId,ScrollTop:fScrollTop};this.fireSemanticEvent("CalendarDayView","Scroll",mParams);};
function UCF_ComboBoxInplaceEdit(oDomRef,oLS){UCF_ComboBox.apply(this,[oDomRef,oLS]);};UCF_ComboBoxInplaceEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_ComboBox"))();UCF_ComboBoxInplaceEdit.prototype.onlsblur=function(oBrowserEvent){if(!this.bNoBlur){this.enterViewMode();}UCF_ComboBox.prototype.onlsblur.call(this,oBrowserEvent);};UCF_ComboBoxInplaceEdit.prototype.onlsfocus=function(oBrowserEvent){this.enterEditMode();UCF_ComboBox.prototype.onlsfocus.call(this,oBrowserEvent);};UCF_ComboBoxInplaceEdit.prototype.enterEditMode=function(){if(this.bEnabled&&!this.bReadonly){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldInplaceEdit");}};UCF_ComboBoxInplaceEdit.prototype.enterViewMode=function(){if(this.bEnabled&&!this.bReadonly){if(this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")==-1)UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldInplaceEdit");}};UCF_ComboBoxInplaceEdit.prototype.onmouseover=function(oBrowserEvent){UCF_ComboBox.prototype.onmouseover.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldFocus");}};UCF_ComboBoxInplaceEdit.prototype.onmouseout=function(oBrowserEvent){UCF_ComboBox.prototype.onmouseout.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");}};
 function UCF_ResizeEventHelper(fHandler){this.fHandler=fHandler;this.aResizeElements=[];this.sInterval=null;};UCF_ResizeEventHelper.prototype=new UCF_Object(); UCF_ResizeEventHelper.prototype.I_INTERVAL=200; UCF_ResizeEventHelper.prototype.attachEvent=function(oDomRef){var iWidth=oDomRef.offsetWidth,iHeight=oDomRef.offsetHeight; this.aResizeElements.push({oDomRef:oDomRef,iWidth:iWidth,iHeight:iHeight}); if(!this.sInterval){this.sInterval=UCF_JsUtil.intervalCall(this.I_INTERVAL,this,"checkSizes");}}; UCF_ResizeEventHelper.prototype.detachEvent=function(oDomRef){ var oResizeElement;for(var i=0;i<this.aResizeElements.length;i++){oResizeElement=this.aResizeElements[i];if(oResizeElement.oDomRef==oDomRef){this.aResizeElements.splice(i,1);break;}} if(this.aResizeElements.length==0){UCF_JsUtil.clearIntervalCall(this.sInterval);this.sInterval=null;}}; UCF_ResizeEventHelper.prototype.checkSizes=function(){var oResizeElement,oDomRef;for(var i=0;i<this.aResizeElements.length;i++){oResizeElement=this.aResizeElements[i];oDomRef=oResizeElement.oDomRef;if(oDomRef.offsetWidth!=oResizeElement.iWidth||oDomRef.offsetHeight!=oResizeElement.iHeight){oResizeElement.iWidth=oDomRef.offsetWidth;oResizeElement.iHeight=oDomRef.offsetHeight;this.fHandler(this.oCreatePseudoEvent(oDomRef));}}}; UCF_ResizeEventHelper.prototype.oCreatePseudoEvent=function(oDomRef){var oDomEvent={type:"resize",target:oDomRef,currentTarget:oDomRef,bubbles:true,cancelable:true,isTrusted:true};return oDomEvent;};
 function UCF_TextEdit(oDomRef,oLS){ if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);this.attachBrowserEvent("blur",oDomRef); this.bIgnoreDefaultButton=true;this.bAllowTextSelection=true;  if(this.bUsedInSapTable)this.bNavigation=false;else this.bNavigation=true;var oScrollDomRef=UCF_DomUtil.$(this.sId);this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(oScrollDomRef);this.attachBrowserEvent("scroll",oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onAreaScroll");this.addDelegate(this.oScrollArea); this.sOldValue=this.oDomRef.value; this.bIsDirty=false; this.iSelectionStart=0;this.iSelectionEnd=0;};UCF_TextEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TextEdit.prototype.initialize=function(){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}; UCF_TextEdit.prototype.destroy=function(){this.detachBrowserEvent("blur",this.oDomRef);this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}; UCF_TextEdit.prototype.collectFocusInfo=function(oFocusInfo){var iCursorPosX=UCF_DomUtil.iGetCursorPos(this.oDomRef);if(iCursorPosX>=0){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iCursorPosX",iCursorPosX);}if(this.bUsedInSapTable){oFocusInfo.addParam("bNavigation",this.bNavigation);}}; UCF_TextEdit.prototype.applyFocusInfo=function(oFocusInfo){var iCursorPosX=oFocusInfo.oGetParam("iCursorPosX");this.oDomRef.focus();if(iCursorPosX>=0){UCF_DomUtil.setCursorPos(this.oDomRef,iCursorPosX);}if(this.bUsedInSapTable){this.bNavigation=oFocusInfo.oGetParam("bNavigation");}}; UCF_TextEdit.prototype.onlsleft=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlsright=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlsup=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlsdown=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlshome=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlsend=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_TextEdit.prototype.onlsexpand=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_TextEdit.prototype.onlscollapse=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_TextEdit.prototype.onlsblur=function(oBrowserEvent){ if(this.bUsedInSapTable){this.bNavigation=false;} this.removeFocusStyles(); this.iSelectionStart=UCF_DomUtil.iGetSelectionStart(this.oDomRef);this.iSelectionEnd=UCF_DomUtil.iGetSelectionEnd(this.oDomRef); this.prepareFireChange();}; UCF_TextEdit.prototype.onblur=function(oBrowserEvent){ this.prepareFireChange();}; UCF_TextEdit.prototype.ondblclick=function(oBrowserEvent){var iSelectionStart=UCF_DomUtil.iGetSelectionStart(this.oDomRef);;var iSelectionEnd=UCF_DomUtil.iGetSelectionEnd(this.oDomRef);;this.fireDoubleClick(this.sId,iSelectionStart,iSelectionEnd);}; UCF_TextEdit.prototype.onkeydown=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();if(iKey==UCF_KeyCodes.TAB||iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_DOW||iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.BACKSPACE||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.DELETE||iKey==UCF_KeyCodes.HOME||iKey==UCF_KeyCodes.END){oBrowserEvent.cancelBubble();return;}if(this.iMaxLength>0&&iKey==UCF_KeyCodes.Z&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift()){ if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"cutToMaxlength");}if(iKey==UCF_KeyCodes.CONTROL||oBrowserEvent.bCtrl())return;var iLength=this.getCorrectLength(this.oDomRef.value);var iSelectedTextLength=0;if(document.selection){iSelectedTextLength=document.selection.createRange().text.length;}else if(this.oDomRef.selectionStart){iSelectedTextLength=this.oDomRef.selectionEnd-this.oDomRef.selectionStart;}iLength=iLength-iSelectedTextLength;if(this.iMaxLength>0&&iLength>=this.iMaxLength){oBrowserEvent.cancel();} if(iKey==UCF_KeyCodes.F2&&this.bUsedInSapTable){this.bNavigation=!this.bNavigation;UCF_DomUtil.setCursorPos(this.oDomRef,this.oDomRef.value.length);this.refocus(this.oFocusDomRef);}}; UCF_TextEdit.prototype.onlshotkey=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode(); if(oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift()&&(iKey==UCF_KeyCodes.C||iKey==UCF_KeyCodes.X||iKey==UCF_KeyCodes.V||iKey==UCF_KeyCodes.Z||iKey==UCF_KeyCodes.Y||iKey==UCF_KeyCodes.A)){oBrowserEvent.cancelBubble();return;}if(iKey==UCF_KeyCodes.DELETE||iKey==UCF_KeyCodes.ESCAPE||iKey==UCF_KeyCodes.INSERT){oBrowserEvent.cancelBubble();return;} this.prepareFireChange();}; UCF_TextEdit.prototype.onkeyup=function(oBrowserEvent){this.handleEditEvents(oBrowserEvent);}; UCF_TextEdit.prototype.onpaste=function(oBrowserEvent){this.handleEditEvents(oBrowserEvent);if(this.iMaxLength>0){if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"cutToMaxlength");}}; UCF_TextEdit.prototype.oncut=function(oBrowserEvent){if(this.bReadonly)oBrowserEvent.cancel();this.handleEditEvents(oBrowserEvent);}; UCF_TextEdit.prototype.ondrop=function(oBrowserEvent){if(this.iMaxLength>0){if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"cutToMaxlength");}this.handleEditEvents(oBrowserEvent);}; UCF_TextEdit.prototype.onAreaScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop");var iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollLeft,iScrollTop);}; UCF_TextEdit.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("TE"); var sLabel=sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);} oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setRequired(this.bRequired);if(this.bInvalid||this.sInputState=="ERROR"){oAccessibilityHelper.setInvalid(true);}oAccessibilityHelper.setWarning(this.sInputState=="WARNING");oAccessibilityHelper.setTooltip(this.sTooltip);}; UCF_TextEdit.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled)return;oBrowserEvent.cancelBubble();}; UCF_TextEdit.prototype.oncontextmenu=function(oBrowserEvent){this.prepareFireChange();}; UCF_TextEdit.prototype.onlsselect=function(oBrowserEvent){if(!this.bEnabled)return;oBrowserEvent.cancelBubble();}; UCF_TextEdit.prototype.onlsfocus=function(oBrowserEvent){this.setFocusStyles();}; UCF_TextEdit.prototype.bValueEdited=function(){return this.oDomRef.value!=this.sOldValue;}; UCF_TextEdit.prototype.handleEditEvents=function(oBrowserEvent){if(this.bValueEdited()&&!this.bIsDirty){this.bIsDirty=true;this.markDirty();}}; UCF_TextEdit.prototype.prepareFireChange=function(){if(!this.bEnabled||this.bReadonly)return;var sValue=this.oDomRef.value;if(sValue!=this.sOldValue){this.sOldValue=sValue;this.fireChange(this.sId,sValue);}}; UCF_TextEdit.prototype.getCorrectLength=function(txtValue){if(txtValue.indexOf('\r\n')!=-1); else if(txtValue.indexOf('\r')!=-1)txtValue=txtValue.replace(/\r/g,"\r\n"); else if(txtValue.indexOf('\n')!=-1)txtValue=txtValue.replace(/\n/g,"\r\n"); return txtValue.length;}; UCF_TextEdit.prototype.cutToMaxlength=function(){var txtValue=this.oDomRef.value,lineBreakCount=0;if(txtValue!=""&&this.getCorrectLength(txtValue)>=this.iMaxLength){txtValue=txtValue.substr(0,this.iMaxLength);   if(txtValue.indexOf('\r\n')!=-1)lineBreakCount=0; else if(txtValue.indexOf('\r')!=-1)lineBreakCount=(txtValue.split(/\r/g).length-1); else if(txtValue.indexOf('\n')!=-1);lineBreakCount=(txtValue.split(/\n/g).length-1); if(lineBreakCount>0)txtValue=txtValue.substr(0,this.iMaxLength-lineBreakCount);this.oDomRef.value=txtValue;}}; UCF_TextEdit.prototype.focus=function(){if(UCF_DomUtil.oGetActiveElement()!=this.oDomRef){UCF_DomUtil.setCursorPos(this.oDomRef,this.oDomRef.value.length);UCF_Control.prototype.focus.apply(this,arguments);}}; UCF_TextEdit.prototype.setFocusStyles=function(){ if((!this.bEnabled||this.bReadonly)&&!UCF_System.bIs508)return; this.sInputFocusStyle="lsEdFieldFocus";if((this.bReadonly&&(!this.bInvalid&&this.sInputState!="ERROR"))||(!this.bEnabled&&(!this.bInvalid&&this.sInputState!="ERROR"))){this.sInputFocusStyle+="Dsbl";}else if((this.bReadonly&&(this.bInvalid||this.sInputState=="ERROR"))||(!this.bEnabled&&(this.bInvalid||this.sInputState=="ERROR"))){this.sInputFocusStyle+="DsblInv";}else if((!this.bReadonly&&(this.bInvalid||this.sInputState=="ERROR"))||(this.bEnabled&&(this.bInvalid||this.sInputState=="ERROR"))){this.sInputFocusStyle+="Inv";}UCF_DomUtil.addClass(this.oDomRef,this.sInputFocusStyle);}; UCF_TextEdit.prototype.removeFocusStyles=function(){ UCF_DomUtil.removeClass(this.oDomRef,this.sInputFocusStyle);if(this.oHelpButtonRef&&this.bEnabled&&!this.Readonly){UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sHelpButtonFocusStyle);}}; UCF_TextEdit.prototype.setScrollPosition=function(iScrollLeft,iScrollTop){this.oScrollArea.setScrollPosition(iScrollTop,iScrollLeft);}; UCF_TextEdit.prototype.setCursorPosition=function(iPos){UCF_DomUtil.setCursorPos(this.oDomRef,iPos);}; UCF_TextEdit.prototype.setSelection=function(iStart,iEnd){UCF_DomUtil.setSelection(this.oDomRef,iStart,iEnd);}; UCF_TextEdit.prototype.iGetSelectionStart=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionStart)return UCF_DomUtil.iGetSelectionStart(this.oDomRef);else return this.iSelectionStart;}; UCF_TextEdit.prototype.iGetSelectionEnd=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionEnd)return UCF_DomUtil.iGetSelectionEnd(this.oDomRef);else return this.iSelectionEnd;}; UCF_TextEdit.prototype.aAttributeNames=["iRows","bEnabled","bRequired","bReadonly","sTooltip","bInvalid","iMaxLength","sInputState","iScrollLeft","iScrollTop","bUsedInSapTable","sAccessKey","bDisplayAsText","bAdjustRowsToText"]; UCF_TextEdit.prototype.aMethodNames=["setScrollPosition","setCursorPosition","setSelection","iGetSelectionStart","iGetSelectionEnd"];  UCF_TextEdit.prototype.iRows=-1; UCF_TextEdit.prototype.bEnabled=true; UCF_TextEdit.prototype.bRequired=false; UCF_TextEdit.prototype.bReadonly=false; UCF_TextEdit.prototype.sTooltip=''; UCF_TextEdit.prototype.bInvalid=false; UCF_TextEdit.prototype.iMaxLength=0; UCF_TextEdit.prototype.sInputState="NONE"; UCF_TextEdit.prototype.iScrollLeft=0; UCF_TextEdit.prototype.iScrollTop=0; UCF_TextEdit.prototype.bUsedInSapTable=false; UCF_TextEdit.prototype.sAccessKey=''; UCF_TextEdit.prototype.bDisplayAsText=false; UCF_TextEdit.prototype.bAdjustRowsToText=false; UCF_TextEdit.prototype.setDefaultValues=function(){this.iRows=-1;this.bEnabled=true;this.bRequired=false;this.bReadonly=false;this.sTooltip='';this.bInvalid=false;this.iMaxLength=0;this.sInputState="NONE";this.iScrollLeft=0;this.iScrollTop=0;this.bUsedInSapTable=false;this.sAccessKey='';this.bDisplayAsText=false;this.bAdjustRowsToText=false;}; UCF_TextEdit.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("TextEdit","Change",mParams);}; UCF_TextEdit.prototype.fireDoubleClick=function(sId,iSelectionStart,iSelectionEnd){var mParams={Id:sId,SelectionStart:iSelectionStart,SelectionEnd:iSelectionEnd};this.fireSemanticEvent("TextEdit","DoubleClick",mParams);}; UCF_TextEdit.prototype.fireScroll=function(sId,iScrollLeft,iScrollTop){var mParams={Id:sId,ScrollLeft:iScrollLeft,ScrollTop:iScrollTop};this.fireSemanticEvent("TextEdit","Scroll",mParams);};UCF_TextEdit.prototype.aPublicMethods=["focus","setScrollPosition","setCursorPosition","iGetSelectionStart","iGetSelectionEnd"];
function UCF_TextEditInplaceEdit(oDomRef,oLS){UCF_TextEdit.apply(this,[oDomRef,oLS]);this.iOldHeight=0;this.iBorderWidth=1;};UCF_TextEditInplaceEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_TextEdit"))();UCF_TextEditInplaceEdit.prototype.initialize=function(){this.iBorderWidth=1; this.oDomRef.parentNode.style.padding=this.iBorderWidth;if(this.bAdjustRowsToText){this.adaptHeight(false);}};UCF_TextEditInplaceEdit.prototype.onlsfocus=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){this.enterEditMode();}UCF_TextEdit.prototype.onlsfocus.call(this,oBrowserEvent);};UCF_TextEditInplaceEdit.prototype.onlsblur=function(oBrowserEvent){UCF_TextEdit.prototype.onlsblur.call(this,oBrowserEvent);UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");this.enterViewMode();};UCF_TextEditInplaceEdit.prototype.enterEditMode=function(){if(this.bEnabled&&!this.bReadonly){var iHeight=this.oDomRef.clientHeight;UCF_DomUtil.removeClass(this.oDomRef,"lsEdTextEditInplaceEdit");this.oDomRef.parentNode.style.padding="0px";this.oDomRef.style.height=(iHeight+(this.iBorderWidth*2))+"px";}};UCF_TextEditInplaceEdit.prototype.enterViewMode=function(){if(this.bEnabled&&!this.bReadonly){UCF_DomUtil.addClass(this.oDomRef,"lsEdTextEditInplaceEdit");var iHeight=this.oDomRef.clientHeight;this.oDomRef.parentNode.style.padding=this.iBorderWidth+"px";this.oDomRef.style.height=(iHeight-(this.iBorderWidth*2))+"px";}};UCF_TextEditInplaceEdit.prototype.onkeyup=function(oBrowserEvent){if(this.bAdjustRowsToText){this.adaptHeight(true);}};UCF_TextEditInplaceEdit.prototype.adaptHeight=function(bUseAnimation){var iOldHeight=this.oDomRef.clientHeight;  this.oDomRef.style.height="1px";var iCurrentHeight=this.oDomRef.scrollHeight;this.oDomRef.style.height=(iOldHeight+(this.iBorderWidth*2))+"px";var iLineHeight=this.iGetLineHeight(),iThreshold=(this.iBorderWidth*2)+this.iRows*iLineHeight;if(iCurrentHeight>=iThreshold){ this.oDomRef.style.overflow="auto";var iNewHeight=iThreshold;}else{ this.oDomRef.style.overflow="hidden";var iNewHeight=iCurrentHeight+2;}iNewHeight=Math.max(iNewHeight,iLineHeight+(this.iBorderWidth*2));if(iNewHeight!=this.iOldHeight){if(UCF_System.bUseAnimation&&bUseAnimation){if(this.oAnim&&this.oAnim.bRunning)this.oAnim.stop();this.oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oDomRef,300);this.oAnim.addStyleChange("height","","px",this.iOldHeight,iNewHeight,this.oAnim.M_TRANSITIONS.EaseIn);this.oAnim.play();}else{this.oDomRef.style.height=iNewHeight+"px";}this.iOldHeight=iNewHeight;}};UCF_TextEditInplaceEdit.prototype.iGetLineHeight=function(){var oCloneDomRef=document.createElement("span");oCloneDomRef.className=this.oDomRef.className;oCloneDomRef.style.display="block";oCloneDomRef.style.position="absolute";oCloneDomRef.style.top="-1000px";oCloneDomRef.innerHTML="AbC"; document.body.appendChild(oCloneDomRef);var iOffsetHeight=oCloneDomRef.offsetHeight;document.body.removeChild(oCloneDomRef);delete oCloneDomRef;return iOffsetHeight-(this.iBorderWidth*2);};UCF_TextEditInplaceEdit.prototype.onmouseover=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdTextEditInplaceEdit")!=-1){UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldFocus");}};UCF_TextEditInplaceEdit.prototype.onmouseout=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdTextEditInplaceEdit")!=-1){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");}};
 function UCF_MessageBundle(){UCF_Object.apply(this);this.bUseXHR=true;this.sLanguage="en";};UCF_MessageBundle.prototype=new UCF_Object();UCF_MessageBundle.mTexts=null; UCF_MessageBundle.prototype.sGetText=function(sKey,aVars){var sText=this.sGetRawText(sKey);if(sText){if(aVars){for(var i=0;i<aVars.length;i++){sText=sText.replace("{"+i+"}",aVars[i]);}}return sText;}else{return "";}}; UCF_MessageBundle.prototype.sGetRawText=function(sKey){if(!UCF_MessageBundle.mTexts)this.loadTexts();if(UCF_MessageBundle.mTexts)return UCF_MessageBundle.mTexts[sKey];else return "";}; UCF_MessageBundle.prototype.loadTexts=function(){var sLanguage=UCF_System.sLanguage.toLowerCase().replace("-","_"),sVersion=UCF_System.sClientVersionKey,sMessageBundlePath="texts/",sMessageBundle="messagebundle",sExtension=".properties",sBaseUrl=UCF_System.sResourceRoot+"/js";if(sLanguage.length>0)sMessageBundle+="_"+sLanguage;if(!this.sFindMessageBundle)this.sFindMessageBundle=sMessageBundle;var oResponse={bSuccess:false},sFindMessageBundle=this.sFindMessageBundle,sLoadedLanguage="en";sMessageBundlePath=sBaseUrl+"/"+sMessageBundlePath;if(!this.bUseXHR){oResponse.sText=UCF_Properties[sFindMessageBundle];oResponse.bSuccess=oResponse.sText&&oResponse.sText!=null;while(!oResponse.bSuccess&&sFindMessageBundle.length>0){var iLastScore=sFindMessageBundle.lastIndexOf("_");if(iLastScore>0){sFindMessageBundle=sFindMessageBundle.substring(0,iLastScore);}else{break;}this.sFindMessageBundle=sFindMessageBundle;UCF_DomUtil.$("ls-messagebundle").src=sMessageBundlePath+sFindMessageBundle+".js"+"?"+sVersion;UCF_JsUtil.delayedCall(250,this,"loadTexts");return;}}else{while(!oResponse.bSuccess&&sFindMessageBundle.length>0){var iLastDash=sFindMessageBundle.lastIndexOf("-"),iLastScore=sFindMessageBundle.lastIndexOf("_");sLoadedLanguage=sFindMessageBundle;oResponse=UCF_RequestUtil.sendSyncRequest(sMessageBundlePath+sFindMessageBundle+sExtension+"?"+sVersion);if(iLastDash>0){sFindMessageBundle=sFindMessageBundle.substring(0,iLastDash);}else if(iLastScore>0){sFindMessageBundle=sFindMessageBundle.substring(0,iLastScore);}else{break;}}}  if(sLoadedLanguage.indexOf("_")>-1)sLoadedLanguage=sLoadedLanguage.substring(sLoadedLanguage.indexOf("_")+1);else sLoadedLanguage="en";this.sLanguage=sLoadedLanguage;if(oResponse.bSuccess){var aLines=oResponse.sText.split("\n");UCF_MessageBundle.mTexts={};for(var i=0;i<aLines.length;i++){if(aLines[i].indexOf("#")==0)continue;var iSeperatorPos=aLines[i].indexOf("="),sKey=aLines[i].substring(0,iSeperatorPos),sValue=aLines[i].substring(iSeperatorPos+1).replace(/^\s+|\s+$/,'');sValue=sValue.replace(/"/g,'\\\"');sValue=eval("result = \""+sValue+"\"");UCF_MessageBundle.mTexts[sKey]=sValue;}}}; UCF_MessageBundle.prototype.sGetLanguage=function(){return this.sLanguage;};
 function UCF_ActiveXContainer(oDomRef,oLS){UCF_ActiveComponent.apply(this,[oDomRef,oLS]);};UCF_ActiveXContainer.prototype=new(UCF_ClassLoader.oGetClass("UCF_ActiveComponent"))(); UCF_ActiveXContainer.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSourceControl();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("AX");oAccessibilityHelper.addTutor("GROUP_TUT");}; UCF_ActiveXContainer.prototype.aAttributeNames=["sTooltip","sLifeCycle"]; UCF_ActiveXContainer.prototype.aMethodNames=["setKeepAlive"];  UCF_ActiveXContainer.prototype.sTooltip=''; UCF_ActiveXContainer.prototype.sLifeCycle="BROWSER"; UCF_ActiveXContainer.prototype.setDefaultValues=function(){this.sTooltip='';this.sLifeCycle="BROWSER";};
 function UCF_ValueComparison(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ValueComparison.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ValueComparison.prototype.onlsaccessibility=function(oBrowserEvent){if(this!=oBrowserEvent.oGetSourceControl())return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("VC");}; UCF_ValueComparison.prototype.aAttributeNames=["sTooltip"]; UCF_ValueComparison.prototype.aMethodNames=[];  UCF_ValueComparison.prototype.sTooltip='Compares values'; UCF_ValueComparison.prototype.setDefaultValues=function(){this.sTooltip='Compares values';};
 function UCF_FormattedTextView(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_FormattedTextView.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_FormattedTextView.prototype.onlsaccessibility=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sText=UCF_DomUtil.sGetInnerText(this.oDomRef),sSemantic=null;if(UCF_StringUtil.bIsEmpty(sText))oAccessibilityHelper.setEmpty(true);else oAccessibilityHelper.setText(sText);oAccessibilityHelper.setTooltip(this.sTooltip); var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}}; UCF_FormattedTextView.prototype.aAttributeNames=["sTooltip"]; UCF_FormattedTextView.prototype.aMethodNames=[];  UCF_FormattedTextView.prototype.sTooltip=''; UCF_FormattedTextView.prototype.setDefaultValues=function(){this.sTooltip='';};
 function UCF_PatternContainerTabItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef.firstChild;this.sTitle=UCF_DomUtil.sGetInnerText(oDomRef);};UCF_PatternContainerTabItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PatternContainerTabItem.prototype.bGetVisible=function(){return this.oDomRef.style.display!="none";}; UCF_PatternContainerTabItem.prototype.setVisible=function(bVisible){var oContentConnector=UCF_DomUtil.$(this.sId+"-c");if(bVisible){this.oDomRef.style.display="";this.oDomRef.previousSibling.style.display="";if(this.bFirstVisibleItem){this.oDomRef.previousSibling.style.display="none";if(oContentConnector){oContentConnector.previousSibling.style.display="none";}var sPrev=this.iIndex==0?"PrevOff":"PrevOn",oFirstAngle=this.oDomRef.parentNode.firstChild;if(this.bSelected){oFirstAngle.className="urPcTbsFirstAngOn"+sPrev;}else{oFirstAngle.className="urPcTbsFirstAngOff"+sPrev;}}else{if(oContentConnector){oContentConnector.previousSibling.style.display="";}this.oDomRef.previousSibling.style.display="";}if(this.bLastItem){var oLastAngle=this.oDomRef.parentNode.lastChild.previousSibling;if(this.bSelected){oLastAngle.className="urPcTbsLastOnNextOff";}else{oLastAngle.className="urPcTbsLastOffNextOff";}}else if(this.bLastVisibleItem){var oLastAngle=this.oDomRef.parentNode.lastChild.previousSibling;if(this.bSelected){oLastAngle.className="urPcTbsLastOnNextOn";}else{oLastAngle.className="urPcTbsLastOffNextOn";}}else{if(this.bSelected){this.oDomRef.previousSibling.className="urPcTbsAngOffOn";}else if(this.bPreviousSelected){this.oDomRef.previousSibling.className="urPcTbsAngOnOff";}else{this.oDomRef.previousSibling.className="urPcTbsAngOffOff";}}if(oContentConnector){oContentConnector.style.display="";if(this.bSelected){oContentConnector.className=="urPcConOn";}else{oContentConnector.className=="urPcConOff";}}}else{if(oContentConnector){oContentConnector.style.display="none";oContentConnector.previousSibling.style.display="none";}this.oDomRef.style.display="none";this.oDomRef.previousSibling.style.display="none";}}; UCF_PatternContainerTabItem.prototype.aAttributeNames=["iItemIndex","bEnabled","sHotkeysId"]; UCF_PatternContainerTabItem.prototype.aMethodNames=[];  UCF_PatternContainerTabItem.prototype.iItemIndex=0; UCF_PatternContainerTabItem.prototype.bEnabled=true; UCF_PatternContainerTabItem.prototype.sHotkeysId=''; UCF_PatternContainerTabItem.prototype.setDefaultValues=function(){this.iItemIndex=0;this.bEnabled=true;this.sHotkeysId='';};
 function UCF_CalendarYearView(oDomRef,oLS){UCF_Calendar.apply(this,[oDomRef,oLS]); this.bInitial=true;};UCF_CalendarYearView.prototype=new(UCF_ClassLoader.oGetClass("UCF_Calendar"))(); UCF_CalendarYearView.prototype.initialize=function(){ this.oTable=UCF_DomUtil.$(this.sId+"-tbl");this.bInitialEnter=true;if(this.bInitial){this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oDomRef);this.attachBrowserEvent("scroll",this.oDomRef);this.addDelegate(this.oScrollArea);if(this.bScrollable){this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");}if(this.bIsHierarchical&&this.iTodaysDay>0){ this.oTable.rows[0].cells[this.iTodaysDay].style.padding="0";this.oTable.rows[0].cells[this.iTodaysDay].innerHTML="<div class=\"urToday\" style=\"padding-top:1px;padding-bottom:2px\">"+this.iTodaysDay+"</div>";}this.attachBrowserEvent("resize",this.oDomRef);this.bInitial=false;}var oCols=this.oTable.getElementsByTagName("COL"),iTotalWidth=this.oTable.parentNode.offsetWidth,iMonthWidth=120;this.initializeMatrix(); if(this.bScrollable){this.oDomRef.style.overflowX="hidden";}else{this.oDomRef.style.overflowX="visible";} if(iTotalWidth<400)iTotalWidth=400; var iDayWidth=Math.floor((iTotalWidth-iMonthWidth)/ 31);iMonthWidth=iTotalWidth-(iDayWidth*31);if(iDayWidth<21||this.oDomRef.offsetWidth<iTotalWidth){if(this.bScrollable){this.oDomRef.style.overflowX="auto";this.oDomRef.style.height=this.oTable.offsetHeight+16;} iDayWidth=21; for(var i=1;i<32;i++){oCols[i].width=iDayWidth;}if(this.bScrollable){this.oScrollArea.setScrollPosition(0,this.iScrollLeft);}}oCols[0].width=iMonthWidth;this.iTableWidth=this.oTable.offsetWidth; this.drawEntries(); this.aKeyboardRowNavigation=[];this.aRowEntries=[];var bEmpty=true;for(var i=0;i<this.aRows.length;i++){var aElementsForMore=[];this.aKeyboardRowNavigation[i]=[];if(this.aRows[i].oDomRef.firstChild.getAttribute("ridx")){this.aKeyboardRowNavigation[i].push(this.aRows[i].oDomRef.firstChild);bEmpty=false;}for(var iCells=1;iCells<this.aRows[i].oDomRef.cells.length;iCells++){var oCell=this.aRows[i].oDomRef.cells[iCells];if(oCell.getAttribute("MORE")=="true"){aElementsForMore.push({fStartRow:i,fStartColumn:iCells-1,oDomRef:oCell});}}iMore=0;for(var j=0;j<this.aEntries.length;j++){var iStartRow=Math.floor(this.aEntries[j].fStartRow);if(iStartRow==i){this.aRowEntries[i]=true;if(aElementsForMore&&aElementsForMore[iMore]){while(aElementsForMore[iMore].fStartColumn<this.aEntries[j].fStartColumn){this.aKeyboardRowNavigation[i].push(aElementsForMore[iMore].oDomRef);bEmpty=false;iMore++;if(iMore==aElementsForMore.length)break;}}if(this.aEntries[j].bSelectable||UCF_System.bIs508){this.aKeyboardRowNavigation[i].push(this.aEntries[j].oDomRef);bEmpty=false;}}}if(aElementsForMore&&aElementsForMore[iMore]){while(iMore<aElementsForMore.length){this.aKeyboardRowNavigation[i].push(aElementsForMore[iMore].oDomRef);bEmpty=false;iMore++;}}}if(bEmpty){this.aKeyboardRowNavigation=[];}}; UCF_CalendarYearView.prototype.destroy=function(){this.detachBrowserEvent("resize",this.oDomRef);this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}; UCF_CalendarYearView.prototype.select=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource(),oCellRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"cidx");oRowRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"ridx");if(oCellRef&&!oBrowserEvent.bGetCancelBubble()){var iRow=parseInt(oCellRef.getAttribute("ridx")),iCol=parseInt(oCellRef.getAttribute("cidx"));if(oEventDomRef.className=="MORE"||(oEventDomRef.getAttribute("MORE")=="true"&&oBrowserEvent.bCtrl())){this.fireCellMoreSelect(this.sId,iRow,iCol);}else if(oCellRef.getAttribute("SELECT")=="true"){this.fireCellSelect(this.sId,iRow,iCol);}}else if(oRowRef){var iRow=parseInt(oRowRef.getAttribute("ridx")),oRowHeader=oBrowserEvent.oSourceControl;if(oEventDomRef.tagName=="IMG"&&oRowHeader.bExpandable){if(oEventDomRef.className.indexOf("COL")>-1){this.collapse(oBrowserEvent);}else if(oEventDomRef.className.indexOf("EXP")>-1){this.expand(oBrowserEvent);}}else if(oRowHeader.bClickable){this.fireHeaderSelect(this.sId,iRow);}}}; UCF_CalendarYearView.prototype.expand=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource(),oRowRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"ridx"),oRowHeader=oBrowserEvent.oSourceControl;if(oRowRef){var iRow=parseInt(oRowRef.getAttribute("ridx"));if(oRowHeader.bExpandable&&!oRowHeader.bExpanded&&oRowHeader.bHasChildRows){this.fireHeaderToggle(this.sId,iRow,false);}}oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.collapse=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource(),oRowHeader=oBrowserEvent.oSourceControl,oRowRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"ridx");if(oRowRef){var iRow=parseInt(oRowRef.getAttribute("ridx"));if(oRowHeader.bExpandable&&oRowHeader.bExpanded&&oRowHeader.bHasChildRows){this.fireHeaderToggle(this.sId,iRow,oRowHeader.bExpanded);}}oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onclick=function(oBrowserEvent){this.select(oBrowserEvent);}; UCF_CalendarYearView.prototype.onmousedown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();for(var i=0;i<this.aKeyboardRowNavigation.length;i++){for(var j=0;j<this.aKeyboardRowNavigation[i].length;j++){if(UCF_DomUtil.bContains(this.aKeyboardRowNavigation[i][j],oSource)){this.focusItem(i,j);}}}}; UCF_CalendarYearView.prototype.onresize=function(oBrowserEvent){if(this.sTimerId)UCF_JsUtil.clearDelayedCall(this.sTimerId);this.sTimerId=UCF_JsUtil.delayedCall(10,this,"initialize");this.iScrollLeft=this.oDomRef.scrollLeft;oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onScroll=function(oEvent){var iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollLeft);}; UCF_CalendarYearView.prototype.calculateEntryPositions=function(aEntries){ var oStartCell=UCF_DomUtil.$(this.sId+"-start"),aRows=this.aRows,aMonthRows=[]; for(var i=0;i<aRows.length;i++){aMonthRows[i]=[];} for(var i=0;i<aEntries.length;i++){aMonthRows[aEntries[i].fStartRow].push(aEntries[i]);} for(var i=0;i<aMonthRows.length;i++){var iEndCol=0,aParallelRows=[],aEndCols=[];aEndCols[0]=0;aParallelRows[0]=[];for(var n=0;n<aMonthRows[i].length;n++){var iLevelCount=0;while(aEndCols[iLevelCount]>aMonthRows[i][n].fStartColumn&&iLevelCount<aEndCols.length){iLevelCount++;if(!aParallelRows[iLevelCount]){aParallelRows[iLevelCount]=[];}}aEndCols[iLevelCount]=aMonthRows[i][n].fEndColumn;aParallelRows[iLevelCount].push(aMonthRows[i][n]);aMonthRows[i][n].iLevel=iLevelCount;if(iEndCol<aMonthRows[i][n].fEndColumn){iEndCol=aMonthRows[i][n].fEndColumn;}for(var x=0;x<aParallelRows.length;x++){for(var y=0;y<aParallelRows[x].length;y++){ aParallelRows[x][y].iLevel=x;}}}}}; UCF_CalendarYearView.prototype.getEntries=function(aEntryDomRefs){if(!aEntryDomRefs&&aEntryDomRefs.length==0)return null;var aEntries=[],iEntryLength=aEntryDomRefs.length;for(var i=0;i<iEntryLength;i++){if(aEntryDomRefs[i].nodeType==1){ var oEntry=this.getEntry(aEntryDomRefs[i]); oEntry.iEndRow=oEntry.iStartRow;oEntry.fEndRow=oEntry.fStartRow;var fDuration=oEntry.fDuration,iCurrentRow=oEntry.iStartRow;if(iCurrentRow>=this.aRows.length)continue;if(oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerMonth)continue;if(fDuration+oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerMonth){while(fDuration>0){if(iCurrentRow>=this.aRows.length)break;if(oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerMonth)break;if(iCurrentRow==oEntry.iStartRow){fDuration=fDuration-this.aRows[iCurrentRow].iDaysPerMonth+oEntry.fStartColumn;if(iCurrentRow==this.aRows.length)break;}else{fDuration=fDuration-this.aRows[iCurrentRow].iDaysPerMonth;if(iCurrentRow==this.aRows.length)break;oEntry.iEndRow++;oEntry.fEndRow++;}iCurrentRow++;}}if(oEntry.iEndRow>oEntry.iStartRow){var iEndRow=oEntry.iEndRow,iStartRow=oEntry.iStartRow; var fDuration=oEntry.fDuration;oEntry.fDuration=this.aRows[oEntry.iStartRow].iDaysPerMonth-oEntry.fStartColumn;fDuration-=oEntry.fDuration;oEntry.iStartRow=iStartRow;oEntry.iEndRow=iStartRow;var iIndex=0;for(var j=iStartRow+1;j<=iEndRow;j++){ iIndex++;if(UCF_DomUtil.$(oEntry.sId+"-clone"+iIndex))break;var oEntryDomClone=oEntry.oDomRef.cloneNode(true);oEntryDomClone.setAttribute("id",oEntry.sId+"-clone-"+iIndex);oEntry.oDomRef.parentNode.appendChild(oEntryDomClone);var oEntryClone=this.getEntry(oEntryDomClone);oEntry.bOpenEnd=true;oEntryClone.iStartRow=j;oEntryClone.fStartRow=j;oEntryClone.iEndRow=j;oEntryClone.fEndRow=j;oEntryClone.fStartColumn=0;if(fDuration<this.aRows[j].iDaysPerMonth){oEntryClone.fDuration=fDuration;}else{oEntryClone.fDuration=this.aRows[j].iDaysPerMonth;fDuration=fDuration-oEntryClone.fDuration;}oEntryClone.fEndColumn=oEntryClone.fStartColumn+oEntryClone.fDuration;oEntryClone.iEndColumn=Math.floor(oEntryClone.fEndColumn);oEntryClone.setCalendar(this);if(fDuration<this.aRows[j].iDaysPerMonth){oEntryClone.bOpenStart=true;}else{oEntryClone.bOpenStart=true;oEntryClone.bOpenEnd=true;}oEntryClone.bIsClone=true;aEntries.push(oEntryClone);}}aEntries.push(oEntry);oEntry.setCalendar(this);}}return aEntries;}; UCF_CalendarYearView.prototype.initializeMatrix=function(){this.aColumns=this.aGetColumns();this.aRows=this.aGetRows();for(var iRow=0;iRow<this.aRows.length;iRow++){this.aRows[iRow].iDaysPerMonth=this.iGetDaysPerMonth(this.aRows[iRow]);}}; UCF_CalendarYearView.prototype.iGetDaysPerMonth=function(oRow){if(!oRow)return 0;var oCells=oRow.oDomRef.cells;if(oCells){var iCol=oCells.length-1;while(oCells[iCol].getAttribute("disabled")=="true"||oCells[iCol].getAttribute("disabled")==true){iCol=iCol-parseInt(oCells[iCol].colSpan);if(iCol<28){return iCol;}}return iCol;}}; UCF_CalendarYearView.prototype.drawEntries=function(){ var oEntriesDomRef=UCF_DomUtil.$(this.sId+"-entries");if(!oEntriesDomRef)return; this.aEntries=this.getEntries(oEntriesDomRef.childNodes);var aEntries=this.aEntries; aEntries.sort(this.sortColEntries); this.calculateEntryPositions(aEntries);for(var i=0;i<aEntries.length;i++){ this.drawEntry(aEntries[i]);}}; UCF_CalendarYearView.prototype.drawEntry=function(oEntry){var iStartColumn=Math.floor(oEntry.fStartColumn),iStartRow=Math.floor(oEntry.fStartRow),oRect=this.aColumns[iStartColumn].oRect,iLeft=oRect.left+(oRect.width*(oEntry.fStartColumn-iStartColumn)),iRight=oRect.right,iHeight=16,iTop=this.aRows[iStartRow].oRect.top+(iHeight*(oEntry.iLevel)+1),iWidth=this.iGetEntryColumnWidth(this.aColumns,oEntry),iTableWidth=this.iTableWidth;iWidth=iWidth-1;if(this.oLS.oSystem.bIsRTL){iRight=iRight-(iTableWidth%2)+1;}else{ if(iWidth+iLeft>iTableWidth){iWidth=iTableWidth-iLeft+1;}}oEntry.applyStyles(); oEntry.setPosition(iLeft+1,iTop,iWidth,iHeight,iRight);}; UCF_CalendarYearView.prototype.focusItem=function(iRow,iItem){var oDomRef=null;if(this.aKeyboardRowNavigation.length==0)return;if(this.oFocusPosition){oDomRef=this.aKeyboardRowNavigation[this.oFocusPosition.iRow][this.oFocusPosition.iItem];if(oDomRef)UCF_DomUtil.setTabIndex(oDomRef,-1);}if(iRow==-1){iRow=this.aRows.length-1;}else if(iRow>this.aRows.length-1){iRow=0;}if(iItem==-1){iRow--;while(this.aKeyboardRowNavigation[iRow]&&this.aKeyboardRowNavigation[iRow].length==0)iRow--;iItem=this.aKeyboardRowNavigation[iRow].length-1;}else if(iItem>this.aKeyboardRowNavigation[iRow].length-1){iRow++;while(this.aKeyboardRowNavigation[iRow]&&this.aKeyboardRowNavigation[iRow].length==0)iRow++;iItem=0;}if(iRow==-1){iRow=this.aRows.length-1;iItem=0;}else if(iRow>this.aRows.length-1){iRow=0;iItem=0;}this.oFocusPosition={iRow:iRow,iItem:iItem};var oDomRef=this.aKeyboardRowNavigation[this.oFocusPosition.iRow][this.oFocusPosition.iItem];if(oDomRef){UCF_DomUtil.setTabIndex(oDomRef,0);oDomRef.focus();}}; UCF_CalendarYearView.prototype.onlsfocus=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource==this.oDomRef&&!UCF_System.bIs508){if(this.aKeyboardRowNavigation.length==0){return;}UCF_DomUtil.setTabIndex(this.oDomRef,"-1");}}; UCF_CalendarYearView.prototype.onlstabnext=function(oBrowserEvent){if(this.aKeyboardRowNavigation.length==0){return;}if(!this.oFocusPosition){this.focusItem(0,0);}else{if(this.oFocusPosition.iItem==this.aKeyboardRowNavigation[this.oFocusPosition.iRow].length-1){ var iRow=this.oFocusPosition.iRow+1;while(this.aKeyboardRowNavigation[iRow]&&this.aKeyboardRowNavigation[iRow].length==0)iRow++;if(iRow>=this.aKeyboardRowNavigation.length){if(this.focusNextControl()){this.bInitialEnter=true;oBrowserEvent.cancel();}return;}}this.focusItem(this.oFocusPosition.iRow,this.oFocusPosition.iItem+1);}oBrowserEvent.cancel();}; UCF_CalendarYearView.prototype.onlstabprevious=function(oBrowserEvent){if(this.oFocusPosition){if(this.oFocusPosition.iRow==0&&this.oFocusPosition.iItem==0){this.oFocusPosition=null;this.bInitialEnter=true;return;}this.focusItem(this.oFocusPosition.iRow,this.oFocusPosition.iItem-1);oBrowserEvent.cancel();}}; UCF_CalendarYearView.prototype.onlsup=function(oBrowserEvent){if(this.oFocusPosition){this.focusItem(this.oFocusPosition.iRow-1,0);oBrowserEvent.cancel();}}; UCF_CalendarYearView.prototype.onlsdown=function(oBrowserEvent){if(this.oFocusPosition){this.focusItem(this.oFocusPosition.iRow+1,0);oBrowserEvent.cancel();}}; UCF_CalendarYearView.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);this.bInitialEnter=true;}; UCF_CalendarYearView.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);this.bInitialEnter=true;}; UCF_CalendarYearView.prototype.onlsselectmodifier=function(oBrowserEvent){this.select(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onlsselect=function(oBrowserEvent){this.select(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onlsright=function(oBrowserEvent){this.expand(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onlsexpand=function(oBrowserEvent){this.expand(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onlsleft=function(oBrowserEvent){this.collapse(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.onlscollapse=function(oBrowserEvent){this.collapse(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.collectFocusInfo=function(oFocusInfo){if(this.oFocusPosition){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iRow",this.oFocusPosition.iRow);oFocusInfo.addParam("iItem",this.oFocusPosition.iItem);}}; UCF_CalendarYearView.prototype.applyFocusInfo=function(oFocusInfo){this.oFocusPosition={iRow:oFocusInfo.oGetParam("iRow"),iItem:oFocusInfo.oGetParam("iItem")};this.focusItem(this.oFocusPosition.iRow,this.oFocusPosition.iItem);}; UCF_CalendarYearView.prototype.onlsaccessibility=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl();if(oSourceControl!=this&&!(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry"))&&!(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarRowHeader")))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarRowHeader")){ oAccessibilityHelper.setText(oSourceControl.sText);if(this.bIsHierarchical){if(this.aRowEntries[oSource.parentNode.rowIndex-1]){oAccessibilityHelper.addTutor("CAL_DCOL_ENTRY_TUT");}oAccessibilityHelper.setExpanded(oSourceControl.bHasChildRows&&oSourceControl.bExpanded);oAccessibilityHelper.setCollapsed(oSourceControl.bHasChildRows&&!oSourceControl.bExpanded);oAccessibilityHelper.setSelected(oSourceControl.bSelected);oAccessibilityHelper.addEnabledTutor("SELECT_TUT",oSourceControl.bClickable&&!oSourceControl.bSelected);oAccessibilityHelper.addEnabledTutor("DESELECT_TUT",oSourceControl.bClickable&&oSourceControl.bSelected);oAccessibilityHelper.addEnabledTutor("CAL_RH_EXP_TUT",oSourceControl.bHasChildRows&&oSourceControl.bExpanded);oAccessibilityHelper.addEnabledTutor("CAL_RH_COLL_TUT",oSourceControl.bHasChildRows&&!oSourceControl.bExpanded);}}else if(oSource.getAttribute("MORE")=="true"){ var sDay=oSource.cellIndex,sRowHeader=UCF_DomUtil.sGetInnerText(oSource.parentNode.firstChild);oAccessibilityHelper.setText(sDay+" - "+sRowHeader);oAccessibilityHelper.addTutor("CAL_MORE_TUT");}else if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")){var oLegendDomRef=UCF_DomUtil.$(this.sId+'-legend');if(oLegendDomRef)oAccessibilityHelper.setLegendJSDomRef(oLegendDomRef);var sSemantic=oSourceControl.bStriped?oSourceControl.sSemanticColor+"_STRIPED":oSourceControl.sSemanticColor;oAccessibilityHelper.addSemantic(sSemantic);}else if(oSource==this.oDomRef){if(this.bIsHierarchical){var sHeader=UCF_DomUtil.sGetInnerText(this.oTable.getElementsByTagName("TH")[0]);oAccessibilityHelper.setControlType("CAL_HM",[""+(this.oTable.rows.length-1),sHeader]);oAccessibilityHelper.addTutor("CAL_HM_TUT");}else{oAccessibilityHelper.setControlType("CAL_Y",[""+(this.oTable.rows.length-1)])}oAccessibilityHelper.setText(this.sAccessibilityDescription);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addTutor("CAL_Y_TUT");}oBrowserEvent.cancelBubble();}; UCF_CalendarYearView.prototype.aAttributeNames=["sTooltip","sAccessibilityDescription","sMonthColumnTitle","iMonthColumnWidth","bIsHierarchical","iTodaysDay","bScrollable","iScrollLeft"]; UCF_CalendarYearView.prototype.aMethodNames=[];  UCF_CalendarYearView.prototype.sTooltip=''; UCF_CalendarYearView.prototype.sAccessibilityDescription=''; UCF_CalendarYearView.prototype.sMonthColumnTitle=''; UCF_CalendarYearView.prototype.iMonthColumnWidth=120; UCF_CalendarYearView.prototype.bIsHierarchical=false; UCF_CalendarYearView.prototype.iTodaysDay=0; UCF_CalendarYearView.prototype.bScrollable=true; UCF_CalendarYearView.prototype.iScrollLeft=0; UCF_CalendarYearView.prototype.setDefaultValues=function(){this.sTooltip='';this.sAccessibilityDescription='';this.sMonthColumnTitle='';this.iMonthColumnWidth=120;this.bIsHierarchical=false;this.iTodaysDay=0;this.bScrollable=true;this.iScrollLeft=0;}; UCF_CalendarYearView.prototype.fireCellSelect=function(sId,iRowIndex,iColIndex){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellSelect)this.oLS.markDirty();this.fireSemanticEvent("CalendarYearView","CellSelect",mParams);}; UCF_CalendarYearView.prototype.fireCellMoreSelect=function(sId,iRowIndex,iColIndex){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.CellMoreSelect)this.oLS.markDirty();this.fireSemanticEvent("CalendarYearView","CellMoreSelect",mParams);}; UCF_CalendarYearView.prototype.fireHeaderSelect=function(sId,iRowIndex){var mParams={Id:sId,RowIndex:iRowIndex};if(this.oLS&&this.oLS.markDirty&&this.mEvents.HeaderSelect)this.oLS.markDirty();this.fireSemanticEvent("CalendarYearView","HeaderSelect",mParams);}; UCF_CalendarYearView.prototype.fireHeaderToggle=function(sId,iRowIndex,bIsOpen){var mParams={Id:sId,RowIndex:iRowIndex,IsOpen:bIsOpen};if(this.oLS&&this.oLS.markDirty&&this.mEvents.HeaderToggle)this.oLS.markDirty();this.fireSemanticEvent("CalendarYearView","HeaderToggle",mParams);}; UCF_CalendarYearView.prototype.fireScroll=function(sId,iScrollLeft){var mParams={Id:sId,ScrollLeft:iScrollLeft};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Scroll)this.oLS.markDirty();this.fireSemanticEvent("CalendarYearView","Scroll",mParams);};
 function UCF_ImageMapArea(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ImageMapArea.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ImageMapArea.prototype.onclick=function(oBrowserEvent){var oParent=this.oGetParent();oParent.fireImageMapClick(oParent.sId,this.sId);}; UCF_ImageMapArea.prototype.aAttributeNames=[]; UCF_ImageMapArea.prototype.aMethodNames=[];  UCF_ImageMapArea.prototype.setDefaultValues=function(){};
  function UCF_PageLayout(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PageLayout.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PageLayout.prototype.E_CT={PAGELAYOUT:"PL"};UCF_PageLayout.prototype.E_TP={PANEL:"PLP"}; UCF_PageLayout.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_PageLayout.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType(this.E_CT.PAGELAYOUT);oAccessibilityHelper.addTutor("GROUP_TUT");}; UCF_PageLayout.prototype.aAttributeNames=["sHotkeysId"]; UCF_PageLayout.prototype.aMethodNames=[];  UCF_PageLayout.prototype.sHotkeysId=''; UCF_PageLayout.prototype.setDefaultValues=function(){this.sHotkeysId='';}; UCF_PageLayout.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("PageLayout","Hotkey",mParams);};
 function UCF_InputFieldHelpButton(oDomRef,oLS,sId){UCF_Control.apply(this,arguments);this.oConnectedControl=null; this.createDom();};UCF_InputFieldHelpButton.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_InputFieldHelpButton.prototype.createDom=function(){var oBtn=document.createElement("div");oBtn.setAttribute("ct","IB");oBtn.setAttribute("id",this.sId);oBtn.style.position="absolute";oBtn.style.top="-5000";oBtn.style.zIndex="10";this.oLS.oGetRootRef().appendChild(oBtn);UCF_DomUtil.setTabIndex(oBtn,-1);this.connectToDom(oBtn);}; UCF_InputFieldHelpButton.prototype.E_EVENTS={Press:0,Activate:1}; UCF_InputFieldHelpButton.prototype.setPosition=function(){if(!this.oConnectedControl)return;var oConnectedRef=this.oConnectedControl.oDomRef;if(this.oConnectedControl.bUsedInSapTable&&!UCF_DomUtil.bIsRTL)oConnectedRef=this.oConnectedControl.oRootRef;var oRect=UCF_DomUtil.oGetObjectRect(oConnectedRef,this.oScrollAreaRef),iOffsetTop=0,iOffsetLeft=0;if(this.oScrollAreaRef){iOffsetTop=-parseInt(UCF_DomUtil.sGetCurrentStyle(this.oScrollAreaRef,"paddingTop"));if(!iOffsetTop){iOffsetTop=-parseInt(UCF_DomUtil.sGetCurrentStyle(this.oScrollAreaRef,"padding"));if(!iOffsetTop){iOffsetTop=0;}else{iOffsetLeft=iOffsetTop;}}if(0==iOffsetLeft){iOffsetLeft=-parseInt(UCF_DomUtil.sGetCurrentStyle(this.oScrollAreaRef,"paddingLeft"));if(!iOffsetLeft)iOffsetLeft=0;}}this.oDomRef.style.top=oRect.top+iOffsetTop+"px";this.oDomRef.style.left=(oRect.left+iOffsetLeft)+(UCF_DomUtil.bIsRTL?-this.oDomRef.offsetWidth:oRect.width)+"px";this.oDomRef.style.height=oRect.height+"px";}; UCF_InputFieldHelpButton.prototype.connect=function(oConnectedControl,sType){this.oConnectedControl=oConnectedControl;switch(sType){case "CALCULATOR":this.oDomRef.className="lsEdf3ODHlpBtn lsEdf3HlpBtnCalc";break;case "CALENDAR":this.oDomRef.className="lsEdf3ODHlpBtn lsEdf3HlpBtnDate";break;case "DEFAULT":this.oDomRef.className="lsEdf3ODHlpBtn lsEdf3HlpBtnCoB";break;case "F4LOOKUP":this.oDomRef.className="lsEdf3ODHlpBtn lsEdf3HlpBtnF4";break;} var oScrollAreaRef=UCF_DomUtil.oGetParentScrollContainer(oConnectedControl.oRootRef.parentNode);oContainer=null;if(oScrollAreaRef){if(oScrollAreaRef.tagName=="BODY"){oContainer=this.oLS.oGetRootRef();this.oDomRef.style.position="absolute";}else{oContainer=document.getElementById(oScrollAreaRef.id+"-static");if(!oContainer){oContainer=document.createElement("div");oContainer.setAttribute("id",oScrollAreaRef.id+"-static");oContainer.style.height="0px";oContainer.innerHTML="<span></span>";oScrollAreaRef.insertBefore(oContainer,oScrollAreaRef.firstChild);}if(!UCF_UserAgent.bIsIE()){this.oDomRef.style.position="relative";}}oContainer.appendChild(this.oDomRef);this.oScrollAreaRef=oScrollAreaRef;}UCF_JsUtil.delayedCall(10,this,"setPosition");}; UCF_InputFieldHelpButton.prototype.detachAllEvents=function(){var mEventListeners=null;var iEventId=0;var oEntry=null;for(iEventId in this.mEventRegistry){mEventListeners=this.mEventRegistry[iEventId];if(!mEventListeners)return;for(oEntry in mEventListeners){delete mEventListeners[oEntry];}}}; UCF_InputFieldHelpButton.prototype.disconnect=function(){this.oDomRef.style.top="-5000";this.oConnectedControl=null;}; UCF_InputFieldHelpButton.prototype.bIsConnected=function(oConnectedControl){return(oConnectedControl==this.oConnectedControl);}; UCF_InputFieldHelpButton.prototype.onclick=function(oBrowserEvent){this.fireEvent(this.E_EVENTS.Press);oBrowserEvent.cancelBubble();}; UCF_InputFieldHelpButton.prototype.onmousedown=function(oBrowserEvent){this.fireEvent(this.E_EVENTS.Activate);oBrowserEvent.cancelBubble();};
  function UCF_DateNavigator(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.createKeyboardNavigation();this.oFocusedElementInfo={iMonthIndex:0,iRowIndex:-1,iCellIndex:-1};};UCF_DateNavigator.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_DateNavigator.prototype.createKeyboardNavigation=function(){if(this.aKeyboardMatrix)return;this.aKeyboardMatrix=[];this.aMonths=[];var aTables=this.oDomRef.getElementsByTagName("TABLE");for(var i=0;i<aTables.length;i++){ if(aTables[i].getAttribute("tp")!="MONTH")continue;this.aMonths.push(aTables[i]);this.aKeyboardMatrix.push([]);var iMonthIndex=this.aKeyboardMatrix.length-1;for(var iRows=2;iRows<aTables[i].rows.length;iRows++){var oRow=aTables[i].rows[iRows];this.aKeyboardMatrix[iMonthIndex].push([]);var iRowIndex=this.aKeyboardMatrix[iMonthIndex].length-1;for(var iCells=0;iCells<oRow.cells.length;iCells++){this.aKeyboardMatrix[iMonthIndex][iRowIndex]=oRow.cells;}}}}; UCF_DateNavigator.prototype.onclick=function(oBrowserEvent){this.onlsselect(oBrowserEvent);}; UCF_DateNavigator.prototype.onmousedown=function(oBrowserEvent){ var oSource=oBrowserEvent.oGetSource(),oTable=UCF_DomUtil.oGetParentByAttribute(oSource,"tp","MONTH");if(oSource.tagName=="TD"||oSource.tagName=="TABLE"){if(oTable){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonthIndex=this.getMonthIndex(oTable);if(iRowIndex<0){iRowIndex=-1;iCellIndex=-1;}this.oFocusedElementInfo.iRowIndex=iRowIndex;this.oFocusedElementInfo.iCellIndex=iCellIndex;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);}}}; UCF_DateNavigator.prototype.focusElementInfo=function(oFocusedElementInfo){var iCellIndex=oFocusedElementInfo.iCellIndex;var iRowIndex=oFocusedElementInfo.iRowIndex;var iMonthIndex=oFocusedElementInfo.iMonthIndex;var oElement=null;if(iCellIndex==-1||iRowIndex==-1){oElement=this.aMonths[iMonthIndex];}else{oElement=this.aKeyboardMatrix[iMonthIndex][iRowIndex][iCellIndex];}this.focusElement(oElement);}; UCF_DateNavigator.prototype.onlsright=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.tagName=="TD"){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonth=this.oFocusedElementInfo.iMonthIndex;if(oSource.nextSibling){this.oFocusedElementInfo.iCellIndex++;this.oFocusedElementInfo.iRowIndex=iRowIndex;this.focusElementInfo(this.oFocusedElementInfo);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}if(oSource.tagName=="TABLE"){var iMonthIndex=this.getMonthIndex(oSource)+1;if(iMonthIndex==this.aMonths.length){this.nextMonth();return;}else{this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);}}}; UCF_DateNavigator.prototype.onlsrightmodifier=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if((oBrowserEvent.bCtrl()||oBrowserEvent.bAlt())&&oSource.tagName=="TD"){iMonthIndex=this.oFocusedElementInfo.iMonthIndex+1;if(iMonthIndex==this.aMonths.length){this.nextMonth();return;}else{if(oBrowserEvent.bAlt()){this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;}this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);}}if(oSource.tagName=="TABLE"){var iMonthIndex=this.getMonthIndex(oSource)+1;if(iMonthIndex==this.aMonths.length){this.nextMonth();return;}else{this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);}}}; UCF_DateNavigator.prototype.onlsleftmodifier=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if((oBrowserEvent.bCtrl()||oBrowserEvent.bAlt())&&oSource.tagName=="TD"){iMonthIndex=this.oFocusedElementInfo.iMonthIndex-1;if(iMonthIndex==-1){this.previousMonth();return;}else{if(oBrowserEvent.bAlt()){this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;}this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);}}if(oSource.tagName=="TABLE"){var iMonthIndex=this.getMonthIndex(oSource)-1;if(iMonthIndex==-1){this.previousMonth();return;}else{this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);return;}}}; UCF_DateNavigator.prototype.getMonthIndex=function(oDomRef){if(!this.aMonths)return;for(var i=0;i<this.aMonths.length;i++){if(this.aMonths[i]==oDomRef)return i;}return-1;}; UCF_DateNavigator.prototype.onlsleft=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.tagName=="TD"){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonth=this.oFocusedElementInfo.iMonthIndex;if(oSource.previousSibling){this.oFocusedElementInfo.iCellIndex--;this.focusElementInfo(this.oFocusedElementInfo);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}if(oSource.tagName=="TABLE"){var iMonthIndex=this.getMonthIndex(oSource)-1;if(iMonthIndex==-1){this.previousMonth();return;}else{this.oFocusedElementInfo.iCellIndex=-1;this.oFocusedElementInfo.iRowIndex=-1;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;this.focusElementInfo(this.oFocusedElementInfo);return;}}}; UCF_DateNavigator.prototype.onlsup=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.tagName=="TD"){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonth=this.oFocusedElementInfo.iMonthIndex;if(iRowIndex>0){this.oFocusedElementInfo.iRowIndex--;this.focusElementInfo(this.oFocusedElementInfo);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_DateNavigator.prototype.onlsdown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.tagName=="TD"){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonth=this.oFocusedElementInfo.iMonthIndex;if(oSource.parentNode.nextSibling){this.oFocusedElementInfo.iRowIndex++;this.focusElementInfo(this.oFocusedElementInfo);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_DateNavigator.prototype.onlsfocus=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.tagName=="TD"||oSource.tagName=="TABLE"){var oTable=UCF_DomUtil.oGetParentByAttribute(oSource,"tp","MONTH");if(oTable){var iCellIndex=oSource.cellIndex,iRowIndex=oSource.parentNode.rowIndex-2,iMonthIndex=this.getMonthIndex(oTable);if(iRowIndex<0){iRowIndex=-1;iCellIndex=-1;}this.oFocusedElementInfo.iRowIndex=iRowIndex;this.oFocusedElementInfo.iCellIndex=iCellIndex;this.oFocusedElementInfo.iMonthIndex=iMonthIndex;}}}; UCF_DateNavigator.prototype.focusElement=function(oElement){if(this.oFocusElement&&this.oFocusElement.bResetTabIndex&&UCF_DomUtil.bHasTabIndex(this.oFocusElement)){UCF_DomUtil.resetTabIndex(this.oFocusElement);this.oFocusElement=null;}if(!UCF_DomUtil.bHasTabIndex(oElement)){oElement.bResetTabIndex=true;}UCF_DomUtil.setTabIndex(oElement,0);UCF_DomUtil.focusDomElement(oElement);this.oFocusElement=oElement;}; UCF_DateNavigator.prototype.ondblclick=function(oBrowserEvent){var oSourceDomRef=oBrowserEvent.oGetSource();if(oSourceDomRef){if(oSourceDomRef.getAttribute("cl")=="D"){if(this.mEvents.DayDoubleClick){this.fireDayDoubleClick(this.sId,oSourceDomRef.id);oBrowserEvent.cancelBubble();}}else if(oSourceDomRef.getAttribute("cl")=="M"){if(this.mEvents.MonthDoubleClick){this.fireMonthDoubleClick(this.sId,UCF_DomUtil.oGetParentByAttribute(oSourceDomRef,"id"));oBrowserEvent.cancelBubble();}}else if(oSourceDomRef.getAttribute("tp")=="MONTH"){if(this.mEvents.MonthDoubleClick){this.fireMonthDoubleClick(this.sId,oSourceDomRef.id);oBrowserEvent.cancelBubble();}}else if(oSourceDomRef.getAttribute("cl")=="W"){if(this.mEvents.WeekDoubleClick){this.fireWeekDoubleClick(this.sId,oSourceDomRef.id);oBrowserEvent.cancelBubble();}}}}; UCF_DateNavigator.prototype.onlsselectmodifier=function(oBrowserEvent){if(!oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&oBrowserEvent.bShift())this.onlsselect(oBrowserEvent);else{oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_DateNavigator.prototype.onlsselect=function(oBrowserEvent){var oSourceDomRef=oBrowserEvent.oGetSource();if(oSourceDomRef){if(oSourceDomRef.getAttribute("cl")=="P"){this.previousMonth();}else if(oSourceDomRef.getAttribute("cl")=="N"){this.nextMonth();}else if(oSourceDomRef.getAttribute("cl")=="D"){this.daySelect(oSourceDomRef,oBrowserEvent.bShift());}else if(oSourceDomRef.getAttribute("cl")=="M"){this.monthSelect(UCF_DomUtil.oGetParentByAttribute(oSourceDomRef,"id"),oBrowserEvent.bShift());}else if(oSourceDomRef.getAttribute("tp")=="MONTH"){this.monthSelect(oSourceDomRef,oBrowserEvent.bShift());}else if(oSourceDomRef.getAttribute("cl")=="W"){this.weekSelect(oSourceDomRef,oBrowserEvent.bShift());}}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_DateNavigator.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_DateNavigator.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_DateNavigator.prototype.nextMonth=function(){if(this.bCanNavigate){this.fireNextMonth(this.sId);}}; UCF_DateNavigator.prototype.previousMonth=function(){if(this.bCanNavigate){this.firePreviousMonth(this.sId);}}; UCF_DateNavigator.prototype.daySelect=function(oDayDomRef,bShift){var sDayId=oDayDomRef.getAttribute("id");if(this.bHasSelection&&bShift){this.fireDaySelect(this.sId,sDayId,"RANGE");}else{this.fireDaySelect(this.sId,sDayId,"STANDARD");}}; UCF_DateNavigator.prototype.monthSelect=function(oMonthDomRef,bShift){var sMonthId=oMonthDomRef.getAttribute("id");if(this.bHasSelection&&bShift){this.fireMonthSelect(this.sId,sMonthId,"RANGE");}else{this.fireMonthSelect(this.sId,sMonthId,"STANDARD");}}; UCF_DateNavigator.prototype.weekSelect=function(oWeekDomRef,bShift){var sWeekId=oWeekDomRef.getAttribute("id");if(this.bHasSelection&&bShift){this.fireWeekSelect(this.sId,sWeekId,"RANGE");}else{this.fireWeekSelect(this.sId,sWeekId,"STANDARD");}}; UCF_DateNavigator.prototype.collectFocusInfo=function(oFocusInfo){if(this.oFocusedElementInfo){oFocusInfo.setApplyControl(this);if(isNaN(this.oFocusedElementInfo.iRowIndex))this.oFocusedElementInfo.iRowIndex=-1;if(isNaN(this.oFocusedElementInfo.iCellIndex))this.oFocusedElementInfo.iCellIndex=-1;oFocusInfo.addParam("iRowIndex",this.oFocusedElementInfo.iRowIndex);oFocusInfo.addParam("iCellIndex",this.oFocusedElementInfo.iCellIndex);oFocusInfo.addParam("iMonthIndex",this.oFocusedElementInfo.iMonthIndex);}}; UCF_DateNavigator.prototype.applyFocusInfo=function(oFocusInfo){this.oFocusedElementInfo={iRowIndex:oFocusInfo.oGetParam("iRowIndex"),iCellIndex:oFocusInfo.oGetParam("iCellIndex"),iMonthIndex:oFocusInfo.oGetParam("iMonthIndex")};this.focusElementInfo(this.oFocusedElementInfo);}; UCF_DateNavigator.prototype.bIsDaySelected=function(sDayId){var oDay=UCF_DomUtil.$(sDayId);if(oDay){return oDay.className&&oDay.className.indexOf("urSel")>-1;}}; UCF_DateNavigator.prototype.bIsWeekSelected=function(sWeekId){var oWeek=UCF_DomUtil.$(sWeekId);if(oWeek){return oWeek.className&&oWeek.className.indexOf("urSel")>-1;}}; UCF_DateNavigator.prototype.selectDay=function(sDayId){var oDay=UCF_DomUtil.$(sDayId);if(oDay&&oDay.getAttribute("cl")=="D"){if(oDay.className.indexOf("urSel5")==-1)UCF_DomUtil.addClass(oDay,"urSel5");}}; UCF_DateNavigator.prototype.deselectDay=function(sDayId){var oDay=UCF_DomUtil.$(sDayId);if(oDay&&oDay.getAttribute("cl")=="D"){UCF_DomUtil.removeClass(oDay,"urSel5");}}; UCF_DateNavigator.prototype.selectWeek=function(sWeekId){var oWeek=UCF_DomUtil.$(sWeekId);if(oWeek&&oWeek.getAttribute("cl")=="W"){var oRow=oWeek.parentNode;for(var i=0;i<oRow.childNodes.length;i++){var oCell=oRow.childNodes[i];if(oCell.className.indexOf("urSel5")==-1)UCF_DomUtil.addClass(oCell,"urSel5");}}}; UCF_DateNavigator.prototype.deselectWeek=function(sWeekId){var oWeek=UCF_DomUtil.$(sWeekId);if(oWeek&&oWeek.getAttribute("cl")=="W"){var oRow=oWeek.parentNode;for(var i=0;i<oRow.childNodes.length;i++){var oCell=oRow.childNodes[i];UCF_DomUtil.removeClass(oCell,"urSel5");}}}; UCF_DateNavigator.prototype.selectMonth=function(sMonthId){var oMonth=UCF_DomUtil.$(sMonthId);if(oMonth&&oMonth.getAttribute("cl")=="M"){var oTable=UCF_DomUtil.oGetParentByAttribute(oMonth,"tp","MONTH");if(oTable){var oCells=oTable.getElementsByTagName("TD");for(var i=0;i<oCells.length;i++){var oCell=oCells[i];if(oCell.getAttribute("cl")=="W"||oCell.getAttribute("cl")=="D"){if(oCell.className.indexOf("urSel5")==-1)UCF_DomUtil.addClass(oCell,"urSel5");}}}}}; UCF_DateNavigator.prototype.deselectMonth=function(sMonthId){var oMonth=UCF_DomUtil.$(sMonthId);if(oMonth&&oMonth.getAttribute("cl")=="M"){var oTable=UCF_DomUtil.oGetParentByAttribute(oMonth,"tp","MONTH");if(oTable){var oCells=oTable.getElementsByTagName("TD");for(var i=0;i<oCells.length;i++){var oCell=oCells[i];if(oCell.getAttribute("cl")=="W"||oCell.getAttribute("cl")=="D"){UCF_DomUtil.removeClass(oCell,"urSel5");}}}}}; UCF_DateNavigator.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource(),sType=oSource.getAttribute("tp");if(oSource==this.oDomRef){oAccessibilityHelper.setText(this.sAccessibilityDescription);oAccessibilityHelper.setControlType("DN");oAccessibilityHelper.addTutor("DN_TUT");this.sCurrentDay=null;this.sCurrentWeek=null;}else if(sType=="MONTH"){var oMonthname=oSource.getElementsByTagName("SPAN")[0];oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oMonthname));this.sCurrentDay=null;this.sCurrentWeek=null;if(oMonthname.cl=="M"){oAccessibilityHelper.addTutor("SELECT_TUT");}}else if(sType=="WEEK"){var oWeek=oSource;oAccessibilityHelper.setText(oAccessibilityHelper.sGetText("DN_WEEK",[UCF_DomUtil.sGetInnerText(oWeek)]));this.sCurrentDay=null;if(oWeek.cl=="W"){oAccessibilityHelper.addTutor("SELECT_TUT");}}else if(sType=="DAY"){var oDay=oSource,bEnabled=oDay.className!="urDNDsbl";if(oSource.getAttribute&&oSource.getAttribute("t")&&oSource.getAttribute("t")!=""){oAccessibilityHelper.setText(oSource.getAttribute("t"));}else{oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oDay));}oAccessibilityHelper.setEnabled(bEnabled);if(bEnabled&&oDay.cl=="D"){oAccessibilityHelper.addTutor("SELECT_TUT");}var sNewDay=oDay.parentNode.parentNode.parentNode.rows[1].cells[oDay.cellIndex].title,sNewWeek=UCF_DomUtil.sGetInnerText(oDay.parentNode.firstChild);oAccessibilityHelper.setTooltip(oDay.tt);if(this.sCurrentDay!=sNewDay){this.sCurrentDay=sNewDay;oAccessibilityHelper.setDataTip(sNewDay);}if(this.sCurrentWeek!=sNewWeek){this.sCurrentWeek=sNewWeek;oAccessibilityHelper.setDataTip(oAccessibilityHelper.sGetText("DN_WEEK",sNewWeek));}var oLegendDomRef=UCF_DomUtil.$(this.sId+'-legend');if(oLegendDomRef)oAccessibilityHelper.setLegendJSDomRef(oLegendDomRef);var sSemantic=oSource.getAttribute("sem");oAccessibilityHelper.addSemantic(sSemantic);}}; UCF_DateNavigator.prototype.aAttributeNames=["bCanNavigate","bHasLegend","sAccessibilityDescription","bHasSelection"]; UCF_DateNavigator.prototype.aMethodNames=["selectMonth","deselectMonth","selectWeek","deselectWeek","selectDay","deselectDay","bIsDaySelected","bIsWeekSelected"];  UCF_DateNavigator.prototype.bCanNavigate=true; UCF_DateNavigator.prototype.bHasLegend=false; UCF_DateNavigator.prototype.sAccessibilityDescription=''; UCF_DateNavigator.prototype.bHasSelection=false; UCF_DateNavigator.prototype.setDefaultValues=function(){this.bCanNavigate=true;this.bHasLegend=false;this.sAccessibilityDescription='';this.bHasSelection=false;}; UCF_DateNavigator.prototype.fireDaySelect=function(sId,sDayId,sAccessType){var mParams={Id:sId,DayId:sDayId,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.DaySelect)this.oLS.markDirty();this.fireSemanticEvent("DateNavigator","DaySelect",mParams);}; UCF_DateNavigator.prototype.fireMonthSelect=function(sId,sMonthId,sAccessType){var mParams={Id:sId,MonthId:sMonthId,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.MonthSelect)this.oLS.markDirty();this.fireSemanticEvent("DateNavigator","MonthSelect",mParams);}; UCF_DateNavigator.prototype.fireWeekSelect=function(sId,sWeekId,sAccessType){var mParams={Id:sId,WeekId:sWeekId,AccessType:sAccessType};if(this.oLS&&this.oLS.markDirty&&this.mEvents.WeekSelect)this.oLS.markDirty();this.fireSemanticEvent("DateNavigator","WeekSelect",mParams);}; UCF_DateNavigator.prototype.fireDayDoubleClick=function(sId,sDayId){var mParams={Id:sId,DayId:sDayId};this.fireSemanticEvent("DateNavigator","DayDoubleClick",mParams);}; UCF_DateNavigator.prototype.fireWeekDoubleClick=function(sId,sWeekId){var mParams={Id:sId,WeekId:sWeekId};this.fireSemanticEvent("DateNavigator","WeekDoubleClick",mParams);}; UCF_DateNavigator.prototype.fireMonthDoubleClick=function(sId,sMonthId){var mParams={Id:sId,MonthId:sMonthId};this.fireSemanticEvent("DateNavigator","MonthDoubleClick",mParams);}; UCF_DateNavigator.prototype.fireNextMonth=function(sId){var mParams={Id:sId};this.fireSemanticEvent("DateNavigator","NextMonth",mParams);}; UCF_DateNavigator.prototype.firePreviousMonth=function(sId){var mParams={Id:sId};this.fireSemanticEvent("DateNavigator","PreviousMonth",mParams);};UCF_DateNavigator.prototype.aPublicMethods=["bIsDaySelected","bIsWeekSelected","selectDay","deselectDay","selectWeek","deselectWeek","selectMonth","deselectMonth"];
 function UCF_Expander(oDomRef){UCF_Object.apply(this);this.oDomRef=oDomRef;this.targetHeight=0;};UCF_Expander.prototype=new UCF_Object(); UCF_Expander.prototype.collapse=function(){ this.oDomRef.style.display="none";}; UCF_Expander.prototype.expand=function(iTargetHeight){this.oDomRef.style.overflow="hidden";this.oDomRef.style.display="block";this.oDomRef.style.height="1px";if(iTargetHeight&&iTargetHeight>0)this.iTargetHeight=iTargetHeight;else this.iTargetHeight=this.oDomRef.scrollHeight;this.expandAnim();}; UCF_Expander.prototype.collapseAnim=function(){var oExpander=this,oDomRef=this.oDomRef;if(oDomRef.offsetHeight-Math.ceil(oDomRef.offsetHeight/3)>1){oDomRef.style.height=oDomRef.offsetHeight-Math.ceil(oDomRef.offsetHeight/3);setTimeout(function(){oExpander.collapseAnim()},20);}else{oDomRef.style.display="none";}}; UCF_Expander.prototype.expandAnim=function(){var oExpander=this,oDomRef=this.oDomRef;if(oDomRef.offsetHeight+Math.ceil(oDomRef.offsetHeight / 3)<this.iTargetHeight){oDomRef.style.height=oDomRef.offsetHeight+Math.ceil((this.iTargetHeight-oDomRef.offsetHeight)/ 3);setTimeout(function(){oExpander.expandAnim()},20);}else{oDomRef.style.height=this.iTargetHeight;oDomRef.style.overflow="";}};
 function UCF_RichTextEdit(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFrameRef=UCF_DomUtil.$(this.sId+'-frm');if(this.sHtmlText==""){if(UCF_System.sDevice=="ie6"){this.sHtmlText="<p></p>";}else if(UCF_System.sDevice!="ff1"){ this.sHtmlText="<p>&nbsp;</p>";}} this.bInitialized=false; this.bIgnoreBlur=false; this.mState={}; this.mButtons=null; this.sLastHtml=""; this.bIgnoreDefaultButton=true; this.iSerializeCounter=0;this.createButtons(); this.bIsDirty=false;this.attachLSEvent(this.oLS.E_EVENTS.PendingRequest,"onPendingRequest");};UCF_RichTextEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RichTextEdit.prototype.oFormats={italic:{sIdPart:"itl",sCommand:"italic"},bold:{sIdPart:"bld",sCommand:"bold"},underline:{sIdPart:"und",sCommand:"underline"},indent:{sIdPart:"idnt",sCommand:"indent",mUnsupported:{ff1:true}},outdent:{sIdPart:"odnt",sCommand:"outdent",mUnsupported:{ff1:true}},ordered:{sIdPart:"olist",sCommand:"insertorderedlist"},unordered:{sIdPart:"unolist",sCommand:"insertunorderedlist"},header1:{sIdPart:"head1",sCommand:"formatblock",sEnableValue:"<h1>",sDisableValue:"<p>",sCheckValue:"1"},header2:{sIdPart:"head2",sCommand:"formatblock",sEnableValue:"<h2>",sDisableValue:"<p>",sCheckValue:"2"},header3:{sIdPart:"head3",sCommand:"formatblock",sEnableValue:"<h3>",sDisableValue:"<p>",sCheckValue:"3"}}; UCF_RichTextEdit.prototype.destroy=function(){this.destroyButtons();this.detachIFrameEvents();this.detachLSEvent(this.oLS.E_EVENTS.PendingRequest);}; UCF_RichTextEdit.prototype.onPendingRequest=function(oEvent){this.oPendingRequest=oEvent.oGetParam("oPendingRequest");this.oPendingRequest.suspend(this.sId);this.fireChangeIfNeeded();this.oPendingRequest.resume(this.sId);this.oPendingRequest=null;}; UCF_RichTextEdit.prototype.initialize=function(){ if(!this.oFrameRef.loaded){this.attachBrowserEvent("load",this.oFrameRef);return;}var oWin=this.oFrameRef.contentWindow,oDoc=oWin.document;oDoc.body.setAttribute("id",this.sId);oDoc.body.setAttribute("acf","editor");var oLink=oDoc.getElementsByTagName("LINK")[0],sDevice=UCF_System.sDevice; if(sDevice=="ff1")sDevice="nn7";var sCssUrl=UCF_System.sExternalThemeRoot+"/ls/ls_"+sDevice+".css";oLink.href=UCF_JsUtil.sGetResolvedUrl(sCssUrl,location.href);oDoc.body.dir=UCF_System.bIsRTL?"rtl":"ltr";var sClassName="urBdyStd urFTxtV";if(!this.bEnabled)sClassName+=" urRteDsbl";else if(this.bReadonly)sClassName+=" urRteRo";else sClassName+=" urRte";oDoc.body.className=sClassName;this.setHtml(this.sHtmlText);if(!this.bEnabled||this.bReadonly)return;this.enableEditMode(oDoc);this.sLastHtml=this.sGetHtml();var oRichTextEdit=this;this.forwardEditorEvent=function(e){switch(e.type){case "keyup":case "click":case "cut":case "paste":case "select":oRichTextEdit.onEditorAction();break;case "focus":oRichTextEdit.onEditorFocus();break;case "blur":oRichTextEdit.onEditorBlur();break;case "scroll":oRichTextEdit.onEditorScroll();break;}};this.attachIFrameEvents();UCF_JsUtil.delayedCall(0,this,"applyScrollPosition");this.bInitialized=true;}; UCF_RichTextEdit.prototype.attachIFrameEvents=function(){var oWin=this.oFrameRef.contentWindow,oDoc=oWin.document;UCF_DomUtil.attachEvent(oWin,"scroll",this.forwardEditorEvent); if(UCF_UserAgent.bIsGecko()){UCF_DomUtil.attachEvent(oDoc,"focus",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oDoc,"blur",this.forwardEditorEvent);}else if(UCF_UserAgent.bIsWebKit()){UCF_DomUtil.attachEvent(oWin,"focus",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oWin,"blur",this.forwardEditorEvent);}}; UCF_RichTextEdit.prototype.detachIFrameEvents=function(){ this.oFrameRef.document;var oWin=this.oFrameRef.contentWindow,oDoc;if(!oWin)return;if(!this.forwardEditorEvent)return;oDoc=oWin.document; try{ if(UCF_DomUtil.bContains(this.oDomRef,UCF_DomUtil.oGetActiveElement())){var oTextRange=oDoc.selection.createRange();oTextRange.collapse();oTextRange.select();}}catch(oException){}UCF_DomUtil.detachEvent(oWin,"scroll",this.forwardEditorEvent); if(UCF_UserAgent.bIsGecko()){UCF_DomUtil.detachEvent(oDoc,"focus",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oDoc,"blur",this.forwardEditorEvent);}else if(UCF_UserAgent.bIsWebKit()){UCF_DomUtil.detachEvent(oWin,"focus",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oWin,"blur",this.forwardEditorEvent);}}; UCF_RichTextEdit.prototype.attachEditorEvents=function(){var oWin=this.oFrameRef.contentWindow,oDoc=oWin.document;UCF_DomUtil.attachEvent(oDoc,"keyup",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oDoc,"click",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oDoc,"select",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oDoc,"cut",this.forwardEditorEvent);UCF_DomUtil.attachEvent(oDoc,"paste",this.forwardEditorEvent);}; UCF_RichTextEdit.prototype.detachEditorEvents=function(){var oWin=this.oFrameRef.contentWindow,oDoc=oWin.document;UCF_DomUtil.detachEvent(oDoc,"keyup",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oDoc,"click",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oDoc,"select",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oDoc,"cut",this.forwardEditorEvent);UCF_DomUtil.detachEvent(oDoc,"paste",this.forwardEditorEvent);}; UCF_RichTextEdit.prototype.bValueEdited=function(){return this.sGetHtml()!=this.sHtmlText;}; UCF_RichTextEdit.prototype.handleEditEvents=function(){if(this.bValueEdited()&&!this.bIsDirty){this.bIsDirty=true;this.markDirty();}}; UCF_RichTextEdit.prototype.onload=function(oBrowserEvent){this.detachBrowserEvent("load",this.oFrameRef);this.initialize();}; UCF_RichTextEdit.prototype.onmousedown=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(!this.bInitialized)return;var oSource=oBrowserEvent.oGetSource();if(oSource.tagName.toLowerCase()=="img")oSource=oSource.parentNode;var sId=oSource.getAttribute("id");var bIsToolbarButton=/.*-tbar-(.*)(-r)?/.test(sId);if(bIsToolbarButton)this.bIgnoreBlur=true;}; UCF_RichTextEdit.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(oBrowserEvent.oGetSource()==this.oFrameRef){this.onEditorFocus();}}; UCF_RichTextEdit.prototype.onlsblur=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(oBrowserEvent.oGetSource()==this.oFrameRef){this.onEditorBlur();}}; UCF_RichTextEdit.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("RTE");if(oBrowserEvent.oGetSourceControl()!=this)return; var sLabel=sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);} oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setTooltip(this.sTooltip);  if(this.oFrameRef&&this.oFrameRef.contentWindow&&this.oFrameRef.contentWindow.document){this.oFrameRef.contentWindow.document.title=this.oLS.sGetText("SAPUR_RTE");}}; UCF_RichTextEdit.prototype.onButtonPress=function(oEvent){if(!this.bInitialized)return;var sId=oEvent.oGetParam("sId"); UCF_JsUtil.clearRegExpBackReferences();var bIsToolbarButton=/.*-tbar-(.*)(-r)?/.test(sId);if(!bIsToolbarButton)return;var sAction=RegExp.$1;for(var i in this.oFormats){if(this.oFormats[i].sIdPart==sAction){this.applyFormat(i);break;}}this.oFrameRef.contentWindow.focus();this.queryFormatState();this.updateButtons();}; UCF_RichTextEdit.prototype.onEditorAction=function(){this.queryFormatState();this.updateButtons();this.handleEditEvents();}; UCF_RichTextEdit.prototype.onEditorScroll=function(){if(this.sScrollTimerId){UCF_JsUtil.clearDelayedCall(this.sScrollTimerId);}this.sScrollTimerId=UCF_JsUtil.delayedCall(200,this,"fireScrollDelayed");}; UCF_RichTextEdit.prototype.onEditorFocus=function(){if(!this.bInitialized)return;if(!this.bIgnoreBlur)this.attachEditorEvents();this.bIgnoreBlur=false;}; UCF_RichTextEdit.prototype.onEditorBlur=function(){if(!this.bInitialized)return;if(this.bIgnoreBlur)return;this.detachEditorEvents();this.fireChangeIfNeeded();}; UCF_RichTextEdit.prototype.fireChangeIfNeeded=function(){var sHtml=this.sGetHtml();if(sHtml!=this.sLastHtml){this.sLastHtml=sHtml;this.fireChange(this.sId,this.normalizeHtml(sHtml));}}; UCF_RichTextEdit.prototype.fireScrollDelayed=function(){if(!this.bPreventScroll){var oBody=this.oFrameRef.contentWindow.document.body,iScrollTop=oBody.scrollTop,iScrollLeft=oBody.scrollLeft;if(UCF_System.bIsRTL){iScrollLeft=oBody.scrollWidth-oBody.clientWidth-oBody.scrollLeft;}this.fireScroll(this.sId,iScrollTop,iScrollLeft);}this.bPreventScroll=false;}; UCF_RichTextEdit.prototype.applyScrollPosition=function(){var oBody=this.oFrameRef.contentWindow.document.body,iScrollTop,iScrollLeft;this.bPreventScroll=true;iScrollTop=this.iScrollTop;iScrollLeft=this.iScrollLeft;if(iScrollTop==-1)iScrollTop=oBody.scrollHeight;if(iScrollLeft==-1)iScrollLeft=oBody.scrollWidth;if(UCF_System.bIsRTL){iScrollLeft=oBody.scrollWidth-oBody.clientWidth-this.iScrollLeft;}oBody.scrollTop=iScrollTop;oBody.scrollLeft=iScrollLeft;}; UCF_RichTextEdit.prototype.queryFormatState=function(){var oDocument=this.oFrameRef.contentWindow.document,bState=false,sValue=null,oFormat=null,bUnsupported,sCheckValue,sDevice=UCF_System.sDevice;this.mState={};for(var i in this.oFormats){oFormat=this.oFormats[i];bUnsupported=oFormat.mUnsupported&&oFormat.mUnsupported[sDevice];sCheckValue=oFormat.sCheckValue;if(bUnsupported)continue; if(sCheckValue){var sValue=""+oDocument.queryCommandValue(oFormat.sCommand);this.mState[i]=(sValue.indexOf(sCheckValue)>=0);}else{this.mState[i]=oDocument.queryCommandState(oFormat.sCommand);}}}; UCF_RichTextEdit.prototype.createButtons=function(){var oFormat,oDomRef,oButton;this.mButtons={};for(var i in this.oFormats){oFormat=this.oFormats[i];oDomRef=UCF_DomUtil.$(this.sId+"-tbar-"+oFormat.sIdPart);if(oDomRef){oButton=this.oLS.oControlFactory.oGetControlByDomRef(oDomRef,true);oButton.attachEvent(oButton.M_EVENTS.Press,this,"onButtonPress");if(!this.oLS.oSystem.bIs508)oButton.oDomRef.tabIndex=-1;this.mButtons[i]=oButton;}}}; UCF_RichTextEdit.prototype.destroyButtons=function(){var oButton;for(var i in this.mButtons){oButton=this.mButtons[i];oButton.detachEvent(oButton.M_EVENTS.Press,this);}this.mButtons={};}; UCF_RichTextEdit.prototype.updateButtons=function(){var oButtonRef;for(var i in this.mButtons){oButtonRef=this.mButtons[i].oDomRef;UCF_DomUtil.setClass(oButtonRef,this.mState[i]?"urBtnStdD":"urBtnStd");}}; UCF_RichTextEdit.prototype.applyFormat=function(sName){var oFormat=this.oFormats[sName],sCommand=oFormat.sCommand,sValue=this.mState[sName]?oFormat.sDisableValue:oFormat.sEnableValue;var oEditorWindow=this.oFrameRef.contentWindow;oEditorWindow.focus();oEditorWindow.document.execCommand(sCommand,false,sValue);}; UCF_RichTextEdit.prototype.setHtml=function(sHtml){var oRootNode=this.oFrameRef.contentWindow.document.body,sNormalizedHtml=this.normalizeHtml(sHtml);if(sHtml!=sNormalizedHtml||oRootNode.innerHTML!=sNormalizedHtml){oRootNode.innerHTML=sNormalizedHtml;}}; UCF_RichTextEdit.prototype.normalizeHtml=function(sHtml){if(UCF_UserAgent.bIsGecko()){sHtml=sHtml.replace(/<(\/?)strong>/g,"<$1b>");sHtml=sHtml.replace(/<(\/?)em>/g,"<$1i>"); sHtml=sHtml.replace(/<br><\/br>/g,"<br />");}return sHtml;}; UCF_RichTextEdit.prototype.sProcessHtml=function(sHtml){if(UCF_UserAgent.bIsIE()){ if(sHtml!="<p></p>"){sHtml=sHtml.replace(/<p><\/p>/g,"<br /><br />");sHtml=sHtml.replace(/<p><br \/></g,"<br /><br /><");sHtml=sHtml.replace(/<br \/><\/p>/g,"<br /><br />");sHtml=sHtml.replace(/<p><br \/>/g,"<br /><p>");}else{sHtml="";}}return sHtml;}; UCF_RichTextEdit.prototype.sGetHtml=function(){var aBuffer=[],sHtml,oRootNode=this.oFrameRef.contentWindow.document.body;this.iSerializeCounter++;this.serializeXHTML(aBuffer,oRootNode);sHtml=aBuffer.join(""); sHtml=this.sProcessHtml(sHtml);return sHtml;}; UCF_RichTextEdit.prototype.oValidTags={"abbr":{empty:false},"acronym":{empty:false},"address":{empty:false},"blockquote":{empty:false},"br":{empty:true},"cite":{empty:false},"code":{empty:false},"dfn":{empty:false},"div":{empty:false},"em":{empty:false},"h1":{empty:false},"h2":{empty:false},"h3":{empty:false},"h4":{empty:false},"kbd":{empty:false},"p":{empty:false},"pre":{empty:false},"q":{empty:false},"samp":{empty:false},"span":{empty:false},"strong":{empty:false},"var":{empty:false},"dt":{empty:false},"dd":{empty:false},"ol":{empty:false},"ul":{empty:false},"li":{empty:false},"a":{empty:false,attrs:["href"]},"img":{empty:true,attrs:["src"]},"b":{mapped:"strong"},"i":{mapped:"em"}}; UCF_RichTextEdit.prototype.oOmitContentTags={"script":true,"noscript":true,"style":true,"select":true,"button":true,"link":true,"iframe":true,"object":true}; UCF_RichTextEdit.prototype.serializeXHTML=function(aBuffer,oNode){switch(oNode.nodeType){case 1: var sTagName=oNode.tagName.toLowerCase(),oTagInfo=this.oValidTags[sTagName];if(oTagInfo){  if(oNode.cnt==this.iSerializeCounter){break;}oNode.cnt=this.iSerializeCounter;if(oTagInfo.mapped){sTagName=oTagInfo.mapped;oTagInfo=this.oValidTags[sTagName];}aBuffer.push("<");aBuffer.push(sTagName);if(oTagInfo.attrs){var aAttributes=oTagInfo.attrs,sName,sValue;for(var i=0;i<aAttributes.length;i++){sName=aAttributes[i];sValue=oNode.getAttribute(sName);if(sValue){aBuffer.push(" ");aBuffer.push(sName);aBuffer.push("=\"");aBuffer.push(UCF_JsUtil.sXmlEscape(sValue));aBuffer.push("\"");}}}if(oTagInfo.empty){aBuffer.push(" />");}else{aBuffer.push(">");}}if(!this.oOmitContentTags[sTagName]){var childNodes=oNode.childNodes;if(childNodes){for(var i=0;i<childNodes.length;i++){this.serializeXHTML(aBuffer,childNodes[i]);}}}if(oTagInfo&&!oTagInfo.empty){aBuffer.push("</"+sTagName+">");}break;case 3: aBuffer.push(UCF_JsUtil.sXmlEscape(oNode.nodeValue));break;default: }}; UCF_RichTextEdit.prototype.enableEditMode=function(oDoc){if(UCF_System.sDevice=="ie6"){ oDoc.body.disabled=true;oDoc.body.contentEditable=true;oDoc.body.disabled=false;}else{oDoc.designMode='On'; oDoc.execCommand("useCSS",false,true);}}; UCF_RichTextEdit.prototype.aAttributeNames=["sHtmlText","bEnabled","bReadonly","iScrollTop","iScrollLeft","sTooltip"]; UCF_RichTextEdit.prototype.aMethodNames=[];  UCF_RichTextEdit.prototype.sHtmlText=''; UCF_RichTextEdit.prototype.bEnabled=true; UCF_RichTextEdit.prototype.bReadonly=false; UCF_RichTextEdit.prototype.iScrollTop=0; UCF_RichTextEdit.prototype.iScrollLeft=0; UCF_RichTextEdit.prototype.sTooltip=''; UCF_RichTextEdit.prototype.setDefaultValues=function(){this.sHtmlText='';this.bEnabled=true;this.bReadonly=false;this.iScrollTop=0;this.iScrollLeft=0;this.sTooltip='';}; UCF_RichTextEdit.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("RichTextEdit","Change",mParams);}; UCF_RichTextEdit.prototype.fireScroll=function(sId,iScrollTop,iScrollLeft){var mParams={Id:sId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("RichTextEdit","Scroll",mParams);};
 function UCF_PatternContainerIconButton(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PatternContainerIconButton.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PatternContainerIconButton.prototype.onclick=function(oBrowserEvent){this.click();}; UCF_PatternContainerIconButton.prototype.onkeydown=function(oBrowserEvent){if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE){this.click();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_PatternContainerIconButton.prototype.click=function(){if(!this.bEnabled)return;this.firePress(this.sId)}; UCF_PatternContainerIconButton.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(this.sFunctionStatus=="LARGE"){oAccessibilityHelper.setControlType("PCI_E");oAccessibilityHelper.addEnabledTutor("PCI_E_TUT",this.bEnabled);}else if(this.sFunctionStatus=="MEDIUM"){oAccessibilityHelper.setControlType("PCI_M");oAccessibilityHelper.addEnabledTutor("PCI_M_TUT",this.bEnabled);}else if(this.sFunctionStatus=="SMALL"){oAccessibilityHelper.setControlType("PCI_C");oAccessibilityHelper.addEnabledTutor("PCI_C_TUT",this.bEnabled);}oBrowserEvent.cancelBubble();}; UCF_PatternContainerIconButton.prototype.aAttributeNames=["bEnabled","sFunctionStatus"]; UCF_PatternContainerIconButton.prototype.aMethodNames=[];  UCF_PatternContainerIconButton.prototype.bEnabled=true; UCF_PatternContainerIconButton.prototype.sFunctionStatus="LARGE"; UCF_PatternContainerIconButton.prototype.setDefaultValues=function(){this.bEnabled=true;this.sFunctionStatus="LARGE";}; UCF_PatternContainerIconButton.prototype.firePress=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Press)this.oLS.markDirty();this.fireSemanticEvent("PatternContainerIconButton","Press",mParams);};
 function UCF_Group(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;if(this.sScrollingMode!="NONE"){this.oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.addDelegate(this.oScrollArea);} this.setDefaultButtonId(this.sDefaultButtonId);};UCF_Group.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Group.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_Group.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}}; UCF_Group.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Group.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Group.prototype.onScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");this.fireScroll(this.sId,iScrollTop,iScrollLeft);}; UCF_Group.prototype.setScrollPosition=function(iScrollLeft,iScrollTop){this.oScrollArea(iScrollTop,iScrollLeft);}; UCF_Group.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_Group.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("G_END");}else{oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("G");oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addTutor("GROUP_TUT");}}; UCF_Group.prototype.aAttributeNames=["sTitle","sTooltip","sScrollingMode","sDefaultButtonId","iScrollTop","iScrollLeft","sAccessKey","sHotkeysId"]; UCF_Group.prototype.aMethodNames=[];  UCF_Group.prototype.sTitle=''; UCF_Group.prototype.sTooltip=''; UCF_Group.prototype.sScrollingMode="NONE"; UCF_Group.prototype.sDefaultButtonId=''; UCF_Group.prototype.iScrollTop=0; UCF_Group.prototype.iScrollLeft=0; UCF_Group.prototype.sAccessKey=''; UCF_Group.prototype.sHotkeysId=''; UCF_Group.prototype.setDefaultValues=function(){this.sTitle='';this.sTooltip='';this.sScrollingMode="NONE";this.sDefaultButtonId='';this.iScrollTop=0;this.iScrollLeft=0;this.sAccessKey='';this.sHotkeysId='';}; UCF_Group.prototype.fireScroll=function(sId,iScrollTop,iScrollLeft){var mParams={Id:sId,ScrollTop:iScrollTop,ScrollLeft:iScrollLeft};this.fireSemanticEvent("Group","Scroll",mParams);}; UCF_Group.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("Group","Hotkey",mParams);};
 function UCF_ContainerOutliner(){UCF_Object.apply(this);this.bRunning=false;}UCF_ContainerOutliner.prototype=new UCF_Object();UCF_ContainerOutliner.prototype.trigger=function(){var stylesheet=document.styleSheets[0];if(!this.bRunning){stylesheet.addRule("DIV","border:1px solid blue");stylesheet.addRule("SPAN","border:1px solid green");stylesheet.addRule("TABLE","border:1px solid red");this.bRunning=true;}else{stylesheet.removeRule(stylesheet.rules.length-1);stylesheet.removeRule(stylesheet.rules.length-1);stylesheet.removeRule(stylesheet.rules.length-1);this.bRunning=false;}};
 function UCF_Animation(oDomRef,iTime){this.sId=UCF_JsUtil.sGetUID();this.oTimer=null;this.bRunning=false;this.aParameters=new Array();this.aInitialParameters=new Array();this.aFinalParameters=new Array();this.oDomRef=null;this.iElapsedTime=0;this.iTime=500;this.iStartTimeStamp=0;this.oFinishCallbackFunction=null;this.oHexToInt=null;this.oIntToHex=null;if(oDomRef)this.setDomRef(oDomRef);if(iTime)this.setTime(iTime); UCF_ClassLoader.oGetClass("UCF_Animator");};UCF_Animation.prototype=new UCF_Object(); UCF_Animation.prototype.E_PARAM_TYPE={Value:0,StyleValue:1,StyleColor:2}; UCF_Animation.prototype.M_TRANSITIONS={Linear:function LinearTransition(fValue){return fValue;},EaseIn:function EaseInTransition(fValue){return Math.sin(fValue*Math.PI/2);},EaseOut:function EaseOutTransition(fValue){return Math.cos(fValue*Math.PI/2);},EaseInOut:function EaseInOutTransition(fValue){return(Math.sin(fValue*Math.PI/2-Math.PI/2)+1)/2;},LinearLoopBack:function LinearLoopBackTransition(fValue){return 1-Math.abs(fValue-0.5)*2;},EaseLoopBack:function EaseLoopBackTransition(fValue){return Math.sin(fValue*Math.PI);}}; UCF_Animation.prototype.setTime=function(iTime){this.iTime=iTime;}; UCF_Animation.prototype.callbackFinish=function(oObject,sMethodName){this.oFinishCallbackObject=oObject;this.sFinishCallbackMethod=sMethodName;}; UCF_Animation.prototype.callbackRemove=function(){this.oFinishCallbackObject=null;this.sFinishCallbackMethod=null;}; UCF_Animation.prototype.setDomRef=function(oDomRef){this.oDomRef=oDomRef;}; UCF_Animation.prototype.run=function(bRunning){if(this.bRunning==bRunning)return;this.bRunning=bRunning;if(this.bRunning){this.applyInitialParameters();if(!UCF_System.bUseAnimation){this.finalize();return;} UCF_Animator.attach(this);this.iStartTimeStamp=UCF_Animator.iGetTimeStamp();}else{this.applyFinalParameters();UCF_Animator.detach(this);}}; UCF_Animation.prototype.play=function(){this.run(true);}; UCF_Animation.prototype.stop=function(){this.run(false);}; UCF_Animation.prototype.finish=function(){this.finalize();}; UCF_Animation.prototype.finalize=function(){this.iElapsedTime=this.iTime;var aParameters=this.aParameters;for(var i=0;i<aParameters.length;i++){this.stepParameter(aParameters[i]);}if(this.oFinishCallbackObject&&this.sFinishCallbackMethod){this.oFinishCallbackObject[this.sFinishCallbackMethod]();}this.run(false);}; UCF_Animation.prototype.addInitialOpacityValue=function(iValue){  if(UCF_System.sDevice.indexOf("ie")!=-1){this.aInitialParameters.push({sName:"filter",sValue:"Alpha(opacity="+iValue+")",iParamType:this.E_PARAM_TYPE.StyleValue});}else{ this.aInitialParameters.push({sName:"opacity",sValue:iValue>99?"1.0":"0."+(iValue<10?"0":"")+iValue,iParamType:this.E_PARAM_TYPE.StyleValue});}}; UCF_Animation.prototype.addFinalOpacityValue=function(iValue){  if(UCF_System.sDevice.indexOf("ie")!=-1){this.aFinalParameters.push({sName:"filter",sValue:iValue!=100?"Alpha(opacity="+iValue+")":"",iParamType:this.E_PARAM_TYPE.StyleValue});}else{ this.aFinalParameters.push({sName:"opacity",sValue:iValue>99?"1.0":"0."+(iValue<10?"0":"")+iValue,iParamType:this.E_PARAM_TYPE.StyleValue});}}; UCF_Animation.prototype.addInitialStyleValue=function(sName,sValue){this.aInitialParameters.push({sName:sName,sValue:sValue,iParamType:this.E_PARAM_TYPE.StyleValue});}; UCF_Animation.prototype.addFinalStyleValue=function(sName,sValue){this.aFinalParameters.push({sName:sName,sValue:sValue,iParamType:this.E_PARAM_TYPE.StyleValue});}; UCF_Animation.prototype.addStyleChange=function(sName,sPrefix,sSuffix,iStartValue,iEndValue,fnTransition){this.aParameters.push({sName:sName,sPrefix:sPrefix,sSuffix:sSuffix,iStartValue:iStartValue,iEndValue:iEndValue,fnTransition:fnTransition,iParamType:this.E_PARAM_TYPE.StyleValue});}; UCF_Animation.prototype.addOpacityChange=function(iStartValue,iEndValue,fnTransition){  if(UCF_System.sDevice.indexOf("ie")!=-1){this.aParameters.push({sName:"filter",sPrefix:"Alpha(opacity=",sSuffix:")",iStartValue:parseInt(iStartValue),iEndValue:parseInt(iEndValue),fnTransition:fnTransition,iParamType:this.E_PARAM_TYPE.StyleValue});}else{ this.aParameters.push({sName:"opacity",sPrefix:"0.",sSuffix:"",iStartValue:parseInt(iStartValue),iEndValue:parseInt(iEndValue),fnTransition:fnTransition,iParamType:this.E_PARAM_TYPE.StyleValue,iDigits:2});}}; UCF_Animation.prototype.addInitialPropertyValue=function(sName,sValue){this.aInitialParameters.push({sName:sName,sValue:sValue,iParamType:this.E_PARAM_TYPE.Value});}; UCF_Animation.prototype.addFinalPropertyValue=function(sName,sValue){this.aFinalParameters.push({sName:sName,sValue:sValue,iParamType:this.E_PARAM_TYPE.Value});}; UCF_Animation.prototype.addPropertyChange=function(sName,iStartValue,iEndValue,fnTransition){this.aParameters.push({sName:sName,iStartValue:iStartValue,iEndValue:iEndValue,fnTransition:fnTransition,iParamType:this.E_PARAM_TYPE.Value});}; UCF_Animation.prototype.addColorChange=function(sName,sStartValue,sEndValue,fnTransition){this.aParameters.push({sName:sName,sStartValue:sStartValue,sEndValue:sEndValue,fnTransition:fnTransition,iParamType:this.E_PARAM_TYPE.StyleColor});}; UCF_Animation.prototype.applyInitialParameters=function(){this.applyParameters(this.aInitialParameters);}; UCF_Animation.prototype.applyFinalParameters=function(){this.applyParameters(this.aFinalParameters);}; UCF_Animation.prototype.applyParameters=function(aParameters){var oParameter;for(var i=0;i<aParameters.length;i++){oParameter=aParameters[i];switch(oParameter.iParamType){case this.E_PARAM_TYPE.Value:this.oDomRef[oParameter.sName]=oParameter.sValue;break;case this.E_PARAM_TYPE.StyleValue:this.oDomRef.style[oParameter.sName]=oParameter.sValue;break;}}}; UCF_Animation.prototype.step=function(iTimeStamp){var bFinished=false;this.iElapsedTime=iTimeStamp-this.iStartTimeStamp;if(this.iElapsedTime>this.iTime){this.finalize();return;}var aParameters=this.aParameters;for(var i=0;i<aParameters.length;i++){this.stepParameter(aParameters[i]);}}; UCF_Animation.prototype.stepParameter=function(oParameter){switch(oParameter.iParamType){case this.E_PARAM_TYPE.Value:this.oDomRef[oParameter.sName]=this.iGetStepValue(oParameter);break;case this.E_PARAM_TYPE.StyleValue:this.oDomRef.style[oParameter.sName]=this.sGetStepStyleValue(oParameter);break;case this.E_PARAM_TYPE.StyleColor:this.oDomRef.style[oParameter.sName]=this.sGetStepStyleColor(oParameter);break;}}; UCF_Animation.prototype.iGetStepValue=function(oParameter){if(!oParameter.bInitialized){oParameter.iStartValue=parseInt(oParameter.iStartValue);oParameter.iEndValue=parseInt(oParameter.iEndValue);oParameter.iRange=oParameter.iEndValue-oParameter.iStartValue;oParameter.bInitialized=true;}var iValue=Math.round(oParameter.iStartValue+oParameter.iRange*this.getStepFactor(oParameter.fnTransition));return iValue;}; UCF_Animation.prototype.sGetStepStyleValue=function(oParameter){var iValue=this.iGetStepValue(oParameter),sValue=""+iValue;if(oParameter.iDigits){sValue=UCF_StringUtil.fillChars(sValue,"0",oParameter.iDigits,true);}sValue=oParameter.sPrefix+sValue+oParameter.sSuffix;return sValue;}; UCF_Animation.prototype.sGetStepStyleColor=function(oParameter){if(!oParameter.bInitialized){var oStartRGB=this.oGetRGBFromHex(oParameter.sStartValue),oEndRGB=this.oGetRGBFromHex(oParameter.sEndValue);oParameter.oRedPart={iStartValue:oStartRGB.iRed,iEndValue:oEndRGB.iRed,fnTransition:oParameter.fnTransition};oParameter.oGreenPart={iStartValue:oStartRGB.iGreen,iEndValue:oEndRGB.iGreen,fnTransition:oParameter.fnTransition};oParameter.oBluePart={iStartValue:oStartRGB.iBlue,iEndValue:oEndRGB.iBlue,fnTransition:oParameter.fnTransition};oParameter.bInitialized=true;}var iRed=this.iGetStepValue(oParameter.oRedPart),iGreen=this.iGetStepValue(oParameter.oGreenPart),iBlue=this.iGetStepValue(oParameter.oBluePart),sColor=this.sGetHexFromRGB(iRed,iGreen,iBlue);return sColor;}; UCF_Animation.prototype.getStepFactor=function(fnTransition){var fLinearFactor=this.iElapsedTime / this.iTime,fFactor=fnTransition(fLinearFactor);return fFactor;}; UCF_Animation.prototype.oGetRGBFromHex=function(sColor){if(!this.oHexToInt)this.createHexTables();if(sColor.charAt(0)=="#")sColor=sColor.substr(1);var iRed=this.oHexToInt[sColor.substr(0,2)],iGreen=this.oHexToInt[sColor.substr(2,2)],iBlue=this.oHexToInt[sColor.substr(4,2)];return{iRed:iRed,iGreen:iGreen,iBlue:iBlue}}; UCF_Animation.prototype.sGetHexFromRGB=function(iRed,iGreen,iBlue){if(!this.oIntToHex)this.createHexTables();var sColor="#";sColor+=this.oIntToHex[iRed];sColor+=this.oIntToHex[iGreen];sColor+=this.oIntToHex[iBlue];return sColor;}; UCF_Animation.prototype.createHexTables=function(){var aHexDigits=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],sHexValue,iIntValue;this.oIntToHex=[];this.oHexToInt={};for(var i=0;i<16;i++){for(var j=0;j<16;j++){iIntValue=i*16+j;sHexValue=aHexDigits[i]+aHexDigits[j];this.oIntToHex[iIntValue]=sHexValue;this.oHexToInt[sHexValue]=iIntValue;}}};
 function UCF_HorizontalContextualPanel(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.iFocussedTabIndex=0; this.iFocussedMenuIndex=0; this.aMenuNavigation=new Array();this.createTabItems();this.createMenuItems(this.iSelectedTabIndex);};UCF_HorizontalContextualPanel.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_HorizontalContextualPanel.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),sControlType=this.sGetControlType(oSource);if(sControlType=="PANEL")return;var iSelectedTab=this.aTabItems[this.iSelectedTabIndex].iNavIndex;var iSelectedMenu=this.aTabItems[this.iSelectedTabIndex].iSelectedTabMenuIndex;var aItems=(sControlType=="ITEM")?this.aTabNavigation:this.aMenuNavigation[this.iSelectedTabIndex];if(sControlType=="ITEM")this.selectTab(oSource);else if(sControlType=="MENU")this.selectMenu(oSource);if(!window.UCF_System.bIs508&&!oSource.bEnabled)return;this.focusItemByIndex(aItems,oSource.iNavIndex);}; UCF_HorizontalContextualPanel.prototype.onlsfocus=function(oBrowserEvent){var oDomSource=oBrowserEvent.oGetSource(),oSource=oBrowserEvent.oGetSourceControl();if(oSource)sControlType=this.sGetControlType(oSource);if(oDomSource.getAttribute("itn")=="ITBB-ITEM"||oDomSource.getAttribute("itn")=="ITBA-ITEM"){this.focusItemByIndex(this.aTabNavigation,this.iFocussedTabIndex);return;}if(oDomSource.getAttribute("itn")=="ITBB-MENU"||oDomSource.getAttribute("itn")=="ITBA-MENU"){this.focusItemByIndex(this.aMenuNavigation[this.iSelectedTabIndex],this.iFocussedMenuIndex);return;}if(sControlType=="ITEM"){this.iFocussedTabIndex=oSource.iNavIndex;}else if(sControlType=="MENU"){this.iFocussedMenuIndex=oSource.iNavIndex}}; UCF_HorizontalContextualPanel.prototype.onlstabprevious=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(oSource)sControlType=this.sGetControlType(oSource);if(sControlType&&(sControlType=="ITEM"||sControlType=="MENU")){ if(sControlType=="MENU"){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();this.focusItemByIndex(this.aTabNavigation,this.iFocussedTabIndex,"ITEM");return;} var focussed=this.focusPreviousControl();if(focussed){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{ UCF_DomUtil.focusDomElement(document.body);}}}; UCF_HorizontalContextualPanel.prototype.onlstabnext=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(oSource)sControlType=this.sGetControlType(oSource);if(sControlType&&(sControlType=="ITEM"||sControlType=="MENU")){ if(sControlType=="ITEM"&&this.aMenuNavigation&&this.aMenuNavigation[this.iSelectedTabIndex]&&this.aMenuNavigation[this.iSelectedTabIndex].length>0){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();this.focusItemByIndex(this.aMenuNavigation[this.iSelectedTabIndex],this.iFocussedMenuIndex,"MENU");return;} var focussed=this.focusNextControl();if(focussed){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else{ UCF_DomUtil.focusDomElement(document.body);}}}; UCF_HorizontalContextualPanel.prototype.onlsnext=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),sControlType=this.sGetControlType(oSource),aItems=(sControlType=="ITEM")?this.aTabNavigation:this.aMenuNavigation[this.iSelectedTabIndex],iNewIndex=oSource.iNavIndex+1;if(iNewIndex<aItems.length){this.focusItemByIndex(aItems,iNewIndex,sControlType);}else{this.focusItemByIndex(aItems,0,sControlType);}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_HorizontalContextualPanel.prototype.onlsprevious=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),sControlType=this.sGetControlType(oSource),aItems=(sControlType=="ITEM")?this.aTabNavigation:this.aMenuNavigation[this.iSelectedTabIndex],iNewIndex=oSource.iNavIndex-1;if(iNewIndex>=0){this.focusItemByIndex(aItems,iNewIndex,sControlType);}else{this.focusItemByIndex(aItems,aItems.length-1,sControlType);}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_HorizontalContextualPanel.prototype.onlshome=function(oBrowserEvent){var sControlType=this.sGetControlType(oBrowserEvent.oGetSourceControl()),aItems=(sControlType=="ITEM")?this.aTabNavigation:this.aMenuNavigation[this.iSelectedTabIndex];this.focusItemByIndex(aItems,0,sControlType);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_HorizontalContextualPanel.prototype.onlsend=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),sControlType=this.sGetControlType(oSource),aItems=(sControlType)?this.aTabNavigation:this.aMenuNavigation[this.iSelectedTabIndex];this.focusItemByIndex(aItems,aItems.length-1,sControlType);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_HorizontalContextualPanel.prototype.focusItemByIndex=function(aItems,iNewIndex,sControlType){if(sControlType=="ITEM")this.iFocussedTabIndex=iNewIndex;else if(sControlType=="MENU")this.iFocussedMenuIndex=iNewIndex;if(aItems.length==0)return;aItems[iNewIndex].moveFocus();}; UCF_HorizontalContextualPanel.prototype.onlsselect=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),sControlType=this.sGetControlType(oSource);if(sControlType=="ITEM")this.selectTab(oSource);else if(sControlType=="MENU")this.selectMenu(oSource);}; UCF_HorizontalContextualPanel.prototype.selectTab=function(oNewSelected){var oOldSelected=this.aTabItems[this.iSelectedTabIndex];if(oNewSelected==oOldSelected||!oNewSelected.bEnabled)return;else if(this.bClientSelect==false&&oNewSelected!=oOldSelected&&oNewSelected.bEnabled){this.iFocussedTabIndex=oNewSelected.iNavIndex;this.fireSelect(this.sId,oNewSelected.sId);return;}var oNewTab=oNewSelected.oDomRef;var oOldTab=oOldSelected.oDomRef;with(UCF_DomUtil){setClass(oNewTab,oNewTab.className+"Sel");setClass(oNewTab.childNodes[0],oNewTab.childNodes[0].className+"Sel");setClass(oNewTab.childNodes[1],oNewTab.childNodes[1].className+"Sel");setClass(oOldTab,oOldTab.className.split("Sel")[0]);setClass(oOldTab.childNodes[0],oOldTab.childNodes[0].className.split("Sel")[0]);setClass(oOldTab.childNodes[1],oOldTab.childNodes[1].className.split("Sel")[0]);$(oOldSelected.sId+"-cnt").style.display="none";$(oNewSelected.sId+"-cnt").style.display="block";}if(oNewSelected.iSelectedTabMenuIndex>-1||UCF_DomUtil.$(oNewSelected.sId+"-cnt").getElementsByTagName("SPAN").length>0){this.createMenuItems(oNewSelected.iIndex);this.iFocussedMenuIndex=this.aTabItems[oNewSelected.iIndex].iSelectedTabMenuIndex;}this.fireSelect(this.sId,oNewSelected.sId);this.iSelectedTabIndex=oNewSelected.iIndex;this.iFocussedTabIndex=oNewSelected.iNavIndex;}; UCF_HorizontalContextualPanel.prototype.selectMenu=function(oNewSelectedMenu){var iSelectedMenuIndex=this.aTabItems[this.iSelectedTabIndex].iSelectedTabMenuIndex;this.iFocussedMenuIndex=oNewSelectedMenu.iNavIndex;if(!oNewSelectedMenu.bEnabled||oNewSelectedMenu.iIndex==iSelectedMenuIndex)return;else if(this.bClientSelect==false&&oNewSelectedMenu.bEnabled&&oNewSelectedMenu.iIndex!=iSelectedMenuIndex){this.fireSelect(this.sId,oNewSelectedMenu.sId);return;}UCF_DomUtil.setClass(oNewSelectedMenu.oDomRef,oNewSelectedMenu.oDomRef.className+"Sel");if(iSelectedMenuIndex>-1){var oOldSelectedMenu=this.aMenuNavigation[this.iSelectedTabIndex].oSelectedMenu;UCF_DomUtil.setClass(oOldSelectedMenu.oDomRef,oOldSelectedMenu.oDomRef.className.split("Sel")[0]);}this.fireSelect(this.sId,oNewSelectedMenu.sId);this.aMenuNavigation[this.iSelectedTabIndex].oSelectedMenu=oNewSelectedMenu;this.aTabItems[this.iSelectedTabIndex].iSelectedTabMenuIndex=oNewSelectedMenu.iIndex;}; UCF_HorizontalContextualPanel.prototype.createTabItems=function(){var aTabItems=UCF_DomUtil.$(this.sId+"-panel").childNodes;this.aTabNavigation=new Array();this.aTabItems=new Array();for(var i=0;i<aTabItems.length;i++){var oControlItem=this.oLS.oControlFactory.oGetControlByDomRef(aTabItems[i],true);oControlItem.iNavIndex=this.aTabNavigation.length;if(oControlItem.bEnabled||window.UCF_System.bIs508){this.aTabNavigation.push(oControlItem);}this.aTabItems.push(oControlItem);}if(this.aTabItems[this.iSelectedTabIndex].bEnabled)this.iFocussedTabIndex=this.iSelectedTabIndex; else this.iFocussedTabIndex=this.aTabNavigation[0].iNavIndex;}; UCF_HorizontalContextualPanel.prototype.createMenuItems=function(iTabIndex){var oSelectedTab=this.aTabItems[iTabIndex];var iSelectedMenuIndex=oSelectedTab.iSelectedTabMenuIndex;var aMenuItems=UCF_DomUtil.$(oSelectedTab.sId+"-cnt").getElementsByTagName("SPAN");if((iSelectedMenuIndex==-1&&aMenuItems.length==0)||this.aMenuNavigation[iTabIndex]!=null)return; this.iFocussedMenuIndex=iSelectedMenuIndex; this.aMenuNavigation[iTabIndex]=new Array();for(var i=0;i<aMenuItems.length;i++){var oControlItem=this.oLS.oControlFactory.oGetControlByDomRef(aMenuItems[i],true);if(oControlItem==null)continue;oControlItem.iNavIndex=this.aMenuNavigation[iTabIndex].length;if(oControlItem.bEnabled||window.UCF_System.bIs508){this.aMenuNavigation[iTabIndex].push(oControlItem);}if(i==oSelectedTab.iSelectedTabMenuIndex)this.aMenuNavigation[iTabIndex].oSelectedMenu=oControlItem;}if(this.aMenuNavigation[iTabIndex].oSelectedMenu==null&&this.aMenuNavigation[iTabIndex].length>0)this.aMenuNavigation[iTabIndex].oSelectedMenu=this.aMenuNavigation[iTabIndex][0];}; UCF_HorizontalContextualPanel.prototype.sGetControlType=function(oControl){if(UCF_JsUtil.bInstanceOf(oControl,"UCF_HorizontalContextualPanel"))return "PANEL";else if(UCF_JsUtil.bInstanceOf(oControl,"UCF_HorizontalContextualPanelItem"))return "ITEM";else if(UCF_JsUtil.bInstanceOf(oControl,"UCF_HorizontalContextualPanelMenuItem"))return "MENU";else return null;}; UCF_HorizontalContextualPanel.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(UCF_JsUtil.bInstanceOf(oSource,"UCF_HorizontalContextualPanelMenuItem")){var sControlType="HCNP_LNK",iItemCount=this.aMenuNavigation[this.iSelectedTabIndex].length,bSelected=this.aTabItems[this.iSelectedTabIndex].iSelectedTabMenuIndex==oSource.iNavIndex;}else if(UCF_JsUtil.bInstanceOf(oSource,"UCF_HorizontalContextualPanelItem")){var sControlType="HCNP",iItemCount=this.aTabItems.length,bSelected=this.iSelectedTabIndex==oSource.iIndex;}oAccessibilityHelper.setControlType(sControlType);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setTooltip(oSource.sTooltip);oAccessibilityHelper.setAccessKey(oSource.sAccessKey);oAccessibilityHelper.setItemCount(iItemCount);oAccessibilityHelper.setItemIndex(oSource.iNavIndex+1);oAccessibilityHelper.setSelected(bSelected);if(!bSelected)oAccessibilityHelper.addTutor("SELECT_TUT");oAccessibilityHelper.addTutor("LRNAV_TUT");}; UCF_HorizontalContextualPanel.prototype.aAttributeNames=["iSelectedTabIndex","bClientSelect"]; UCF_HorizontalContextualPanel.prototype.aMethodNames=[];  UCF_HorizontalContextualPanel.prototype.iSelectedTabIndex=0; UCF_HorizontalContextualPanel.prototype.bClientSelect=true; UCF_HorizontalContextualPanel.prototype.setDefaultValues=function(){this.iSelectedTabIndex=0;this.bClientSelect=true;}; UCF_HorizontalContextualPanel.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};this.fireSemanticEvent("HorizontalContextualPanel","Select",mParams);};
 function UCF_RadioButtonGroup(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.aRadioButtons=new Array();};UCF_RadioButtonGroup.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RadioButtonGroup.prototype.aGetGroup=function(){if(this.aRadioButtons.length>0)return this.aRadioButtons;var aRadioButtonsRef=this.oDomRef.getElementsByTagName("input"),j=0;for(var i=0;i<aRadioButtonsRef.length;i++){if(aRadioButtonsRef[i].ct=="R"){this.aRadioButtons[j]=this.oLS.oControlFactory.oGetControlById(aRadioButtonsRef[i].id,true);j++;}}return this.aRadioButtons;}; UCF_RadioButtonGroup.prototype.oGetSelectedRadioButton=function(){var aRadioButtons=this.aGetGroup(),oRadio=null; for(var i=0;i<aRadioButtons.length;i++){if(aRadioButtons[i].bIsFocusable()){if(aRadioButtons[i].bChecked){oRadio=aRadioButtons[i];break;}else{if(!oRadio&&aRadioButtons[i].oFocusDomRef.tabIndex==0)oRadio=aRadioButtons[i];}}}return oRadio;}; UCF_RadioButtonGroup.prototype.focus=function(){if(UCF_System.bIs508){UCF_DomUtil.focusDomElement(this.oFocusDomRef);}else{var oControl=this.oGetSelectedRadioButton();if(oControl)oControl.focus();}}; UCF_RadioButtonGroup.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_RadioButtonGroup.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_RadioButtonGroup.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;var oSource=oBrowserEvent.oGetSource(),oLabel=oAccessibilityHelper.sGetLabel(this.sId); if(oSource==this.oDomRef){ var aCheckBoxes=oSource.getElementsByTagName("TD");var iItemCount=aCheckBoxes.length;oAccessibilityHelper.setControlType("RG",new Array(iItemCount.toString())); var radioButton=this.aGetGroup(),bEnabled=false,bReadonly=true;for(var i in radioButton){if(radioButton[i].bEnabled)bEnabled=true;if(!radioButton[i].bReadonly)bReadonly=false;}if(!bEnabled)oAccessibilityHelper.setEnabled(bEnabled);if(bReadonly)oAccessibilityHelper.setReadonly(bReadonly); if(this.sAccessibilityDescription==""){oAccessibilityHelper.setLabel(oAccessibilityHelper.sGetLabelText(this.sId));}else{oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);} if(oLabel&&oLabel.bRequired)oAccessibilityHelper.setRequired(true); oAccessibilityHelper.addTutor("GROUP_TUT");} else{oAccessibilityHelper.setControlType("RG_END");}}; UCF_RadioButtonGroup.prototype.aAttributeNames=["sAccessibilityDescription"]; UCF_RadioButtonGroup.prototype.aMethodNames=[];  UCF_RadioButtonGroup.prototype.sAccessibilityDescription=''; UCF_RadioButtonGroup.prototype.setDefaultValues=function(){this.sAccessibilityDescription='';};
 function UCF_TabStripItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.sScrollingMode!="NONE"){this.oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onScroll");this.addDelegate(this.oScrollArea);}this.oFocusDomRef=this.oDomRef.lastChild;};UCF_TabStripItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TabStripItem.prototype.initialize=function(){if(this.oScrollArea){this.oScrollArea.setScrollPosition(this.iScrollTop,this.iScrollLeft);}}; UCF_TabStripItem.prototype.bIsFocusable=function(){return false;}; UCF_TabStripItem.prototype.destroy=function(){if(this.oScrollArea){this.oScrollArea.detachEvent(this.oScrollArea.E_EVENTS.Scroll,this);this.oScrollArea.destroy();}}; UCF_TabStripItem.prototype.onScroll=function(oEvent){var oTabStrip=this.oGetParent(),iScrollTop=oEvent.oGetParam("iScrollTop"),iScrollLeft=oEvent.oGetParam("iScrollLeft");oTabStrip.fireTabScroll(oTabStrip.sId,this.sId,iScrollTop,iScrollLeft);}; UCF_TabStripItem.prototype.sGetAccChildren=function(){var aAccChildren=this.aGetAccChildrenRecursive(this.oGetParent().oDomRef,new Array());return this.sGetAccChildrenText(aAccChildren);}; UCF_TabStripItem.prototype.aAttributeNames=["sId","iIndex","sTooltip","bEnabled","sScrollingMode","bHasToolbar","sDefaultButtonId","bIsClosable","iScrollTop","iScrollLeft","bClientTabSelect","sHotkeysId","sAccessKey"]; UCF_TabStripItem.prototype.aMethodNames=[];  UCF_TabStripItem.prototype.sId=''; UCF_TabStripItem.prototype.iIndex=0; UCF_TabStripItem.prototype.sTooltip=''; UCF_TabStripItem.prototype.bEnabled=true; UCF_TabStripItem.prototype.sScrollingMode="NONE"; UCF_TabStripItem.prototype.bHasToolbar=false; UCF_TabStripItem.prototype.sDefaultButtonId=''; UCF_TabStripItem.prototype.bIsClosable=false; UCF_TabStripItem.prototype.iScrollTop=0; UCF_TabStripItem.prototype.iScrollLeft=0; UCF_TabStripItem.prototype.bClientTabSelect=true; UCF_TabStripItem.prototype.sHotkeysId=''; UCF_TabStripItem.prototype.sAccessKey=''; UCF_TabStripItem.prototype.setDefaultValues=function(){this.sId='';this.iIndex=0;this.sTooltip='';this.bEnabled=true;this.sScrollingMode="NONE";this.bHasToolbar=false;this.sDefaultButtonId='';this.bIsClosable=false;this.iScrollTop=0;this.iScrollLeft=0;this.bClientTabSelect=true;this.sHotkeysId='';this.sAccessKey='';};
 function UCF_TextView(oDomRef,oLS){if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]); this.bAllowTextSelection=true;};UCF_TextView.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TextView.prototype.onclick=function(oBrowserEvent){this.fireActivate(this.sId);}; UCF_TextView.prototype.ondblclick=function(oBrowserEvent){this.fireDoubleClick(this.sId);}; UCF_TextView.prototype.setText=function(sText){if(this.bRequired)this.oDomRef.firstChild.nodeValue=sText;else UCF_DomUtil.setInnerText(this.oDomRef,sText);}; UCF_TextView.prototype.onlsaccessibility=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sText=UCF_DomUtil.sGetInnerText(oControl.oDomRef),sSemantic="";if(oControl.bRequired)sText.replace("*","");if(UCF_StringUtil.bIsEmpty(sText))oAccessibilityHelper.setEmpty(true);else oAccessibilityHelper.setText(sText);switch(oControl.sSemanticColor){case "DIMINISHED": break;case "POSITIVE":sSemantic="POSITIVE";break;case "CRITICAL":sSemantic="CRITICALVALUE";break;case "NEGATIVE":sSemantic="NEGATIVE";break;case "MARKED1":sSemantic="MARKED";break;case "MARKED2":sSemantic="MARKED";break;}if(sSemantic!="")oAccessibilityHelper.addSemantic(sSemantic);sSemantic="";switch(this.sDesign){case "EMPHASIZED":sSemantic="EMPHASIZED";break;case "HEADER1":sSemantic="H1";break;case "HEADER2":sSemantic="H2";break;case "HEADER3":sSemantic="H3";break;case "HEADER4":sSemantic="H4";break;}if(sSemantic!="")oAccessibilityHelper.addSemantic(sSemantic);if(sSemantic!="DIMINISHED")oAccessibilityHelper.setEnabled(this.bEnabled); var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setRequired(this.bRequired);oAccessibilityHelper.setTooltip(this.sTooltip);}; UCF_TextView.prototype.aAttributeNames=["sTooltip","bRequired","bEnabled","sDesign","sSemanticColor","sSemanticBgColor","bUsedInSapTable"]; UCF_TextView.prototype.aMethodNames=["setText"];  UCF_TextView.prototype.sTooltip=''; UCF_TextView.prototype.bRequired=false; UCF_TextView.prototype.bEnabled=true; UCF_TextView.prototype.sDesign="STANDARD"; UCF_TextView.prototype.sSemanticColor="DEFAULT"; UCF_TextView.prototype.sSemanticBgColor="DEFAULT"; UCF_TextView.prototype.bUsedInSapTable=false; UCF_TextView.prototype.setDefaultValues=function(){this.sTooltip='';this.bRequired=false;this.bEnabled=true;this.sDesign="STANDARD";this.sSemanticColor="DEFAULT";this.sSemanticBgColor="DEFAULT";this.bUsedInSapTable=false;}; UCF_TextView.prototype.fireActivate=function(sId){var mParams={Id:sId};this.fireSemanticEvent("TextView","Activate",mParams);}; UCF_TextView.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("TextView","DoubleClick",mParams);};UCF_TextView.prototype.aPublicMethods=["setText"];
  function UCF_HTMLTextView(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_HTMLTextView.prototype=new(UCF_ClassLoader.oGetClass("UCF_TextView"))();UCF_HTMLTextView.prototype.initialize=function(){}; UCF_HTMLTextView.prototype.aAttributeNames=[]; UCF_HTMLTextView.prototype.aMethodNames=[];  UCF_HTMLTextView.prototype.setDefaultValues=function(){};
 function UCF_PopIn(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(UCF_System.bIs508){this.oFocusDomRef=this.oDomRef;}else{var oDomRefCloseButton=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.CLOSE_BUTTON);if(oDomRefCloseButton)this.oFocusDomRef=oDomRefCloseButton;}};UCF_PopIn.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_PopIn.prototype.SUFFIX={CLOSE_BUTTON:"cl",TITLE:"tit",END:"end"}; UCF_PopIn.prototype.onclick=function(oBrowserEvent){this.close(oBrowserEvent);}; UCF_PopIn.prototype.onlsselect=function(oBrowserEvent){this.close(oBrowserEvent);}; UCF_PopIn.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_PopIn.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_PopIn.prototype.close=function(oBrowserEvent){if(this.bHasCloseIcon){if(oBrowserEvent.oGetSource().getAttribute("id").indexOf("-cl")>-1){this.fireClose(this.sId);oBrowserEvent.cancel();}}}; UCF_PopIn.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource.id.indexOf("-"+this.SUFFIX.END)>-1){oAccessibilityHelper.setControlType("PI_END");}else if(oSource.id.indexOf("-"+this.SUFFIX.CLOSE_BUTTON)>-1){oAccessibilityHelper.setControlType("PI_CLB");oAccessibilityHelper.addTutor("B_TUT");}else{oAccessibilityHelper.setControlType("PI");oAccessibilityHelper.setTooltip(this.sTooltip);var sTitleRef=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.TITLE);if(sTitleRef)oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(sTitleRef));oAccessibilityHelper.addTutor("GROUP_TUT");oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);}}; UCF_PopIn.prototype.aAttributeNames=["bHasCloseIcon","sAccessibilityDescription"]; UCF_PopIn.prototype.aMethodNames=[];  UCF_PopIn.prototype.bHasCloseIcon=true; UCF_PopIn.prototype.sAccessibilityDescription=''; UCF_PopIn.prototype.setDefaultValues=function(){this.bHasCloseIcon=true;this.sAccessibilityDescription='';}; UCF_PopIn.prototype.fireClose=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Close)this.oLS.markDirty();this.fireSemanticEvent("PopIn","Close",mParams);};
 function UCF_TriStateCheckBox(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oTriStateCheckBoxRef=UCF_DomUtil.$(this.sId);this.oImageRef=UCF_DomUtil.$(this.sId+"-img");this.oFocusDomRef=UCF_DomUtil.$(this.sId+"-lbl"); if(this.oDataTip){this.oDataTip.setOpenerRef(this.oImageRef);if(this.bShowHelp){this.oDataTip.setHoverDomRef(this.oFocusDomRef);this.oDataTip.setHoverDomRefExcluded(this.oImageRef);}}};UCF_TriStateCheckBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TriStateCheckBox.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;this.toggle();}; UCF_TriStateCheckBox.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_TriStateCheckBox.prototype.onkeydown=function(oBrowserEvent){if(!this.bEnabled)return; if(!this.bReadonly&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE&&!oBrowserEvent.bAlt()){this.toggle();}}; UCF_TriStateCheckBox.prototype.toggle=function(){switch(this.sState){case "CHECKED":this.setState("INDETERMINATE");break;case "UNCHECKED":this.setState("CHECKED");break;case "INDETERMINATE":this.setState("UNCHECKED");break;}this.refocus(this.oFocusDomRef);}; UCF_TriStateCheckBox.prototype.setState=function(sState){if(this.sState==sState)return;this.sState=sState; var className="urTriImg";switch(sState){case "CHECKED":className+="On";break;case "UNCHECKED":className+="Off";break;case "INDETERMINATE":className+="Ind";break;}if(this.bEnabled){if(this.bInvalid||this.sInputState=="ERROR")className+="Inv";else if(this.sInputState=="WARNING")className+="Warn";}className+=(this.bEnabled?"":"Dsbl");this.oImageRef.className=className; this.fireChange(this.sId,this.sState);}; UCF_TriStateCheckBox.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("TRI"); var sControlText=this.sText,sLabelText=oAccessibilityHelper.sGetLabelText(this.sId),oLabel=oAccessibilityHelper.sGetLabel(this.sId);if(sControlText!=""&&sLabelText!=""){oAccessibilityHelper.setLabel(sLabelText+" - "+sControlText);}else{oAccessibilityHelper.setLabel(sLabelText+sControlText);}oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setInvalid(this.bInvalid);if(this.bInvalid||this.sInputState=="ERROR"){oAccessibilityHelper.setInvalid(true);}if(this.sInputState=="WARNING"){oAccessibilityHelper.setWarning(true);} if(oLabel&&oLabel.bRequired)oAccessibilityHelper.setRequired(true);switch(this.sState){case "CHECKED":oAccessibilityHelper.setSelected(true);break;case "UNCHECKED":oAccessibilityHelper.setNotSelected(true);break;case "INDETERMINATE":oAccessibilityHelper.setUndefined(true);break;}oAccessibilityHelper.setTooltip(this.sTooltip);if(!this.bReadonly){switch(this.sState){case "CHECKED":oAccessibilityHelper.addEnabledTutor("TRI_SEL_TUT",this.bEnabled);break;case "UNCHECKED":oAccessibilityHelper.addEnabledTutor("TRI_NSEL_TUT",this.bEnabled);break;case "INDETERMINATE":oAccessibilityHelper.addEnabledTutor("TRI_UNDEF_TUT",this.bEnabled);break;}}}; UCF_TriStateCheckBox.prototype.aAttributeNames=["sState","bEnabled","bReadonly","sText","sTooltip","bInvalid","bShowHelp","sInputState","sAccessKey"]; UCF_TriStateCheckBox.prototype.aMethodNames=[];  UCF_TriStateCheckBox.prototype.sState="UNCHECKED"; UCF_TriStateCheckBox.prototype.bEnabled=true; UCF_TriStateCheckBox.prototype.bReadonly=false; UCF_TriStateCheckBox.prototype.sText=''; UCF_TriStateCheckBox.prototype.sTooltip=''; UCF_TriStateCheckBox.prototype.bInvalid=false; UCF_TriStateCheckBox.prototype.bShowHelp=false; UCF_TriStateCheckBox.prototype.sInputState="NONE"; UCF_TriStateCheckBox.prototype.sAccessKey=''; UCF_TriStateCheckBox.prototype.setDefaultValues=function(){this.sState="UNCHECKED";this.bEnabled=true;this.bReadonly=false;this.sText='';this.sTooltip='';this.bInvalid=false;this.bShowHelp=false;this.sInputState="NONE";this.sAccessKey='';}; UCF_TriStateCheckBox.prototype.fireChange=function(sId,sState){var mParams={Id:sId,State:sState};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("TriStateCheckBox","Change",mParams);}; UCF_TriStateCheckBox.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("TriStateCheckBox","DoubleClick",mParams);};
 function UCF_InputTokenizer(oDomRef,oLS){if(arguments.length==0)return; this.sBehavior="FREETEXT";this.bInvalid=this.sInputState=="ERROR";this.bShowRequiredIndicator=false;this.bAllowVirtualTyping=false;this.sFieldHelp="F4LOOKUP";if(this.bDisplayAsText){this.bHideFieldHelp=true;}UCF_SuggestBox.apply(this,[oDomRef,oLS]);this.sOldValue=this.oDomRef.value;this.createTokens();this.sCameFrom=null;this.bDropOccured=false;};UCF_InputTokenizer.prototype=new(UCF_ClassLoader.oGetClass("UCF_SuggestBox"))(); UCF_InputTokenizer.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(this.oDomRef.value!=""&&this.bIsValidToken()&&this.bEnabled&&oSource==this.oDomRef){UCF_DomUtil.setSelection(this.oDomRef,0,this.oDomRef.value.length);}UCF_SuggestBox.prototype.onclick.apply(this,arguments);oBrowserEvent.cancelBubble();}; UCF_InputTokenizer.prototype.onmouseover=function(oBrowserEvent){if(!this.bDisplayAsText)return;if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldFocus");}}; UCF_InputTokenizer.prototype.onmouseout=function(oBrowserEvent){if(!this.bDisplayAsText)return;if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");}}; UCF_InputTokenizer.prototype.ondeactivate=function(oBrowserEvent){try{var oTextRange=document.selection.createRange();if(this.bIsSelected()){oTextRange.collapse();oTextRange.select();}}catch(oException){}}; UCF_InputTokenizer.prototype.ondblclick=function(oBrowserEvent){if(!this.bHasClickableToken||!this.bIsValidToken()||!this.bEnabled)return;this.fireNavigate(this.sId);oBrowserEvent.cancelBubble();}; UCF_InputTokenizer.prototype.onkeydown=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();if(!this.bIsValidToken()||(this.oListBox&&this.oListBox.bOpened)){UCF_SuggestBox.prototype.onkeydown.apply(this,arguments);return;}this.bCancelKeyUp=false;var bMoveToStart=iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_UP,bMoveToEnd=iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.ARROW_DOWN,oDomRef=this.oDomRef,iEndPosition=oDomRef.value.length;if(this.bNavigation&&(bMoveToStart||bMoveToEnd)){ if(!oBrowserEvent.bShift()){UCF_DomUtil.setCursorPos(oDomRef,bMoveToStart?0:iEndPosition);} else if(oBrowserEvent.bShift()){ if(bMoveToEnd){ if(!this.bIsSelected()&&this.bCursorAtStart()){UCF_DomUtil.setSelection(oDomRef,0,iEndPosition);this.sCameFrom="START";return oBrowserEvent.cancel();} else if(this.bIsSelected()&&this.sCameFrom=="END"){UCF_DomUtil.setCursorPos(oDomRef,iEndPosition);oBrowserEvent.cancel();}} else if(bMoveToStart){ if((!this.bIsSelected()&&this.bCursorAtEnd())||(this.bIsSelected()&&this.sCameFrom=="END")){UCF_DomUtil.setSelection(oDomRef,0,iEndPosition);this.sCameFrom="END";return oBrowserEvent.cancel();} else if(this.bIsSelected()&&this.sCameFrom=="START"){UCF_DomUtil.setCursorPos(oDomRef,0);}}}} else if((iKey==UCF_KeyCodes.BACKSPACE&&this.bCursorAtEnd())||(iKey==UCF_KeyCodes.DELETE&&this.bCursorAtStart())){oDomRef.value="";this.setInitStatus();}else if(!this.bIsFunctionKey(iKey)){   if(this.bIsSelected()&&((!oBrowserEvent.bCtrl()||(oBrowserEvent.bCtrl()&&iKey==UCF_KeyCodes.V))&&(!oBrowserEvent.bAlt()&&iKey!=UCF_KeyCodes.TAB))){this.setInitStatus();}else if(this.bCursorAtEnd()||this.bCursorAtStart()){this.bCancelKeyUp=true;return oBrowserEvent.cancel();}} else if(iKey==UCF_KeyCodes.F2&&this.bHasClickableToken&&this.bIsValidToken()&&this.bEnabled){this.fireNavigate(this.sId);oBrowserEvent.cancelBubble();}UCF_SuggestBox.prototype.onkeydown.apply(this,arguments);};UCF_InputTokenizer.prototype.onkeyup=function(oBrowserEvent){if(this.bCancelKeyUp){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}if(this.oDomRef.value!=this.sOldValue){this.setInitStatus();}UCF_SuggestBox.prototype.onkeyup.apply(this,arguments);}; UCF_InputTokenizer.prototype.bCursorAtStart=function(){return(UCF_DomUtil.iGetSelectionStart(this.oDomRef)==UCF_DomUtil.iGetSelectionEnd(this.oDomRef)&&UCF_DomUtil.iGetCursorPos(this.oDomRef)==0);}; UCF_InputTokenizer.prototype.onlsfocus=function(oBrowserEvent){     if(this.bDropOccured&&this.oDomRef.value!=this.sOldValue){this.bCancelKeyUp=false;this.setInitStatus();this.bDropOccured=false;}if(this.bEnabled&&!this.bReadonly){if(this.sInputPrompt&&this.oDomRef.value==this.sInputPrompt){this.oDomRef.value="";this.oDomRef.className=this.oDomRef.className.replace("urEdf2TxtLbl","");}}UCF_SuggestBox.prototype.onlsfocus.apply(this,arguments);};UCF_InputTokenizer.prototype.ondrop=function(oBrowserEvent){this.bDropOccured=true;}; UCF_InputTokenizer.prototype.onlsblur=function(oBrowserEvent){ if(this.oDomRef.value==""){this.setInitStatus();}UCF_SuggestBox.prototype.onlsblur.apply(this,arguments);}; UCF_InputTokenizer.prototype.bCursorAtEnd=function(){return(UCF_DomUtil.iGetSelectionStart(this.oDomRef)==UCF_DomUtil.iGetSelectionEnd(this.oDomRef)&&UCF_DomUtil.iGetCursorPos(this.oDomRef)==this.oDomRef.value.length);};UCF_InputTokenizer.prototype.bIsSelected=function(){return(UCF_DomUtil.iGetSelectionStart(this.oDomRef)==0&&UCF_DomUtil.iGetSelectionEnd(this.oDomRef)==this.oDomRef.value.length&&this.oDomRef.value.length>0);}; UCF_InputTokenizer.prototype.onlsenter=function(oBrowserEvent){ if(this.bOpen){var sKey=this.oListBox.sGetSelectedItemKey();var sValue="";if(sKey!=null){sValue=this.oListBox.sGetItemValue(sKey);this.setValue(sKey,sValue,true);this.sOldValue=sValue;this.markAsTokenWithAction(false);}this.selectText(sValue);this.onTokenListSelect();this.close();} var bChanged=this.bPrepareFireChange(false,oBrowserEvent); if(this.mEvents.Enter){this.fireEnter(this.sId,this.sGetValue());} if(bChanged||this.mEvents.Enter){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_InputTokenizer.prototype.setInitStatus=function(){if(this.bReadonly||!this.bEnabled)return;if(this.bHasClickableToken&&this.bEnabled){UCF_DomUtil.removeClass(this.oDomRef,"lsITactValid");}else{UCF_DomUtil.removeClass(this.oDomRef,"lsITvalid");}this.sKey="";}; UCF_InputTokenizer.prototype.bIsValidToken=function(){return this.sKey!="";}; UCF_InputTokenizer.prototype.openInternal=function(){this.oListBox=this.oGetListBox();if(this.oListBox!=null){this.oListBox.attachEvent(this.oListBox.E_EVENTS.Select,this,"onTokenListSelect");this.oListBox.attachEvent(this.oListBox.E_EVENTS.Close,this,"onTokenListClose");this.setInitStatus();} UCF_SuggestBox.prototype.openInternal.apply(this,arguments);}; UCF_InputTokenizer.prototype.onTokenListSelect=function(oEvent){var sKey=(oEvent!=null)?oEvent.oGetParam("sKey"):this.sKey,bHasAction=this.bGetTokenWithAction(sKey);if(this.oListBox&&this.oListBox.bOpened&&(oEvent&&oEvent.oGetParam("sEventName")!="click"))return;if(bHasAction!=null&&sKey!=""){this.markAsTokenWithAction(bHasAction);}}; UCF_InputTokenizer.prototype.onlsescape=function(){UCF_SuggestBox.prototype.onlsescape.apply(this,arguments);if(this.bIsValidToken()){this.onTokenListSelect();}}; UCF_InputTokenizer.prototype.onTokenListClose=function(){this.resetKey();this.sOldValue=this.oDomRef.value;}; UCF_InputTokenizer.prototype.resetKey=function(){var sNewValue=this.oListBox.sGetItemValue(this.sKey);if(sNewValue!=this.oDomRef.value){this.sKey="";}}; UCF_InputTokenizer.prototype.bGetTokenWithAction=function(sKey){for(var i=0;i<this.aKeysWithAction.length;i++){if(this.aKeysWithAction[i]==sKey)return true;}return false;}; UCF_InputTokenizer.prototype.markAsTokenWithAction=function(bHasAction){bHasAction=this.bEnabled&&bHasAction;var sTokenStyle=(bHasAction)?"lsITactValid":"lsITvalid",sCurrentStyle=this.oDomRef.className;if(sCurrentStyle.indexOf(sTokenStyle)>-1)return;var sReplaceStyle=(!bHasAction)?"lsITactValid":"lsITvalid";if(sCurrentStyle.indexOf(sReplaceStyle)>-1){UCF_DomUtil.replaceClass(this.oDomRef,sReplaceStyle,sTokenStyle);}else{UCF_DomUtil.addClass(this.oDomRef,sTokenStyle);}this.bHasClickableToken=bHasAction;}; UCF_InputTokenizer.prototype.createTokens=function(){this.aKeysWithAction=[];if(this.sKey!=""&&this.bHasClickableToken){this.aKeysWithAction.push(this.sKey);}}; UCF_InputTokenizer.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setRequired(this.bRequired);oAccessibilityHelper.setInvalid(this.sInputState=="ERROR");oAccessibilityHelper.setWarning(this.sInputState=="WARNING");oAccessibilityHelper.setControlType("IT");oAccessibilityHelper.setText(this.sGetValue());oAccessibilityHelper.setValid(this.bIsValidToken());if(this.bHasClickableToken){oAccessibilityHelper.addTutor("IT_F2");}oAccessibilityHelper.addEnabledTutor("I_F4_TUT",this.bEnabled&&!this.bReadonly&&this.bShowHelpButton);}; UCF_InputTokenizer.prototype.bIsFunctionKey=function(iKey){return(iKey==UCF_KeyCodes.TAB||iKey==UCF_KeyCodes.ENTER||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.CONTROL||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.CONTROL||iKey==UCF_KeyCodes.BREAK||iKey==UCF_KeyCodes.CAPS_LOCK||iKey==UCF_KeyCodes.ESCAPE||iKey==UCF_KeyCodes.PAGE_UP||iKey==UCF_KeyCodes.PAGE_DOWN||iKey==UCF_KeyCodes.END||iKey==UCF_KeyCodes.HOME||iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.ARROW_DOWN||iKey==UCF_KeyCodes.PRINT||iKey==UCF_KeyCodes.INSERT||iKey==UCF_KeyCodes.WINDOWS||iKey==UCF_KeyCodes.CONTEXT_MENU||iKey==UCF_KeyCodes.TURN_OFF||iKey==UCF_KeyCodes.TURN_OFF||iKey==UCF_KeyCodes.SLEEP||iKey==UCF_KeyCodes.F1||iKey==UCF_KeyCodes.F2||iKey==UCF_KeyCodes.F3||iKey==UCF_KeyCodes.F4||iKey==UCF_KeyCodes.F5||iKey==UCF_KeyCodes.F6||iKey==UCF_KeyCodes.F7||iKey==UCF_KeyCodes.F8||iKey==UCF_KeyCodes.F9||iKey==UCF_KeyCodes.F10||iKey==UCF_KeyCodes.F11||iKey==UCF_KeyCodes.F12||iKey==UCF_KeyCodes.NUM_LOCK||iKey==UCF_KeyCodes.SCROLL_LOCK);}; UCF_InputTokenizer.prototype.aAttributeNames=["sTooltip","bEnabled","bReadonly","bRequired","sInputState","sItemListBoxId","sKey","sValue","bDisplayAsText","bUsedInSapTable","bShowHelpButton","bShowHelpButtonAlways","bHideFieldHelp","sSuggestFilter","sAccessKey","bHasClickableToken"]; UCF_InputTokenizer.prototype.aMethodNames=["setChanged","open","update","setInputState","setCursorPosition","setSelection","iGetSelectionStart","iGetSelectionEnd"];  UCF_InputTokenizer.prototype.sTooltip=''; UCF_InputTokenizer.prototype.bEnabled=true; UCF_InputTokenizer.prototype.bReadonly=false; UCF_InputTokenizer.prototype.bRequired=false; UCF_InputTokenizer.prototype.sInputState="NONE"; UCF_InputTokenizer.prototype.sItemListBoxId=''; UCF_InputTokenizer.prototype.sKey=''; UCF_InputTokenizer.prototype.sValue=''; UCF_InputTokenizer.prototype.bDisplayAsText=false; UCF_InputTokenizer.prototype.bUsedInSapTable=false; UCF_InputTokenizer.prototype.bShowHelpButton=false; UCF_InputTokenizer.prototype.bShowHelpButtonAlways=false; UCF_InputTokenizer.prototype.bHideFieldHelp=false; UCF_InputTokenizer.prototype.sSuggestFilter="OFF"; UCF_InputTokenizer.prototype.sAccessKey=''; UCF_InputTokenizer.prototype.bHasClickableToken=false; UCF_InputTokenizer.prototype.setDefaultValues=function(){this.sTooltip='';this.bEnabled=true;this.bReadonly=false;this.bRequired=false;this.sInputState="NONE";this.sItemListBoxId='';this.sKey='';this.sValue='';this.bDisplayAsText=false;this.bUsedInSapTable=false;this.bShowHelpButton=false;this.bShowHelpButtonAlways=false;this.bHideFieldHelp=false;this.sSuggestFilter="OFF";this.sAccessKey='';this.bHasClickableToken=false;}; UCF_InputTokenizer.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","Change",mParams);}; UCF_InputTokenizer.prototype.fireSelect=function(sId,sKey){var mParams={Id:sId,Key:sKey};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","Select",mParams);}; UCF_InputTokenizer.prototype.fireEnter=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Enter)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","Enter",mParams);}; UCF_InputTokenizer.prototype.fireListAccess=function(sId,sItemListBoxId,sFilterValue){var mParams={Id:sId,ItemListBoxId:sItemListBoxId,FilterValue:sFilterValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ListAccess)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","ListAccess",mParams);}; UCF_InputTokenizer.prototype.fireFieldHelpPress=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.FieldHelpPress)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","FieldHelpPress",mParams);}; UCF_InputTokenizer.prototype.fireNavigate=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Navigate)this.oLS.markDirty();this.fireSemanticEvent("InputTokenizer","Navigate",mParams);};
 function UCF_ContextualPanel(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ContextualPanel.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ContextualPanel.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id");if(sSourceId.indexOf("-help")>-1){this.fireHelp(this.sId);}else if(sSourceId.indexOf("-pers")>-1){this.firePersonalize(this.sId);}}; UCF_ContextualPanel.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_ContextualPanel.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_ContextualPanel.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource==this.oDomRef){oAccessibilityHelper.setControlType("CXP");oAccessibilityHelper.addTutor("GROUP_TUT");}else if(oSource.id.indexOf("-pers")>-1){oAccessibilityHelper.setControlType("PERS");oAccessibilityHelper.addTutor("LN_TUT");}else if(oSource.id.indexOf("-help")>-1){oAccessibilityHelper.setControlType("HELP");oAccessibilityHelper.addTutor("LN_TUT");}else if(oSource.id.indexOf("-end")>-1){oAccessibilityHelper.setControlType("CXP_END");}}; UCF_ContextualPanel.prototype.aAttributeNames=["bExpandable","bExpanded"]; UCF_ContextualPanel.prototype.aMethodNames=[];  UCF_ContextualPanel.prototype.bExpandable=false; UCF_ContextualPanel.prototype.bExpanded=true; UCF_ContextualPanel.prototype.setDefaultValues=function(){this.bExpandable=false;this.bExpanded=true;}; UCF_ContextualPanel.prototype.fireExpand=function(sId){var mParams={Id:sId};this.fireSemanticEvent("ContextualPanel","Expand",mParams);}; UCF_ContextualPanel.prototype.fireCollapse=function(sId){var mParams={Id:sId};this.fireSemanticEvent("ContextualPanel","Collapse",mParams);}; UCF_ContextualPanel.prototype.fireHelp=function(sId){var mParams={Id:sId};this.fireSemanticEvent("ContextualPanel","Help",mParams);}; UCF_ContextualPanel.prototype.firePersonalize=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Personalize)this.oLS.markDirty();this.fireSemanticEvent("ContextualPanel","Personalize",mParams);};
 function UCF_PopupMenuItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.oMenu=null;this.bStaySelected=false;this.iIndex=-1;};UCF_PopupMenuItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PopupMenuItem.prototype.onmousemove=function(oBrowserEvent){this.oMenu.setSelectedItem(this,true);}; UCF_PopupMenuItem.prototype.onclick=function(oBrowserEvent){this.oMenu.onclick(oBrowserEvent);}; UCF_PopupMenuItem.prototype.setSelected=function(bSelected,bAutoToggle){if(this.bSelected==bSelected)return false; if(bSelected){if(this.bEnabled){if(bAutoToggle)this.openSubMenu();this.oDomRef.className="urMnuRowOn";}else{this.oDomRef.className="urMnuRowDsblOn";}UCF_DomUtil.setTabIndex(this.oMenu.oDomRef,0);  if(!UCF_System.bIs508){if(this.oMenu.oRootRef.style.top>-1){UCF_DomUtil.refocusDomElement(this.oMenu.oDomRef);}}else{UCF_DomUtil.refocusDomElement(this.oMenu.oDomRef);}}else{if(this.bEnabled){if(bAutoToggle)this.closeSubMenu();this.oDomRef.className="urMnuRow";}else{this.oDomRef.className="urMnuRowDsbl";}}this.bSelected=bSelected;return true;}; UCF_PopupMenuItem.prototype.openSubMenu=function(){if(!this.sSubMenuId)return false; this.oSubMenu=this.oLS.oControlFactory.oGetControlById(this.sSubMenuId,true);this.oSubMenu.setOpenerRef(this.oDomRef); this.bStaySelected=true; this.oSubMenu.setOpenerId(this.oMenu.sOpenerId);this.oSubMenu.setUserData(this.oMenu.sUserData);this.oSubMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.MENUITEM);this.oSubMenu.setOffsetTop(2);this.oSubMenu.setIsSubMenu(true);this.oSubMenu.oParentMenu=this.oMenu;this.oSubMenu.attachEvent(this.oSubMenu.E_EVENTS.Close,this,"onSubMenuClose");this.oSubMenu.attachEvent(this.oSubMenu.E_EVENTS.NextMenu,this,"onNextMenu");this.oSubMenu.open();return true;}; UCF_PopupMenuItem.prototype.closeSubMenu=function(){if(!this.oSubMenu)return false; this.oSubMenu.detachEvent(this.oSubMenu.E_EVENTS.Close,this);this.oSubMenu.close();return true;}; UCF_PopupMenuItem.prototype.onSubMenuClose=function(oEvent){this.oSubMenu.detachEvent(this.oSubMenu.E_EVENTS.Close,this);UCF_DomUtil.focusDomElement(this.oMenu.oDomRef);}; UCF_PopupMenuItem.prototype.onNextMenu=function(oEvent){this.oSubMenu.detachEvent(this.oSubMenu.E_EVENTS.NextMenu,this);this.oMenu.fireEvent(this.oMenu.E_EVENTS.NextMenu,{});}; UCF_PopupMenuItem.prototype.setChecked=function(bChecked){this.bCanCheck=true;this.bChecked=bChecked;if(this.sGroupId){if(bChecked){this.oDomRef.firstChild.className="urMnuChkRbgOn";}else{this.oDomRef.firstChild.className="urMnuChkRbg";}}else{if(bChecked){this.oDomRef.firstChild.className="urMnuChkOn";}else{this.oDomRef.firstChild.className="urMnuChk";}}}; UCF_PopupMenuItem.prototype.remove=function(){if(this.bHasSeparator&&this.oDomRef.previousSibling){this.oDomRef.parentNode.removeChild(this.oDomRef.previousSibling);}this.oDomRef.parentNode.removeChild(this.oDomRef);this.destroy();}; UCF_PopupMenuItem.prototype.append=function(oDomRef){var oRow=this.oDomRef,oCheckCell=document.createElement("TD"),oIconCell=document.createElement("TD"),oTextCell=document.createElement("TD"),oShortCutCell=document.createElement("TD"),oSubMenuCell=document.createElement("TD");if(this.bEnabled){oRow.className="urMnuRowOff";}else{oRow.className="urMnuRowDsbl";}oRow.setAttribute("ct","POMNI");oRow.setAttribute("id",this.sId); if(this.bCanCheck){if(this.sGroupId!='')oCheckCell.className=this.bChecked?"urMnuChkRbgOn":"urMnuChkRbg";else oCheckCell.className=this.bChecked?"urMnuChkOn":"urMnuChk";}if(this.bCanCheck&&this.bChecked)oCheckCell.innerHTML="&nbsp;&nbsp;&nbsp;";else oCheckCell.innerHTML="&nbsp;"; if(this.bHasIcon){if(UCF_System.bIsRTL)oIconCell.style.paddingLeft="3px";else oIconCell.style.paddingRight="3px";if(this.bEnabled)oIconCell.innerHTML="<img border=\"0\" src=\""+this.sEnabledIconSrc+"\" alt=\"\">";else oIconCell.innerHTML="<img border=\"0\" src=\""+this.sDisabledIconSrc+"\" alt=\"\">";}else{oIconCell.innerHTML="&nbsp;";} oTextCell.className="urMnuTxt";oTextCell.style.whiteSpace="nowrap";if(this.sTextDirection=="LTR"&&UCF_System.bIsRTL)oTextCell.dir="ltr";if(this.sTextDirection=="RTL"&&!UCF_System.bIsRTL)oTextCell.dir="rtl";if(this.bHasEllipsis)oTextCell.innerHTML=this.sText.replace(/ /g,"&nbsp;")+"&#8230";else oTextCell.innerHTML=this.sText.replace(/ /g,"&nbsp;"); oShortCutCell.className="urMnuTxt";oShortCutCell.style.whiteSpace="nowrap";if(this.sShortcutText!='')oShortCutCell.innerHTML="&nbsp;"+this.sShortcutText.replace(/ /g,"&nbsp;"); if(this.bHasSubMenu){oSubMenuCell.className="urMnuSubOn";oSubMenuCell.innerHTML="&nbsp;&nbsp;&nbsp;";}else{oSubMenuCell.className="urMnuSubOff";oSubMenuCell.innerHTML="&nbsp;";} oRow.appendChild(oCheckCell);oRow.appendChild(oIconCell);oRow.appendChild(oTextCell);oRow.appendChild(oShortCutCell);oRow.appendChild(oSubMenuCell); if(this.bHasSeparator){var oSeparatorRow=document.createElement("TR"),oSeparatorCell=document.createElement("TD");oSeparatorRow.className="urMnuRowOff";oSeparatorCell.colSpan="5";oSeparatorCell.className="urMnuDvdr";oSeparatorCell.innerHTML="<div>&nbsp</div>";oSeparatorRow.appendChild(oSeparatorCell); oDomRef.appendChild(oSeparatorRow);}oRow.style.height="19px"; oDomRef.appendChild(oRow);this.connectToDom(oRow);}; UCF_PopupMenuItem.prototype.aAttributeNames=["sGroupId","sText","bChecked","bCanCheck","bHasSeparator","bEnabled","bHasSubMenu","sSubMenuId","bHasIcon","sEnabledIconSrc","sDisabledIconSrc","sTextDirection","bHasEllipsis","sShortcutText","bSelected","sHotkey"]; UCF_PopupMenuItem.prototype.aMethodNames=[];  UCF_PopupMenuItem.prototype.sGroupId=''; UCF_PopupMenuItem.prototype.sText=''; UCF_PopupMenuItem.prototype.bChecked=false; UCF_PopupMenuItem.prototype.bCanCheck=false; UCF_PopupMenuItem.prototype.bHasSeparator=false; UCF_PopupMenuItem.prototype.bEnabled=true; UCF_PopupMenuItem.prototype.bHasSubMenu=false; UCF_PopupMenuItem.prototype.sSubMenuId=''; UCF_PopupMenuItem.prototype.bHasIcon=false; UCF_PopupMenuItem.prototype.sEnabledIconSrc=''; UCF_PopupMenuItem.prototype.sDisabledIconSrc=''; UCF_PopupMenuItem.prototype.sTextDirection="INHERIT"; UCF_PopupMenuItem.prototype.bHasEllipsis=false; UCF_PopupMenuItem.prototype.sShortcutText=''; UCF_PopupMenuItem.prototype.bSelected=false; UCF_PopupMenuItem.prototype.sHotkey="NONE"; UCF_PopupMenuItem.prototype.setDefaultValues=function(){this.sGroupId='';this.sText='';this.bChecked=false;this.bCanCheck=false;this.bHasSeparator=false;this.bEnabled=true;this.bHasSubMenu=false;this.sSubMenuId='';this.bHasIcon=false;this.sEnabledIconSrc='';this.sDisabledIconSrc='';this.sTextDirection="INHERIT";this.bHasEllipsis=false;this.sShortcutText='';this.bSelected=false;this.sHotkey="NONE";};
 function UCF_ItemList(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(window.UCF_System.bIs508){this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);UCF_DomUtil.setTabIndex(this.oDomRef,-1);}};UCF_ItemList.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ItemList.prototype.createItems=function(){var aDomItems=this.oDomRef.getElementsByTagName("LI");for(var iItemCount=0;iItemCount<aDomItems.length;iItemCount++){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[iItemCount],true);this.oItemNavigation.addItem(oItem,false);}}; UCF_ItemList.prototype.aAttributeNames=[]; UCF_ItemList.prototype.aMethodNames=[];  UCF_ItemList.prototype.setDefaultValues=function(){};
function UCF_TreeDropDecorator(oTree){UCF_LineDecorator.apply(this,[oTree,true]);};UCF_TreeDropDecorator.prototype=new(UCF_ClassLoader.oGetClass("UCF_LineDecorator"))();UCF_TreeDropDecorator.prototype.cleanUp=function(oBrowserEvent){this.hide();};
 function UCF_EventQueue(){UCF_Object.apply(this);this.mQueue=[];}UCF_EventQueue.prototype=new UCF_Object(); UCF_EventQueue.prototype.addItem=function(oItem){this.mQueue.push(oItem);}; UCF_EventQueue.prototype.reset=function(){this.mQueue=[];}; UCF_EventQueue.prototype.purgeByItem=function(oItemTemplate){var mTemp=[];var sItemName=oItemTemplate.sGetItemName();for(var idx=0;idx<this.mQueue.length;idx++){var oItem=this.mQueue[idx];if(oItem&&oItem.sGetItemName()!=sItemName){mTemp.push(oItem);}}this.mQueue=mTemp;}; UCF_EventQueue.prototype.REQUEST_PARAM_NAME="SAPEVENTQUEUE"; UCF_EventQueue.prototype.mGetTransportMap=function(bSplitByControl){ bSplitByControl=(bSplitByControl==true);var mMap={};var oItem;var sMapParam;var sSepar; for(var idx=0;idx<this.mQueue.length;idx++){oItem=this.mQueue[idx];if(oItem==null)continue; sMapParam=(bSplitByControl)?(this.REQUEST_PARAM_NAME+oItem.sGetControlId()):(this.REQUEST_PARAM_NAME); if(mMap[sMapParam]==null||mMap[sMapParam].length==0){mMap[sMapParam]="";sSepar="";}else{sSepar=oItem.E_SEPARATORS.EVENT;}mMap[sMapParam]+=sSepar+oItem.sGetSerializedData();} for(sParKey in mMap){mMap[sParKey]=this.sSafeTransportEncode(mMap[sParKey]);}return mMap;}; UCF_EventQueue.prototype.ENC_PLAIN="0123456789abcdefghijklmnopqrstuvwxyzABCDEDFGHIJKLMNOPQRSTUVWXYZ-_."; UCF_EventQueue.prototype.ENC_HPREFIX="~"; UCF_EventQueue.prototype.ENC_HDIGITS="0123456789ABCDEF"; UCF_EventQueue.prototype.sSafeTransportEncode=function(s){var sBuff=[];var code;var c;for(var i=0;i<s.length;i++){c=s.charAt(i);cc=s.charCodeAt(i);if(this.ENC_PLAIN.indexOf(c)>=0){sBuff.push(c);}else{sBuff.push(this.ENC_HPREFIX);code=s.charCodeAt(i);if(code<256){sBuff.push("00");}else{sBuff.push(this.ENC_HDIGITS.charAt((code&0xF000)>>>12));sBuff.push(this.ENC_HDIGITS.charAt((code&0x0F00)>>>8));}sBuff.push(this.ENC_HDIGITS.charAt((code&0x00F0)>>>4));sBuff.push(this.ENC_HDIGITS.charAt((code&0x000F)));}}return sBuff.join("");};
 function UCF_GridLayoutCell(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_GridLayoutCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_GridLayoutCell.prototype.aAttributeNames=["sDragData"]; UCF_GridLayoutCell.prototype.aMethodNames=[];  UCF_GridLayoutCell.prototype.sDragData=''; UCF_GridLayoutCell.prototype.setDefaultValues=function(){this.sDragData='';};
 function UCF_AccessibilityHelper(oLS){this.oLS=oLS;UCF_Object.apply(this);};UCF_AccessibilityHelper.prototype=new UCF_Object();UCF_AccessibilityHelper.prototype.E_SEMANTIC={Standard:"STANDARD",Transparent:"TRANSPARENT",Alternating:"ALTERNATING",Header1:"H1",Header2:"H2",Header3:"H3",Header4:"H4",Header5:"H5",Header6:"H6",Bad:"BADVALUE",BadDark:"BADVALUE_DARK",BadMedium:"BADVALUE_MEDIUM",BadLight:"BADVALUE_LIGHT",Critical:"CRITICALVALUE",CriticalDark:"CRITICALVALUE_DARK",CriticalMedium:"CRITICALVALUE_MEDIUM",CriticalLight:"CRITICALVALUE_LIGHT",Good:"GOODVALUE",Emphasized:"EMPHASIZED",Negative:"NEGATIVE",Positive:"POSITIVE",Selected:"SELECTED",Total:"TOTAL",Subtotal:"SUBTOTAL",SubtotalLight:"SUBTOTAL_LIGHT",Key:"KEY",Filtered:"F",Marked:"MARKED"};UCF_AccessibilityHelper.prototype.E_DATATYPE={Amount:"AMOUNT",Bdc:"BDC",Boolean:"BOOLEAN",Code:"CODE",CurrencyCode:"CURRENCY_CODE",Date:"DATE",DateTime:"DATE_TIME",DaylightSavingIndicator:"DAYLIGHT_SAVING",Description:"DESCRIPTION",Duration:"DURATION",Identifier:"IDENTIFIER",Integer:"INTEGER",Numeric:"NUMERIC",Measure:"MEASURE",Percentage:"PERCENTAGE",Quantity:"QUANTITY",Ratio:"RATIO",Time:"TIME",TimezoneCode:"TIMEZONE_CODE",UnitCode:"UNIT_CODE",Uri:"URI"}; UCF_AccessibilityHelper.prototype.sGetText=function(sTextKey,aValues){var sText=this.oLS.sGetText("SAPUR_"+sTextKey);if(typeof(aValues)!="undefined"){if(typeof(aValues)=="string"){aValues=[aValues];}for(var i=0;i<aValues.length;i++){sText=sText.replace("{"+i+"}",aValues[i]);}}if(!sText)sText=sTextKey;return sText;}; UCF_AccessibilityHelper.prototype.setControlType=function(sControlType,aControlTypeVariables){this.sControlType=sControlType;this.aControlTypeVariables=aControlTypeVariables;}; UCF_AccessibilityHelper.prototype.setAccessKey=function(sAccessKey){this.sAccessKey=sAccessKey;}; UCF_AccessibilityHelper.prototype.setHotkey=function(sHotkey){this.sHotkey=sHotkey;}; UCF_AccessibilityHelper.prototype.setEnabled=function(bEnabled){this.bEnabled=bEnabled;}; UCF_AccessibilityHelper.prototype.setSelectable=function(bSelectable){this.bSelectable=bSelectable;}; UCF_AccessibilityHelper.prototype.setSelected=function(bSelected){this.bSelected=bSelected;}; UCF_AccessibilityHelper.prototype.setNotSelected=function(bNotSelected){this.bNotSelected=bNotSelected;}; UCF_AccessibilityHelper.prototype.setCompleted=function(bCompleted){this.bCompleted=bCompleted;}; UCF_AccessibilityHelper.prototype.setSuccess=function(bSuccess){this.bSuccess=bSuccess;}; UCF_AccessibilityHelper.prototype.setError=function(bError){this.bError=bError;}; UCF_AccessibilityHelper.prototype.setInformation=function(bInformation){this.bInformation=bInformation;}; UCF_AccessibilityHelper.prototype.setNotification=function(bNotification){this.bNotification=bNotification;}; UCF_AccessibilityHelper.prototype.setTask=function(bTask){this.bTask=bTask;}; UCF_AccessibilityHelper.prototype.setLoading=function(bLoading){this.bLoading=bLoading;}; UCF_AccessibilityHelper.prototype.setRequired=function(bRequired){this.bRequired=bRequired;}; UCF_AccessibilityHelper.prototype.setInvalid=function(bInvalid){this.bInvalid=bInvalid;}; UCF_AccessibilityHelper.prototype.setUncompleted=function(bUncompleted){this.bUncompleted=bUncompleted;}; UCF_AccessibilityHelper.prototype.setPressed=function(bPressed){this.bPressed=bPressed;}; UCF_AccessibilityHelper.prototype.setNotPressed=function(bNotPressed){this.bNotPressed=bNotPressed;}; UCF_AccessibilityHelper.prototype.setReadonly=function(bReadonly){this.bReadonly=bReadonly;}; UCF_AccessibilityHelper.prototype.setToday=function(bToday){this.bToday=bToday;}; UCF_AccessibilityHelper.prototype.setUndefined=function(bUndefined){this.bUndefined=bUndefined;}; UCF_AccessibilityHelper.prototype.setValid=function(bValid){this.bValid=bValid;}; UCF_AccessibilityHelper.prototype.setWarning=function(bWarning){this.bWarning=bWarning;}; UCF_AccessibilityHelper.prototype.setUnchecked=function(bUnckecked){this.bUnckecked=bUnckecked;}; UCF_AccessibilityHelper.prototype.setDynamic=function(bDynamic){this.bDynamic=bDynamic;}; UCF_AccessibilityHelper.prototype.setEmpty=function(bEmpty){this.bEmpty=bEmpty;}; UCF_AccessibilityHelper.prototype.setSortedAscending=function(bSortedAscending){this.bSortedAscending=bSortedAscending;}; UCF_AccessibilityHelper.prototype.setSortedDescending=function(bSortedDescending){this.bSortedDescending=bSortedDescending;}; UCF_AccessibilityHelper.prototype.setSortable=function(bSortable){this.bSortable=bSortable;}; UCF_AccessibilityHelper.prototype.setStop=function(bStop){this.bStop=bStop;}; UCF_AccessibilityHelper.prototype.setExpanded=function(bExpanded){this.bExpanded=bExpanded;}; UCF_AccessibilityHelper.prototype.setCollapsed=function(bCollapsed){this.bCollapsed=bCollapsed;}; UCF_AccessibilityHelper.prototype.setToggled=function(bToggled){this.bToggled=bToggled;}; UCF_AccessibilityHelper.prototype.setNotToggled=function(bNotToggled){this.bNotToggled=bNotToggled;}; UCF_AccessibilityHelper.prototype.setAlert=function(bAlert){this.bAlert=bAlert;}; UCF_AccessibilityHelper.prototype.setRecurring=function(bRecurring){this.bRecurring=bRecurring;}; UCF_AccessibilityHelper.prototype.setItemCount=function(iItemCount){this.iItemCount=iItemCount;}; UCF_AccessibilityHelper.prototype.setItemIndex=function(iItemIndex){this.iItemIndex=iItemIndex;}; UCF_AccessibilityHelper.prototype.setLevel=function(iLevel){this.iLevel=iLevel;}; UCF_AccessibilityHelper.prototype.setTooltip=function(sTooltip){if(this.aTooltip)this.aTooltip=null;this.addTooltip(sTooltip)}; UCF_AccessibilityHelper.prototype.setText=function(sText){this.sText=sText;}; UCF_AccessibilityHelper.prototype.setLabel=function(sLabelText){this.sLabelText=sLabelText}; UCF_AccessibilityHelper.prototype.setDataTip=function(sDataTip){this.sDataTip=sDataTip;}; UCF_AccessibilityHelper.prototype.setExplanationText=function(sExplanationText){this.sExplanationText=sExplanationText;}; UCF_AccessibilityHelper.prototype.addDataType=function(eDataType){if(!this.aDataTypes)this.aDataTypes=[];var sText=null;sText=this.sGetText("DATATYPE_"+eDataType); if("DATATYPE_"+eDataType!=sText){this.aDataTypes.push(sText);}}; UCF_AccessibilityHelper.prototype.addSemantic=function(eSemantic){if(!this.aSemantics)this.aSemantics=[];var sText=null;if(this.oLegendTexts)sText=this.oLegendTexts[eSemantic]; if(!sText){ if(eSemantic==this.E_SEMANTIC.Standard||eSemantic==this.E_SEMANTIC.Transparent||eSemantic==this.E_SEMANTIC.Alternating){return;} if(eSemantic==this.E_SEMANTIC.Marked){eSemantic=this.E_SEMANTIC.Selected;}else if(eSemantic==this.E_SEMANTIC.SubtotalLight){eSemantic=this.E_SEMANTIC.Subtotal;}else if(eSemantic==this.E_SEMANTIC.BadDark||eSemantic==this.E_SEMANTIC.BadMedium||eSemantic==this.E_SEMANTIC.BadLight){eSemantic=this.E_SEMANTIC.Bad;}else if(eSemantic==this.E_SEMANTIC.CriticalDark||eSemantic==this.E_SEMANTIC.CriticalMedium||eSemantic==this.E_SEMANTIC.CriticalLight){eSemantic=this.E_SEMANTIC.Critical;}sText=this.sGetText(eSemantic); if(eSemantic==sText){sText=null;}}if(sText)this.aSemantics.push(sText);}; UCF_AccessibilityHelper.prototype.setIconTooltip=function(sIconTooltip){this.sIconTooltip=sIconTooltip;}; UCF_AccessibilityHelper.prototype.setGroupText=function(sGroupText){this.sGroupText=sGroupText;}; UCF_AccessibilityHelper.prototype.setContainingItemCount=function(iContainingItemCount){this.iContainingItemCount=iContainingItemCount;}; UCF_AccessibilityHelper.prototype.setParentText=function(sText){this.sParentText=sText;}; UCF_AccessibilityHelper.prototype.setParentTooltip=function(sTooltip){this.sParentTooltip=sTooltip;}; UCF_AccessibilityHelper.prototype.setParentControlType=function(sControlType,aControlTypeVariables){this.sParentControlType=sControlType;this.aParentControlTypeVariables=aControlTypeVariables;}; UCF_AccessibilityHelper.prototype.sGetItemPosition=function(){if(this.iItemCount>0&&this.iItemIndex>0){if(this.iContainingItemCount>0){return this.sGetText("ITMPOSCOUNT",new Array(""+this.iItemIndex,""+this.iItemCount,""+this.iContainingItemCount));}else{return this.sGetText("ITMPOS",new Array(""+this.iItemIndex,""+this.iItemCount));}}return "";}; UCF_AccessibilityHelper.prototype.sGetAccessibilityText=function(){var sAccessibilityText="",sSeparator=" "+this.sGetText("SEPARATOR")+" ",aStatusTexts=this.aGetStatusTexts(),sSemantic="",sStatusText="",sLevel="";sStatusText=aStatusTexts.join(sSeparator);if(this.sSemanticText)sSemantic=this.sSemanticText;else if(this.eSemantic)sSemantic=this.sGetText(this.eSemantic);if(this.iLevel!=null)sLevel=this.sGetText("LEVEL",[this.iLevel]);aAccessibilityTexts=[this.sParentText,this.sGetParentControlTypeText(),this.sParentTooltip,this.sIconTooltip,this.sGroupText,this.sLabelText,this.sText,this.sAccessibilityDescription,this.sGetControlTypeText(),this.sValue,sLevel,sStatusText,sSemantic,this.sGetItemPosition(),this.sGetTooltip(),this.sDataTip,this.sExplanationText,this.sGetHotkeyText(),this.sGetAccessKeyText(),this.sGetTutorText()];for(var i=0;i<aAccessibilityTexts.length;i++){if(aAccessibilityTexts[i]&&aAccessibilityTexts[i].length>0){if(sAccessibilityText.length>0)sAccessibilityText+=sSeparator;sAccessibilityText+=aAccessibilityTexts[i];}}if(this.aContainerHelpers){for(var i=0;i<this.aContainerHelpers.length;i++){sAccessibilityText+=sSeparator+this.aContainerHelpers[i].sGetAccessibilityText();}}return sAccessibilityText;}; UCF_AccessibilityHelper.prototype.sGetAccessKeyText=function(){var sAccessKey=this.sAccessKey;if(sAccessKey=="d"||sAccessKey=="D")return ""; if(sAccessKey&&sAccessKey.length>0)sAccessKey="("+this.sGetText("MODIFIER_KEY_ALT",sAccessKey)+")";return sAccessKey;}; UCF_AccessibilityHelper.prototype.sGetHotkeyText=function(){var sHotkey=this.sHotkey;if(!sHotkey||sHotkey=="")return "";index=this.sHotkey.lastIndexOf("_");if(index<0)compareText=this.sHotkey;else if(index+1<this.sHotkey.length){compareText=this.sHotkey.substr(0,index);sHotkey=this.sHotkey.substr(index+1);}switch(compareText){case "NONE":sHotkey="";break;case "CTRL":sHotkey=this.sGetText("MODIFIER_KEY_CTRL",sHotkey);break;case "CTRL_SHIFT":sHotkey=this.sGetText("MODIFIER_KEY_CTRL_SHIFT",sHotkey);break;case "ALT":sHotkey=this.sGetText("MODIFIER_KEY_ALT",sHotkey);break;case "ALT_SHIFT":sHotkey=this.sGetText("MODIFIER_KEY_ALT_SHIFT",sHotkey);break;case "ALT_ARROW":if(sHotkey=="LEFT")sHotkey=this.sGetText("MODIFIER_KEY_ALT",this.sGetText("NAV_KEY_CURSOR_LEFT"));else if(sHotkey=="UP")sHotkey=this.sGetText("MODIFIER_KEY_ALT",this.sGetText("NAV_KEY_CURSOR_UP"));else if(sHotkey=="RIGHT")sHotkey=this.sGetText("MODIFIER_KEY_ALT",this.sGetText("NAV_KEY_CURSOR_RIGHT"));else if(sHotkey=="DOWN")sHotkey=this.sGetText("MODIFIER_KEY_ALT",this.sGetText("NAV_KEY_CURSOR_DOWN"));break;case "SHIFT":sHotkey=this.sGetText("MODIFIER_KEY_SHIFT",sHotkey);break;case "CTRL_ALT_SHIFT":sHotkey=this.sGetText("MODIFIER_KEY_CTRL_ALT_SHIFT",sHotkey);break;case "ESCAPE":sHotkey=this.sGetText("ESCAPE_KEY",sHotkey);break;case "DELETE":sHotkey=this.sGetText("DELETE_KEY",sHotkey);break;case "INSERT":sHotkey=this.sGetText("INSERT_KEY",sHotkey);break;}if(sHotkey=="")return "";else return "("+sHotkey+")";}; UCF_AccessibilityHelper.prototype.sGetControlTypeText=function(){ return(this.sControlType)?this.sGetText(this.sControlType,this.aControlTypeVariables):"";}; UCF_AccessibilityHelper.prototype.sGetControlTypeShortText=function(){ if(!this.sControlType)return "";var shortText=this.oLS.sGetRawText("SAPUR_"+this.sControlType+"_SHORTNAME");return(shortText)?shortText:this.sGetControlTypeText();}; UCF_AccessibilityHelper.prototype.sGetParentControlTypeText=function(){ return(this.sParentControlType)?this.sGetText(this.sParentControlType,this.aControlTypeVariables):"";}; UCF_AccessibilityHelper.prototype.sGetLabelText=function(sId){var sLabel="",oLabel=this.sGetLabel(sId);if(!oLabel)return sLabel;sLabel=UCF_DomUtil.sGetInnerText(oLabel.oRootRef);if(sLabel.lastIndexOf(" *")>-1&&sLabel.lastIndexOf(" *")==sLabel.length-2)sLabel=sLabel.substring(0,sLabel.lastIndexOf(" *"));if(sLabel.lastIndexOf(":")>-1&&sLabel.lastIndexOf(":")==sLabel.length-1)sLabel=sLabel.substring(0,sLabel.lastIndexOf(":"));return sLabel;}; UCF_AccessibilityHelper.prototype.sGetLabel=function(sId){if(!sId||sId=="")return null;var aLabels=document.getElementsByTagName("LABEL"),oLabel=null;for(var i=0;i<aLabels.length;i++){oLabel=this.oLS.oGetControlByDomRef(aLabels[i]);if(oLabel.sLabelFor==sId){return oLabel;}}return null;}; UCF_AccessibilityHelper.prototype.setCustomStatusText=function(sTextKey){this.sCustomStatusText=sTextKey;}; UCF_AccessibilityHelper.prototype.addTutor=function(sTutor){if(!this.aTutor)this.aTutor=[];this.aTutor.push(this.sGetText(sTutor));}; UCF_AccessibilityHelper.prototype.addTooltip=function(sTooltip){var contained=false;if(!this.aTooltip)this.aTooltip=[];for(var i=0;i<this.aTooltip.length;i++)if(this.aTooltip[i].toUpperCase()==sTooltip.toUpperCase())contained=true;if(!contained)this.aTooltip.push(sTooltip);}; UCF_AccessibilityHelper.prototype.addContainerHelper=function(oContainerHelper){if(!this.aContainerHelpers)this.aContainerHelpers=[];this.aContainerHelpers.push(oContainerHelper);}; UCF_AccessibilityHelper.prototype.addEnabledTutor=function(sTutor,bAddTutor){if(bAddTutor){this.addTutor(sTutor);}}; UCF_AccessibilityHelper.prototype.setLegendJSDomRef=function(oDomRef){var sLegendText=UCF_DomUtil.sGetInnerText(oDomRef);this.oLegendTexts=eval("result = "+sLegendText+";");}; UCF_AccessibilityHelper.prototype.setAccessibilityDescription=function(sAccDesc){this.sAccessibilityDescription=sAccDesc;}; UCF_AccessibilityHelper.prototype.sGetTutorText=function(){if(this.aTutor){sSeparator=" "+this.sGetText("SEPARATOR")+" ";return this.aTutor.join(sSeparator);}}; UCF_AccessibilityHelper.prototype.sGetTooltip=function(){if(this.aTooltip){sSeparator=" "+this.sGetText("SEPARATOR")+" ";return this.aTooltip.join(sSeparator);}}; UCF_AccessibilityHelper.prototype.aGetStatusTexts=function(){var aStatusTexts=[];if(this.aDataTypes&&this.aDataTypes.length>0){for(var i=0;i<this.aDataTypes.length;i++){aStatusTexts.push(this.aDataTypes[i]);}}if(this.bAlert)aStatusTexts.push(this.sGetText("ALERT"));if(this.bCollapsed)aStatusTexts.push(this.sGetText("COLLAPSED"));if(this.bCompleted)aStatusTexts.push(this.sGetText("COMPLETED"));if(this.bDynamic)aStatusTexts.push(this.sGetText("DYNAMIC"));if(this.bEmpty)aStatusTexts.push(this.sGetText("EMPTY"));if(this.bEnabled!=null&&!this.bEnabled)aStatusTexts.push(this.sGetText("DISABLED"));if(this.bError)aStatusTexts.push(this.sGetText("ERROR"));if(this.bExpanded)aStatusTexts.push(this.sGetText("EXPANDED"));if(this.bInformation)aStatusTexts.push(this.sGetText("INFORMATION"));if(this.bInvalid)aStatusTexts.push(this.sGetText("INVALID"));if(this.bLoading)aStatusTexts.push(this.sGetText("LOADING"));if(this.bNotification)aStatusTexts.push(this.sGetText("NOTIFICATION"));if(this.bNotToggled)aStatusTexts.push(this.sGetText("NOTTOGGLED"));if(this.bNotSelected)aStatusTexts.push(this.sGetText("NOTSELECTED"));if(this.bPressed)aStatusTexts.push(this.sGetText("PRESSED"));if(this.bNotPressed)aStatusTexts.push(this.sGetText("NOT_PRESSED"));if(this.bReadonly)aStatusTexts.push(this.sGetText("READONLY"));if(this.bRecurring)aStatusTexts.push(this.sGetText("RECURRING"));if(this.bRequired)aStatusTexts.push(this.sGetText("REQUIRED"));if(this.bSelectable)aStatusTexts.push(this.sGetText("SELECTABLE"));if(this.bSelected)aStatusTexts.push(this.sGetText("SELECTED"));if(this.bSortable)aStatusTexts.push(this.sGetText("SORTABLE"));if(this.bSortedAscending)aStatusTexts.push(this.sGetText("SORTED_ASC"));if(this.bSortedDescending)aStatusTexts.push(this.sGetText("SORTED_DESC"));if(this.bStop)aStatusTexts.push(this.sGetText("STOP"));if(this.bSuccess)aStatusTexts.push(this.sGetText("SUCCESS"));if(this.bTask)aStatusTexts.push(this.sGetText("TASK"));if(this.bToday)aStatusTexts.push(this.sGetText("TODAY"));if(this.bToggled)aStatusTexts.push(this.sGetText("TOGGLED"));if(this.bUnckecked)aStatusTexts.push(this.sGetText("UNCKECKED"));if(this.bUncompleted)aStatusTexts.push(this.sGetText("UNMARKED"));if(this.bUndefined)aStatusTexts.push(this.sGetText("UNDEFINED"));if(this.bValid)aStatusTexts.push(this.sGetText("VALID"));if(this.bWarning)aStatusTexts.push(this.sGetText("WARNING"));if(this.sCustomStatusText)aStatusTexts.push(this.sGetText(this.sCustomStatusText));if(this.aSemantics&&this.aSemantics.length>0){for(var i=0;i<this.aSemantics.length;i++){aStatusTexts.push(this.aSemantics[i]);}}return aStatusTexts;}; UCF_AccessibilityHelper.prototype.apply=function(oDomRef){oDomRef.setAttribute("title",this.sGetAccessibilityText());};UCF_AccessibilityHelper.prototype.aPublicMethods=["setControlType","setAccessKey","setHotkey","setEnabled","setSelectable","setSelected","setNotSelected","setCompleted","setSuccess","setError","setInformation","setNotification","setTask","setLoading","setRequired","setInvalid","setUncompleted","setPressed","setNotPressed","setReadonly","setToday","setUndefined","setValid","setWarning","setUnchecked","setDynamic","setEmpty","setSortedAscending","setSortedDescending","setSortable","setStop","setExpanded","setCollapsed","setToggled","setNotToggled","setAlert","setRecurring","setItemCount","setItemIndex","setLevel","setTooltip","setText","setLabel","setDataTip","setExplanationText","addDataType","addSemantic","setIconTooltip","setGroupText","setContainingItemCount","setParentText","setParentTooltip","setParentControlType","setCustomStatusText","addTutor","addTooltip","addContainerHelper","addEnabledTutor","setLegendJSDomRef","setAccessibilityDescription"];
 function UCF_MessageBar(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bAllowTextSelection=true;};UCF_MessageBar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_MessageBar.prototype.initialize=function(){}; UCF_MessageBar.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if((this.bHasHelpLink)&&(oSource.className.indexOf("LnkReport")>-1)){this.fireActivateHelp(this.sId);oBrowserEvent.cancelBubble();}else{this.focusConnectedControl();oBrowserEvent.cancelBubble();}}; UCF_MessageBar.prototype.onlsselect=function(oBrowserEvent){this.focusConnectedControl();oBrowserEvent.cancelBubble();}; UCF_MessageBar.prototype.onlsenter=function(oBrowserEvent){this.focusConnectedControl();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_MessageBar.prototype.focusConnectedControl=function(){var oTargetControl=this.oGetControlById(this.sConnectedControlId);if(!oTargetControl)return;if(oTargetControl.bIsFocusable){oTargetControl.focus();return true;}return false;}; UCF_MessageBar.prototype.highlight=function(){}; UCF_MessageBar.prototype.setType=function(sType){this.setInvalidated(false);var oImg=oImg=UCF_DomUtil.$(this.sId+'-img'),sTop=this.oDomRef.className.indexOf("Top")>-1?"Top":"",sBottom=this.oDomRef.className.indexOf("Btm")>-1?"Btm":"";if(this.sType!="ERROR"&&sType=="ERROR"){UCF_DomUtil.replaceClass(this.oDomRef,"urMsgBarStd"+sTop+sBottom,"urMsgBarErr"+sTop+sBottom);}else if(this.sType=="ERROR"&&sType!="ERROR"){UCF_DomUtil.replaceClass(this.oDomRef,"urMsgBarErr"+sTop+sBottom,"urMsgBarStd"+sTop+sBottom);}this.sType=sType;switch(sType){case "ERROR":UCF_DomUtil.setClass(oImg,"urMsgBarImgError");break;case "STOP":UCF_DomUtil.setClass(oImg,"urMsgBarImgStop");break;case "OK":UCF_DomUtil.setClass(oImg,"urMsgBarImgOk");break;case "WARNING":UCF_DomUtil.setClass(oImg,"urMsgBarImgWarning");break;case "LOADING":UCF_DomUtil.setClass(oImg,"urMsgBarImgLoading");break;case "ALERT":UCF_DomUtil.setClass(oImg,"urMsgBarImgAlert");break;case "INFO":UCF_DomUtil.setClass(oImg,"urMsgBarImgInfo");break;case "NOTIFICATION":UCF_DomUtil.setClass(oImg,"urMsgBarImgNotif");break;case "TASK":UCF_DomUtil.setClass(oImg,"urMsgBarImgTask");break;}}; UCF_MessageBar.prototype.setText=function(sText){var oText=UCF_DomUtil.$(this.sId+'-txt');this.setInvalidated(false);UCF_DomUtil.setInnerText(oText,sText);}; UCF_MessageBar.prototype.setInvalidated=function(bInvalidated){var oText=UCF_DomUtil.$(this.sId+'-txt'),oImg=UCF_DomUtil.$(this.sId+'-img');if(bInvalidated){oText.style.color="#999";oText.style.textDecoration="line-through";this.oDomRef.style.borderColor="#999";if(this.oDomRef.style.filter==""){oImg.style.filter="alpha(opacity=30)";}else{oImg.style.opacity="0.4";}}else{this.oDomRef.style.borderColor="";oText.style.color="";oText.style.textDecoration="";if(oImg.style.filter){oImg.style.filter="";}else{oImg.style.opacity="";}}}; UCF_MessageBar.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oImg=UCF_DomUtil.$(this.sId+"-img");if(oSource.className.indexOf("urLnkReport")>-1){oAccessibilityHelper.setControlType("LN");oAccessibilityHelper.addTutor("LN_TUT");}else if(oImg.className.indexOf("ImgError")>-1)oAccessibilityHelper.addTutor("ERROR");else if(oImg.className.indexOf("ImgOk")>-1)oAccessibilityHelper.addTutor("SUCCESS");else if(oImg.className.indexOf("ImgStop")>-1)oAccessibilityHelper.addTutor("STOP");else if(oImg.className.indexOf("ImgWarning")>-1)oAccessibilityHelper.addTutor("WARNING");else if(oImg.className.indexOf("ImgLoading")>-1)oAccessibilityHelper.addTutor("LOADING");else if(oImg.className.indexOf("ImgInfo")>-1)oAccessibilityHelper.addTutor("INFO");else if(oImg.className.indexOf("ImgNotif")>-1)oAccessibilityHelper.addTutor("NOTIFICATION");else if(oImg.className.indexOf("ImgAlert")>-1)oAccessibilityHelper.addTutor("ALERT");else if(oImg.className.indexOf("ImgTask")>-1)oAccessibilityHelper.addTutor("TASK");oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));oAccessibilityHelper.setTooltip(this.sTooltip);}; UCF_MessageBar.prototype.aAttributeNames=["sType","sConnectedControlId","sTooltip","bHasHelpLink"]; UCF_MessageBar.prototype.aMethodNames=[];  UCF_MessageBar.prototype.sType="NONE"; UCF_MessageBar.prototype.sConnectedControlId=''; UCF_MessageBar.prototype.sTooltip=''; UCF_MessageBar.prototype.bHasHelpLink=false; UCF_MessageBar.prototype.setDefaultValues=function(){this.sType="NONE";this.sConnectedControlId='';this.sTooltip='';this.bHasHelpLink=false;}; UCF_MessageBar.prototype.fireActivateHelp=function(sId){var mParams={Id:sId};this.fireSemanticEvent("MessageBar","ActivateHelp",mParams);};
 function UCF_PhaseIndicator(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.iFirstVisibleItem=parseInt(this.sFirstVisibleItem);this.oScrollDomRef=UCF_DomUtil.$(this.sId+'-scrl');this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.oItemNavigation.bIgnoreFocus=true;this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);this.oItemNavigation.bIgnoreFocus=true;UCF_DomUtil.setTabIndex(this.oDomRef,-1);this.attachBrowserEvent("resize",this.oDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);};UCF_PhaseIndicator.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PhaseIndicator.prototype.initialize=function(){if(this.iFirstVisibleItem>0&&this.iFirstVisibleItem<this.aItems.length){this.oScrollDomRef.scrollTop=this.aItems[this.iFirstVisibleItem].oDomRef.offsetTop;}this.setPreviousButton();this.setNextButton();this.setMoreIndicator();}; UCF_PhaseIndicator.prototype.onresize=function(oBrowserEvent){if(this.sTimeOutId!=null){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"onAfterResize");oBrowserEvent.cancelBubble();};UCF_PhaseIndicator.prototype.onAfterResize=function(){if(this.iControlWidth!=null&&this.iControlWidth==this.oDomRef.offsetWidth)return;var oFirstItem=this.aItems[this.iFirstVisibleItem];if(this.oSelected!=null){this.oScrollDomRef.scrollTop=this.oSelected.oDomRef.offsetTop;}else if(this.iFirstVisibleItem<this.aItems.length){this.oScrollDomRef.scrollTop=this.aItems[this.iFirstVisibleItem].oDomRef.offsetTop;}this.setPreviousButton();this.setNextButton();this.setMoreIndicator();this.iControlWidth=this.oDomRef.offsetWidth;}; UCF_PhaseIndicator.prototype.onscroll=function(oBrowserEvent){var oSource=UCF_DomUtil.oGetActiveElement(),oItem=UCF_DomUtil.oGetCTElement(oSource);if(oItem&&oItem.getAttribute("ct")=="PHII"){this.setNextButton();this.setPreviousButton();this.setMoreIndicator();}}; UCF_PhaseIndicator.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oSource.getAttribute("id")==null)return;var sSourceId=oSource.getAttribute("id");if(sSourceId.indexOf("next")>-1){this.nextPage();}else if(sSourceId.indexOf("prev")>-1){this.previousPage();}this.setPreviousButton();this.setNextButton();this.setMoreIndicator();}; UCF_PhaseIndicator.prototype.previousPage=function(){var oBtn=UCF_DomUtil.$(this.sId+"-prev");if(oBtn.className.indexOf("Dsbl")>-1)return;this.oScrollDomRef.scrollTop-=this.oScrollDomRef.offsetHeight;var oFirstVisible=this.getFirstVisible();if(!oFirstVisible)return;this.fireScroll(this.sId,oFirstVisible.sId);}; UCF_PhaseIndicator.prototype.nextPage=function(){var oBtn=UCF_DomUtil.$(this.sId+"-next");if(oBtn.className.indexOf("Dsbl")>-1)return;this.oScrollDomRef.scrollTop+=this.oScrollDomRef.offsetHeight;var oFirstVisible=this.getFirstVisible();if(!oFirstVisible)return;this.fireScroll(this.sId,oFirstVisible.sId);}; UCF_PhaseIndicator.prototype.setMoreIndicator=function(){var oIcon=UCF_DomUtil.$(this.sId+"-start");if(this.oScrollDomRef.scrollTop>0)oIcon.className="lsPhInicoMB2";else oIcon.className="lsPhInicoStrart2";}; UCF_PhaseIndicator.prototype.getFirstVisible=function(){for(var i=0;i<this.aItems.length;i++){  var iST=this.oScrollDomRef.scrollTop;var iOT=this.aItems[i].oDomRef.offsetTop;if(iST==iOT||iST+1==iOT||iST-1==iOT)return this.aItems[i];}}; UCF_PhaseIndicator.prototype.getLastVisible=function(){for(var i=this.aItems.length-1;i>=0;i--){  var iST=this.oScrollDomRef.scrollTop;var iOT=this.aItems[i].oDomRef.offsetTop;if(iST==iOT||iST+1==iOT||iST-1==iOT)return this.aItems[i];}}; UCF_PhaseIndicator.prototype.setPreviousButton=function(){var oBtn=UCF_DomUtil.$(this.sId+"-prev");oBtn.className=(this.oScrollDomRef.scrollTop>0)?"urBtnStd urPGBtn urPGHPrevItem":"urBtnStdDsbl urPGBtn urPGHPrevItemDsbl";}; UCF_PhaseIndicator.prototype.setNextButton=function(){var bScroll=this.oScrollDomRef.scrollHeight>this.oScrollDomRef.scrollTop+this.oScrollDomRef.offsetHeight;var oBtn=UCF_DomUtil.$(this.sId+"-next");oBtn.className=(bScroll)?"urBtnStd urPGBtn urPGHNxtItem":"urBtnStdDsbl urPGBtn urPGHNxtItemDsbl";}; UCF_PhaseIndicator.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem");if(UCF_JsUtil.bInstanceOf(oItem,"UCF_PhaseIndicatorItem")&&!oItem.bSelected&&oItem.bEnabled)this.fireSelect(this.sId,oItem.sId);}; UCF_PhaseIndicator.prototype.createItems=function(){var aDomItems=this.oScrollDomRef.childNodes;this.aItems=new Array();this.oSelected=null;for(var iItemCount=0;iItemCount<aDomItems.length;iItemCount++){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[iItemCount],true);oItem.iIndex=iItemCount;if(oItem.bSelected)this.oSelected=oItem;if(oItem.bEnabled||window.UCF_System.bIs508){this.oItemNavigation.addItem(oItem,oItem.bSelected);}this.aItems.push(oItem);}}; UCF_PhaseIndicator.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(!UCF_JsUtil.bInstanceOf(oSource,"UCF_PhaseIndicatorItem"))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource.oDomRef));oAccessibilityHelper.setTooltip(oSource.sTooltip);oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex+1);if(!UCF_StringUtil.bIsEmpty(this.sAccessibilityDescription)){oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);}oAccessibilityHelper.setControlType("PHI");oAccessibilityHelper.setEnabled(oSource.bEnabled);oAccessibilityHelper.setSelected(oSource.bSelected);oAccessibilityHelper.addTutor("LRNAV_TUT");oAccessibilityHelper.addEnabledTutor("SELECT_TUT",oSource.bEnabled&&!oSource.bSelected);}; UCF_PhaseIndicator.prototype.destroy=function(){UCF_Control.prototype.destroy.apply(this,arguments);this.detachBrowserEvent("resize",this.oDomRef);this.detachBrowserEvent("scroll",this.oDomRef);}; UCF_PhaseIndicator.prototype.aAttributeNames=["sFirstVisibleItem"]; UCF_PhaseIndicator.prototype.aMethodNames=[];  UCF_PhaseIndicator.prototype.sFirstVisibleItem='0'; UCF_PhaseIndicator.prototype.setDefaultValues=function(){this.sFirstVisibleItem='0';}; UCF_PhaseIndicator.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("PhaseIndicator","Select",mParams);}; UCF_PhaseIndicator.prototype.fireScroll=function(sId,sFirstVisibleItemId){var mParams={Id:sId,FirstVisibleItemId:sFirstVisibleItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Scroll)this.oLS.markDirty();this.fireSemanticEvent("PhaseIndicator","Scroll",mParams);};
  function UCF_FileUpload(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.attachBrowserEvent("change",oDomRef);if(!this.bEnabled||this.bReadonly){this.oFocusDomRef=UCF_DomUtil.$(this.sId+"-r");}else{this.oFocusDomRef=this.oDomRef;}this.attachLSEvent(this.oLS.E_EVENTS.PendingRequest,"onPendingRequest");this.bAllowTextSelection=true;this.bIsFileSelected=false;this.bIsUploading=false;this.bIsUploadComplete=false;this.oPendingRequest=null;this.sValue="";this.bChanged=false;};UCF_FileUpload.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_FileUpload.prototype.destroy=function(){this.detachBrowserEvent("change",this.oDomRef);this.detachLSEvent(this.oLS.E_EVENTS.PendingRequest);UCF_Control.prototype.destroy.apply(this,arguments);}; UCF_FileUpload.prototype.onchange=function(oBrowserEvent){if(!this.bEnabled||this.bReadOnly||this.sValue==this.oDomRef.value){if(this.sValue==""){this.bIsFileSelected=false;}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}this.sValue=this.oDomRef.value;this.bChanged=true;this.bIsFileSelected=(this.sValue!="");if(!this.bIsFileSelected)return;if(this.sUploadBehavior!="STANDARD"){this.prepareUploadFrame();}if(this.sUploadBehavior=="IMMEDIATE"){this.upload();}else if(this.sUploadBehavior=="STANDARD"&&!this.oPendingRequest){this.fireChange(this.sId,this.sValue);this.bChanged=false;}}; UCF_FileUpload.prototype.onclick=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){oBrowserEvent.cancelBubble();}}; UCF_FileUpload.prototype.onlsenter=function(oBrowserEvent){this.onchange(oBrowserEvent);}; UCF_FileUpload.prototype.onload=function(oBrowserEvent){ if(!this.bIsUploading)return;this.detachBrowserEvent("load",this.oIFrameRef);this.bIsUploading=false;this.bIsFileSelected=false; this.bIsUploadComplete=true;if(this.oPendingRequest){this.oPendingRequest.resume(this.sId);this.oPendingRequest=null;}oBrowserEvent.cancelBubble();}; UCF_FileUpload.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("FU"); var sLabel="";sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setAccessKey(this.sAccessKey);if(this.oDomRef.value!="")oAccessibilityHelper.setText(this.oDomRef.value);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setRequired(this.bRequired);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addEnabledTutor("FU_TUT",this.bEnabled&&!this.bReadonly);}; UCF_FileUpload.prototype.onPendingRequest=function(oEvent){if(!this.bIsFileSelected)return;var oPendingRequest=oEvent.oGetParam("oPendingRequest");this.oPendingRequest=oPendingRequest;this.oPendingRequest.suspend(this.sId);if(this.bChanged){ this.fireChange(this.sId,this.sValue);this.bChanged=false;} if(this.sUploadBehavior=="ONSUBMIT"){this.upload();}else if(this.sUploadBehavior=="IMMEDIATE"&&this.bIsUploading){return;}else{this.oPendingRequest.resume(this.sId);this.oPendingRequest=null;}}; UCF_FileUpload.prototype.upload=function(){this.bIsUploading=true;this.bIsUploadComplete=false;try{this.oRootRef.submit();}catch(e){this.bIsUploading=false;this.bIsUploadComplete=false;this.fireError(this.sId);if(this.oPendingRequest){this.oPendingRequest.resume(this.sId);this.oPendingRequest=null;}}}; UCF_FileUpload.prototype.prepareUploadFrame=function(){if(!this.oIFrameRef){var oIFrameRef=null;var sIFrameId=this.sId+"-frame"; if(UCF_UserAgent.bIsTrident(7)){ oIFrameRef=document.createElement("<iframe name='"+sIFrameId+"'/>");}else{oIFrameRef=document.createElement("iframe");}oIFrameRef.style.display="none";oIFrameRef.src="javascript:''"; oIFrameRef.id=sIFrameId;this.oRootRef.appendChild(oIFrameRef);oIFrameRef.contentWindow.name=sIFrameId;this.oIFrameRef=oIFrameRef;this.attachBrowserEvent("load",this.oIFrameRef);}}; UCF_FileUpload.prototype.onlsfocus=function(){if(!this.bEnabled&&!UCF_System.bIs508)return;var sFocusStyle="lsEdFieldFocus";this.sStyles=this.oDomRef.className;if(this.bReadonly||!this.bEnabled){sFocusStyle+="Dsbl";}UCF_DomUtil.addClass(this.oDomRef,sFocusStyle);this.oDomRef.style.backgroundImage="none";}; UCF_FileUpload.prototype.onlsblur=function(){if(!this.sStyles)return;this.oDomRef.className=this.sStyles;}; UCF_FileUpload.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();if(oBrowserEvent.bCtrl()&&iKeyCode==UCF_KeyCodes.A){this.oDomRef.select();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(oBrowserEvent.bCtrl()&&iKeyCode==UCF_KeyCodes.C){oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.DELETE||iKeyCode==UCF_KeyCodes.BACKSPACE){this.sValue=this.oDomRef.value="";}else if(iKeyCode!=UCF_KeyCodes.TAB&&iKeyCode!=UCF_KeyCodes.F6&&iKeyCode!=UCF_KeyCodes.ARROW_LEFT&&iKeyCode!=UCF_KeyCodes.ARROW_RIGHT&&iKeyCode!=UCF_KeyCodes.HOME&&iKeyCode!=UCF_KeyCodes.END&&iKeyCode!=UCF_KeyCodes.SPACE){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_FileUpload.prototype.onpaste=function(oBrowserEvent){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_FileUpload.prototype.ondblclick=function(oBrowserEvent){this.oDomRef.click();}; UCF_FileUpload.prototype.aAttributeNames=["sTooltip","bEnabled","bReadonly","sAccessKey","sUploadBehavior","bRequired"]; UCF_FileUpload.prototype.aMethodNames=[];  UCF_FileUpload.prototype.sTooltip=''; UCF_FileUpload.prototype.bEnabled=true; UCF_FileUpload.prototype.bReadonly=false; UCF_FileUpload.prototype.sAccessKey=''; UCF_FileUpload.prototype.sUploadBehavior="STANDARD"; UCF_FileUpload.prototype.bRequired=false; UCF_FileUpload.prototype.setDefaultValues=function(){this.sTooltip='';this.bEnabled=true;this.bReadonly=false;this.sAccessKey='';this.sUploadBehavior="STANDARD";this.bRequired=false;}; UCF_FileUpload.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("FileUpload","Change",mParams);};
 function UCF_MatrixLayout(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(this.mEvents.Resize){this.attachBrowserEvent("resize",this.oDomRef);}};UCF_MatrixLayout.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_MatrixLayout.prototype.destroy=function(){if(this.mEvents.Resize){this.detachBrowserEvent("resize",this.oDomRef);}}; UCF_MatrixLayout.prototype.onresize=function(oBrowserEvent){var iWidth=this.oDomRef.offsetWidth;var iHeight=this.oDomRef.offsetHeight;var iWidthDelta=iWidth-this.iWidth;var iHeightDelta=iHeight-this.iHeight;if(iWidthDelta!=0||iHeightDelta!=0){this.iWidth=iWidth;this.iHeight=iHeight;this.fireResize(this.sId,iWidth,iHeight);}else{}oBrowserEvent.cancelBubble();};UCF_MatrixLayout.prototype.setWidth=function(sWidth){this.oDomRef.style.width=sWidth;};UCF_MatrixLayout.prototype.setHeight=function(sHeight){this.oDomRef.style.height=sHeight;}; UCF_MatrixLayout.prototype.aAttributeNames=["sId","sMarginLeft","sWidth","sHeight"]; UCF_MatrixLayout.prototype.aMethodNames=["setWidth","setHeight"];  UCF_MatrixLayout.prototype.sId=''; UCF_MatrixLayout.prototype.sMarginLeft='0px'; UCF_MatrixLayout.prototype.sWidth=''; UCF_MatrixLayout.prototype.sHeight=''; UCF_MatrixLayout.prototype.setDefaultValues=function(){this.sId='';this.sMarginLeft='0px';this.sWidth='';this.sHeight='';}; UCF_MatrixLayout.prototype.fireResize=function(sId,iWidth,iHeight){var mParams={Id:sId,Width:iWidth,Height:iHeight};this.fireSemanticEvent("MatrixLayout","Resize",mParams);};
function UCF_TreeDragDelegate(oLS,oDragSourceControl){UCF_DragDelegate.apply(this,[oLS]);this.setDragSourceControl(oDragSourceControl);};UCF_TreeDragDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DragDelegate"))();UCF_TreeDragDelegate.prototype.oGetGhost=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl();var oControlDomRef=oControl.oDomRef;var oContainer=document.createElement("div");oContainer.innerHTML=oControl.oDomRef.innerHTML;oContainer.className="urTreNSel";if(oControlDomRef.nextSibling&&oControlDomRef.nextSibling.id==oControlDomRef.id+"-child")oContainer.innerHTML+=oControlDomRef.nextSibling.innerHTML;var oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oContainer);oGhost.setOffset(12,12);return oGhost;};UCF_TreeDragDelegate.prototype.bIsDragPossible=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl();return oControl.sClassName=="UCF_TreeNode";}; UCF_TreeDragDelegate.prototype.oGetDragSourceControl=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl();return oControl;};
 function UCF_NavigationList(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oScrollDomRef=UCF_DomUtil.$(this.sId+'-scrl');if(this.bExpandable){this.oExpandIcon=UCF_DomUtil.$(this.sId+"-exp");this.oExpander=new(UCF_ClassLoader.oGetClass("UCF_Expander"))(this.oScrollDomRef);}this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);this.oItemNavigation.bIgnoreFocus=true;};UCF_NavigationList.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_NavigationList.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_NavigationList.prototype.onkeydown=function(oBrowserEvent){if(oBrowserEvent.bAlt()||oBrowserEvent.bCtrl())return;var bTab=(oBrowserEvent.iKeyCode()==UCF_KeyCodes.TAB),bShift=oBrowserEvent.bShift(),sControlType=this.oGetSourceType(oBrowserEvent.oGetSourceControl()),oSource=oBrowserEvent.oGetSource(),bEnd=(oSource.getAttribute("id")&&oSource.getAttribute("id").indexOf("-end")>-1);if((bTab&&!bShift&&!bEnd)||(bTab&&bShift&&sControlType!="NAVIGATIONLIST"))this.oItemNavigation.bIgnoreFocus=true;else if((bTab&&bShift&&bEnd)||(bTab&&!bShift&&sControlType=="NAVIGATIONLIST"))this.oItemNavigation.bIgnoreFocus=false;}; UCF_NavigationList.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),oSourceControl=oBrowserEvent.oGetSourceControl(),sSourceId=oSourceControl.sId;if(oSource.getAttribute("id")&&oSource.getAttribute("id").indexOf("-exp")>-1){this.toggle();}else if(oSource.getAttribute("id")&&oSource.getAttribute("id").indexOf("-pers")>-1){this.firePersonalize(this.sId);}else if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_NavigationListItem")&&oSourceControl.sPopupMenuId!=""){this.fireMenuAccess(this.sId,oSourceControl.sId,oSourceControl.sPopupMenuId);this.openMenu(oSourceControl);}oBrowserEvent.cancel();};UCF_NavigationList.prototype.oncontextmenu=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl();if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_NavigationListItem")&&oSourceControl.sPopupMenuId!=""){this.fireMenuAccess(this.sId,oSourceControl.sId,oSourceControl.sPopupMenuId);this.openMenu(oSourceControl);}oBrowserEvent.cancel();}; UCF_NavigationList.prototype.onlsshow=function(oBrowserEvent){var oItem=oBrowserEvent.oGetSourceControl(),sSourceType=this.oGetSourceType(oItem);if(sSourceType!="NAVIGATIONLISTITEM"||oItem.sPopupMenuId=="")return;this.fireMenuAccess(this.sId,oItem.sId,oItem.sPopupMenuId);this.openMenu(oItem);oBrowserEvent.cancel();}; UCF_NavigationList.prototype.onlsexpand=function(oBrowserEvent){if(this.getCollapseStatus(oBrowserEvent))this.toggle();}; UCF_NavigationList.prototype.onlscollapse=function(oBrowserEvent){var bKeyboardEvent=oBrowserEvent.oDomEvent.type=="keydown";if(this.getCollapseStatus(oBrowserEvent))this.toggle();}; UCF_NavigationList.prototype.getCollapseStatus=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl(),oSource=oBrowserEvent.oGetSource(),sSourceId=oSource.getAttribute("id"),sSourceType=this.oGetSourceType(oSourceControl),bKeyboardEvent=oBrowserEvent.oDomEvent.type=="keydown",iKey=oBrowserEvent.iKeyCode();if(sSourceType==null||!this.bExpandable||sSourceId.indexOf("-pers")>-1||sSourceType=="NAVIGATIONLISTITEM"||sSourceType=="NAVIGATIONLISTGROUP"||(bKeyboardEvent&&this.bExpanded&&iKey==UCF_KeyCodes.NUMPAD_PLUS)||(bKeyboardEvent&&!this.bExpanded&&iKey==UCF_KeyCodes.NUMPAD_MINUS))return false;return true;}; UCF_NavigationList.prototype.toggle=function(){var oScrollDomRef=UCF_DomUtil.$(this.sId+"-scrl");if(this.bExpanded){this.oExpandIcon.className="urFRAExpClo";oScrollDomRef.style.display="none";this.fireCollapse(this.sId);}else{this.oExpandIcon.className="urFRAExpOp";oScrollDomRef.style.display="block";this.fireExpand(this.sId);}this.bExpanded=!this.bExpanded;}; UCF_NavigationList.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem"),sSourceType=this.oGetSourceType(oItem);if(sSourceType=="NAVIGATIONLISTITEM"&&!oItem.bSelected&&oItem.bEnabled&&oItem.sPopupMenuId=="")this.fireSelect(this.sId,oItem.sId);else if(sSourceType=="NAVIGATIONLISTGROUP"&&oItem.bIsClickable)this.fireSelect(this.sId,oItem.sId);}; UCF_NavigationList.prototype.openMenu=function(oItem,bWidthKeyboard){if(!oItem.bEnabled||oItem.sPopupMenuId=="")return;this.oPopupMenu=this.oLS.oControlFactory.oGetControlById(oItem.sPopupMenuId,true);this.oPopupMenu.setOpenerRef(oItem.oDomRef);this.oPopupMenu.setOpenerId(oItem.sId);this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.iOldFocusedIndex=this.oItemNavigation.iFocusedIndex;this.oPopupMenu.open(bWidthKeyboard);this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.Close,this,"onMenuClose");}; UCF_NavigationList.prototype.onMenuClose=function(oEvent){this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);this.oItemNavigation.focusItemByIndex(this.iOldFocusedIndex);}; UCF_NavigationList.prototype.createItems=function(){var aDomItems=this.oScrollDomRef.getElementsByTagName("DIV");for(var i=0;i<aDomItems.length;i++){var oControlItem=(aDomItems[i].getAttribute("ct"))?this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[i],true):this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[i].parentNode.parentNode,true),sSourceType=this.oGetSourceType(oControlItem);if(oControlItem==null||sSourceType==null)continue;if(sSourceType=="NAVIGATIONLISTGROUP"){oControlItem.bEnabled=true;oControlItem.bSelected=false;}if(oControlItem.bEnabled||window.UCF_System.bIs508){this.oItemNavigation.addItem(oControlItem,oControlItem.bSelected);}oControlItem.iIndex=this.oItemNavigation.aItems.length;}}; UCF_NavigationList.prototype.oGetSourceType=function(oObject){if(UCF_JsUtil.bInstanceOf(oObject,"UCF_NavigationListItem"))return "NAVIGATIONLISTITEM";else if(UCF_JsUtil.bInstanceOf(oObject,"UCF_NavigationListGroup"))return "NAVIGATIONLISTGROUP";else if(UCF_JsUtil.bInstanceOf(oObject,"UCF_NavigationList"))return "NAVIGATIONLIST";else if(oObject.id.indexOf("-pers")>-1)return "PERSONALIZE";else if(oObject.id.indexOf("-end")>-1)return "END";return null;}; UCF_NavigationList.prototype.sGetAccChildren=function(){return this.oLS.sGetText("SAPUR_ACC_NAVIGATIONALIST_CHILDREN");}; UCF_NavigationList.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oControl=oBrowserEvent.oGetSourceControl(),oSource=oBrowserEvent.oGetSource(),sSourceType=(oSource.id.indexOf("-")==-1)?this.oGetSourceType(oControl):this.oGetSourceType(oSource);if(sSourceType==null)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;switch(sSourceType){case "NAVIGATIONLIST":this.setAccTextForList(oAccessibilityHelper);break;case "NAVIGATIONLISTGROUP":this.setAccTextForGroup(oAccessibilityHelper,oControl);break;case "NAVIGATIONLISTITEM":this.setAccTextForItem(oAccessibilityHelper,oControl);break;case "PERSONALIZE":this.setAccTextForPersonalize(oAccessibilityHelper);break;case "END":this.setAccTextForEnd(oAccessibilityHelper);break;}}; UCF_NavigationList.prototype.setAccTextForList=function(oAccessibilityHelper){oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("NL");oAccessibilityHelper.setTooltip(this.sTooltip);if(!this.bExpandable){oAccessibilityHelper.addTutor("GROUP_TUT");return;}if(this.bExpanded){oAccessibilityHelper.setExpanded(this.bExpanded);oAccessibilityHelper.addTutor("GROUPCOLL_TUT");}else{oAccessibilityHelper.setCollapsed(!this.bExpanded);oAccessibilityHelper.addTutor("GROUPEXP_NO_ENTER_TUT");}}; UCF_NavigationList.prototype.setAccTextForGroup=function(oAccessibilityHelper,oControl){oAccessibilityHelper.setText(oControl.sTitle);oAccessibilityHelper.setControlType("NL_G");oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oControl.iIndex);oAccessibilityHelper.addTutor("NL_G_TUT");if(oControl.bIsClickable)oAccessibilityHelper.addTutor("SELECT_TUT");}; UCF_NavigationList.prototype.setAccTextForItem=function(oAccessibilityHelper,oControl){oAccessibilityHelper.setText(oControl.sText);oAccessibilityHelper.setControlType("NL_I");oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oControl.iIndex);oAccessibilityHelper.setSelected(oControl.bSelected);oAccessibilityHelper.setEnabled(oControl.bEnabled);if(oControl.bEnabled&&oControl.sPopupMenuId!=""){oAccessibilityHelper.addTutor("NL_I_POP_TUT");}else if(oControl.bEnabled&&oControl.sPopupMenuId==""){oAccessibilityHelper.addTutor("NL_I_TUT");}}; UCF_NavigationList.prototype.setAccTextForPersonalize=function(oAccessibilityHelper){oAccessibilityHelper.setControlType("PERS");oAccessibilityHelper.addTutor("LN_TUT");}; UCF_NavigationList.prototype.setAccTextForEnd=function(oAccessibilityHelper){oAccessibilityHelper.setControlType("NL_END");}; UCF_NavigationList.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_NavigationList.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);oBrowserEvent.cancelBubble();}; UCF_NavigationList.prototype.aAttributeNames=["sTitle","bExpandable","bExpanded","iContentHeight","sTooltip"]; UCF_NavigationList.prototype.aMethodNames=[];  UCF_NavigationList.prototype.sTitle=''; UCF_NavigationList.prototype.bExpandable=false; UCF_NavigationList.prototype.bExpanded=true; UCF_NavigationList.prototype.iContentHeight=0; UCF_NavigationList.prototype.sTooltip=''; UCF_NavigationList.prototype.setDefaultValues=function(){this.sTitle='';this.bExpandable=false;this.bExpanded=true;this.iContentHeight=0;this.sTooltip='';}; UCF_NavigationList.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};this.fireSemanticEvent("NavigationList","Select",mParams);}; UCF_NavigationList.prototype.fireExpand=function(sId){var mParams={Id:sId};this.fireSemanticEvent("NavigationList","Expand",mParams);}; UCF_NavigationList.prototype.fireCollapse=function(sId){var mParams={Id:sId};this.fireSemanticEvent("NavigationList","Collapse",mParams);}; UCF_NavigationList.prototype.fireMenuAccess=function(sId,sItemId,sPopupMenuId){var mParams={Id:sId,ItemId:sItemId,PopupMenuId:sPopupMenuId};this.fireSemanticEvent("NavigationList","MenuAccess",mParams);}; UCF_NavigationList.prototype.firePersonalize=function(sId){var mParams={Id:sId};this.fireSemanticEvent("NavigationList","Personalize",mParams);};
 function UCF_ToggleLink(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bIgnoreDefaultButton=true;};UCF_ToggleLink.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ToggleLink.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled)return;if(this.bCollapsed)this.fireExpand(this.sId);else this.fireCollapse(this.sId);}; UCF_ToggleLink.prototype.onlsselect=function(oBrowserEvent){if(!this.bEnabled)return;if(this.bCollapsed)this.fireExpand(this.sId);else this.fireCollapse(this.sId);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_ToggleLink.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setNotToggled(this.bCollapsed);oAccessibilityHelper.setToggled(!this.bCollapsed);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("TGL");oAccessibilityHelper.addEnabledTutor("TGL_TUT",this.bEnabled);}; UCF_ToggleLink.prototype.aAttributeNames=["sTooltip","bEnabled","bCollapsed","sAccessKey"]; UCF_ToggleLink.prototype.aMethodNames=[];  UCF_ToggleLink.prototype.sTooltip=''; UCF_ToggleLink.prototype.bEnabled=true; UCF_ToggleLink.prototype.bCollapsed=true; UCF_ToggleLink.prototype.sAccessKey=''; UCF_ToggleLink.prototype.setDefaultValues=function(){this.sTooltip='';this.bEnabled=true;this.bCollapsed=true;this.sAccessKey='';}; UCF_ToggleLink.prototype.fireExpand=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Expand)this.oLS.markDirty();this.fireSemanticEvent("ToggleLink","Expand",mParams);}; UCF_ToggleLink.prototype.fireCollapse=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Collapse)this.oLS.markDirty();this.fireSemanticEvent("ToggleLink","Collapse",mParams);};
 function UCF_SectionHeader(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);if(!this.bIsDragHandle)this.bAllowTextSelection=true;this.initializeHandle(oDomRef);};UCF_SectionHeader.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_SectionHeader.prototype.bIsFocusable=function(){return false;}; UCF_SectionHeader.prototype.aAttributeNames=["sAccessKey","bIsDragHandle"]; UCF_SectionHeader.prototype.aMethodNames=[];  UCF_SectionHeader.prototype.sAccessKey=''; UCF_SectionHeader.prototype.bIsDragHandle=false; UCF_SectionHeader.prototype.setDefaultValues=function(){this.sAccessKey='';this.bIsDragHandle=false;};
 function UCF_GeoMap(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_GeoMap.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_GeoMap.prototype.handleAccessFragments=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();oAccessFragment=this.oGetAccessFragment(oSource);if(!oAccessFragment)return;var bHandled=false,sKey=oAccessFragment.sKey,oValue=oAccessFragment.oValue;switch(sKey){case "GEOMAPMOVE":{this.fireMove(this.sId,oValue.iX,oValue.iY);bHandled=true;break;}case "GEOMAPZOOMSTEP":{this.fireZoomStep(this.sId,oValue.iZoomStep);bHandled=true;break;}case "GEOMAPZOOMIN":{this.fireZoomIn(this.sId);bHandled=true;break;}case "GEOMAPZOOMOUT":{this.fireZoomOut(this.sId);bHandled=true;break;}case "GEOMAPIMAGEMOVE":{var oEvent=oBrowserEvent.oDomEvent,iX=oEvent.offsetX,iY=oEvent.offsetY;this.fireImageMove(this.sId,iX,iY);bHandled=true;break;}case "GEOMAPIMAGEZOOM":{var oEvent=oBrowserEvent.oDomEvent,iX=oEvent.offsetX,iY=oEvent.offsetY;this.fireImageZoom(this.sId,iX,iY);bHandled=true;break;}case "GEOMAPRESET":{this.fireReset(this.sId);bHandled=true;break;}}if(bHandled){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_GeoMap.prototype.oGetAccessFragment=function(oDomRef){var oFragmentDomRef=UCF_DomUtil.oGetParentByAttribute(oDomRef,"acf");if(!UCF_DomUtil.bContains(this.oDomRef,oFragmentDomRef))return null;var bHandled=false;var sKey=oFragmentDomRef.getAttribute("acf"),sValue=oFragmentDomRef.getAttribute("acfvalue"),oValue=null;if(sValue){oValue=eval("result = "+sValue+";");}return{oDomRef:oFragmentDomRef,sKey:sKey,oValue:oValue};}; UCF_GeoMap.prototype.onclick=function(oBrowserEvent){var oSourceRef=oBrowserEvent.oGetSource();if(oSourceRef.tagName.toLowerCase()=="area"){var sAreaId=oSourceRef.getAttribute("areaid");this.fireImageMapClick(this.sId,sAreaId);}else{this.handleAccessFragments(oBrowserEvent);}}; UCF_GeoMap.prototype.onlsup=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();oAccessFragment=this.oGetAccessFragment(oSource);if(!oAccessFragment)return;if(oAccessFragment.sKey=="GEOMAPIMAGEMOVE"){this.fireMove(this.sId,0,-1);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_GeoMap.prototype.onlsdown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();oAccessFragment=this.oGetAccessFragment(oSource);if(!oAccessFragment)return;if(oAccessFragment.sKey=="GEOMAPIMAGEMOVE"){this.fireMove(this.sId,0,1);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_GeoMap.prototype.onlsleft=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();oAccessFragment=this.oGetAccessFragment(oSource);if(!oAccessFragment)return;if(oAccessFragment.sKey=="GEOMAPIMAGEMOVE"){this.fireMove(this.sId,-1,0);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_GeoMap.prototype.onlsright=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();oAccessFragment=this.oGetAccessFragment(oSource);if(!oAccessFragment)return;if(oAccessFragment.sKey=="GEOMAPIMAGEMOVE"){this.fireMove(this.sId,1,0);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_GeoMap.prototype.onlsselect=function(oBrowserEvent){this.handleAccessFragments(oBrowserEvent);}; UCF_GeoMap.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_GeoMap.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_GeoMap.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSourceRef=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("GM");oAccessibilityHelper.addTutor("GROUP_TUT");oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);oAccessibilityHelper.setTooltip(this.sTooltip);}; UCF_GeoMap.prototype.aAttributeNames=["sAccessibilityDescription","sTooltip"]; UCF_GeoMap.prototype.aMethodNames=[];  UCF_GeoMap.prototype.sAccessibilityDescription=''; UCF_GeoMap.prototype.sTooltip=''; UCF_GeoMap.prototype.setDefaultValues=function(){this.sAccessibilityDescription='';this.sTooltip='';}; UCF_GeoMap.prototype.fireMove=function(sId,iDirectionX,iDirectionY){var mParams={Id:sId,DirectionX:iDirectionX,DirectionY:iDirectionY};this.fireSemanticEvent("GeoMap","Move",mParams);}; UCF_GeoMap.prototype.fireImageMove=function(sId,iPositionX,iPositionY){var mParams={Id:sId,PositionX:iPositionX,PositionY:iPositionY};this.fireSemanticEvent("GeoMap","ImageMove",mParams);}; UCF_GeoMap.prototype.fireImageZoom=function(sId,iPositionX,iPositionY){var mParams={Id:sId,PositionX:iPositionX,PositionY:iPositionY};this.fireSemanticEvent("GeoMap","ImageZoom",mParams);}; UCF_GeoMap.prototype.fireImageMapClick=function(sId,sAreaId){var mParams={Id:sId,AreaId:sAreaId};this.fireSemanticEvent("GeoMap","ImageMapClick",mParams);}; UCF_GeoMap.prototype.fireZoomIn=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ZoomIn)this.oLS.markDirty();this.fireSemanticEvent("GeoMap","ZoomIn",mParams);}; UCF_GeoMap.prototype.fireZoomOut=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ZoomOut)this.oLS.markDirty();this.fireSemanticEvent("GeoMap","ZoomOut",mParams);}; UCF_GeoMap.prototype.fireZoomStep=function(sId,iStepNumber){var mParams={Id:sId,StepNumber:iStepNumber};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ZoomStep)this.oLS.markDirty();this.fireSemanticEvent("GeoMap","ZoomStep",mParams);}; UCF_GeoMap.prototype.fireReset=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Reset)this.oLS.markDirty();this.fireSemanticEvent("GeoMap","Reset",mParams);};
 function UCF_Animator(){};UCF_Animator.bRunning=false;UCF_Animator.mAnimations=[];UCF_Animator.iAnimCounter=0;UCF_Animator.iTimeStamp=0;UCF_Animator.iInterval=10;UCF_Animator.oTimer=null; UCF_Animator.attach=function(oAnimation){if(!this.bRunning){this.iTimeStamp=UCF_JsUtil.iGetTimeStamp();this.start();}this.iAnimCounter++;this.mAnimations[oAnimation.sId]=oAnimation;}; UCF_Animator.detach=function(oAnimation){delete this.mAnimations[oAnimation.sId];this.iAnimCounter--;if(this.iAnimCounter==0){this.stop();}}; UCF_Animator.iGetTimeStamp=function(){return this.iTimeStamp;}; UCF_Animator.step=function(){this.iTimeStamp=UCF_JsUtil.iGetTimeStamp();for(var i in this.mAnimations){this.mAnimations[i].step(this.iTimeStamp);}}; UCF_Animator.start=function(){this.oTimer=setInterval("UCF_Animator.step()",this.iInterval);this.bRunning=true;}; UCF_Animator.stop=function(){clearInterval(this.oTimer);this.bRunning=false;};
 function UCF_FlashContainer(oDomRef,oLS){UCF_ActiveComponent.apply(this,[oDomRef,oLS]);};UCF_FlashContainer.prototype=new(UCF_ClassLoader.oGetClass("UCF_ActiveComponent"))(); UCF_FlashContainer.prototype.destroy=function(){if(UCF_System.sDevice=="ie6"){for(var i in this.oDomRef){if(typeof(this.oDomRef[i])=="function")this.oDomRef[i]=null;}}UCF_ActiveComponent.prototype.destroy.apply(this,arguments);}; UCF_FlashContainer.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSourceControl();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("FH");oAccessibilityHelper.addTutor("GROUP_TUT");}; UCF_FlashContainer.prototype.aAttributeNames=["sLifeCycle"]; UCF_FlashContainer.prototype.aMethodNames=["setKeepAlive"];  UCF_FlashContainer.prototype.sLifeCycle="BROWSER"; UCF_FlashContainer.prototype.setDefaultValues=function(){this.sLifeCycle="BROWSER";};
  function UCF_SplitterCol(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_SplitterCol.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_SplitterCol.prototype.aAttributeNames=["iWidth","sCollapseDirection"]; UCF_SplitterCol.prototype.aMethodNames=[];  UCF_SplitterCol.prototype.iWidth=-1; UCF_SplitterCol.prototype.sCollapseDirection="NONE"; UCF_SplitterCol.prototype.setDefaultValues=function(){this.iWidth=-1;this.sCollapseDirection="NONE";};
 function UCF_ItemListBox(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); this.mItems={};this.aItems=this.oDomRef.getElementsByTagName("tr");this.sFirstVisibleItemKey="";this.sLastVisibleItemKey="";for(var i=0;i<this.aItems.length;i++){var sKey=this.aItems[i].getAttribute("k");this.mItems[sKey]=this.aItems[i];if(i==0){this.sFirstVisibleItemKey=sKey;}else{this.sLastVisibleItemKey=sKey;}}  this.sPrevKey=null; this.oSelectTimer=null; this.sSearchString=""; this.sStartKey=null; this.bTabIndexInitialized=false; this.bSelectionChanged=false; this.bClickHandled=false; this.iCurrentHeight=0;if(!this.bIsPopup){this.oScrollArea=new(UCF_ClassLoader.oGetClass("UCF_ScrollArea"))(UCF_DomUtil.$(this.sId)); this.oScrollArea.enableDragScrolling(this.sDropTargetInfo?true:false);this.oScrollArea.attachEvent(this.oScrollArea.E_EVENTS.Scroll,this,"onAreaScroll");this.addDelegate(this.oScrollArea);this.attachBrowserEvent("scroll",this.oDomRef);} this.sClientFilter="";this.sServerFilter="";this.bClientFiltered=false;};UCF_ItemListBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ItemListBox.prototype.E_EVENTS={Close:0,Select:1,Filter:2}; UCF_ItemListBox.prototype.initialize=function(){this.applyHeight();this.applyWidth();if(this.iScrollTop>0)this.oScrollArea.setScrollPosition(this.iScrollTop,0);}; UCF_ItemListBox.prototype.collectFocusInfo=function(oFocusInfo){oFocusInfo.setApplyControl(this);}; UCF_ItemListBox.prototype.applyFocusInfo=function(oFocusInfo){var oControl=this.oLS.oControlFactory.oGetControlById(oFocusInfo.sGetFocussedId());var sKey="";if(oControl==this){sKey=this.sGetFirstSelectedItemKey();if(!sKey)sKey=this.sGetFirstItemKey();}else if(UCF_JsUtil.bInstanceOf(oControl,"UCF_ItemListBoxItem")){sKey=oControl.sKey;}else{return;}this.focusItem(sKey);}; UCF_ItemListBox.prototype.onAreaScroll=function(oEvent){var iScrollTop=oEvent.oGetParam("iScrollTop");this.fireScroll(this.sId,iScrollTop);}; UCF_ItemListBox.prototype.onlsfocus=function(oBrowserEvent){ if(this.bTabIndexInitialized)return;  if(oBrowserEvent.oSource.tagName!="DIV")return;var sKey=this.sGetFirstSelectedItemKey();if(!sKey)sKey=this.sGetFirstItemKey();this.focusItem(sKey);}; UCF_ItemListBox.prototype.onmousedown=function(oBrowserEvent){if(this.bIsPopup||!this.sDragSourceInfo){return;} if(oBrowserEvent.eGetMouseButtonState()!=oBrowserEvent.MOUSE_BUTTON_STATE.Left){return;}var sKey=this.sGetActiveItem(oBrowserEvent);var bSelected=this.bGetItemSelected(sKey); if(this.iGetSelected()>1&&!oBrowserEvent.oDomEvent.shiftKey&&bSelected)return;this.bClickHandled=true;this.handleSelection(oBrowserEvent);};UCF_ItemListBox.prototype.onclick=function(oBrowserEvent){ if(this.bClickHandled){this.bClickHandled=false;return;}this.handleSelection(oBrowserEvent);};UCF_ItemListBox.prototype.handleSelection=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;var sKey=this.sGetActiveItem(oBrowserEvent);if(sKey==null)return;var bSelectionChanged=false; if(this.bMultipleSelection&&oBrowserEvent.oDomEvent.shiftKey){if(!this.sStartKey)this.sStartKey=sKey;bSelectionChanged=this.bSetItemRangeSelected(this.sStartKey,sKey);} else{var bDeselectOthers=true;var bSelect=true;this.sStartKey=sKey; if(this.bMultipleSelection&&oBrowserEvent.bCtrl()){bDeselectOthers=false;if(this.bGetItemSelected(sKey))bSelect=false;}bSelectionChanged=this.bSetItemSelected(sKey,bSelect,bDeselectOthers);} this.focusItem(sKey); if(bSelectionChanged){this.fireSelectEvent(false);}}; UCF_ItemListBox.prototype.onlshome=function(oBrowserEvent){   var sKey=this.sGetFirstItemKey();if(this.bEnabled&&!this.bReadonly&&!oBrowserEvent.bCtrl()){this.bSelectionChanged=this.bSetItemSelected(sKey,true,true);}this.focusItem(sKey);this.fireSelectEvent(true);  oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_ItemListBox.prototype.onlstop=function(oBrowserEvent){this.onlshome(oBrowserEvent);}; UCF_ItemListBox.prototype.onlsend=function(oBrowserEvent){ if(!this.bEnabled||this.bReadonly)return;var sKey=this.sGetLastItemKey();this.bSelectionChanged=this.bSetItemSelected(sKey,true,true);this.focusItem(sKey);this.fireSelectEvent(true);  oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_ItemListBox.prototype.onlsbottom=function(oBrowserEvent){ if(!this.bEnabled)return;var sKey=this.sGetLastItem();this.focusItem(sKey); oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_ItemListBox.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();var sKey=this.sGetActiveItem(oBrowserEvent);var sNewKey="";var bDeselect=true;var bSelect=true;if(!this.bEnabled)return; if(iKeyCode==UCF_KeyCodes.ARROW_UP||iKeyCode==UCF_KeyCodes.ARROW_DOWN){ if(iKeyCode==UCF_KeyCodes.ARROW_UP)sNewKey=this.sGetPrevItem(sKey);else sNewKey=this.sGetNextItem(sKey); if(!sNewKey||sNewKey==sKey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;} if(this.bReadonly){this.focusItem(sNewKey);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}  if(oBrowserEvent.bShift()){bDeselect=!this.bMultipleSelection;bSelect=!this.bGetItemSelected(sNewKey);if(bSelect)this.bSetItemSelected(sNewKey,bSelect,bDeselect);else this.bSetItemSelected(sKey,bSelect,bDeselect);this.focusItem(sNewKey);this.fireSelectEvent(true);} else if(oBrowserEvent.bCtrl()&&this.bMultipleSelection){this.focusItem(sNewKey);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;} else{this.bSetItemSelected(sNewKey,bSelect,bDeselect);this.sStartKey=sNewKey;this.focusItem(sNewKey);this.fireSelectEvent(true);}oBrowserEvent.cancel();oBrowserEvent.cancelBubble();} else if(iKeyCode==UCF_KeyCodes.SPACE){ if(this.bReadonly)return;if(this.bMultipleSelection&&oBrowserEvent.bCtrl()){bSelect=!this.bGetItemSelected(sKey);bDeselect=false;}this.bSetItemSelected(sKey,bSelect,bDeselect);this.fireSelectEvent(true);  this.refocus(oBrowserEvent.oSource);oBrowserEvent.cancel();} else if(iKeyCode==UCF_KeyCodes.PAGE_UP||iKeyCode==UCF_KeyCodes.PAGE_DOWN){var iItemIndex=this.mItems[sKey].rowIndex;if(iKeyCode==UCF_KeyCodes.PAGE_UP)iItemIndex-=this.iVisibleItems-1;else iItemIndex+=this.iVisibleItems-1;if(iItemIndex<0)iItemIndex=0;if(iItemIndex>this.aItems.length-1)iItemIndex=this.aItems.length-1;sNewKey=this.aItems[iItemIndex].getAttribute("k");this.bSetItemSelected(sNewKey,bSelect,bDeselect);this.focusItem(sNewKey);oBrowserEvent.cancel();}}; UCF_ItemListBox.prototype.onkeypress=function(oBrowserEvent){if(this.bIsPopup){this.oOpenerRef.focus();return;}var sKey=this.sGetActiveItem(oBrowserEvent);var cKey=String.fromCharCode(oBrowserEvent.iKeyCode());if(!this.iLastKeypress){var oDate=new Date();this.iLastKeypress=oDate.getTime();}else{var oDate=new Date();var iNow=oDate.getTime();if(iNow-this.iLastKeypress>250){this.sSearchString="";}this.iLastKeypress=iNow;}this.sSearchString+=cKey;var sNewKey=this.sFindItem(this.sSearchString,sKey);if(sNewKey==null||sNewKey==""){sNewKey=this.sFindItem(this.sSearchString,"");} if(sNewKey==null||sNewKey=="")return; this.bSetItemSelected(sNewKey,true,true);this.focusItem(sNewKey);this.fireSelectEvent(true);}; UCF_ItemListBox.prototype.onmouseover=function(oBrowserEvent){if(!this.bIsPopup||this.bReadonly)return;var sKey=this.sGetActiveItem(oBrowserEvent);if(sKey==null)return;this.bSetItemSelected(sKey,true,true);}; UCF_ItemListBox.prototype.onmouseout=function(oBrowserEvent){if(!this.bIsPopup)return;var sKey=this.sGetActiveItem(oBrowserEvent);if(sKey==null)return;}; UCF_ItemListBox.prototype.sGetItemValue=function(sKey){var oItem=this.mItems[sKey];if(!oItem)return null;var oCol=this.oGetItemValueColumn(oItem);if(!oCol)return null;return this.sGetValueFromCell(oCol);}; UCF_ItemListBox.prototype.iGetItemIndex=function(sKey){var oItem=this.mItems[sKey];if(!oItem)return 0;return oItem.rowIndex+1;}; UCF_ItemListBox.prototype.sGetValueFromCell=function(oCellRef){var oTextNode=oCellRef.firstChild;return oTextNode.nodeValue;}; UCF_ItemListBox.prototype.sGetActiveItem=function(oBrowserEvent){var oDomRef=oBrowserEvent.oGetSource();var sKey=null; while(oDomRef.tagName!="TR"){oDomRef=oDomRef.parentNode;if(oDomRef.tagName=="TABLE"||oDomRef.tagName=="DIV")return null;}sKey=oDomRef.getAttribute("k");return sKey;}; UCF_ItemListBox.prototype.sGetFirstSelectedItemKey=function(){for(var i=0;i<this.aItems.length;i++){if(this.aItems[i].className=="urIlb2ISel")return this.aItems[i].getAttribute("k");}return null;}; UCF_ItemListBox.prototype.sGetPrevItem=function(sKey){var sPreviousKey=null;var oItem=this.mItems[sKey];var oPreviousItem=null;if(oItem){oPreviousItem=oItem.previousSibling; while(oPreviousItem&&oPreviousItem.style.display=="none"){oPreviousItem=oPreviousItem.previousSibling;}if(oPreviousItem){sPreviousKey=oPreviousItem.getAttribute("k");}}return sPreviousKey;}; UCF_ItemListBox.prototype.sGetNextItem=function(sKey){var sNextKey=null;var oItem=this.mItems[sKey];var oNextItem=null;if(oItem){oNextItem=oItem.nextSibling;while(oNextItem&&oNextItem.style.display=="none"){oNextItem=oNextItem.nextSibling;}if(oNextItem){sNextKey=oNextItem.getAttribute("k");}}return sNextKey;}; UCF_ItemListBox.prototype.oGetItemValueColumn=function(oItem){var oCols=oItem.getElementsByTagName("TD");for(var i=0;i<oCols.length;i++){var oImg=oCols[i].getElementsByTagName("IMG");if(oCols[i].className!="urCob2IDscr"&&oImg.length===0){return oCols[i];}}return null;}; UCF_ItemListBox.prototype.bIsVisibleValue=function(sKey,sSearchValue){var iCol=0;if(!sKey||sKey=="")return false;if(this.sIconVisibility!="NONE")iCol++;if(this.sFirstValueVisibility=="VISIBLE"){var sValue=this.sGetValueFromCell(this.mItems[sKey].cells[iCol]);return UCF_StringUtil.bStartWithIgnoreCase(sValue,sSearchValue);}iCol++;if(this.sSecondValueVisibility=="VISIBLE"){var sValue=this.sGetValueFromCell(this.mItems[sKey].cells[iCol]);return UCF_StringUtil.bStartWithIgnoreCase(sValue,sSearchValue);}}; UCF_ItemListBox.prototype.sFindItem=function(sSearchString,sStartKey){var bSearchStart=false;var sValue1="";var sValue2="";var sFirstKey="";sSearchString=sSearchString.toUpperCase();if(!sSearchString)return;if(!sStartKey)bSearchStart=true;for(var sKey in this.mItems){var iFirstCell=this.sIconVisibility!="NONE"?1:0;  sValue1=this.sGetValueFromCell(this.mItems[sKey].cells[iFirstCell]);sValue1=sValue1.substr(0,sSearchString.length);sValue1=sValue1.toUpperCase(); if(this.mItems[sKey].cells[iFirstCell+1]){sValue2=this.sGetValueFromCell(this.mItems[sKey].cells[iFirstCell+1]);sValue2=sValue2.substr(0,sSearchString.length);sValue2=sValue2.toUpperCase();}if(bSearchStart){if(sSearchString==sValue1||sSearchString==sValue2){return sKey;}}else if(sStartKey==sKey){bSearchStart=true;}if(!sFirstKey&&(sSearchString==sValue1||sSearchString==sValue2)){sFirstKey=sKey;}}if(sFirstKey){return sFirstKey;}}; UCF_ItemListBox.prototype.bIsClientFiltered=function(){return this.bClientFiltered;}; UCF_ItemListBox.prototype.bIsAvailable=function(){return this.bAvailable;}; UCF_ItemListBox.prototype.filterList=function(sFilter){ var iVisibleItems=0;  if(!this.iMaxVisibleItems)this.iMaxVisibleItems=this.iVisibleItems; sFilter=sFilter.toUpperCase(); this.bFiltered=true;this.sClientFilter=sFilter;this.clearSelection();if(sFilter==this.sServerFilter&&this.aItems.length>300){this.bAvailable=false;}else if(this.sClientFilter.length<this.sServerFilter.length||this.sClientFilter.indexOf(this.sServerFilter)<0||this.aItems.length>300){    this.bAvailable=false;this.fireEvent(this.E_EVENTS.Filter);return;}this.bAvailable=true;sKey="";for(var i=0;i<this.aItems.length;i++){var oItem=this.aItems[i],iValueColumn1=0; if(this.sIconVisibility!="NONE")iValueColumn1++; var sValue1=this.sGetValueFromCell(oItem.cells[iValueColumn1]),sValue2="";if(oItem.cells[iValueColumn1+1]){sValue2=this.sGetValueFromCell(oItem.cells[iValueColumn1+1]);} sValue1=sValue1.toUpperCase();sValue2=sValue2.toUpperCase();var iIndexValue1=sValue1.indexOf(sFilter),iIndexValue2=sValue2.indexOf(sFilter);if(iIndexValue1!=0&&iIndexValue2!=0&&sFilter!=""){ oItem.style.display="none";this.bFiltered=true;}else{ if(sKey==""&&this.bIsVisibleValue(oItem.getAttribute("k"),sFilter)){sKey=oItem.getAttribute("k");}if(iVisibleItems==0){this.sFirstVisibleItemKey=oItem.getAttribute("k");} iVisibleItems++;this.sLastVisibleItemKey=oItem.getAttribute("k");oItem.style.display="";}}var bFound=iVisibleItems>0;if(bFound==0)this.oDomRef.style.visibility="hidden";else this.oDomRef.style.visibility="visible";if(iVisibleItems>this.iMaxVisibleItems){ this.iVisibleItems=this.iMaxVisibleItems;}else if(iVisibleItems==0){this.iVisibleItems=1;}else{this.iVisibleItems=iVisibleItems;}UCF_JsUtil.delayedCall(0,this,"applyHeight");  if(bFound&&sKey){this.bSetItemSelected(sKey,true,true);this.focusItem(sKey);}this.fireEvent(this.E_EVENTS.Filter);}; UCF_ItemListBox.prototype.bSetItemSelected=function(sKey,bSelect,bClear){var bSelectionChanged=false;for(var sItemKey in this.mItems){if(sItemKey==sKey){if(bSelect&&this.mItems[sKey].className!="urIlb2ISel"){this.mItems[sKey].className="urIlb2ISel";bSelectionChanged=true;}else if(!bSelect&&this.mItems[sKey].className=="urIlb2ISel"){this.mItems[sKey].className="";bSelectionChanged=true;}}else if(bClear&&this.mItems[sItemKey].className=="urIlb2ISel"){this.mItems[sItemKey].className="";bSelectionChanged=true;}}if(this.bIsPopup)this.scrollIntoView(sKey);return bSelectionChanged;}; UCF_ItemListBox.prototype.bIsKeySelected=function(sKey){}; UCF_ItemListBox.prototype.scrollIntoView=function(sKey){ if(this.oDomRef.style.overflowY!="scroll")return;if(sKey==""||!sKey)return; var oSelectedRef=this.mItems[sKey];if(!oSelectedRef)return;var iScrollTop=this.oDomRef.scrollTop;var iHeight=this.oDomRef.offsetHeight;var iPosTop=oSelectedRef.offsetTop;var oFirstVisibleItem=this.mItems[this.sFirstVisibleItemKey];var iItemHeight=parseInt(oFirstVisibleItem.offsetHeight); if(iPosTop<iScrollTop){this.oDomRef.scrollTop=iPosTop;} if(iPosTop+iItemHeight>iScrollTop+iHeight){this.oDomRef.scrollTop=iPosTop-iHeight+iItemHeight+2;}}; UCF_ItemListBox.prototype.bSetItemRangeSelected=function(sKey1,sKey2){var bSelectionChanged=false;var bSelect=false;for(var sItemKey in this.mItems){if(sItemKey==sKey1||sItemKey==sKey2){bSelect=!bSelect;}if(bSelect||sItemKey==sKey1||sItemKey==sKey2){if(this.mItems[sItemKey].className!="urIlb2ISel"){this.mItems[sItemKey].className="urIlb2ISel";bSelectionChanged=true;}}else if(this.mItems[sItemKey].className=="urIlb2ISel"){this.mItems[sItemKey].className="";bSelectionChanged=true;}}return bSelectionChanged;}; UCF_ItemListBox.prototype.sGetFirstItemKey=function(){return this.sFirstVisibleItemKey;}; UCF_ItemListBox.prototype.sGetLastItemKey=function(){return this.sLastVisibleItemKey;}; UCF_ItemListBox.prototype.clearSelection=function(){for(var sKey in this.mItems){if(this.mItems[sKey].className=="urIlb2ISel"){this.mItems[sKey].className="";}}}; UCF_ItemListBox.prototype.selectFirstItem=function(){var sKey=this.sGetFirstItemKey();var bSelectionChanged=this.bSetItemSelected(sKey,true,true);if(!this.bIsPopup){this.focusItem(sKey);if(bSelectionChanged){this.fireSelectEvent();}}}; UCF_ItemListBox.prototype.selectLastItem=function(){var sKey=this.sGetLastItemKey();var bSelectionChanged=this.bSetItemSelected(sKey,true,true);if(!this.bIsPopup){this.focusItem(sKey);if(bSelectionChanged){this.fireSelectEvent();}}return sKey;}; UCF_ItemListBox.prototype.bGetItemSelected=function(sKey){var oItem=this.mItems[sKey];if(oItem&&oItem.className=="urIlb2ISel")return true;else return false;}; UCF_ItemListBox.prototype.fireSelectEvent=function(bDelayed){var aSelectedKeys=new Array();var i=0;for(var sKey in this.mItems){if(this.mItems[sKey].className=="urIlb2ISel"){aSelectedKeys[i]=sKey;i++;}} if(this.oSelectTimer)clearTimeout(this.oSelectTimer); if(bDelayed){var thisObj=this;this.oSelectTimer=setTimeout(function(){thisObj.fireSelect(thisObj.sId,aSelectedKeys)},500);} else{this.fireSelect(this.sId,aSelectedKeys);}}; UCF_ItemListBox.prototype.applyHeight=function(){ if((isNaN(parseInt(this.sHeight))&&this.iVisibleItems<=0)||this.sHeight=="100%"||parseInt(this.sHeight)==0){return;}var iNewHeight=0;var iBorderHeight=2; var oFirstVisibleItem=this.mItems[this.sFirstVisibleItemKey];var iItemHeight=oFirstVisibleItem.offsetHeight;var iHeight=this.aItems.length*iItemHeight+iBorderHeight; if(this.iVisibleItems>0){if(this.bIsPopup){if(this.iVisibleItems<this.aItems.length){iNewHeight=this.iVisibleItems*iItemHeight+iBorderHeight;}}else{iNewHeight=this.iVisibleItems*iItemHeight+iBorderHeight;}}else if(!isNaN(parseInt(this.sHeight))){iNewHeight=parseInt(parseInt(this.sHeight)/iItemHeight)*iItemHeight+iBorderHeight;} if(this.bIsPopup){var iWindowHeight=parseInt(document.body.clientHeight);if(iNewHeight>iWindowHeight){iNewHeight=parseInt(parseInt(iWindowHeight)/iItemHeight-1)*iItemHeight+iBorderHeight;}else if(iNewHeight==0&&iHeight>iWindowHeight){iNewHeight=parseInt(parseInt(iWindowHeight)/iItemHeight-1)*iItemHeight+iBorderHeight;}} if(iNewHeight>0){if(this.oDomRef.style.height!=iNewHeight){this.oDomRef.style.height=iNewHeight;this.oDomRef.style.overflowY="scroll";this.iCurrentHeight=iNewHeight;}}else{if(this.oDomRef.style.height!=iHeight&&iItemHeight>0){this.oDomRef.style.height=iHeight;this.oDomRef.style.overflowY="hidden";this.iCurrentHeight=iHeight;}}}; UCF_ItemListBox.prototype.applyWidth=function(){var oTableRef=this.oDomRef.firstChild;var iScrollbarWidth=this.oDomRef.offsetWidth-this.oDomRef.clientWidth;if(this.bIsPopup){ if(oTableRef.offsetWidth>this.oDomRef.clientWidth){this.oDomRef.style.width=oTableRef.offsetWidth+iScrollbarWidth;}this.oDomRef.style.overflowX="hidden";}else{  if(!this.sWidth||parseInt(this.sWidth)<=0){this.oDomRef.style.width=oTableRef.offsetWidth+iScrollbarWidth;}if(oTableRef.offsetWidth<=this.oDomRef.clientWidth){this.oDomRef.style.overflowX="hidden";}}oTableRef.style.width="100%";}; UCF_ItemListBox.prototype.setWidth=function(sWidth){if(sWidth!=this.sWidth){this.sWidth=sWidth;this.applyWidth()}}; UCF_ItemListBox.prototype.setReadonly=function(bSet){if((bSet&&this.bReadonly)||(!bSet&&!this.bReadonly)){return;}if(bSet){this.oDomRef.className+="Ro";this.bReadonly=true;}else{this.oDomRef.className=this.oDomRef.className.replace("Ro","");this.bReadonly=false;}}; UCF_ItemListBox.prototype.focusItem=function(sKey){var oItem=this.mItems[sKey];var oCell=null; if(this.bIsPopup)return; if(!oItem)return; if(this.sPrevKey!=""){var oPrevItem=this.mItems[this.sPrevKey];if(oPrevItem){oCell=this.oGetItemValueColumn(oPrevItem);UCF_DomUtil.setTabIndex(oCell,-1);UCF_DomUtil.setAccessKey(oCell,"");}} oCell=this.oGetItemValueColumn(oItem);UCF_DomUtil.setTabIndex(oCell,0);UCF_DomUtil.setAccessKey(oCell,this.sAccessKey); oCell.focus(); UCF_DomUtil.setTabIndex(this.oDomRef,-1);UCF_DomUtil.setAccessKey(this.oDomRef,"");  this.sPrevKey=sKey;this.bTabIndexInitialized=true;}; UCF_ItemListBox.prototype.iGetSelected=function(){var i=0;var aSelectedKeys=new Array();for(var sKey in this.mItems){if(this.mItems[sKey].className=="urIlb2ISel"){aSelectedKeys[i]=sKey;i++;}}return i;}; UCF_ItemListBox.prototype.iGetItemCount=function(){var i=0;for(var sKey in this.mItems){if(sKey!="null"){i++;}}return i;}; UCF_ItemListBox.prototype.onlsaccessibility=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl(); if(oSourceControl!=this&&!UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_ItemListBoxItem"))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;var oSource=oBrowserEvent.oGetSource(); var bNavigation=false;var oFrom=oBrowserEvent.oGetFromElement();if(oFrom&&this.oDomRef.contains(oFrom)&&oFrom.tagName!="DIV"){bNavigation=true;} if(oSource.tagName!="TD")return; if(!bNavigation){if(this.bMultipleSelection)oAccessibilityHelper.setControlType("ILBM");else oAccessibilityHelper.setControlType("ILBS");} if(!bNavigation){var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!="")oAccessibilityHelper.setLabel(sLabel);} oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setSelected(this.bGetItemSelected(this.sGetActiveItem(oBrowserEvent)));oAccessibilityHelper.setNotSelected(!this.bGetItemSelected(this.sGetActiveItem(oBrowserEvent))); oAccessibilityHelper.setTooltip(this.sTooltip); oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(oSource)); oAccessibilityHelper.setItemCount(this.aItems.length); oAccessibilityHelper.setItemIndex(this.mItems[this.sGetActiveItem(oBrowserEvent)].rowIndex+1); if(!bNavigation){if(this.bReadonly||!this.bEnabled)oAccessibilityHelper.addTutor("UDNAV_TUT",this.bEnabled);else if(this.bMultipleSelection)oAccessibilityHelper.addEnabledTutor("ILBM_TUT",this.bEnabled);else oAccessibilityHelper.addEnabledTutor("ILBS_TUT",this.bEnabled);}}; UCF_ItemListBox.prototype.createDragDelegate=function(){if(!this.sDragSourceInfo)return;if(this.oDragDelegate)return;this.oDragDelegate=new(UCF_ClassLoader.oGetClass("UCF_ItemListBoxDragDelegate"))(this.oLS,this);this.addDelegate(this.oDragDelegate);}; UCF_ItemListBox.prototype.createDropDelegate=function(){if(!this.sDropTargetInfo)return;if(this.oDropDelegate)return;this.oDropDelegate=new(UCF_ClassLoader.oGetClass("UCF_ItemListBoxDropDelegate"))(this.oLS,this);this.addDelegate(this.oDropDelegate);}; UCF_ItemListBox.prototype.aAttributeNames=["sWidth","iVisibleItems","sHeight","bEnabled","bReadonly","bMultipleSelection","bIsPopup","sIconVisibility","sFirstValueVisibility","sSecondValueVisibility","sDragSourceInfo","sDropTargetInfo","iScrollTop","sAccessKey","bAvailable","sServerFilter","bComplete","bFiltered"]; UCF_ItemListBox.prototype.aMethodNames=[];  UCF_ItemListBox.prototype.sWidth='0'; UCF_ItemListBox.prototype.iVisibleItems=10; UCF_ItemListBox.prototype.sHeight='0'; UCF_ItemListBox.prototype.bEnabled=true; UCF_ItemListBox.prototype.bReadonly=false; UCF_ItemListBox.prototype.bMultipleSelection=false; UCF_ItemListBox.prototype.bIsPopup=false; UCF_ItemListBox.prototype.sIconVisibility="NONE"; UCF_ItemListBox.prototype.sFirstValueVisibility="VISIBLE"; UCF_ItemListBox.prototype.sSecondValueVisibility="NONE"; UCF_ItemListBox.prototype.sDragSourceInfo=''; UCF_ItemListBox.prototype.sDropTargetInfo=''; UCF_ItemListBox.prototype.iScrollTop=0; UCF_ItemListBox.prototype.sAccessKey=''; UCF_ItemListBox.prototype.bAvailable=true; UCF_ItemListBox.prototype.sServerFilter=''; UCF_ItemListBox.prototype.bComplete=true; UCF_ItemListBox.prototype.bFiltered=true; UCF_ItemListBox.prototype.setDefaultValues=function(){this.sWidth='0';this.iVisibleItems=10;this.sHeight='0';this.bEnabled=true;this.bReadonly=false;this.bMultipleSelection=false;this.bIsPopup=false;this.sIconVisibility="NONE";this.sFirstValueVisibility="VISIBLE";this.sSecondValueVisibility="NONE";this.sDragSourceInfo='';this.sDropTargetInfo='';this.iScrollTop=0;this.sAccessKey='';this.bAvailable=true;this.sServerFilter='';this.bComplete=true;this.bFiltered=true;}; UCF_ItemListBox.prototype.fireSelect=function(sId,aKeys){var mParams={Id:sId,Keys:aKeys};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("ItemListBox","Select",mParams);}; UCF_ItemListBox.prototype.fireDrag=function(sId,sDragSourceInfo){var mParams={Id:sId,DragSourceInfo:sDragSourceInfo};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drag)this.oLS.markDirty();this.fireSemanticEvent("ItemListBox","Drag",mParams);}; UCF_ItemListBox.prototype.fireDrop=function(sId,sDragSource,sDropTargetInfo,sKey,iOffset,sData,sMimeType,sDragSourceTags){var mParams={Id:sId,DragSource:sDragSource,DropTargetInfo:sDropTargetInfo,Key:sKey,Offset:iOffset,Data:sData,MimeType:sMimeType,DragSourceTags:sDragSourceTags};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Drop)this.oLS.markDirty();this.fireSemanticEvent("ItemListBox","Drop",mParams);}; UCF_ItemListBox.prototype.fireScroll=function(sId,iScrollTop){var mParams={Id:sId,ScrollTop:iScrollTop};this.fireSemanticEvent("ItemListBox","Scroll",mParams);};UCF_ItemListBox.prototype.aPublicMethods=["bIsClientFiltered","bIsAvailable"];
 function UCF_PatternContainerSequence(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PatternContainerSequence.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PatternContainerSequence.prototype.initialize=function(){this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.createItems();this.bScrollingNeeded=this.aItems.length>this.iMaxVisibleItems;this.iPageSize=Math.floor(this.aItems.length / this.iMaxVisibleItems);this.iFirstVisibleItemIndex=Math.floor(this.iSelectedIndex / this.iMaxVisibleItems)*this.iMaxVisibleItems;this.updateScrollButtons();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);UCF_DomUtil.setTabIndex(this.oDomRef,-1);if(this.aItems.length>0){this.oItemNavigation.oItemContainer=this.oDomRef.firstChild.firstChild;}}; UCF_PatternContainerSequence.prototype.updateScrollButtons=function(){if(!this.bScrollable)return;var oPagingRef=UCF_DomUtil.$(this.sId+"-pag");if(this.bScrollingNeeded){oPagingRef.style.visibility="visible";}else{oPagingRef.style.visibility="hidden";return;}var aButtons=oPagingRef.childNodes;if(this.iFirstVisibleItemIndex>0){aButtons[0].className="urBtnStd urPGBtn urPGHBegin";aButtons[1].className="urBtnStd urPGBtn urPGHPrevPage";}else{aButtons[0].className="urBtnStdDsbl urPGBtn urPGHBeginDsbl";aButtons[1].className="urBtnStdDsbl urPGBtn urPGHPrevPageDsbl";}if(this.iFirstVisibleItemIndex+this.iMaxVisibleItems<this.aItems.length){aButtons[2].className="urBtnStd urPGBtn urPGHNxtPage";aButtons[3].className="urBtnStd urPGBtn urPGHEnd";}else{aButtons[2].className="urBtnStdDsbl urPGBtn urPGHNxtPageDsbl";aButtons[3].className="urBtnStdDsbl urPGBtn urPGHEndDsbl";}this.oItemNavigation.aItems=[];this.createItems();this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);}; UCF_PatternContainerSequence.prototype.createItems=function(){this.aItems=[];var aItems=this.aItems,iItemsLength=this.oDomRef.getAttribute("ic"),aItemIds=this.oDomRef.getAttribute("itemids").split(",");for(var iItemCount=0;iItemCount<iItemsLength;iItemCount++){var oDomItem=UCF_DomUtil.$(aItemIds[iItemCount]),oItem=this.oLS.oControlFactory.oGetControlByDomRef(oDomItem,true);if(!oItem)continue;oItem.iIndex=iItemCount;oItem.bSelected=oItem.iIndex==this.iSelectedIndex;aItems.push(oItem);if(oItem.bGetVisible()&&oItem.bEnabled){this.oItemNavigation.addItem(oItem,oItem.bSelected);}}}; UCF_PatternContainerSequence.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId==this.sId+"-menu"){this.toggleMenu();return;}else if(sSourceId.indexOf(this.sId+"-tit")>-1){this.fireTitleSelect(this.sId);return;}else if(sSourceId==this.sId+"-itemmenu"){this.toggleItemMenu(oSource);return;}else if(sSourceId==this.sId+"-begin-btn-0"){this.firstPage();return;}else if(sSourceId==this.sId+"-end-btn-3"){this.lastPage();return;}else if(sSourceId==this.sId+"-prev-btn-1"){this.previousPage();return;}else if(sSourceId==this.sId+"-next-btn-2"){this.nextPage();return;}}; UCF_PatternContainerSequence.prototype.onItemSelect=function(oEvent){var oItem=oEvent.oGetParam("oItem");if(oItem.bEnabled&&oItem.iIndex!=this.iSelectedIndex){this.fireItemSelect(this.sId,oItem.sId);}}; UCF_PatternContainerSequence.prototype.toggleMenu=function(){if(!this.sOptionMenuId)return;var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); if(!oMenuButtonRef)return;if(!this.oOptionMenu){this.fireMenuAccess(this.sId);this.oOptionMenu=this.oLS.oControlFactory.oGetControlById(this.sOptionMenuId,true);if(!this.oOptionMenu)return;this.oOptionMenu.setOpenerRef(oMenuButtonRef);this.oOptionMenu.setOpenerId(this.sId);this.oOptionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oOptionMenu.setOffsetTop(-1);this.oOptionMenu.setOffsetLeft(-1);this.oOptionMenu.attachEvent(this.oOptionMenu.E_EVENTS.Close,this,"onMenuClose")}if(this.bOptionMenuIsOpened){this.oOptionMenu.close();}else{this.oOptionMenu.open();}};UCF_PatternContainerSequence.prototype.toggleItemMenu=function(oSource){if(!this.oItemMenu){ var sMenuId=oSource.getAttribute("menuid");if(!sMenuId)return;this.oItemMenu=this.oLS.oControlFactory.oGetControlById(sMenuId);this.oItemMenu.setOpenerRef(oSource);this.oItemMenu.setOpenerId(this.sId);this.oItemMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oItemMenu.attachEvent(this.oItemMenu.E_EVENTS.Select,this,"onMenuItemSelect");this.oItemMenu.bFirstVisibleItemIndex=0;}if(this.oItemMenu.bOpened){this.oItemMenu.close();}else{var oMenuItems=this.oItemMenu.aItems;for(var i=0;i<oMenuItems.length;i++){if(oMenuItems[i].bChecked&&i!=this.iSelectedIndex)oMenuItems[i].setChecked(false);}this.oItemMenu.aItems[this.iSelectedIndex].setChecked(true);this.oItemMenu.open();this.bMenuOpened=true;}}; UCF_PatternContainerSequence.prototype.onMenuItemSelect=function(oEvent){var sItemId=oEvent.oGetParam("sItemId");if(sItemId){ var aMenuItems=this.oItemMenu.aItems;for(var i=0;i<aMenuItems.length;i++){var oItem=aMenuItems[i];if(oItem.sId==sItemId&&i!=this.iSelectedIndex){this.fireItemSelect(this.sId,this.aItems[i].sId);return;}}}}; UCF_PatternContainerSequence.prototype.onMenuClose=function(oEvent){this.bOptionMenuIsOpened=false;var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); oMenuButtonRef.focus();}; UCF_PatternContainerSequence.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_PatternContainerSequence.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_PatternContainerSequence.prototype.nextPage=function(){this.iFirstVisibleItemIndex=this.iFirstVisibleItemIndex+this.iMaxVisibleItems;if(this.iFirstVisibleItemIndex>this.aItems.length-this.iMaxVisibleItems){this.iFirstVisibleItemIndex=this.aItems.length-this.iMaxVisibleItems;}this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerSequence.prototype.previousPage=function(){this.iFirstVisibleItemIndex=this.iFirstVisibleItemIndex-this.iMaxVisibleItems;if(this.iFirstVisibleItemIndex<0){this.iFirstVisibleItemIndex=0;}this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerSequence.prototype.firstPage=function(){this.iFirstVisibleItemIndex=0;this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerSequence.prototype.lastPage=function(){this.iFirstVisibleItemIndex=this.aItems.length-this.iMaxVisibleItems;this.applyItemVisibility();this.updateScrollButtons();}; UCF_PatternContainerSequence.prototype.applyItemVisibility=function(){var oPreviousCell=UCF_DomUtil.$(this.sId+"-p"),oNextCell=UCF_DomUtil.$(this.sId+"-n"),oConnectorPrevious=UCF_DomUtil.$(this.sId+"-p-c"),oConnectorNext=UCF_DomUtil.$(this.sId+"-n-c");if(this.iFirstVisibleItemIndex>0){oPreviousCell.style.display="";if(oConnectorPrevious){oConnectorPrevious.style.display="";}if(this.aItems[this.iFirstVisibleItemIndex].bSelected){oPreviousCell.className="urPcSeqFirstAngOnPrevOn";}else{oPreviousCell.className="urPcSeqFirstAngOffPrevOn";}}else{oPreviousCell.style.display="none";if(oConnectorPrevious){oConnectorPrevious.style.display="none";}}if(this.iFirstVisibleItemIndex+this.iMaxVisibleItems<this.aItems.length){oNextCell.style.display="";if(oConnectorNext){oConnectorNext.style.display="";}if(this.aItems[this.iFirstVisibleItemIndex+this.iMaxVisibleItems-1].bSelected){oNextCell.className="urPcSeqLastOnNextOn";}else{oNextCell.className="urPcSeqLastOffNextOn";}}else{oNextCell.style.display="none";if(oConnectorNext){oConnectorNext.style.display="none";}}for(var iItemCount=0;iItemCount<this.aItems.length;iItemCount++){var bIsVisible=iItemCount>=this.iFirstVisibleItemIndex&&iItemCount<this.iFirstVisibleItemIndex+this.iMaxVisibleItems;this.aItems[iItemCount].bFirstVisibleItem=(this.iFirstVisibleItemIndex==iItemCount);if(iItemCount>0)this.aItems[iItemCount].bPreviousSelected=this.aItems[iItemCount-1].bSelected;this.aItems[iItemCount].bLastVisibleItem=(this.iFirstVisibleItemIndex+this.iMaxVisibleItems-1==iItemCount);this.aItems[iItemCount].bLastItem=(iItemCount==this.aItems.length-1);this.aItems[iItemCount].setVisible(bIsVisible);}}; UCF_PatternContainerSequence.prototype.aAttributeNames=["bTitleSelected","bHasOptionMenu","sOptionMenuId","bCollapsed","iMaxVisibleItems","iSelectedIndex","bScrollable"]; UCF_PatternContainerSequence.prototype.aMethodNames=[];  UCF_PatternContainerSequence.prototype.bTitleSelected=false; UCF_PatternContainerSequence.prototype.bHasOptionMenu=false; UCF_PatternContainerSequence.prototype.sOptionMenuId=''; UCF_PatternContainerSequence.prototype.bCollapsed=false; UCF_PatternContainerSequence.prototype.iMaxVisibleItems=0; UCF_PatternContainerSequence.prototype.iSelectedIndex=0; UCF_PatternContainerSequence.prototype.bScrollable=false; UCF_PatternContainerSequence.prototype.setDefaultValues=function(){this.bTitleSelected=false;this.bHasOptionMenu=false;this.sOptionMenuId='';this.bCollapsed=false;this.iMaxVisibleItems=0;this.iSelectedIndex=0;this.bScrollable=false;}; UCF_PatternContainerSequence.prototype.fireMenuAccess=function(sId){var mParams={Id:sId};this.fireSemanticEvent("PatternContainerSequence","MenuAccess",mParams);}; UCF_PatternContainerSequence.prototype.fireItemSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.ItemSelect)this.oLS.markDirty();this.fireSemanticEvent("PatternContainerSequence","ItemSelect",mParams);}; UCF_PatternContainerSequence.prototype.fireTitleSelect=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.TitleSelect)this.oLS.markDirty();this.fireSemanticEvent("PatternContainerSequence","TitleSelect",mParams);}; UCF_PatternContainerSequence.prototype.fireScroll=function(sId,sFirstVisibleItemId){var mParams={Id:sId,FirstVisibleItemId:sFirstVisibleItemId};this.fireSemanticEvent("PatternContainerSequence","Scroll",mParams);};
 function UCF_TreeNode(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oTree=this.oGetTree();this.oExpanderRef=UCF_DomUtil.$(this.sId+"-exp");this.oContentRef=UCF_DomUtil.$(this.sId+"-cnt-start");this.oChildrenRef=UCF_DomUtil.$(this.sId+"-child");this.oFocusDomRef=this.oContentRef;this.oAnimation=null;};UCF_TreeNode.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TreeNode.prototype.onmousedown=function(oBrowserEvent){ if(oBrowserEvent.eGetMouseButtonState()!=oBrowserEvent.MOUSE_BUTTON_STATE.Left){return;}oBrowserEvent.cancelBubble();this.oTree.focusNode(this);if(!this.bEnabled)return;if(this.oPopupMenu&&this.oPopupMenu.bOpened){this.oPopupMenu.close();}var oSourceRef=oBrowserEvent.oGetSource();if(this.bHasChildren&&oSourceRef==this.oExpanderRef){this.toggle();return;}if(oBrowserEvent.bCtrl()){this.toggleSelection();}else{if(this.sSelection=="NONE")this.select();}}; UCF_TreeNode.prototype.onclick=function(oBrowserEvent){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();if(!this.bEnabled)return;var oSourceRef=oBrowserEvent.oGetSource();if(this.bHasChildren&&oSourceRef==this.oExpanderRef)return;if(this.sSelection!="NONE")this.select();}; UCF_TreeNode.prototype.oncontextmenu=function(oBrowserEvent){ var oSource=oBrowserEvent.oGetSourceControl();if(oSource==this)this.oTree.focusNode(this);if(!this.bEnabled)return;if(!this.bHasPopupMenu)return;if(!UCF_DomUtil.bContains(this.oDomRef,oBrowserEvent.oGetSource()))return;var iPosX=oBrowserEvent.iClientX()||0,iPosY=oBrowserEvent.iClientY()||0,oRect=UCF_DomUtil.oGetObjectRect(oBrowserEvent.oGetSource());  if(iPosX<oRect.left||iPosX>oRect.left+oRect.width||iPosY<oRect.top||iPosY>oRect.top+oRect.height){iPosX=oRect.left;iPosY=oRect.top+oRect.height;}this.openPopupMenuAtPosition(iPosX,iPosY);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}; UCF_TreeNode.prototype.onlsexpand=function(oBrowserEvent){oBrowserEvent.cancelBubble();this.expand();}; UCF_TreeNode.prototype.onlscollapse=function(oBrowserEvent){oBrowserEvent.cancelBubble();this.collapse();}; UCF_TreeNode.prototype.onlsright=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(UCF_System.bIsRTL)this.collapse();else this.expand();}; UCF_TreeNode.prototype.onlsleft=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(UCF_System.bIsRTL)this.expand();else this.collapse();}; UCF_TreeNode.prototype.onlsselect=function(oBrowserEvent){oBrowserEvent.cancelBubble();oBrowserEvent.cancel();this.toggleSelection();}; UCF_TreeNode.prototype.onlsshow=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(!this.bEnabled)return;if(!this.bHasPopupMenu)return;this.openPopupMenu(this.sPopupMenuId);oBrowserEvent.cancel();}; UCF_TreeNode.prototype.onMenuClose=function(oEvent){this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);this.focus();}; UCF_TreeNode.prototype.toggle=function(){if(!this.bEnabled)return;if(!this.bHasChildren)return;if(this.bIsOpen){this.collapse();}else{this.expand();}}; UCF_TreeNode.prototype.expand=function(){if(!this.bEnabled)return;if(!this.bHasChildren)return;if(!this.bIsOpen){this.expandNode();this.refocus();this.oTree.fireNodeExpand(this.oTree.sId,this.sId);}}; UCF_TreeNode.prototype.expandRecursive=function(){if(!this.bHasChildren)return;if(!this.bIsOpen){this.expandNode();var aChildNodes=this.aGetChildNodes();for(var i=0;i<aChildNodes.length;i++){aChildNodes[i].expandRecursive();}}}; UCF_TreeNode.prototype.expandNode=function(){UCF_DomUtil.replaceClass(this.oExpanderRef,"urTreExpClo","urTreExpOp");this.oChildrenRef.style.display="";this.bIsOpen=true;}; UCF_TreeNode.prototype.collapse=function(){if(!this.bEnabled)return;if(!this.bHasChildren)return;if(this.bIsOpen){this.collapseNode();this.refocus();this.oTree.fireNodeCollapse(this.oTree.sId,this.sId);}}; UCF_TreeNode.prototype.collapseRecursive=function(){if(!this.bHasChildren)return;if(this.bIsOpen){this.collapseNode();var aChildNodes=this.aGetChildNodes();for(var i=0;i<aChildNodes.length;i++){aChildNodes[i].collapseRecursive();}}}; UCF_TreeNode.prototype.collapseNode=function(){UCF_DomUtil.replaceClass(this.oExpanderRef,"urTreExpOp","urTreExpClo");this.oChildrenRef.style.display="none";this.bIsOpen=false;}; UCF_TreeNode.prototype.toggleSelection=function(){if(!this.bIsClickable)return;if(this.sSelection=="NONE"){this.select();}else{this.deselect();}}; UCF_TreeNode.prototype.select=function(){if(!this.bIsClickable)return;this.oTree.fireNodeSelect(this.oTree.sId,this.sId);}; UCF_TreeNode.prototype.deselect=function(){if(!this.bIsClickable)return;this.oTree.fireNodeDeselect(this.oTree.sId,this.sId);}; UCF_TreeNode.prototype.aGetChildNodes=function(){var aChildRefs=this.oChildrenRef.childNodes,aChildRef,aChildNodes=[];for(var i=0;i<aChildRefs.length;i++){aChildRef=aChildRefs[i];if(aChildRef.getAttribute("ct")){aChildNodes.push(this.oGetControlByDomRef(aChildRef,true));}}return aChildNodes;}; UCF_TreeNode.prototype.oGetNextNode=function(){var oNode=null;oNode=this.oGetFirstChild();if(!oNode)oNode=this.oGetNextSibling();if(!oNode)oNode=this.oGetParent().oGetNextSibling();return oNode;}; UCF_TreeNode.prototype.oGetNextSibling=function(){var oNodeRef,oNode=null;if(this.bHasChildren){oNodeRef=this.oChildrenRef.nextSibling;}else{oNodeRef=this.oRootRef.nextSibling;}if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);if(!oNode)oNode=this.oGetParent().oGetNextSibling();return oNode;}; UCF_TreeNode.prototype.oGetFirstChild=function(){var oNodeRef,oNode=null;if(this.bHasChildren&&this.bIsOpen){oNodeRef=this.oChildrenRef.firstChild;if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);}return oNode;}; UCF_TreeNode.prototype.oGetPreviousNode=function(){var oNode=null,oLastChild;oNode=this.oGetPreviousSibling();if(oNode){oLastChild=oNode.oGetLastChild();while(oLastChild){oNode=oLastChild;oLastChild=oNode.oGetLastChild();}}if(!oNode)oNode=this.oGetParent();if(oNode==this.oTree)oNode=null;return oNode;}; UCF_TreeNode.prototype.oGetPreviousSibling=function(){var oNodeRef,oNode=null;oNodeRef=this.oRootRef.previousSibling;if(oNodeRef&&oNodeRef.id.indexOf("-child")>0)oNodeRef=oNodeRef.previousSibling;if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);return oNode;}; UCF_TreeNode.prototype.oGetLastChild=function(){var oNodeRef,oNode=null;if(this.bHasChildren&&this.bIsOpen){oNodeRef=this.oChildrenRef.lastChild;if(oNodeRef&&oNodeRef.id.indexOf("-child")>0)oNodeRef=oNodeRef.previousSibling;if(oNodeRef)oNode=this.oLS.oControlFactory.oGetControlByDomRef(oNodeRef,true);}return oNode;}; UCF_TreeNode.prototype.openPopupMenuAtPosition=function(iLeft,iTop){if(this.sPopupMenuId==""){if(this.oPopupMenu&&this.oPopupMenu.bOpened)this.oPopupMenu.close();  this.oTree.fireNodeContextMenu(this.sId,this.sId,iLeft,iTop);return;}if(!this.oPopupMenu){this.oPopupMenu=this.oLS.oControlFactory.oGetControlById(this.sPopupMenuId,true);if(this.oPopupMenu.bOpened){this.oPopupMenu.close();}}this.oPopupMenu.setLeft(iLeft);this.oPopupMenu.setTop(iTop);if(this.oPopupMenu.bOpened){this.oPopupMenu.setPosition();return;}this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.POSITION);this.oPopupMenu.setOffsetLeft(0);this.oPopupMenu.setOffsetTop(0);this.oPopupMenu.setOpenerRef(this.oDomRef);this.oPopupMenu.setOpenerId(this.sId);this.oPopupMenu.setUserData(this.sUserData);this.oPopupMenu.open();this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.Close,this,"onMenuClose");}; UCF_TreeNode.prototype.openPopupMenu=function(sPopupMenuId){this.oPopupMenu=this.oLS.oControlFactory.oGetControlById(sPopupMenuId,true);if(this.oPopupMenu.bOpened){this.oPopupMenu.close();}this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.oPopupMenu.setOffsetLeft(50);this.oPopupMenu.setOffsetTop(-12);this.oPopupMenu.setOpenerRef(this.oDomRef.firstChild);this.oPopupMenu.setOpenerId(this.sId);this.oPopupMenu.setUserData(this.sUserData);this.oPopupMenu.open();this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.Close,this,"onMenuClose");}; UCF_TreeNode.prototype.oGetTree=function(){var oParent=this.oGetParent();while(!(oParent instanceof UCF_Tree)){oParent=oParent.oGetParent();}return oParent;};UCF_TreeNode.prototype.oGetParent=function(){var oParentRef=this.oRootRef.parentNode.previousSibling;while(oParentRef!=document.body){if(oParentRef.getAttribute("ct")){return this.oLS.oControlFactory.oGetControlByDomRef(oParentRef,true);}oParentRef=oParentRef.parentNode;}return null;}; UCF_TreeNode.prototype.getAccControlName=function(){var oAccessibilityHelper=new(UCF_ClassLoader.oGetClass("UCF_AccessibilityHelper"))(this.oLS);oAccessibilityHelper.setControlType("TR");return oAccessibilityHelper.sGetControlTypeShortText();}; UCF_TreeNode.prototype.onlsaccessibility=function(oBrowserEvent){var oSourceRef=oBrowserEvent.oGetSource();if(!UCF_DomUtil.bContains(this.oRootRef,oSourceRef))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource(),iItemIndex=this.oDomRef.getAttribute("idx");iItemCount=this.oDomRef.getAttribute("ic");iContainingItemCount=this.oDomRef.getAttribute("ici");oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));oAccessibilityHelper.setLevel(this.iLevel);oAccessibilityHelper.setItemIndex(iItemIndex);oAccessibilityHelper.setItemCount(iItemCount);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setContainingItemCount(iContainingItemCount); oAccessibilityHelper.setExpanded(this.bHasChildren&&this.bIsOpen);oAccessibilityHelper.setCollapsed(this.bHasChildren&&!this.bIsOpen); oAccessibilityHelper.setSelected(this.sSelection!="NONE");var sTutorKey=(this.sSelection=="NONE"?"SELECT_TUT":"DESELECT_TUT");oAccessibilityHelper.addEnabledTutor(sTutorKey,this.bEnabled&&this.bIsClickable);}; UCF_TreeNode.prototype.aAttributeNames=["iLevel","bHasChildren","bIsOpen","bIsClickable","bHasPopupMenu","sPopupMenuId","bEnabled","sSelection","sTooltip","sUserData","sDragSourceInfo","sDropTargetInfo"]; UCF_TreeNode.prototype.aMethodNames=["collapse","expand","openPopupMenu"];  UCF_TreeNode.prototype.iLevel=0; UCF_TreeNode.prototype.bHasChildren=false; UCF_TreeNode.prototype.bIsOpen=true; UCF_TreeNode.prototype.bIsClickable=true; UCF_TreeNode.prototype.bHasPopupMenu=false; UCF_TreeNode.prototype.sPopupMenuId=''; UCF_TreeNode.prototype.bEnabled=true; UCF_TreeNode.prototype.sSelection="NONE"; UCF_TreeNode.prototype.sTooltip=''; UCF_TreeNode.prototype.sUserData=''; UCF_TreeNode.prototype.sDragSourceInfo=''; UCF_TreeNode.prototype.sDropTargetInfo=''; UCF_TreeNode.prototype.setDefaultValues=function(){this.iLevel=0;this.bHasChildren=false;this.bIsOpen=true;this.bIsClickable=true;this.bHasPopupMenu=false;this.sPopupMenuId='';this.bEnabled=true;this.sSelection="NONE";this.sTooltip='';this.sUserData='';this.sDragSourceInfo='';this.sDropTargetInfo='';};
 function UCF_CalendarMonthView(oDomRef,oLS){UCF_Calendar.apply(this,[oDomRef,oLS]);this.bInitial=true;};UCF_CalendarMonthView.prototype=new(UCF_ClassLoader.oGetClass("UCF_Calendar"))(); UCF_CalendarMonthView.prototype.initialize=function(){var oTable=UCF_DomUtil.$(this.sId+"-tbl");if(this.oDomRef.offsetWidth<400){if(!this.bInitial)this.detachBrowserEvent("resize",this.oDomRef);oTable.style.width="400px";this.oDomRef.style.overflowX="visible";this.oDomRef.offsetWidth;if(!this.bInitial)this.attachBrowserEvent("resize",this.oDomRef);}else{oTable.style.width="100%";}if(this.bInitial){this.attachBrowserEvent("resize",this.oDomRef); this.createCellNavigationStructure();this.iInitialWidth=this.oDomRef.offsetWidth;} this.initializeMatrix();this.drawEntries();if(this.bInitial){ this.createTabNavigationStructure();this.bInitial=false;}}; UCF_CalendarMonthView.prototype.destroy=function(){this.detachBrowserEvent("resize",this.oDomRef);}; UCF_CalendarMonthView.prototype.select=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource(),oCellRef=UCF_DomUtil.oGetParentByAttribute(oEventDomRef,"cidx");if(oCellRef&&!oBrowserEvent.bGetCancelBubble()){var iRow=parseInt(oCellRef.getAttribute("ridx")),iCol=parseInt(oCellRef.getAttribute("cidx")),bFullDay=oCellRef.getAttribute("fr")!=null;if(isNaN(iRow)){this.fireHeaderSelect(this.sId,iCol);}else if(oEventDomRef.className=="MORE2"||(oEventDomRef.getAttribute("MORE")=="true"&&oBrowserEvent.bCtrl())){this.fireCellSelectMore(this.sId,iRow,iCol);}else if(oCellRef.getAttribute("SELECT")=="true"){this.fireCellSelect(this.sId,iRow,iCol);}}}; UCF_CalendarMonthView.prototype.focusElementFromNavigation=function(oDomRef){for(var i=0;i<this.aCellNavigation.length;i++){for(var j=0;j<this.aCellNavigation[i].length;j++){var oCell=this.aCellNavigation[i][j];if(oDomRef==oCell.oDomRef){this.focusCell(j,i);return;}if(oCell.aEntries){for(var n=0;n<oCell.aEntries.length;n++){if(oCell.aEntries[n]==oDomRef){this.oFocusedCell={x:j,y:i};this.oFocusedElement=oCell.aEntries[n];UCF_DomUtil.setTabIndex(this.oFocusedElement,0);this.oFocusedElement.focus();return;}}}}}this.focusCell(0,0);}; UCF_CalendarMonthView.prototype.onlsselectmodifier=function(oBrowserEvent){this.select(oBrowserEvent);}; UCF_CalendarMonthView.prototype.onlsselect=function(oBrowserEvent){this.select(oBrowserEvent);}; UCF_CalendarMonthView.prototype.onclick=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource();var oSourceControl=oBrowserEvent.oGetSourceControl();if(oSourceControl.sClassName=="UCF_CalendarEntry"){this.focusElementFromNavigation(oSourceControl.oDomRef);}else{var oTd=UCF_DomUtil.oGetParentByTagName(oEventDomRef,"TD");if(oTd&&UCF_DomUtil.bContains(this.oDomRef,oTd)){this.focusElementFromNavigation(oTd);}}this.select(oBrowserEvent);}; UCF_CalendarMonthView.prototype.onresize=function(oBrowserEvent){this.oDomRef.style.overflow="hidden";if(this.iInitialWidth==this.oDomRef.offsetWidth)return;if(this.sTimerId)UCF_JsUtil.clearDelayedCall(this.sTimerId);this.sTimerId=UCF_JsUtil.delayedCall(10,this,"initialize");oBrowserEvent.cancelBubble();}; UCF_CalendarMonthView.prototype.calculateEntryPositions=function(){ var aRows=this.aRows,aEntries=this.aEntries,aMonthRows=[],iLevelCount=0; for(var n=0;n<aRows.length;n++){aMonthRows.push([]);} for(var n=0;n<aEntries.length;n++){var iStartRow=Math.floor(aEntries[n].fStartRow);aMonthRows[iStartRow].push(aEntries[n]);} for(var i=0;i<aMonthRows.length;i++){var iEndCol=0,aParallelRows=[],aEndCols=[];aEndCols[0]=0;aParallelRows[0]=[];for(var n=0;n<aMonthRows[i].length;n++){var iLevelCount=0,oRowEntry=aMonthRows[i][n];while(aEndCols[iLevelCount]>oRowEntry.iStartColumn&&iLevelCount<aEndCols.length){iLevelCount++;if(!aParallelRows[iLevelCount]){aParallelRows[iLevelCount]=[];}}aEndCols[iLevelCount]=oRowEntry.fEndColumn;aParallelRows[iLevelCount].push(oRowEntry);oRowEntry.iLevel=iLevelCount;if(iEndCol<oRowEntry.iEndColumn){iEndCol=oRowEntry.iEndColumn;}for(var x=0;x<aParallelRows.length;x++){for(var y=0;y<aParallelRows[x].length;y++){aParallelRows[x][y].iLevel=x;}}}}var iEntryCnt=0;}; UCF_CalendarMonthView.prototype.drawEntries=function(){ var oEntriesDomRef=UCF_DomUtil.$(this.sId+"-entries");if(!oEntriesDomRef)return; this.aEntries=this.getEntries(oEntriesDomRef.childNodes);this.aEntries.sort(this.sortColEntries);this.calculateEntryPositions();var aEntries=this.aEntries,oStartCell=null,aRows=this.aRows;for(var n=0;n<aEntries.length;n++){var iRowIdx=Math.floor(aEntries[n].fStartRow),iCellIdx=Math.floor(aEntries[n].fStartColumn),iStartRow=Math.floor(aEntries[n].fStartRow);oStartCell=aRows[iStartRow].oDomRef.cells[iCellIdx+1];if(aEntries[n].iLevel>4)continue; if(aEntries[n].iLevel>2){ var iNewHeight=((aEntries[n].iLevel+1)*16)+20;if(iNewHeight>parseInt(UCF_DomUtil.sGetCurrentStyle(aRows[iRowIdx].oDomRef,"height"))){aRows[iRowIdx].oDomRef.style.height=iNewHeight;} if(UCF_System.sDevice.indexOf("ff")>-1){var aDays=aRows[iRowIdx].oDomRef.getElementsByTagName("SPAN"),aMores=aRows[iRowIdx].oDomRef.getElementsByTagName("IMG");for(var iDays=0;iDays<aDays.length;iDays++){var oDay=aDays[iDays];if(oDay){oDay.style.top=iNewHeight-16+"px";}}for(var iMores=0;iMores<aMores.length;iMores++){var oMore=aMores[iMores];if(oMore){oMore.style.top=iNewHeight-37+"px";}}}}this.drawEntry(this.aEntries[n]);}}; UCF_CalendarMonthView.prototype.initializeMatrix=function(){this.aColumns=this.aGetColumns();this.aRows=this.aGetRows();for(var iRow=0;iRow<this.aRows.length;iRow++){this.aRows[iRow].iDaysPerWeek=7;}}; UCF_CalendarMonthView.prototype.getEntries=function(aEntryDomRefs){if(!aEntryDomRefs&&aEntryDomRefs.length==0)return null;var aEntries=[],iEntryLength=aEntryDomRefs.length;for(var i=0;i<iEntryLength;i++){if(aEntryDomRefs[i].nodeType==1){ var oEntry=this.getEntry(aEntryDomRefs[i]); oEntry.iEndRow=oEntry.iStartRow;oEntry.fEndRow=oEntry.fStartRow;var fDuration=oEntry.fDuration,iCurrentRow=oEntry.iStartRow;if(iCurrentRow>=this.aRows.length)continue;if(oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerWeek)continue;if(fDuration+oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerWeek){while(fDuration>0){if(iCurrentRow>=this.aRows.length)break;if(oEntry.fStartColumn>this.aRows[iCurrentRow].iDaysPerWeek)break;if(iCurrentRow==oEntry.iStartRow){fDuration=fDuration-this.aRows[iCurrentRow].iDaysPerWeek+oEntry.fStartColumn;if(iCurrentRow==this.aRows.length)break;}else{fDuration=fDuration-this.aRows[iCurrentRow].iDaysPerWeek;if(iCurrentRow==this.aRows.length)break;oEntry.iEndRow++;oEntry.fEndRow++;}iCurrentRow++;}}if(this.bInitial&&oEntry.iEndRow>oEntry.iStartRow){var iEndRow=oEntry.iEndRow,iStartRow=oEntry.iStartRow; var fDuration=oEntry.fDuration;oEntry.fDuration=this.aRows[oEntry.iStartRow].iDaysPerWeek-oEntry.fStartColumn;fDuration-=oEntry.fDuration;fDuration++;oEntry.iStartRow=iStartRow;oEntry.iEndRow=iStartRow;var iIndex=0;for(var j=iStartRow+1;j<=iEndRow;j++){ iIndex++;if(UCF_DomUtil.$(oEntry.sId+"-clone"+iIndex))break;var oEntryDomClone=oEntry.oDomRef.cloneNode(true);oEntryDomClone.setAttribute("id",oEntry.sId+"-clone-"+iIndex);oEntry.oDomRef.parentNode.appendChild(oEntryDomClone);var oEntryClone=this.getEntry(oEntryDomClone);oEntry.bOpenEnd=true;oEntryClone.iStartColumn=0;oEntryClone.iStartRow=j;oEntryClone.fStartRow=j;oEntryClone.iEndRow=j;oEntryClone.setTextAlign(oEntryClone.TextAlign.CENTER);oEntryClone.fStartColumn=0;if(fDuration<this.aRows[j].iDaysPerWeek){oEntryClone.fDuration=fDuration-1;}else{oEntryClone.fDuration=this.aRows[j].iDaysPerWeek;fDuration=fDuration-oEntryClone.fDuration;}oEntryClone.fEndColumn=oEntryClone.fStartColumn+oEntryClone.fDuration;oEntryClone.iEndColumn=Math.floor(oEntryClone.fEndColumn);oEntryClone.setCalendar(this);if(fDuration<this.aRows[j].iDaysPerWeek){oEntryClone.bOpenStart=true;}else{oEntryClone.bOpenStart=true;oEntryClone.bOpenEnd=true;}oEntryClone.bIsClone=true;aEntries.push(oEntryClone);}}aEntries.push(oEntry);oEntry.setCalendar(this);}}return aEntries;}; UCF_CalendarMonthView.prototype.createTabNavigationStructure=function(){this.aTabNavigation=[];aCellNavigation=this.aCellNavigation;var aEntries=this.aEntries;for(var y=0;y<aCellNavigation.length;y++){for(var x=0;x<aCellNavigation[y].length;x++){for(var iEntryCount=0;iEntryCount<aEntries.length;iEntryCount++){if(aEntries[iEntryCount].fStartRow==y&&(aEntries[iEntryCount].bSelectable||UCF_System.bIs508)){if(aEntries[iEntryCount].fStartColumn<=x&&aEntries[iEntryCount].fEndColumn>x){this.aCellNavigation[y][x].aEntries[aEntries[iEntryCount].iLevel]=aEntries[iEntryCount].oDomRef;this.aCellNavigation[y][x].iCount++}}}if(aCellNavigation[y][x].aEntries.length>0||aCellNavigation[y][x].bClickable){this.aTabNavigation.push({x:x,y:y});aCellNavigation[y][x].iTabIndex=this.aTabNavigation.length-1;for(var i=0;i<aCellNavigation[y][x].aEntries.length;i++){var oEntry=aCellNavigation[y][x].aEntries[i];if(oEntry)this.aTabNavigation.push({x:x,y:y,z:i});}}else{aCellNavigation[y][x].previousTabIndex=this.aTabNavigation.length-1;}}}}; UCF_CalendarMonthView.prototype.createCellNavigationStructure=function(){this.aCellNavigation=[];   var oRows=this.oDomRef.getElementsByTagName("TR");for(var y=1;y<oRows.length;y++){this.aCellNavigation.push([]);for(var x=1;x<oRows[y].cells.length;x++){var oCell=oRows[y].cells[x],iRow=parseInt(oCell.getAttribute("ridx")),iCol=parseInt(oCell.getAttribute("cidx"));this.aCellNavigation[y-1].push({oDomRef:oCell,bClickable:!(isNaN(iRow)&&isNaN(iCol)),aEntries:[],iCount:0});}}}; UCF_CalendarMonthView.prototype.focusItem=function(iIndex){if(iIndex<0||iIndex>this.aTabNavigation.length)return;this.iTabItem=iIndex;var iX=this.aTabNavigation[iIndex].x,iY=this.aTabNavigation[iIndex].y,iZ=this.aTabNavigation[iIndex].z;if(typeof(iZ)!="number"){this.focusCell(iX,iY);}else{if(this.oFocusedElement)UCF_DomUtil.setTabIndex(this.oFocusedElement,-1);this.oFocusedCell={x:iX,y:iY};while(!this.aCellNavigation[iY][iX].aEntries[iZ]){iZ++;}this.oFocusedElement=this.aCellNavigation[iY][iX].aEntries[iZ];UCF_DomUtil.setTabIndex(this.oFocusedElement,0);this.oFocusedElement.focus();}}; UCF_CalendarMonthView.prototype.focusCell=function(x,y){if(y>this.aCellNavigation.length-1||y<0){return;}if(x>this.aCellNavigation[y].length-1||x<0){return;}if(this.oFocusedElement){UCF_DomUtil.setTabIndex(this.oFocusedElement,-1);}if(this.aCellNavigation[y][x]){UCF_DomUtil.setTabIndex(this.aCellNavigation[y][x].oDomRef,0);this.oFocusedCell={x:x,y:y};this.oFocusedElement=this.aCellNavigation[y][x].oDomRef;var iTabIndex=this.aCellNavigation[y][x].iTabIndex;if(typeof(iTabIndex)=="number"){this.iTabItem=iTabIndex;}else{this.iTabItem=this.aCellNavigation[y][x].previousTabIndex;}this.aCellNavigation[y][x].oDomRef.focus()}}; UCF_CalendarMonthView.prototype.onlstabnext=function(oBrowserEvent){if(this.iTabItem<this.aTabNavigation.length-1){this.focusItem(this.iTabItem+1);oBrowserEvent.cancel();}}; UCF_CalendarMonthView.prototype.onlstabprevious=function(oBrowserEvent){if(!this.oFocusedCell)return;if(this.iTabItem>0){if(this.aCellNavigation[this.oFocusedCell.y][this.oFocusedCell.x].previousTabIndex){this.focusItem(this.iTabItem);}else{this.focusItem(this.iTabItem-1);}oBrowserEvent.cancel();}}; UCF_CalendarMonthView.prototype.onlsfocus=function(oBrowserEvent){var oEventDomRef=oBrowserEvent.oGetSource();if(oEventDomRef==this.oDomRef){if(!this.oFocusedCell&&!UCF_System.b508){if(!this.aTabNavigation||!this.aTabNavigation[0])return;this.focusCell(this.aTabNavigation[0].x,this.aTabNavigation[0].y);}else{this.oFocusedCell=null;this.focusCell(this.aTabNavigation[0].x,this.aTabNavigation[0].y);}}}; UCF_CalendarMonthView.prototype.onlsup=function(oBrowserEvent){if(!this.oFocusedCell)return;this.focusCell(this.oFocusedCell.x,this.oFocusedCell.y-1);oBrowserEvent.cancel();}; UCF_CalendarMonthView.prototype.onlsdown=function(oBrowserEvent){if(!this.oFocusedCell)return;this.focusCell(this.oFocusedCell.x,this.oFocusedCell.y+1);oBrowserEvent.cancel();}; UCF_CalendarMonthView.prototype.onlsleft=function(oBrowserEvent){if(!this.oFocusedCell)return;if(UCF_System.bIsRTL){this.focusCell(this.oFocusedCell.x+1,this.oFocusedCell.y);}else{this.focusCell(this.oFocusedCell.x-1,this.oFocusedCell.y);}oBrowserEvent.cancel();}; UCF_CalendarMonthView.prototype.onlsright=function(oBrowserEvent){if(!this.oFocusedCell)return;if(UCF_System.bIsRTL){this.focusCell(this.oFocusedCell.x-1,this.oFocusedCell.y);}else{this.focusCell(this.oFocusedCell.x+1,this.oFocusedCell.y);}oBrowserEvent.cancel();}; UCF_CalendarMonthView.prototype.drawEntry=function(oEntry){if(!oEntry.bFullDay&&oEntry.fDuration<1){oEntry.fDuration=1;}var iCellIdx=Math.floor(oEntry.fStartColumn),iStartRow=Math.floor(oEntry.fStartRow),oStartCell=this.aRows[iStartRow].oDomRef.cells[iCellIdx+1],oRectOrig=this.getRect(oStartCell),iHeight=16,iTop=oRectOrig.top+(iHeight*oEntry.iLevel)+1,iLeft=oRectOrig.left+1,iRight=oRectOrig.right+1,iWidth=this.iGetEntryColumnWidth(this.aColumns,oEntry)-1;oEntry.applyStyles();oEntry.setPosition(iLeft,iTop,iWidth,iHeight,iRight);}; UCF_CalendarMonthView.prototype.collectFocusInfo=function(oFocusInfo){if(this.oFocusedCell){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iX",this.oFocusedCell.x);oFocusInfo.addParam("iY",this.oFocusedCell.y);if(this.oFocusedElement){oFocusInfo.addParam("sElementId",""+this.oFocusedElement.id);}}}; UCF_CalendarMonthView.prototype.applyFocusInfo=function(oFocusInfo){this.oFocusedCell={x:oFocusInfo.oGetParam("iX"),y:oFocusInfo.oGetParam("iY")};this.oFocusedElement=UCF_DomUtil.$(oFocusInfo.oGetParam("sElementId"));if(this.oFocusedElement){this.focusElementFromNavigation(this.oFocusedElement);}else{this.focusCell(this.oFocusedCell.x,this.oFocusedCell.y);}}; UCF_CalendarMonthView.prototype.onlsaccessibility=function(oBrowserEvent){var oSourceControl=oBrowserEvent.oGetSourceControl();if(oSourceControl!=this&&!(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource();if(oSource.getAttribute("className")=="MCELL"){oAccessibilityHelper.setControlType("CAL_M");var aTexts=[];if(!UCF_DomUtil.bContains(this.oDomRef,oBrowserEvent.oGetFromElement())){this.sWeekDay="";this.sWeek="";}var oTable=UCF_DomUtil.$(this.sId+"-tbl"),sWeekDay=UCF_DomUtil.sGetInnerText(oTable.rows[0].cells[oSource.cellIndex]),sDay=UCF_DomUtil.sGetInnerText(oSource),sWeek=UCF_DomUtil.sGetInnerText(oSource.parentNode.cells[0]),iEntryCount=this.aCellNavigation[this.oFocusedCell.y][this.oFocusedCell.x].aEntries.length,sEntryText="";aTexts.push(sWeekDay);aTexts.push(sDay);var sMonth=oSource.getAttribute("desc");if(sMonth){aTexts.push(sMonth);}if(this.sWeek!=sWeek){aTexts.push(oAccessibilityHelper.sGetText("DN_WEEK",[""+sWeek]));this.sWeek=sWeek;}if(iEntryCount>0){aTexts.push(oAccessibilityHelper.sGetText("CAL_MCELL",[""+iEntryCount]));}oAccessibilityHelper.setText(aTexts.join(" - "));if(iEntryCount>0){oAccessibilityHelper.addTutor("CAL_MCELL_TUT");}if(oSource.firstChild.lastChild.tagName=="IMG"){oAccessibilityHelper.addTutor("CAL_MORE_TUT");}if(oSource.firstChild.className.indexOf("TOD")>0){oAccessibilityHelper.setToday(true);}}else if(UCF_JsUtil.bInstanceOf(oSourceControl,"UCF_CalendarEntry")){var iCellTabIndex=this.iTabItem;if(!this.iTabItem)return;while(typeof(this.aTabNavigation[iCellTabIndex].z)!="number"){iCellTabIndex--;}if(iCellTabIndex==-1)return;var oCell=this.aCellNavigation[this.aTabNavigation[iCellTabIndex].y][this.aTabNavigation[iCellTabIndex].x];var aEntries=oCell.aEntries,iEntryCount=oCell.iCount,iEntryIndex=0;for(var i=0;i<iEntryCount;i++){iEntryIndex++;if(oSourceControl.oDomRef==aEntries[i]){break;}}oAccessibilityHelper.setItemCount(iEntryCount);oAccessibilityHelper.setItemIndex(iEntryIndex);var oLegendDomRef=UCF_DomUtil.$(this.sId+'-legend');if(oLegendDomRef)oAccessibilityHelper.setLegendJSDomRef(oLegendDomRef);var sSemantic=oSourceControl.bStriped?oSourceControl.sSemanticColor+"_STRIPED":oSourceControl.sSemanticColor;oAccessibilityHelper.addSemantic(sSemantic);}else if(oSource==this.oDomRef){oAccessibilityHelper.setControlType("CAL_M");oAccessibilityHelper.setText(this.sAccessibilityDescription);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.addTutor("CAL_M_TUT");}oBrowserEvent.cancelBubble();}; UCF_CalendarMonthView.prototype.aAttributeNames=["sTooltip","sAccessibilityDescription"]; UCF_CalendarMonthView.prototype.aMethodNames=[];  UCF_CalendarMonthView.prototype.sTooltip=''; UCF_CalendarMonthView.prototype.sAccessibilityDescription=''; UCF_CalendarMonthView.prototype.setDefaultValues=function(){this.sTooltip='';this.sAccessibilityDescription='';}; UCF_CalendarMonthView.prototype.fireCellSelect=function(sId,iRowIndex,iColIndex){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex};this.fireSemanticEvent("CalendarMonthView","CellSelect",mParams);}; UCF_CalendarMonthView.prototype.fireCellSelectMore=function(sId,iRowIndex,iColIndex){var mParams={Id:sId,RowIndex:iRowIndex,ColIndex:iColIndex};this.fireSemanticEvent("CalendarMonthView","CellSelectMore",mParams);}; UCF_CalendarMonthView.prototype.fireHeaderSelect=function(sId,iRowIndex){var mParams={Id:sId,RowIndex:iRowIndex};this.fireSemanticEvent("CalendarMonthView","HeaderSelect",mParams);};
 function UCF_SuggestBoxListBox(oDomRef,oLS){UCF_ComboBoxListBox.apply(this,[oDomRef,oLS]); this.iMaxVisibleItems=10;this.iVisibleItems=10;this.iSuggestedItems=this.aItems.length;this.sClientFilter="";};UCF_SuggestBoxListBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_ComboBoxListBox"))();UCF_SuggestBoxListBox.MAXCLIENTITEMS=199; UCF_SuggestBoxListBox.prototype.filterList=function(sFilter,bPrefixSearch){ var iVisibleItems=0; sFilter=sFilter.toUpperCase(); if(this.sClientFilter==sFilter)return;this.sClientFilter=sFilter;for(var i=0;i<this.aItems.length;i++){var oItem=this.aItems[i]; if(sFilter==""){if(iVisibleItems==0)this.sFirstVisibleItemKey=oItem.sKey;iVisibleItems++;oItem.oDomRef.style.display="";this.sLastVisibleItemKey=oItem.sKey;continue;} var sValue1=oItem.sValue1.toUpperCase(),sValue2=oItem.sValue2.toUpperCase(),iIndexValue1=sValue1.indexOf(sFilter),iIndexValue2=sValue2.indexOf(sFilter);if((bPrefixSearch&&(iIndexValue1!=0&&iIndexValue2!=0&&sFilter!=""))||(!bPrefixSearch&&(iIndexValue1<0&&iIndexValue2<0&&sFilter!=""))){ oItem.oDomRef.style.display="none";}else{ if(iVisibleItems==0)this.sFirstVisibleItemKey=oItem.sKey;iVisibleItems++;oItem.oDomRef.style.display="";this.sLastVisibleItemKey=oItem.sKey;}}this.iSuggestedItems=iVisibleItems;if(iVisibleItems>0)this.oDomRef.style.visibility="visible";else{this.oDomRef.style.visibility="hidden";return;} if(iVisibleItems>this.iMaxVisibleItems){this.iVisibleItems=this.iMaxVisibleItems;}else{this.iVisibleItems=iVisibleItems;}   }; UCF_SuggestBoxListBox.prototype.bIsValid=function(){var oRootRef=UCF_DomUtil.$(this.sId+"-r");if(this.oRootRef&&this.oRootRef!=oRootRef){return false;}else{if(this.oDomRef&&this.oDomRef.parentNode&&this.oDomRef.parentNode.parentNode&&!(UCF_DomUtil.bContains(this.oRootRef,this.oDomRef))){this.oDomRef.parentNode.parentNode.removeChild(this.oDomRef.parentNode);return false;}return true;}};
 function UCF_Iframe(oDomRef,oLS){UCF_PlaceHolder.apply(this,[oDomRef,oLS]);this.bLocked=false;};UCF_Iframe.prototype=new(UCF_ClassLoader.oGetClass("UCF_PlaceHolder"))(); UCF_Iframe.prototype.destroy=function(){UCF_PlaceHolder.prototype.destroy.apply(this,arguments);this.detachBrowserEvent("load",this.oDomRef);if(this.sLockBehavior=="ROUNDTRIP"){this.oLS.detachEvent(this.oLS.E_EVENTS.Lock,this,"lock");this.oLS.detachEvent(this.oLS.E_EVENTS.Unlock,this,"unlock");this.unlock();};}; UCF_Iframe.prototype.initialize=function(){UCF_PlaceHolder.prototype.initialize.apply(this,arguments);this.attachBrowserEvent("load",this.oDomRef);if(this.oDomRef.loaded){ UCF_JsUtil.delayedCall(0,this,"fireLoad",[this.sId]);}if(this.sLockBehavior=="ROUNDTRIP"){this.oLS.attachEvent(this.oLS.E_EVENTS.Lock,this,"lock");this.oLS.attachEvent(this.oLS.E_EVENTS.Unlock,this,"unlock");if(this.oLS.bIsLocked)this.lock();};}; UCF_Iframe.prototype.onload=function(oBrowserEvent){this.fireLoad(this.sId);oBrowserEvent.cancelBubble();}; UCF_Iframe.prototype.onresize=function(oBrowserEvent){UCF_PlaceHolder.prototype.onresize.apply(this,arguments);if(this.bLocked){this.adaptBlindLayerSize();}oBrowserEvent.cancelBubble();}; UCF_Iframe.prototype.adaptBlindLayerSize=function(){if(!this.oBlindLayer)return;var oRect=this.oGetObjectRect(this.oDomRef),oStyle=this.oBlindLayer.oDomRef.style;oStyle.top=oRect.top;oStyle.left=oRect.left;oStyle.width=oRect.width;oStyle.height=oRect.height;}; UCF_Iframe.prototype.addBlindLayer=function(){if(!this.oBlindLayer){this.oBlindLayer=this.oLS.oGetBlindLayer();}this.adaptBlindLayerSize();}; UCF_Iframe.prototype.removeBlindLayer=function(){if(this.oBlindLayer){this.oLS.releaseBlindLayer(this.oBlindLayer);this.oBlindLayer=null;}}; UCF_Iframe.prototype.lock=function(){if(this.sLockBehavior=="OFF")return;if(!this.bLocked){this.attachBrowserEvent("resize",this.oDomRef);this.addBlindLayer();this.bLocked=true;}}; UCF_Iframe.prototype.unlock=function(){if(this.bLocked){this.detachBrowserEvent("resize",this.oDomRef);this.removeBlindLayer();this.bLocked=false;}}; UCF_Iframe.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_Iframe.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_Iframe.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oSource=oBrowserEvent.oGetSource();var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("IF_END");}else if(oSource.getAttribute("tp")=="START"){oAccessibilityHelper.setControlType("IF");oAccessibilityHelper.addTutor("GROUP_TUT");oAccessibilityHelper.setTooltip(this.sTooltip);}else{oAccessibilityHelper.setControlType("IF");}}; UCF_Iframe.prototype.setUrl=function(sUrl){this.oDomRef.src=sUrl;}; UCF_Iframe.prototype.aAttributeNames=["sTooltip","sLifeCycle","sLockBehavior"]; UCF_Iframe.prototype.aMethodNames=["setKeepAlive"];  UCF_Iframe.prototype.sTooltip=''; UCF_Iframe.prototype.sLifeCycle="BROWSER"; UCF_Iframe.prototype.sLockBehavior="ROUNDTRIP"; UCF_Iframe.prototype.setDefaultValues=function(){this.sTooltip='';this.sLifeCycle="BROWSER";this.sLockBehavior="ROUNDTRIP";}; UCF_Iframe.prototype.fireLoad=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Iframe","Load",mParams);};UCF_Iframe.prototype.aPublicMethods=["lock","unlock"];
 function UCF_MenuBarItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_MenuBarItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_MenuBarItem.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_MenuBarItem.prototype.aAttributeNames=["bEnabled","sTooltip","sPopupMenuId"]; UCF_MenuBarItem.prototype.aMethodNames=[];  UCF_MenuBarItem.prototype.bEnabled=true; UCF_MenuBarItem.prototype.sTooltip=''; UCF_MenuBarItem.prototype.sPopupMenuId=''; UCF_MenuBarItem.prototype.setDefaultValues=function(){this.bEnabled=true;this.sTooltip='';this.sPopupMenuId='';};
 function UCF_NavigationListItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oFocusDomRef=this.oDomRef.firstChild.firstChild;};UCF_NavigationListItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_NavigationListItem.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_NavigationListItem.prototype.aAttributeNames=["sText","bEnabled","bSelected","sPopupMenuId","sContextMenuId","sTooltip"]; UCF_NavigationListItem.prototype.aMethodNames=[];  UCF_NavigationListItem.prototype.sText=''; UCF_NavigationListItem.prototype.bEnabled=true; UCF_NavigationListItem.prototype.bSelected=false; UCF_NavigationListItem.prototype.sPopupMenuId=''; UCF_NavigationListItem.prototype.sContextMenuId=''; UCF_NavigationListItem.prototype.sTooltip=''; UCF_NavigationListItem.prototype.setDefaultValues=function(){this.sText='';this.bEnabled=true;this.bSelected=false;this.sPopupMenuId='';this.sContextMenuId='';this.sTooltip='';};
 function UCF_ViewSwitchItem(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ViewSwitchItem.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_ViewSwitchItem.prototype.onlsfocus=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_ViewSwitchItem.prototype.aAttributeNames=["bEnabled","bSelected","sTooltip"]; UCF_ViewSwitchItem.prototype.aMethodNames=[];  UCF_ViewSwitchItem.prototype.bEnabled=true; UCF_ViewSwitchItem.prototype.bSelected=false; UCF_ViewSwitchItem.prototype.sTooltip=''; UCF_ViewSwitchItem.prototype.setDefaultValues=function(){this.bEnabled=true;this.bSelected=false;this.sTooltip='';};
 function UCF_InputField(oDomRef,oLS){ if(arguments.length==0)return;UCF_Control.apply(this,[oDomRef,oLS]);   if(this.oDomRef.type=="password"&&this.sValue!=""){this.sDefaultValue=this.sValue;} if(this.bShowInputLength){this.iLength=parseInt(this.oDomRef.getAttribute("size"));if(isNaN(this.iLength))this.iLength=0;this.iMaxLength=parseInt(this.oDomRef.getAttribute("maxlength"));if(isNaN(this.iMaxLength))this.iMaxLength=2147483647;} if(this.mEvents.Enter){this.bIgnoreDefaultButton=true;} if(this.bDisplayAsText){this.bHideFieldHelp=true;}this.oHelpButtonRef=null; this.oHelpButton=null; if(this.bShowHelpButton){if(this.bHideFieldHelp){this.oHelpButton=this.oLS.oControlFactory.oGetControl("UCF_InputFieldHelpButton","ls-inputfieldhelpbutton");this.oHelpButtonRef=this.oHelpButton.oDomRef;}else{this.oHelpButtonRef=UCF_DomUtil.$(this.sId+"-btn");}}  if(this.bUsedInSapTable)this.bNavigation=false;else this.bNavigation=true; this.sOldValue=this.sValue; this.bAllowTextSelection=true; this.bNoBlur=false; this.sInputFocusStyle="lsEdFieldFocus";this.sHelpButtonFocusStyle="lsEdf3HlpBtnFocus";if(!this.bEnabled||this.bReadonly){this.sInputFocusStyle+="Dsbl";this.sHelpButtonFocusStyle+="Dsbl";}if(this.bInvalid||this.sInputState=="ERROR"){this.sInputFocusStyle+="Inv";this.sHelpButtonFocusStyle+="Inv";}this.sInputHoverStyle="urEdf2TxtHv";this.sHelpButtonHoverStyle="lsEdf3HlpBtnHv"; this.iSelectionStart=0;this.iSelectionEnd=0; this.bIsDirty=false;     this.bSkipSelectAll=false; if(this.bEnabled&&!this.bReadonly){  if(UCF_System.sDevice.indexOf("ie")>0)this.attachBrowserEvent("blur",oDomRef);}};UCF_InputField.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_InputField.prototype.initialize=function(){if(this.sInputPrompt!=""&&!this.bDisplayAsText){  var iWidth=this.oDomRef.offsetWidth;this.oDomRef.style.width=iWidth+"px";}}; UCF_InputField.prototype.destroy=function(){ if(this.oHelpButton)this.hideButton(); this.detachBrowserEvent("blur",this.oDomRef);}; UCF_InputField.prototype.onlsfocus=function(oBrowserEvent){ if(this.bHideFieldHelp){this.showButton();}this.setFocusStyles();       if(this.sDefaultValue&&this.sDefaultValue==this.sGetValue()){this.oDomRef.select();} if(this.bEnabled&&!this.bReadonly&&!this.sValue){if(this.bRequired&&this.bShowRequiredIndicator){this.oDomRef.value="";this.oDomRef.className=this.oDomRef.className.replace("urEdf2TxtReq","");}if(this.sInputPrompt!=""){this.oDomRef.value="";this.oDomRef.className=this.oDomRef.className.replace("urEdf2TxtLbl","");}}}; UCF_InputField.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),bSkipSelectAll;;if(!this.bEnabled)return;if(this.bReadonly&&!this.bShowHelpButtonAlways)return;bSkipSelectAll=this.bSkipSelectAll;this.bSkipSelectAll=false; if(oSource==this.oHelpButtonRef){this.onFieldHelpClick();} if(oSource.tagName=="LABEL"){this.bNoBlur=true;this.oDomRef.focus();} if(this.sDefaultValue&&this.sDefaultValue==this.sValue){this.oDomRef.select();} if(!this.bNavigation){if(bSkipSelectAll)this.bNavigation=true;else this.oDomRef.select();}oBrowserEvent.cancelBubble();}; UCF_InputField.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_InputField.prototype.onlsselect=function(oBrowserEvent){if(!this.bEnabled)return;oBrowserEvent.cancelBubble();}; UCF_InputField.prototype.oncontextmenu=function(oBrowserEvent){this.prepareFireChange();}; UCF_InputField.prototype.onmousedown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(!this.bEnabled)return;if(this.bReadonly&&(!this.bShowHelpButtonAlways||oSource!=this.oHelpButtonRef))return; this.bSkipSelectAll=!this.bNavigation&&this.iGetSelectionStart()!=this.iGetSelectionEnd(); if(!oSource||oSource!=this.oHelpButtonRef)return; if(this.sFieldHelp=="CALENDAR"||this.sFieldHelp=="CALCULATOR"){this.bNoBlur=true;this.removeFocusStyles();}}; UCF_InputField.prototype.onmouseover=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(); if(oSource.className=="urLblFont"&&this.oDataTip){this.bOldShowOnActivate=this.oDataTip.bShowOnActivate;this.bOldAutoHideTimeout=this.oDataTip.iAutoHideTimeout;this.oDataTip.bShowOnActivate=false; this.oDataTip.iAutoHideTimeout=0; if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(400,this.oDataTip,"open");}this.setHoverStyles(oSource);}; UCF_InputField.prototype.onmouseout=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(); if(oSource.className=="urLblFont"&&this.oDataTip){this.oDataTip.close();this.oDataTip.bShowOnActivate=this.bOldShowOnActivate;this.oDataTip.iAutoHideTimeout=this.bOldAutoHideTimeout;if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}}this.removeHoverStyles();}; UCF_InputField.prototype.onlsblur=function(oBrowserEvent){if(this.bNoBlur){ return;} this.iSelectionStart=UCF_DomUtil.iGetSelectionStart(this.oDomRef);this.iSelectionEnd=UCF_DomUtil.iGetSelectionEnd(this.oDomRef);this.removeFocusStyles(); if(this.oHelpButton&&!(this.oFieldHelp&&this.oFieldHelp.bOpen)){this.hideButton();}        if(document.selection){try{if(document.selection.createRange().text!=""&&document.selection.createRange().text==this.oDomRef.value){document.selection.collapse();document.selection.empty();}else if(document.activeElement&&document.activeElement==document.body){  document.selection.empty();}}catch(err){}} if(this.bUsedInSapTable){this.bNavigation=false;} this.prepareFireChange(); if(this.bEnabled&&!this.bReadonly&&!this.sValue){if(this.bRequired&&this.bShowRequiredIndicator){this.oDomRef.value="*";UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtReq");}if(this.sInputPrompt!=""){this.oDomRef.value=this.sInputPrompt;UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtLbl");}}}; UCF_InputField.prototype.onblur=function(oBrowserEvent){if(this.bNoBlur){this.bNoBlur=false; return;} this.prepareFireChange();}; UCF_InputField.prototype.onkeydown=function(oBrowserEvent){if(!this.bEnabled)return;if(this.bReadonly&&!this.bShowHelpButtonAlways)return;var iKey=oBrowserEvent.iKeyCode(); if((oBrowserEvent.iKeyCode()==UCF_KeyCodes.F4)||(oBrowserEvent.iKeyCode()==UCF_KeyCodes.ARROW_DOWN&&oBrowserEvent.bAlt())){this.onFieldHelpClick();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}  if(this.sDefaultValue&&this.sValue==this.sDefaultValue){var sNavigationKeys="|"+UCF_KeyCodes.ARROW_UP+"|"+UCF_KeyCodes.ARROW_DOWN+"|"+UCF_KeyCodes.ARROW_LEFT+"|"+UCF_KeyCodes.ARROW_RIGHT+"|"+UCF_KeyCodes.HOME+"|"+UCF_KeyCodes.END+"|";if(sNavigationKeys.indexOf("|"+oBrowserEvent.iKeyCode()+"|")>=0){oBrowserEvent.oDomEvent.returnValue=false;oBrowserEvent.cancel();}} if(iKey==UCF_KeyCodes.F2&&this.bUsedInSapTable){this.bNavigation=!this.bNavigation;UCF_DomUtil.setCursorPos(this.oDomRef,this.oDomRef.value.length);this.refocus(this.oFocusDomRef);oBrowserEvent.cancelBubble();return;}this.bNoBlur=false;  if(iKey==UCF_KeyCodes.DELETE||iKey==UCF_KeyCodes.ESCAPE||iKey==UCF_KeyCodes.INSERT||iKey==UCF_KeyCodes.SPACE){oBrowserEvent.cancelBubble();return;}}; UCF_InputField.prototype.onkeypress=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode(); if(this.bReadonly||!this.bEnabled){return;} if(iKey==UCF_KeyCodes.TAB||iKey==UCF_KeyCodes.ARROW_UP||iKey==UCF_KeyCodes.ARROW_DOWN||iKey==UCF_KeyCodes.ARROW_LEFT||iKey==UCF_KeyCodes.ARROW_RIGHT||iKey==UCF_KeyCodes.SHIFT||iKey==UCF_KeyCodes.PAGE_UP||iKey==UCF_KeyCodes.PAGE_DOWN)return; if(this.bUsedInSapTable)this.bNavigation=true;}; UCF_InputField.prototype.onresize=function(oBrowserEvent){if(!this.oHelpButton)return; this.oHelpButton.setPosition();}; UCF_InputField.prototype.onlsleft=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_InputField.prototype.onlsright=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_InputField.prototype.onlshome=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_InputField.prototype.onlsend=function(oBrowserEvent){if(this.bNavigation)oBrowserEvent.cancelBubble();else oBrowserEvent.cancel();}; UCF_InputField.prototype.onlsexpand=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;oBrowserEvent.cancelBubble();}; UCF_InputField.prototype.onlscollapse=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;oBrowserEvent.cancelBubble();}; UCF_InputField.prototype.onlsenter=function(oBrowserEvent){this.prepareFireChange();if(this.mEvents.Enter){this.fireEnter(this.sId);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_InputField.prototype.onFieldHelpClose=function(oEvent){this.detachFieldHelp();}; UCF_InputField.prototype.onFieldHelpSelect=function(oEvent){if(this.bReadonly){this.detachFieldHelp();return;} if(this.sFieldHelp=="CALENDAR"){var oDate=oEvent.oGetParam("date");this.setValue(oDate.sGetFormattedDate(this.sFormatString));}else if(this.sFieldHelp=="CALCULATOR"){var sValue=oEvent.oGetParam("value");this.setValue(sValue);}this.detachFieldHelp();this.focus();}; UCF_InputField.prototype.detachFieldHelp=function(){this.oFieldHelp.detachEvent(this.oFieldHelp.E_EVENTS.Select,this,"onFieldHelpSelect");this.oFieldHelp.detachEvent(this.oFieldHelp.E_EVENTS.Close,this,"onFieldHelpClose");}; UCF_InputField.prototype.showButton=function(){if(!this.oHelpButton||this.oHelpButton.bIsConnected(this))return;if(!this.bEnabled||(this.bReadonly&&!this.ShowHelpButtonAlways))return;this.oHelpButton.detachAllEvents();this.oHelpButton.connect(this,this.sFieldHelp);this.oHelpButton.attachEvent(this.oHelpButton.E_EVENTS.Press,this,"onFieldHelpClick");this.oHelpButton.attachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onButtonActivate");this.attachBrowserEvent("resize",this.oDomRef);}; UCF_InputField.prototype.hideButton=function(){if(!this.oHelpButton)return;this.oHelpButton.disconnect();this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Press,this,"onFieldHelpClick");this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onButtonActivate");this.detachBrowserEvent("resize",this.oDomRef);}; UCF_InputField.prototype.attachFieldHelp=function(){switch(this.sFieldHelp){case "CALENDAR":this.oFieldHelp=this.oLS.oControlFactory.oGetControl("UCF_DatePicker","ls-datepicker");this.oFieldHelp.setConnectedControl(this);if(this.sFormatString==""){this.sFormatString="MM/dd/yyyy";} var oSelectedDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();var oStartDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();var bError=false;if(this.sGetValue()){bError=oStartDate.parse(this.sGetValue(),this.sFormatString);if(!bError)oSelectedDate.setTime(oStartDate.iGetTime());}else if(this.sDatePickerStartRefId){oStartDateRef=this.oLS.oControlFactory.oGetControlById(this.sDatePickerStartRefId);oStartDate.parse(oStartDateRef.sGetValue(),oStartDateRef.sFormatString);oSelectedDate.parse("",this.sFormatString);}if(bError)this.oFieldHelp.setSelectedDate(null);else this.oFieldHelp.setSelectedDate(oSelectedDate);this.oFieldHelp.setStartDate(oStartDate);if(this.bReadonly){this.oFieldHelp.setEnabled(false);}else{this.oFieldHelp.attachEvent(this.oFieldHelp.E_EVENTS.Select,this,"onFieldHelpSelect");}this.oFieldHelp.attachEvent(this.oFieldHelp.E_EVENTS.Close,this,"onFieldHelpClose");break;case "CALCULATOR":this.oFieldHelp=this.oLS.oControlFactory.oGetControl("UCF_Calculator","ls-calculator");this.oFieldHelp.setConnectedControl(this);this.oFieldHelp.setFormat(this.sFormatString);this.oFieldHelp.setValue(this.oDomRef.value);this.oFieldHelp.attachEvent(this.oFieldHelp.E_EVENTS.Select,this,"onFieldHelpSelect");this.oFieldHelp.attachEvent(this.oFieldHelp.E_EVENTS.Close,this,"onFieldHelpClose");break;}}; UCF_InputField.prototype.onFieldHelpClick=function(oEvent){ if(!this.bShowHelpButton)return;  if(this.sFieldHelp=="F4LOOKUP"||this.sFieldHelp=="DEFAULT"){this.prepareFireChange();this.oDomRef.focus();this.hideButton();this.removeFocusStyles();this.removeHoverStyles();if(this.oHelpButton){this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Press,this,"onFieldHelpClick");this.oHelpButton.detachEvent(this.oHelpButton.E_EVENTS.Activate,this,"onButtonActivate");}this.fireFieldHelpPress(this.sId,this.sFieldHelp);return;} this.bNoBlur=true;if(!this.oFieldHelp||!this.oFieldHelp.bOpen){this.openFieldHelp();}else{this.oFieldHelp.close();}}; UCF_InputField.prototype.onButtonActivate=function(oEvent){this.bNoBlur=true;}; UCF_InputField.prototype.openFieldHelp=function(){if(this.sFieldHelp=="CALENDAR"||this.sFieldHelp=="CALCULATOR"){this.attachFieldHelp();this.oFieldHelp.open();if(this.oDataTip){this.oDataTip.close();}}}; UCF_InputField.prototype.closeFieldHelp=function(){if(this.oFieldHelp.bOpen){this.oFieldHelp.close();this.detachFieldHelp();}}; UCF_InputField.prototype.showLength=function(){ if(this.bUsedInSapTable)return; if(this.iMaxLength>=this.iLength)return; if(!this.oLengthRef){this.oLengthRef=UCF_DomUtil.$("ls-length-calc");if(!this.oLengthRef){this.oLengthRef=document.createElement("SPAN");this.oLengthRef.id="ls-length-calc";this.oLengthRef.className="urEdf2TxtEnbl";this.oLengthRef.style.position="absolute";this.oLengthRef.style.top="-1000px";document.body.appendChild(this.oLengthRef);}} if(!this.oMaskRef){ if(this.oRootRef.tagName=="TABLE"){this.oMaskRef=this.oDomRef.parentNode.nextSibling;} else{this.oMaskRef=this.oRootRef.getElementsByTagName("img")[0];}} var sValue=this.sGetValue();for(var i=sValue.length;i<this.iMaxLength;i++){sValue+="0";}this.oLengthRef.innerHTML=sValue;var iInputWidth=this.oLengthRef.offsetWidth; this.iOriginalWidth=this.oDomRef.offsetWidth; this.oMaskRef.style.width=this.iOriginalWidth-iInputWidth;this.oDomRef.style.width=iInputWidth; if(this.oMaskRef.tagName=="IMG"){this.oMaskRef.style.height=this.oDomRef.offsetHeight;} var oBtn=UCF_DomUtil.$(this.sId+"-btn");if(oBtn){oBtn.parentNode.className+=" urEdf2BtnBrd";}}; UCF_InputField.prototype.hideLength=function(){ if(!this.oMaskRef)return; this.oMaskRef.style.width=0;this.oDomRef.style.width=this.iOriginalWidth;}; UCF_InputField.prototype.setValue=function(sValue){if(!this.bEnabled||this.bReadonly)return;this.oDomRef.value=sValue;this.prepareFireChange();}; UCF_InputField.prototype.sGetValue=function(){return this.oDomRef.value;}; UCF_InputField.prototype.bValueEdited=function(){return this.sGetValue()!=this.sValue;}; UCF_InputField.prototype.handleEditEvents=function(oBrowserEvent){if(this.bValueEdited()&&!this.bIsDirty){this.bIsDirty=true;this.markDirty();}}; UCF_InputField.prototype.prepareFireChange=function(){if(!this.bEnabled||this.bReadonly)return;var sValue=this.sGetValue(); if(sValue==this.sInputPrompt)sValue="";if(sValue!=this.sOldValue){this.sOldValue=sValue; if(this.mEvents.Validate){this.bIgnoreDefaultButton=true;this.setInputState("INVALIDATELOADING");this.fireValidate(this.sId,sValue);}else{this.setInputState("INVALIDATE");} this.sValue=sValue;this.fireChange(this.sId,sValue);}}; UCF_InputField.prototype.setInputState=function(sInputState,sText){if(sInputState==this.sInputState)return;var oDataTip=this.oDataTip;if(!oDataTip){oDataTip=this.createDataTip();} switch(this.sInputState){case "ERROR":UCF_DomUtil.removeClass(this.oDomRef,"urEdf2TxtInv");this.oDomRef.className=this.oDomRef.className.replace("Inv","");this.sInputFocusStyle=this.sInputFocusStyle.replace("Inv","");if(this.bUsedInSapTable){UCF_DomUtil.removeClass(this.oRootRef,"urST3TDInInv");this.oRootRef.className=this.oRootRef.className.replace("Inv","");}if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,"lsEdf3HlpBtnInv");this.oHelpButtonRef.className=this.oHelpButtonRef.className.replace("Inv","");}break;case "WARNING":UCF_DomUtil.removeClass(this.oDomRef,"urEdf2TxtWarn");if(this.bUsedInSapTable)UCF_DomUtil.removeClass(this.oRootRef,"urST3TDInWarn");if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,"lsEdf3HlpBtnWarn");}break;} switch(sInputState){case "ERROR":UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtInv");if(this.bUsedInSapTable)UCF_DomUtil.addClass(this.oRootRef,"urST3TDInInv");this.setMessageBarsState(sText,"ERROR");if(oDataTip){oDataTip.setType("ERROR");oDataTip.setText(sText);oDataTip.fadeIn();}if(this.oHelpButtonRef){UCF_DomUtil.addClass(this.oHelpButtonRef,"lsEdf3HlpBtnInv");}break;case "WARNING":UCF_DomUtil.addClass(this.oDomRef,"urEdf2TxtWarn");if(this.bUsedInSapTable)UCF_DomUtil.addClass(this.oRootRef,"urST3TDInWarn");this.setMessageBarsState(sText,"WARNING");if(oDataTip){oDataTip.setType("WARNING");oDataTip.setText(sText);oDataTip.fadeIn();}if(this.oHelpButtonRef){UCF_DomUtil.addClass(this.oHelpButtonRef,"lsEdf3HlpBtnWarn");}break;case "NONE":this.setMessageBarsState(sText,"OK");if(oDataTip){oDataTip.setType("OK");oDataTip.setText(sText);}break;case "INVALIDATE":this.setMessageBarsState(sText,"INVALIDATE");if(oDataTip){oDataTip.setInvalidated(true);}break;case "INVALIDATELOADING":this.setMessageBarsState(sText,"INVALIDATE");if(oDataTip){oDataTip.setInvalidated(true);}break;}this.sInputState=sInputState;}; UCF_InputField.prototype.setMessageBarsState=function(sText,sType){var oMessageBars=this.oLS.oControlFactory.oGetCurrentControlsByClassName("UCF_MessageBar");for(var i=0;i<oMessageBars.length;i++){if(oMessageBars[i].sConnectedControlId==this.sId){if(sType=="INVALIDATE"){oMessageBars[i].setInvalidated(true);}else if(sType=="INVALIDATELOADING"){oMessageBars[i].setInvalidated(true);oMessageBars[i].setType("LOADING");}else{oMessageBars[i].setText(sText);oMessageBars[i].setType(sType);}}}}; UCF_InputField.prototype.onlshotkey=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();  if(oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift()&&(iKey==UCF_KeyCodes.C||iKey==UCF_KeyCodes.X||iKey==UCF_KeyCodes.V||iKey==UCF_KeyCodes.Z||iKey==UCF_KeyCodes.Y||iKey==UCF_KeyCodes.A)){oBrowserEvent.cancelBubble();return;}if(this.bShowHelpButton&&!oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bShift()&&iKey==UCF_KeyCodes.F4){oBrowserEvent.cancelBubble();return;}if(iKey==UCF_KeyCodes.DELETE||iKey==UCF_KeyCodes.ESCAPE||iKey==UCF_KeyCodes.INSERT){oBrowserEvent.cancelBubble();return;} this.prepareFireChange();}; UCF_InputField.prototype.onkeyup=function(oBrowserEvent){this.handleEditEvents(oBrowserEvent);}; UCF_InputField.prototype.onpaste=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_InputField.prototype.oncut=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_InputField.prototype.ondrop=function(oBrowserEvent){UCF_JsUtil.delayedCall(0,this,"handleEditEvents",[oBrowserEvent]);}; UCF_InputField.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sValue=this.sGetValue(); var sLabel="";var oLabel=this.oRootRef.getElementsByTagName("LABEL")[0];if(oLabel){ sLabel=UCF_DomUtil.sGetInnerText(oLabel);if(sLabel.lastIndexOf(" *")>-1&&sLabel.lastIndexOf(" *")==sLabel.length-2)sLabel=sLabel.substring(0,sLabel.lastIndexOf(" *"));if(sLabel.lastIndexOf(":")>-1&&sLabel.lastIndexOf(":")==sLabel.length-1)sLabel=sLabel.substring(0,sLabel.lastIndexOf(":"));}else{sLabel=oAccessibilityHelper.sGetLabelText(this.sId);}if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);} if(this.oDomRef.type=="password"){var accValue="";for(var i=0;i<sValue.length;i++){accValue=accValue+"*";}oAccessibilityHelper.setText(accValue);}else{oAccessibilityHelper.setText(sValue);} oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setRequired(this.bRequired);oAccessibilityHelper.setInvalid(this.bInvalid);switch(this.sInputState){case "ERROR":oAccessibilityHelper.setInvalid(true);break;case "WARNING":oAccessibilityHelper.setWarning(true);break;} oAccessibilityHelper.setTooltip(this.sTooltip); var sControlType="I"; oAccessibilityHelper.addDataType(this.sType);oAccessibilityHelper.setControlType(sControlType); oAccessibilityHelper.addEnabledTutor("I_F4_TUT",this.bEnabled&&!this.bReadonly&&this.bShowHelpButton);}; UCF_InputField.prototype.focus=function(){if(UCF_DomUtil.oGetActiveElement()!=this.oDomRef){if(!this.bReadonly)this.oDomRef.select();this.bNoBlur=false;UCF_Control.prototype.focus.apply(this,arguments);}}; UCF_InputField.prototype.collectFocusInfo=function(oFocusInfo){var iCursorPosX=UCF_DomUtil.iGetCursorPos(this.oDomRef);if(iCursorPosX>=0){oFocusInfo.setApplyControl(this);oFocusInfo.addParam("iCursorPosX",iCursorPosX);}if(this.bUsedInSapTable){oFocusInfo.addParam("bNavigation",this.bNavigation);}}; UCF_InputField.prototype.applyFocusInfo=function(oFocusInfo){var iCursorPosX=oFocusInfo.oGetParam("iCursorPosX");if(!UCF_DomUtil.bFocusDomElement(this.oDomRef)){try{this.oDomRef.focus();}catch(oException){return false;}}this.setFocusStyles();if(iCursorPosX>=0){UCF_DomUtil.setCursorPos(this.oDomRef,iCursorPosX);}if(this.bUsedInSapTable){this.bNavigation=oFocusInfo.oGetParam("bNavigation");}if(this.bHideFieldHelp){ this.showButton();}}; UCF_InputField.prototype.setFocusStyles=function(){ if(!UCF_System.bUseAnimation)return; if((!this.bEnabled||this.bReadonly)&&!UCF_System.bIs508)return;var oDomRef=this.oDomRef;if(this.bUsedInSapTable)oDomRef=this.oRootRef;  if(oDomRef.className.indexOf(this.sInputFocusStyle)<0){UCF_DomUtil.addClass(oDomRef,this.sInputFocusStyle);} if(!this.bUsedInSapTable&&this.oHelpButtonRef&&!this.bHideFieldHelp&&this.oHelpButtonRef.className.indexOf(this.sHelpButtonFocusStyle)<0){UCF_DomUtil.addClass(this.oHelpButtonRef,this.sHelpButtonFocusStyle);}}; UCF_InputField.prototype.removeFocusStyles=function(){ if(this.bUsedInSapTable){UCF_DomUtil.removeClass(this.oRootRef,this.sInputFocusStyle);}else{UCF_DomUtil.removeClass(this.oDomRef,this.sInputFocusStyle);}if(this.oHelpButtonRef){UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sHelpButtonFocusStyle);}}; UCF_InputField.prototype.checkStatusOfFocusStyles=function(){if(this.bEnabled&&!this.bReadonly){if(this.sInputFocusStyle.indexOf("Dsbl")>-1){this.sInputFocusStyle=this.sInputFocusStyle.split("Dsbl")[0];}if(this.sHelpButtonFocusStyle.indexOf("Dsbl")>-1){this.sHelpButtonFocusStyle=this.sHelpButtonFocusStyle.split("Dsbl")[0];}}if(!this.bInvalid&&this.sInputState!="ERROR"){if(this.sInputFocusStyle.indexOf("Inv")>-1){this.sInputFocusStyle=this.sInputFocusStyle.split("Inv")[0];}if(this.sHelpButtonFocusStyle.indexOf("Inv")>-1){this.sHelpButtonFocusStyle=this.sHelpButtonFocusStyle.split("Inv")[0];}}}; UCF_InputField.prototype.setHoverStyles=function(oSource){if(!this.bEnabled||this.bReadonly)return;UCF_DomUtil.addClass(this.oDomRef,this.sInputHoverStyle);if(this.oHelpButtonRef&&!this.bUsedInSapTable){if(oSource==this.oHelpButtonRef){UCF_DomUtil.addClass(this.oHelpButtonRef,this.sHelpButtonHoverStyle);}else{UCF_DomUtil.addClass(this.oHelpButtonRef,this.sInputHoverStyle);}}}; UCF_InputField.prototype.removeHoverStyles=function(){if(!this.bEnabled||(this.bReadonly&&!this.bShowHelpButtonAlways))return;UCF_DomUtil.removeClass(this.oDomRef,this.sInputHoverStyle);if(this.oHelpButtonRef&&this.bEnabled&&(!this.Readonly||(this.Readonly&&this.bShowHelpButtonAlways))){UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sHelpButtonHoverStyle);UCF_DomUtil.removeClass(this.oHelpButtonRef,this.sInputHoverStyle);}}; UCF_InputField.prototype.setCursorPosition=function(iPos){UCF_DomUtil.setCursorPos(this.oDomRef,iPos);}; UCF_InputField.prototype.setSelection=function(iStart,iEnd){UCF_DomUtil.setSelection(this.oDomRef,iStart,iEnd);}; UCF_InputField.prototype.iGetSelectionStart=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionStart)return UCF_DomUtil.iGetSelectionStart(this.oDomRef);else return this.iSelectionStart;}; UCF_InputField.prototype.iGetSelectionEnd=function(){if(UCF_DomUtil.oGetActiveElement()==this.oDomRef||this.oDomRef.selectionEnd)return UCF_DomUtil.iGetSelectionEnd(this.oDomRef);else return this.iSelectionEnd;}; UCF_InputField.prototype.aAttributeNames=["sTooltip","sValue","bInvalid","bRequired","bEnabled","bReadonly","bShowHelpButton","sType","sFieldHelp","sWidth","bShowInputLength","sLabelText","bHideFieldHelp","bUsedInSapTable","sInputState","sFormatString","bShowHelpButtonAlways","sDatePickerStartRefId","sAccessKey","bShowRequiredIndicator","bDisplayAsText","bDisplayLabelAsDefault","sInputPrompt"]; UCF_InputField.prototype.aMethodNames=["sGetValue","setInputState","setCursorPosition","setSelection","iGetSelectionStart","iGetSelectionEnd"];  UCF_InputField.prototype.sTooltip=''; UCF_InputField.prototype.sValue=''; UCF_InputField.prototype.bInvalid=false; UCF_InputField.prototype.bRequired=false; UCF_InputField.prototype.bEnabled=true; UCF_InputField.prototype.bReadonly=false; UCF_InputField.prototype.bShowHelpButton=false; UCF_InputField.prototype.sType="STRING"; UCF_InputField.prototype.sFieldHelp="F4LOOKUP"; UCF_InputField.prototype.sWidth=''; UCF_InputField.prototype.bShowInputLength=false; UCF_InputField.prototype.sLabelText=''; UCF_InputField.prototype.bHideFieldHelp=false; UCF_InputField.prototype.bUsedInSapTable=false; UCF_InputField.prototype.sInputState="NONE"; UCF_InputField.prototype.sFormatString='MM/dd/yyyy'; UCF_InputField.prototype.bShowHelpButtonAlways=false; UCF_InputField.prototype.sDatePickerStartRefId=''; UCF_InputField.prototype.sAccessKey=''; UCF_InputField.prototype.bShowRequiredIndicator=false; UCF_InputField.prototype.bDisplayAsText=false; UCF_InputField.prototype.bDisplayLabelAsDefault=false; UCF_InputField.prototype.sInputPrompt=''; UCF_InputField.prototype.setDefaultValues=function(){this.sTooltip='';this.sValue='';this.bInvalid=false;this.bRequired=false;this.bEnabled=true;this.bReadonly=false;this.bShowHelpButton=false;this.sType="STRING";this.sFieldHelp="F4LOOKUP";this.sWidth='';this.bShowInputLength=false;this.sLabelText='';this.bHideFieldHelp=false;this.bUsedInSapTable=false;this.sInputState="NONE";this.sFormatString='MM/dd/yyyy';this.bShowHelpButtonAlways=false;this.sDatePickerStartRefId='';this.sAccessKey='';this.bShowRequiredIndicator=false;this.bDisplayAsText=false;this.bDisplayLabelAsDefault=false;this.sInputPrompt='';}; UCF_InputField.prototype.fireChange=function(sId,sValue){var mParams={Id:sId,Value:sValue};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("InputField","Change",mParams);}; UCF_InputField.prototype.fireFieldHelpPress=function(sId,sFieldHelp){var mParams={Id:sId,FieldHelp:sFieldHelp};this.fireSemanticEvent("InputField","FieldHelpPress",mParams);}; UCF_InputField.prototype.fireEnter=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Enter)this.oLS.markDirty();this.fireSemanticEvent("InputField","Enter",mParams);}; UCF_InputField.prototype.fireValidate=function(sId,sValue){var mParams={Id:sId,Value:sValue};this.fireSemanticEvent("InputField","Validate",mParams);}; UCF_InputField.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("InputField","DoubleClick",mParams);};UCF_InputField.prototype.aPublicMethods=["sGetValue"];
 function UCF_InputFieldInplaceEdit(oDomRef,oLS){UCF_InputField.apply(this,[oDomRef,oLS]);};UCF_InputFieldInplaceEdit.prototype=new(UCF_ClassLoader.oGetClass("UCF_InputField"))();UCF_InputFieldInplaceEdit.prototype.initialize=function(){UCF_InputField.prototype.initialize.apply(this,arguments);if(this.bReadonly||this.sWidth)this.oDomRef.style.textOverflow="ellipsis";if(this.sWidth)this.oDomRef.setAttribute("readOnly","-1");this.adaptWidth();};UCF_InputFieldInplaceEdit.prototype.onclick=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){this.enterEditMode();}UCF_InputField.prototype.onclick.call(this,oBrowserEvent);};UCF_InputFieldInplaceEdit.prototype.onlsfocus=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){this.enterEditMode();}UCF_InputField.prototype.onlsfocus.call(this,oBrowserEvent);};UCF_InputFieldInplaceEdit.prototype.onlsblur=function(oBrowserEvent){if(this.bEnabled&&!this.bReadonly){if(this.sTimeOutIdInplace){UCF_JsUtil.clearDelayedCall(this.sTimeOutIdInplace);}this.sTimeOutIdInplace=UCF_JsUtil.delayedCall(200,this,"enterViewMode");}UCF_InputField.prototype.onlsblur.call(this,oBrowserEvent);};UCF_InputFieldInplaceEdit.prototype.enterEditMode=function(){if(this.bEnabled&&!this.bReadonly){this.adaptWidth();if(this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_JsUtil.delayedCall(1,this,"selectText");UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldInplaceEdit");}}if(this.sWidth)this.oDomRef.removeAttribute("readOnly");;}; UCF_InputFieldInplaceEdit.prototype.selectText=function(){this.oDomRef.select();};UCF_InputFieldInplaceEdit.prototype.enterViewMode=function(){if(this.bEnabled&&!this.bReadonly){if(this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")==-1)UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldInplaceEdit");UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");}if(this.sWidth)this.oDomRef.setAttribute("readOnly","-1");};UCF_InputFieldInplaceEdit.prototype.onkeydown=function(oBrowserEvent){UCF_InputField.prototype.onkeydown.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly){this.adaptWidth();}};UCF_InputFieldInplaceEdit.prototype.onlsenter=function(oBrowserEvent){UCF_InputField.prototype.onlsenter.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly){this.onlsblur(oBrowserEvent);}};UCF_InputFieldInplaceEdit.prototype.adaptWidth=function(){if(this.sInputPrompt||this.bUsedInSapTable||this.sWidth)return;var oCloneDomRef=document.createElement("span");oCloneDomRef.className=this.oDomRef.className;oCloneDomRef.style.display="block";oCloneDomRef.style.position="absolute";oCloneDomRef.style.top="-1000px";oCloneDomRef.innerHTML=this.oDomRef.value.replace(/ /g,"&nbsp;");document.body.appendChild(oCloneDomRef);var iOffsetWidth=oCloneDomRef.offsetWidth;if(UCF_System.sDevice=="ff1"){iOffsetWidth+=8;}else{ iOffsetWidth+=parseInt(UCF_DomUtil.sGetCurrentStyle(this.oDomRef,"borderWidth"))*2;iOffsetWidth+=parseInt(UCF_DomUtil.sGetCurrentStyle(this.oDomRef,"paddingLeft"));iOffsetWidth+=parseInt(UCF_DomUtil.sGetCurrentStyle(this.oDomRef,"paddingRight"));} iOffsetWidth=Math.max(iOffsetWidth,20); if(this.sWidth){var iMaxWidth=UCF_DomUtil.iConvertAnySizeToPixel(this.sWidth);iOffsetWidth=Math.min(iOffsetWidth,iMaxWidth);}document.body.removeChild(oCloneDomRef);delete oCloneDomRef;this.oDomRef.style.width=iOffsetWidth+"px";};UCF_InputFieldInplaceEdit.prototype.onmouseover=function(oBrowserEvent){UCF_InputField.prototype.onmouseover.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.addClass(this.oDomRef,"lsEdFieldFocus");this.showButton();}};UCF_InputFieldInplaceEdit.prototype.onmouseout=function(oBrowserEvent){UCF_InputField.prototype.onmouseout.call(this,oBrowserEvent);if(this.bEnabled&&!this.bReadonly&&this.oDomRef.className.indexOf("lsEdFieldInplaceEdit")!=-1){UCF_DomUtil.removeClass(this.oDomRef,"lsEdFieldFocus");this.hideButton();}};
 function UCF_TagCloud(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_TagCloud.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_TagCloud.prototype.onlsaccessibility=function(oBrowserEvent){}; UCF_TagCloud.prototype.aAttributeNames=[]; UCF_TagCloud.prototype.aMethodNames=[];  UCF_TagCloud.prototype.setDefaultValues=function(){};
 function UCF_Hotkeys(oDomRef,oLS){this.bInitialized=false;this.mHotkeys={};UCF_Control.apply(this,[oDomRef,oLS]);};UCF_Hotkeys.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Hotkeys.prototype.init=function(){this.createHotkeyMap();this.bInitialized=true;}; UCF_Hotkeys.prototype.createHotkeyMap=function(){var oDomHotkeys=UCF_DomUtil.$(this.sId);if(!this.bInitialized&&oDomHotkeys){var aChildNodes=UCF_DomUtil.childNodes(oDomHotkeys,"SPAN"),oHotkey;for(var i=0;i<aChildNodes.length;i++){oHotkey=new(UCF_ClassLoader.oGetClass("UCF_Hotkey"))(aChildNodes[i]);if(oHotkey)if(!this.mHotkeys[oHotkey.sHotkey])this.mHotkeys[oHotkey.sHotkey]=oHotkey;}return this.mHotkeys;}return null;}; UCF_Hotkeys.prototype.getHotkeyFromEvent=function(oBrowserEvent){var iKey=oBrowserEvent.iKeyCode();if((typeof iKey=="undefined"||iKey==0)&&oBrowserEvent.oDomEvent.type=="help") iKey=UCF_KeyCodes.F1;return this.getHotkey(iKey,oBrowserEvent.bCtrl(),oBrowserEvent.bAlt(),oBrowserEvent.bShift());}; UCF_Hotkeys.prototype.getHotkey=function(iKey,bCtrl,bAlt,bShift){if(!this.bInitialized)this.init();var sHotkey=UCF_JsUtil.sHotkeyValue(iKey,bCtrl,bAlt,bShift);return this.mHotkeys[sHotkey];}; UCF_Hotkeys.prototype.bHandleHotkeyOnClient=function(oHotkey){if(oHotkey&&oHotkey.sProviderId!=""){var oProviderControl=this.oGetControlById(oHotkey.sProviderId,true);if(oProviderControl!=null&&(UCF_JsUtil.bInstanceOf(oProviderControl,"UCF_Link")||UCF_JsUtil.bInstanceOf(oProviderControl,"UCF_ToolbarLink"))){if(oProviderControl.bHasReference){oProviderControl.oDomRef.click();return true;}}}return false;}; UCF_Hotkeys.prototype.aAttributeNames=[]; UCF_Hotkeys.prototype.aMethodNames=[];  UCF_Hotkeys.prototype.setDefaultValues=function(){};
 function UCF_LoadingAnimation(oDomRef,oLS){UCF_LayeredControl.apply(this,[oDomRef,oLS]);this.iAlignment=UCF_LayeredControl.ALIGNMENT.BROWSERCENTER;this.sTimer=null;};UCF_LoadingAnimation.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))(); UCF_LoadingAnimation.prototype.trigger=function(){if(this.sTimer){UCF_JsUtil.clearDelayedCall(this.sTimer);}this.sTimer=UCF_JsUtil.delayedCall(this.iDelay,this,"show");}; UCF_LoadingAnimation.prototype.show=function(){if(this.sTimer){UCF_JsUtil.clearDelayedCall(this.sTimer);}this.open();if(UCF_System.bIs508&&this.oLS.oBrowserWindow.bFocussed){UCF_DomUtil.setTabIndex(this.oDomRef,0);UCF_DomUtil.focusDomElement(this.oDomRef);}}; UCF_LoadingAnimation.prototype.cancel=function(){UCF_JsUtil.clearDelayedCall(this.sTimer);this.sTimer=null;if(UCF_System.bIs508&&this.oLS.oBrowserWindow.bFocussed){UCF_DomUtil.resetTabIndex(this.oDomRef);}this.close();}; UCF_LoadingAnimation.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setText(this.oLS.sGetText("SAPUR_LOADINGANIM"));}; UCF_LoadingAnimation.prototype.aAttributeNames=["iDelay"]; UCF_LoadingAnimation.prototype.aMethodNames=["trigger","show","cancel"];  UCF_LoadingAnimation.prototype.iDelay=2000; UCF_LoadingAnimation.prototype.setDefaultValues=function(){this.iDelay=2000;};
 function UCF_LoadingPlaceHolder(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_LoadingPlaceHolder.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_LoadingPlaceHolder.prototype.initialize=function(){ UCF_JsUtil.delayedCall(0,this,"fireLoad",[this.sId]);}; UCF_LoadingPlaceHolder.prototype.aAttributeNames=["sId"]; UCF_LoadingPlaceHolder.prototype.aMethodNames=[];  UCF_LoadingPlaceHolder.prototype.sId=''; UCF_LoadingPlaceHolder.prototype.setDefaultValues=function(){this.sId='';}; UCF_LoadingPlaceHolder.prototype.fireLoad=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Load)this.oLS.markDirty();this.fireSemanticEvent("LoadingPlaceHolder","Load",mParams);};
 function UCF_PopupTrigger(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PopupTrigger.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PopupTrigger.prototype.onclick=function(oBrowserEvent){if(!this.bHasPopupMenu||!this.bEnabled)return;var oBtn=UCF_DomUtil.$(this.sId+"-btn"),oHidden=UCF_DomUtil.$(this.sId+"-hidden"),oSource=oBrowserEvent.oGetSource(),bIsButton=this.sTriggerIndicator=="BUTTON";if(!bIsButton||(bIsButton&&oSource==oHidden)||(bIsButton&&oSource==oBtn)){this.openMenu(false);this.fireMenuAccess(this.sId,this.sPopupMenuId,false);oBrowserEvent.cancelBubble();}};UCF_PopupTrigger.prototype.onmousedown=function(oBrowserEvent){oBrowserEvent.cancelBubble();}; UCF_PopupTrigger.prototype.onlsshow=function(oBrowserEvent){if(!this.bHasPopupMenu||!this.bEnabled)return;this.openMenu(true);this.fireMenuAccess(this.sId,this.sPopupMenuId,true);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_PopupTrigger.prototype.onmouseover=function(){if(this.sTriggerIndicator=="BUTTON"||!this.bEnabled)return;var oBtn=UCF_DomUtil.$(this.sId+"-btn"),oHidden=UCF_DomUtil.$(this.sId+"-hidden");UCF_DomUtil.addClass(this.oDomRef,"urPopUpTrHover");UCF_DomUtil.addClass(oBtn,"urPopUpTrgInActHover");if(oHidden!=null&&this.bTextOverflow){UCF_DomUtil.addClass(oHidden,"urPopUpTrgInActHover");}}; UCF_PopupTrigger.prototype.onmouseout=function(){if(this.sTriggerIndicator=="BUTTON"||!this.bEnabled)return;var oBtn=UCF_DomUtil.$(this.sId+"-btn");UCF_DomUtil.removeClass(this.oDomRef,"urPopUpTrHover");UCF_DomUtil.removeClass(oBtn,"urPopUpTrgInActHover");if(this.bTextOverflow){var oHidden=UCF_DomUtil.$(this.sId+"-hidden");UCF_DomUtil.removeClass(oHidden,"urPopUpTrgInActHover");}}; UCF_PopupTrigger.prototype.onlsdraghover=function(oBrowserEvent){this.openMenu(false);this.fireMenuAccess(this.sId,this.sPopupMenuId,true);oBrowserEvent.cancelBubble();if(this.oPopupMenu.bIsDropTarget()){this.oPopupMenu.setOpenEventName(oBrowserEvent.sGetName());}}; UCF_PopupTrigger.prototype.openMenu=function(bWithKeyboard,sPopupMenuId){var sMenuId=(sPopupMenuId==null)?this.sPopupMenuId:sPopupMenuId;if(sMenuId==null||UCF_StringUtil.bIsEmpty(sMenuId))return;var oOpenerRef=this.oDomRef;if(this.bTextOverflow){var oHidden=UCF_DomUtil.$(this.sId+"-hidden"),oBtn=UCF_DomUtil.$(this.sId+"-btn");oOpenerRef=(oHidden.offsetTop<0)?oBtn:oHidden;}this.oPopupMenu=this.oLS.oControlFactory.oGetControlById(sMenuId,true);this.oPopupMenu.setOpenerRef(oOpenerRef);this.oPopupMenu.setAutoRefocus(false);this.oPopupMenu.setOpenerId(this.sId);this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oPopupMenu.setUserData(this.sUserData);this.oPopupMenu.open(bWithKeyboard);this.oPopupMenu.attachEvent(this.oPopupMenu.E_EVENTS.Close,this,"onMenuClose");}; UCF_PopupTrigger.prototype.onMenuClose=function(){var oFocusDomRef=UCF_DomUtil.firstChild(this.oDomRef);if(oFocusDomRef==null)oFocusDomRef=this.oDomRef;UCF_DomUtil.focusDomElement(oFocusDomRef);this.oPopupMenu.detachEvent(this.oPopupMenu.E_EVENTS.Close,this);}; UCF_PopupTrigger.prototype.openOnRequest=function(sPopupMenuId,bWithKeyboard){ this.openMenu(bWithKeyboard,sPopupMenuId);}; UCF_PopupTrigger.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setText(UCF_DomUtil.sGetInnerText(this.oDomRef));if(this.sTooltip!="")oAccessibilityHelper.addTooltip(this.sTooltip);oAccessibilityHelper.addTutor("MENU_TUT");}; UCF_PopupTrigger.prototype.aAttributeNames=["sTooltip","bHasPopupMenu","sPopupMenuId","sTriggerIndicator","sUserData","bTextOverflow","bEnabled"]; UCF_PopupTrigger.prototype.aMethodNames=["openOnRequest"];  UCF_PopupTrigger.prototype.sTooltip=''; UCF_PopupTrigger.prototype.bHasPopupMenu=true; UCF_PopupTrigger.prototype.sPopupMenuId=''; UCF_PopupTrigger.prototype.sTriggerIndicator="PERMANENT"; UCF_PopupTrigger.prototype.sUserData=''; UCF_PopupTrigger.prototype.bTextOverflow=false; UCF_PopupTrigger.prototype.bEnabled=true; UCF_PopupTrigger.prototype.setDefaultValues=function(){this.sTooltip='';this.bHasPopupMenu=true;this.sPopupMenuId='';this.sTriggerIndicator="PERMANENT";this.sUserData='';this.bTextOverflow=false;this.bEnabled=true;}; UCF_PopupTrigger.prototype.fireMenuAccess=function(sId,sPopupMenuId,bWithKeyboard){var mParams={Id:sId,PopupMenuId:sPopupMenuId,WithKeyboard:bWithKeyboard};this.fireSemanticEvent("PopupTrigger","MenuAccess",mParams);};
  function UCF_WaitingEventQueue(){UCF_Object.apply(this);this.mQueue=[];this.bProcessingLock=false;this.bRefireLock=false;}UCF_WaitingEventQueue.prototype=new UCF_Object(); UCF_WaitingEventQueue.prototype.oEnqueue=function(oSemanticEvent){var sControlId=oSemanticEvent.mGetParameters()["Id"];var sControlName=oSemanticEvent.sGetControl();var sEventName=oSemanticEvent.sGetName();this.mQueue.push(oSemanticEvent);return oSemanticEvent;}; UCF_WaitingEventQueue.prototype.oDequeue=function(){var oSemanticEvent=this.mQueue.shift();var sControlId=oSemanticEvent.mGetParameters()["Id"];var sControlName=oSemanticEvent.sGetControl();var sEventName=oSemanticEvent.sGetName();return oSemanticEvent;}; UCF_WaitingEventQueue.prototype.iGetLength=function(){return this.mQueue.length;}; UCF_WaitingEventQueue.prototype.reset=function(){this.mQueue=[];}; UCF_WaitingEventQueue.prototype.bIsSyncSubmit=function(oSemanticEvent){var ucfParam=oSemanticEvent.mGetUcfParameters();eClientAction=ucfParam["ClientAction"]||"enqueue";return(eClientAction=="submit");}; UCF_WaitingEventQueue.prototype.bContainsSyncSubmit=function(){for(var i=0;i<this.mQueue.length;i++){if(this.bIsSyncSubmit(this.mQueue[i])){return true;}}return false;}; UCF_WaitingEventQueue.prototype.iIndexOfSyncSubmit=function(){for(var i=0;i<this.mQueue.length;i++){oSEvent=this.mQueue[i];if(this.bIsSyncSubmit(this.mQueue[i])){return i;}}return-1;};  UCF_WaitingEventQueue.prototype.bIsProcessingLock=function(){return this.bProcessingLock;}; UCF_WaitingEventQueue.prototype.setProcessingLock=function(bLock){this.bProcessingLock=bLock;}; UCF_WaitingEventQueue.prototype.bIsRefireLock=function(){return this.bRefireLock;}; UCF_WaitingEventQueue.prototype.setRefireLock=function(bLock){this.bRefireLock=bLock;};
function UCF_SapTableSelectionCell(oDomRef,oTable){UCF_SapTableBaseCell.apply(this,arguments);};UCF_SapTableSelectionCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableBaseCell"))();UCF_SapTableSelectionCell.prototype.setCellState=function(){if(!this.bEnabled)this.oAccessibilityHelper.setEnabled(false);if(this.sCellType=="ROWCREATOR"){this.oAccessibilityHelper.setControlType("ST_RC",[this.sGetRowInfo()]);}else{this.oAccessibilityHelper.setControlType("ST_SC",[this.sGetRowInfo()]);}};UCF_SapTableSelectionCell.prototype.sGetTutorInfo=function(){if(this.oAccessInfo.eAction==this.oTable.ACTION.CELL_SELECT){if(this.bIsSelected||this.bIsSecondarySelected){if(this.bIsDeselectable){return "ST_SC_S_TUT";}}else{if(this.sCellType=="ROWCREATOR"){return "ST_RC_TUT";}else{return "ST_SC_N_TUT";}}}return "";};UCF_SapTableSelectionCell.prototype.sGetColumnInfo=function(){return "";};UCF_SapTableSelectionCell.prototype.eGetSemanticColor=function(){return this.oAccessibilityHelper.E_SEMANTIC.Standard;}; UCF_SapTableSelectionCell.prototype.aAttributeNames=["bIsSelected","bIsSecondarySelected","bEnabled","sCellType","sRowDescription","bIsDeselectable"]; UCF_SapTableSelectionCell.prototype.aMethodNames=[];  UCF_SapTableSelectionCell.prototype.bIsSelected=false; UCF_SapTableSelectionCell.prototype.bIsSecondarySelected=false; UCF_SapTableSelectionCell.prototype.bEnabled=true; UCF_SapTableSelectionCell.prototype.sCellType="TEXT"; UCF_SapTableSelectionCell.prototype.sRowDescription=''; UCF_SapTableSelectionCell.prototype.bIsDeselectable=true; UCF_SapTableSelectionCell.prototype.setDefaultValues=function(){this.bIsSelected=false;this.bIsSecondarySelected=false;this.bEnabled=true;this.sCellType="TEXT";this.sRowDescription='';this.bIsDeselectable=true;};
  function UCF_SplitterRow(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_SplitterRow.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_SplitterRow.prototype.aAttributeNames=["iHeight","sCollapseDirection"]; UCF_SplitterRow.prototype.aMethodNames=[];  UCF_SplitterRow.prototype.iHeight=-1; UCF_SplitterRow.prototype.sCollapseDirection="NONE"; UCF_SplitterRow.prototype.setDefaultValues=function(){this.iHeight=-1;this.sCollapseDirection="NONE";};
 function UCF_ThresholdPoint(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ThresholdPoint.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ThresholdPoint.prototype.aAttributeNames=["bShowAsMarker","iPosition","sSemantic","sTooltip"]; UCF_ThresholdPoint.prototype.aMethodNames=[];  UCF_ThresholdPoint.prototype.bShowAsMarker=false; UCF_ThresholdPoint.prototype.iPosition=0; UCF_ThresholdPoint.prototype.sSemantic="GOODVALUE_DARK"; UCF_ThresholdPoint.prototype.sTooltip='threshold tooltip'; UCF_ThresholdPoint.prototype.setDefaultValues=function(){this.bShowAsMarker=false;this.iPosition=0;this.sSemantic="GOODVALUE_DARK";this.sTooltip='threshold tooltip';};
 function UCF_RoadMap(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oScrollDomRef=UCF_DomUtil.$(this.sId+'-scrl');this.oItemNavigation=new(UCF_ClassLoader.oGetClass("UCF_ItemNavigation"))();this.addDelegate(this.oItemNavigation);this.createItems();this.oItemNavigation.attachEvent(this.oItemNavigation.E_EVENTS.Select,this,"onItemSelect");this.oItemNavigation.setFocusedIndex(this.oItemNavigation.iFocusedIndex);this.oItemNavigation.bIgnoreFocus=true;UCF_DomUtil.setTabIndex(this.oDomRef,-1);};UCF_RoadMap.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_RoadMap.prototype.initialize=function(){if(this.aItems.length==0)return;if(this.iFirstVisibleItemIdx>0){this.oScrollDomRef.scrollTop=this.aItems[this.iFirstVisibleItemIdx].oDomRef.offsetTop;}else if(this.iFirstVisibleItemIdx<0){if(this.oSelected!=null){this.oScrollDomRef.scrollTop=this.oSelected.oDomRef.offsetTop;this.iFirstVisibleItemIdx=this.getFirstVisible().iIndex;}}this.setMoreIndicator();this.attachBrowserEvent("resize",this.oScrollDomRef);this.attachBrowserEvent("scroll",this.oScrollDomRef);}; UCF_RoadMap.prototype.onresize=function(oBrowserEvent){if(this.sTimeOutId!=null){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(0,this,"onAfterResize");oBrowserEvent.cancelBubble();};UCF_RoadMap.prototype.onAfterResize=function(){if(this.iControlWidth!=null&&this.iControlWidth==this.oDomRef.offsetWidth)return;if(this.iFirstVisibleItemIdx==-1)this.iFirstVisibleItemIdx=this.getFirstVisible().iIndex;this.oScrollDomRef.scrollTop=this.aItems[this.iFirstVisibleItemIdx].oDomRef.offsetTop;this.setMoreIndicator();this.iControlWidth=this.oDomRef.offsetWidth;}; UCF_RoadMap.prototype.onscroll=function(oBrowserEvent){var oSource=UCF_DomUtil.oGetActiveElement(),oItem=UCF_DomUtil.oGetCTElement(oSource);if(oSource.id.indexOf("-ma")<0&&oItem&&oItem.getAttribute("ct")=="RMI"){this.setMoreIndicator();this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIndex].sId);}}; UCF_RoadMap.prototype.onclick=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl(),oSource=oBrowserEvent.oGetSource(),sSourceId=oSource.id;if(this.bScroll){if(sSourceId&&sSourceId.indexOf("-start")>-1)this.previousPage();else if(sSourceId&&sSourceId.indexOf("-ma")>-1)this.nextPage();}else{if(this.sStartingPoint=="MORE"&&sSourceId&&sSourceId.indexOf("-start")>-1)this.firePagePrevious(this.sId);else if(this.sEndPoint=="MORE"&&sSourceId&&sSourceId.indexOf("-end")>-1)this.firePageNext(this.sId);}}; UCF_RoadMap.prototype.previousPage=function(){var oBtn=UCF_DomUtil.$(this.sId+"-start");if(oBtn.className=="lsRMicoStrart")return;this.oScrollDomRef.scrollTop-=this.oScrollDomRef.offsetHeight;this.setMoreIndicator();this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIndex].sId);}; UCF_RoadMap.prototype.nextPage=function(){this.oScrollDomRef.scrollTop+=this.oScrollDomRef.offsetHeight;this.setMoreIndicator();this.fireScroll(this.sId,this.aItems[this.iFirstVisibleItemIndex].sId);}; UCF_RoadMap.prototype.setMoreIndicator=function(){var iFirst=this.iFirstVisibleItemIdx;var oFirst=(iFirst==-1||this.aItems[iFirst].oDomRef.offsetTop!=this.oScrollDomRef.scrollTop)?this.getFirstVisible():this.aItems[this.iFirstVisibleItemIdx];var oMoreStart=UCF_DomUtil.$(this.sId+"-start");this.iFirstVisibleItemIndex=oFirst.iIndex;if(this.oScrollDomRef.scrollTop>0){if(oFirst.sStepType=="SUBSTEP"||oFirst.sStepType=="ROUNDTRIPEND")oMoreStart.className="lsRMicoMBsub";else oMoreStart.className="lsRMicoMB";}else{oMoreStart.className="lsRMicoStrart";}if(this.oLast!=null&&this.oLast.iIndex<this.aItems.length-1){var oMoreAfter=UCF_DomUtil.$(this.oLast.sId+"-ma");UCF_DomUtil.removeClass(oMoreAfter,"lsRMicoMA2");}var oLast=this.getLastVisible();if(oLast.iIndex<this.aItems.length-1){var oMoreAfter=UCF_DomUtil.$(oLast.sId+"-ma");UCF_DomUtil.addClass(oMoreAfter,"lsRMicoMA2");}this.oLast=oLast;}; UCF_RoadMap.prototype.getFirstVisible=function(){for(i=0;i<this.aItems.length;i++){if(this.oScrollDomRef.scrollTop==this.aItems[i].oDomRef.offsetTop)return this.aItems[i];}}; UCF_RoadMap.prototype.getLastVisible=function(){for(i=this.aItems.length-1;i>=0;i--){if(this.oScrollDomRef.scrollTop==this.aItems[i].oDomRef.offsetTop)return this.aItems[i];}}; UCF_RoadMap.prototype.setSelectedDesign=function(oNewStep){if(oNewStep==null||oNewStep.sStepDesign!="DEFAULT"||!this.bClientSelect||oNewStep.bIsInteractive==false)return;var aNewStep=(this.bScroll)?oNewStep.oDomRef.firstChild.childNodes:oNewStep.oDomRef.childNodes;if(aNewStep[1].className.indexOf("Hover")>-1)aNewStep[1].className=aNewStep[1].className.split("Hover")[0];aNewStep[0].className=aNewStep[0].className+"Sel";aNewStep[1].className=aNewStep[1].className+"Sel";if(oNewStep.sStepType.indexOf("ROUNDTRIP")>-1){var oRoundTripImg=UCF_DomUtil.$(oNewStep.sId+"-rtImg");oRoundTripImg.className=oRoundTripImg.className+"Sel";}if(this.oSelected!=null){var aOldStep=(this.bScroll)?this.oSelected.oDomRef.firstChild.childNodes:this.oSelected.oDomRef.childNodes;aOldStep[0].className=aOldStep[0].className.split("Sel")[0];aOldStep[1].className=aOldStep[1].className.split("Sel")[0];if(this.oSelected.sStepType.indexOf("ROUNDTRIP")>-1){var oRoundTripImg=UCF_DomUtil.$(this.oSelected.sId+"-rtImg");oRoundTripImg.className=oRoundTripImg.className.split("Sel")[0];}this.oSelected.sStepDesign="DEFAULT";}this.oSelected=oNewStep;oNewStep.sStepDesign="SELECTED";if(this.bScroll)this.setMoreIndicator();}; UCF_RoadMap.prototype.onItemSelect=function(oEvent){var oBrowserEvent=oEvent.oGetParam("oBrowserEvent"),sSourceId=oBrowserEvent.oGetSource().getAttribute("id");if(sSourceId&&sSourceId.indexOf("-ma")>-1)return;var oItem=oEvent.oGetParam("oItem");if(UCF_JsUtil.bInstanceOf(oItem,"UCF_RoadMapItem")){if(oItem.sStepDesign=="DEFAULT"){this.fireSelect(this.sId,oItem.sId);this.setSelectedDesign(oItem);}if(UCF_System.bIs508&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE){UCF_DomUtil.refocusDomElement(oItem.oDomRef);}}}; UCF_RoadMap.prototype.createItems=function(){var aDomItems=this.oScrollDomRef.childNodes;this.oSelected=null;this.aItems=new Array();for(var i=0;i<aDomItems.length;i++){var oItem=this.oLS.oControlFactory.oGetControlByDomRef(aDomItems[i],true);if(oItem==null)continue;if(oItem.sStepDesign=="SELECTED")this.oSelected=oItem;oItem.iIndex=this.aItems.length;this.aItems.push(oItem);if(oItem.sStepDesign!="DISABLED"||window.UCF_System.bIs508)this.oItemNavigation.addItem(oItem,(oItem.sStepDesign=="SELECTED"));}}; UCF_RoadMap.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSourceControl();if(!UCF_JsUtil.bInstanceOf(oSource,"UCF_RoadMapItem"))return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,sCt="RM_STN";var sText=oSource.sStepDescription;oAccessibilityHelper.setText(sText);switch(oSource.sStepType){case "ROUNDTRIPCLOSED":sCt="RM_RTCLO";break;case "ROUNDTRIPSTART":sCt="RM_RTSTR";break;case "ROUNDTRIPEND":sCt="RM_RTEND";break;case "SUBSTEP":sCt="RM_SUB";break;}oAccessibilityHelper.setParentControlType("RM");oAccessibilityHelper.setParentTooltip(this.sTooltip);oAccessibilityHelper.setParentText(this.sAccessibilityDescription);oAccessibilityHelper.setControlType(sCt);oAccessibilityHelper.setItemCount(this.oItemNavigation.aItems.length);oAccessibilityHelper.setItemIndex(oSource.iIndex+1);oAccessibilityHelper.setEnabled(oSource.sStepDesign!="DISABLED");oAccessibilityHelper.setSelected(oSource.sStepDesign=="SELECTED");oAccessibilityHelper.addTooltip(oSource.sTooltip);oAccessibilityHelper.addTutor("LRNAV_TUT");if(oSource.bIsInteractive)oAccessibilityHelper.addEnabledTutor("SELECT_TUT",oSource.sStepDesign=="DEFAULT");}; UCF_RoadMap.prototype.destroy=function(){if(!this.bScroll)return;UCF_Control.prototype.destroy.apply(this,arguments);this.detachBrowserEvent("resize",this.oDomRef);this.detachBrowserEvent("scroll",this.oDomRef);}; UCF_RoadMap.prototype.aAttributeNames=["sAccessibilityDescription","sStartingPoint","sEndPoint","bScroll","iFirstVisibleItemIdx","sTooltip","bClientSelect"]; UCF_RoadMap.prototype.aMethodNames=[];  UCF_RoadMap.prototype.sAccessibilityDescription=''; UCF_RoadMap.prototype.sStartingPoint="DEFAULT"; UCF_RoadMap.prototype.sEndPoint="DEFAULT"; UCF_RoadMap.prototype.bScroll=true; UCF_RoadMap.prototype.iFirstVisibleItemIdx=-1; UCF_RoadMap.prototype.sTooltip=''; UCF_RoadMap.prototype.bClientSelect=true; UCF_RoadMap.prototype.setDefaultValues=function(){this.sAccessibilityDescription='';this.sStartingPoint="DEFAULT";this.sEndPoint="DEFAULT";this.bScroll=true;this.iFirstVisibleItemIdx=-1;this.sTooltip='';this.bClientSelect=true;}; UCF_RoadMap.prototype.fireSelect=function(sId,sItemId){var mParams={Id:sId,ItemId:sItemId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Select)this.oLS.markDirty();this.fireSemanticEvent("RoadMap","Select",mParams);}; UCF_RoadMap.prototype.fireScroll=function(sId,sFirstVisibleItemId){var mParams={Id:sId,FirstVisibleItemId:sFirstVisibleItemId};this.fireSemanticEvent("RoadMap","Scroll",mParams);}; UCF_RoadMap.prototype.firePagePrevious=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.PagePrevious)this.oLS.markDirty();this.fireSemanticEvent("RoadMap","PagePrevious",mParams);}; UCF_RoadMap.prototype.firePageNext=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.PageNext)this.oLS.markDirty();this.fireSemanticEvent("RoadMap","PageNext",mParams);};
 function UCF_DataTip(oDomRef,oLS){UCF_LayeredControl.apply(this,[oDomRef,oLS]); this.bIsFirstFocus=true; this.bShowOnActivate=true; this.oHoverDomRef=null; this.sTimeOutId=""; this.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT); this.iOverlap=1;};UCF_DataTip.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))();UCF_DataTip.bIsAnyOpened=false; UCF_DataTip.prototype.render=function(sId,oLS){var oDiv=document.createElement("DIV");oDiv.style.position="absolute";oDiv.setAttribute("id",sId+"-dtip");oDiv.style.top="-5000";oDiv.style.display="block";oDiv.style.width="200px";oDiv.setAttribute("ct","DT");oDiv.setAttribute("lsdata","{}");oDiv.setAttribute("lsevents","{}");oDiv.innerHTML="<div class=\"urDataTipStd urDataTipTxt\" style=\"display:none\"><img height=\"14\" width=\"14\" style=\"float:left\" src=\""+UCF_System.sExternalThemeRoot+"/common/1x1.gif\" class=\"urDataTipImgError\" alt=\"\">Text</div><div class=\"urDataTipStd urDataTipTxt\" style=\"display:none;border-top:none\">Explanation Text</div>";oLS.oGetRootRef().appendChild(oDiv);this.connectToDom(oDiv);}; UCF_DataTip.prototype.remove=function(){UCF_DomUtil.removeFromDom(this.oDomRef);}; UCF_DataTip.prototype.onlsfocus=function(oBrowserEvent){ if(!this.bShowOnActivate||(!this.sText&&!this.sExplanationText))return; if((this.bAutoShowOnFirstFocus&&this.bIsFirstFocus)||this.bAutoShowOnFocus){ UCF_JsUtil.delayedCall(10,this,"open");this.bIsFirstFocus=false;}}; UCF_DataTip.prototype.onlshotkey=function(oBrowserEvent){ var iKeyCode=oBrowserEvent.iKeyCode();if(iKeyCode==UCF_KeyCodes.I&&oBrowserEvent.bCtrl()&&!oBrowserEvent.bAlt()&&oBrowserEvent.bShift()){if(this.bOpened)this.close();else this.open(true);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_DataTip.prototype.onlsescape=function(oBrowserEvent){if(this.bOpened){this.close();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_DataTip.prototype.onlsblur=function(oBrowserEvent){this.close();}; UCF_DataTip.prototype.onmouseover=function(oBrowserEvent){if(!this.oHoverDomRef)return;var oSource=oBrowserEvent.oGetSource();if(!this.bOpened&&this.oHoverDomRef&&UCF_DomUtil.bContains(this.oHoverDomRef,oSource)&&this.oHoverDomRefExclude!=oSource){if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(400,this,"open",[true,true]);}}; UCF_DataTip.prototype.onmouseout=function(oBrowserEvent){if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}if(this.oHoverDomRef&&this.bOpendedWithMouse){this.bOpendedWithMouse=false;this.close();}}; UCF_DataTip.prototype.open=function(bWithoutCloseTimeout,bOpendedWithMouse){ if(UCF_DataTip.bIsAnyOpened)return;if(this.bInvalidated&&!this.sExplanationText)return; if((!this.sText||this.sText=="")&&(!this.sExplanationText||this.sExplanationText==""))return;this.oLS.attachEvent(this.oLS.E_EVENTS.Lock,this,"close");this.openBase();  UCF_DataTip.bIsAnyOpened=true;this.bOpendedWithMouse=bOpendedWithMouse;if(this.iAutoHideTimeout>0&&!bWithoutCloseTimeout){this.sTimerId=UCF_JsUtil.delayedCall(this.iAutoHideTimeout*1000,this,"close");}}; UCF_DataTip.prototype.close=function(){ this.closeBase();if(UCF_DataTip.bIsAnyOpened){UCF_DataTip.bIsAnyOpened=false;}if(this.sTimeOutId){ UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.oLS.detachEvent(this.oLS.E_EVENTS.Lock,this,"close");UCF_JsUtil.clearDelayedCall(this.sTimerId);}; UCF_DataTip.prototype.hideExplanation=function(){if(this.sExplanationText){this.oDomRef.lastChild.style.display="none";}}; UCF_DataTip.prototype.showExplanation=function(){if(this.sExplanationText){this.oDomRef.lastChild.style.display="block";}}; UCF_DataTip.prototype.fadeIn=function(){var iDelay=600;if(this.sText&&this.sText.length>20){iDelay=this.sText.length*30;}UCF_JsUtil.delayedCall(iDelay,this,"fadeOut");this.open();this.oRootRef.style.filter="alpha(opacity=0)";var oAnim=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oRootRef,200);oAnim.addStyleChange("filter","alpha(opacity=",")",10,100,oAnim.M_TRANSITIONS.Linear);oAnim.play();}; UCF_DataTip.prototype.fadeOut=function(){this.close();}; UCF_DataTip.prototype.setHoverDomRef=function(oHoverDomRef){this.oHoverDomRef=oHoverDomRef;}; UCF_DataTip.prototype.setHoverDomRefExcluded=function(oHoverDomRefExcluded){this.oHoverDomRefExcluded=oHoverDomRefExcluded;}; UCF_DataTip.prototype.setText=function(sText){ if(this.oDomRef.firstChild.style.display=="none"){this.oDomRef.firstChild.style.display="block";}this.oDomRef.firstChild.lastChild.nodeValue=sText;this.sText=sText;}; UCF_DataTip.prototype.setType=function(sType){this.setInvalidated(false);var oImg=this.oDomRef.firstChild.firstChild;this.sType=sType;if(!oImg||oImg.tagName!="IMG")return;switch(sType){case "ERROR":UCF_DomUtil.setClass(oImg,"urDataTipImgError");break;case "OK":UCF_DomUtil.setClass(oImg,"urDataTipImgOk");break;case "WARNING":UCF_DomUtil.setClass(oImg,"urDataTipImgWarning");break;}}; UCF_DataTip.prototype.setInvalidated=function(bInvalidated){if(this.sText=="")return;var oText=this.oDomRef.firstChild,oImg=this.oDomRef.firstChild.firstChild;if(bInvalidated){oText.style.color="#999";if(oImg.nodeType==1){if(oImg.style.filter==""){oImg.style.filter="alpha(opacity=30)";}else{oImg.style.opacity="0.4";}}this.bInvalidated=true;}else{oText.style.color="";if(oImg.nodeType==1){if(oImg.style.filter){oImg.style.filter="";}else{oImg.style.opacity="";}}this.bInvalidated=false;}}; UCF_DataTip.prototype.aAttributeNames=["sText","sType","sExplanationText","bAutoShowOnFocus","bAutoShowOnFirstFocus","iAutoHideTimeout"]; UCF_DataTip.prototype.aMethodNames=[];  UCF_DataTip.prototype.sText=''; UCF_DataTip.prototype.sType="TEXT"; UCF_DataTip.prototype.sExplanationText=''; UCF_DataTip.prototype.bAutoShowOnFocus=true; UCF_DataTip.prototype.bAutoShowOnFirstFocus=false; UCF_DataTip.prototype.iAutoHideTimeout=0; UCF_DataTip.prototype.setDefaultValues=function(){this.sText='';this.sType="TEXT";this.sExplanationText='';this.bAutoShowOnFocus=true;this.bAutoShowOnFirstFocus=false;this.iAutoHideTimeout=0;};
 function UCF_MeltingGroup(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_MeltingGroup.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_MeltingGroup.prototype.focus=function(){if(UCF_System.bIs508){UCF_DomUtil.focusDomElement(this.oFocusDomRef);}else{ var oControl=this.oGetFirstFocusableChild();if(oControl&&oControl.oFocusDomRef)UCF_DomUtil.focusDomElement(oControl.oFocusDomRef);}}; UCF_MeltingGroup.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_MeltingGroup.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_MeltingGroup.prototype.onlsaccessibility=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(oSource.getAttribute("tp")=="END"){oAccessibilityHelper.setControlType("G_END");}else{oAccessibilityHelper.addTooltip(this.sTooltip); if(!this.sAccessibilityDescription||this.sAccessibilityDescription==""){oAccessibilityHelper.setLabel(oAccessibilityHelper.sGetLabelText(this.sId));}else{oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);}oAccessibilityHelper.setAccessibilityDescription(this.sAccessibilityDescription);oAccessibilityHelper.setControlType("MG");oAccessibilityHelper.addTutor("GROUP_TUT");}}; UCF_MeltingGroup.prototype.aAttributeNames=["sAccessibilityDescription","sTooltip"]; UCF_MeltingGroup.prototype.aMethodNames=[];  UCF_MeltingGroup.prototype.sAccessibilityDescription=''; UCF_MeltingGroup.prototype.sTooltip=''; UCF_MeltingGroup.prototype.setDefaultValues=function(){this.sAccessibilityDescription='';this.sTooltip='';};
 function UCF_DatePicker(oDomRef,oLS,sId){UCF_Control.apply(this,arguments); this.bIncludeWeek=true;this.bEnabled=true;this.oSelectedDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();this.oStartDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();this.oStartDate.setDate(1);this.aDays=new Array();this.oConnectedControl=null;this.bIncludeWeek=true;var oDomRef=this.oCreateDom();oLS.oGetRootRef().appendChild(oDomRef);this.connectToDom(oDomRef);this.bReadOnce=false;this.sDateFormat="DEFAULT";UCF_LayeredControl.apply(this,[oDomRef,oLS]);};UCF_DatePicker.prototype=new(UCF_ClassLoader.oGetClass("UCF_LayeredControl"))(); UCF_DatePicker.prototype.connectToDom=function(oDomRef){UCF_LayeredControl.prototype.connectToDom.apply(this,arguments);}; UCF_DatePicker.prototype.oCreateDom=function(){var oDiv=document.createElement("DIV");oDiv.setAttribute("ct","DatePicker");oDiv.setAttribute("id",this.sId);oDiv.style.position="absolute";oDiv.style.width="170px";oDiv.style.top="-1000";return oDiv;}; UCF_DatePicker.prototype.E_EVENTS={Close:0,Select:1}; UCF_DatePicker.prototype.setConnectedControl=function(oControl){this.oConnectedControl=oControl;}; UCF_DatePicker.prototype.setSelectedDate=function(oSelectedDate){if(oSelectedDate&&(oSelectedDate.iGetYear()>9990||oSelectedDate.iGetYear()<10))this.oSelectedDate=null;else this.oSelectedDate=oSelectedDate;}; UCF_DatePicker.prototype.oGetSelectedDate=function(){return this.oSelectedDate;}; UCF_DatePicker.prototype.setStartDate=function(oStartDate){if(oStartDate.iGetYear()>9990||oStartDate.iGetYear()<10||isNaN(oStartDate.iGetYear()))this.oStartDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();else this.oStartDate=oStartDate;this.oStartDate.setDate(1); this.setIncludeWeek(this.oStartDate.iGetYear()>100);}; UCF_DatePicker.prototype.setIncludeWeek=function(bIncludeWeek){this.bIncludeWeek=bIncludeWeek;}; UCF_DatePicker.prototype.open=function(){var oWindow=this.oLS.oBrowserWindow;oWindow.attachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent");this.bOpen=true;this.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMLEFT);this.setOverlap(1);this.setOpenerRef(this.oConnectedControl.oDomRef);this.render();this.openBase();this.bReadOnce=true;}; UCF_DatePicker.prototype.close=function(){if(!this.bOpen)return; var oWindow=this.oLS.oBrowserWindow;oWindow.detachEvent(oWindow.E_EVENTS.AnyEvent,this,"onAnyEvent");UCF_DomUtil.setTabIndex(this.oDomRef,-1); this.bOpen=false;this.closeBase();this.bReadOnce=true;}; UCF_DatePicker.prototype.setEnabled=function(bEnabled){this.bEnabled=bEnabled;}; UCF_DatePicker.prototype.onAnyEvent=function(oEvent){var oBrowserEvent=oEvent.oGetParam("oBrowserEvent");var oSource=oBrowserEvent.oGetSource();var oSourceRoot=oBrowserEvent.oGetSourceRoot(); if(oBrowserEvent.sGetName()=="click"&&oSourceRoot!=this.oDomRef&&oSource!=this.oConnectedControl.oHelpButtonRef){this.close();if(oSource!=this.oConnectedControl.oDomRef){this.oConnectedControl.bNoBlur=false;this.oConnectedControl.onlsblur(oBrowserEvent);}}else if(oBrowserEvent.sGetName()=="lsfocuslost"&&UCF_System.sDevice!="sf3"&&UCF_System.sDevice!="ff1"){this.close();this.oConnectedControl.bNoBlur=false;this.oConnectedControl.onlsblur(oBrowserEvent);}}; UCF_DatePicker.prototype.onclick=function(oBrowserEvent){var oDateDomRef=oBrowserEvent.oSource;var oSelectedDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))();if(oDateDomRef.tagName=="TD")oDateDomRef=oDateDomRef.firstChild;var iDateValue=parseInt(oDateDomRef.getAttribute("date")),sGoto=oDateDomRef.getAttribute("goto");if(!isNaN(iDateValue)){oSelectedDate.setTime(iDateValue);this.fireEvent(this.E_EVENTS.Select,{date:oSelectedDate});this.close();}else if(sGoto){this[sGoto]();}else{if(this.aDays[this.iCurrentDay]){UCF_DomUtil.focusDomElement(this.aDays[this.iCurrentDay]);}}oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlsleft=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var iCurrentDay=this.iGetDayFromSource(oSource);var iPreviousDay=iCurrentDay-1;if(iPreviousDay<0){if(this.oStartDate.iGetYear()==1&&this.oStartDate.iGetMonth()==0){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}this.gotoPreviousMonth();iPreviousDay=this.aDays.length-1;}else{UCF_DomUtil.setTabIndex(this.aDays[iCurrentDay],-1);}UCF_DomUtil.setTabIndex(this.aDays[iPreviousDay],0);UCF_DomUtil.focusDomElement(this.aDays[iPreviousDay]);this.iCurrentDay=iPreviousDay;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlsright=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var iCurrentDay=this.iGetDayFromSource(oSource);var iNextDay=iCurrentDay+1;if(iNextDay>=this.aDays.length){if(this.oStartDate.iGetYear()==9999&&this.oStartDate.iGetMonth()==11){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}this.gotoNextMonth();iNextDay=0;}else{UCF_DomUtil.setTabIndex(this.aDays[iCurrentDay],-1);}UCF_DomUtil.setTabIndex(this.aDays[iNextDay],0);UCF_DomUtil.focusDomElement(this.aDays[iNextDay]);this.iCurrentDay=iNextDay;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlshome=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),iCurrentDay=this.iGetDayFromSource(oSource),iNewIndex=iCurrentDay-oSource.parentNode.cellIndex+1;while(iNewIndex<0)iNewIndex++;UCF_DomUtil.setTabIndex(this.aDays[iNewIndex],0);UCF_DomUtil.focusDomElement(this.aDays[iNewIndex]);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlsend=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),iCurrentDay=this.iGetDayFromSource(oSource),iNewIndex=iCurrentDay+(oSource.parentNode.parentNode.childNodes.length-1-oSource.parentNode.cellIndex);while(iNewIndex>this.aDays.length-1)iNewIndex--;UCF_DomUtil.setTabIndex(this.aDays[iNewIndex],0);UCF_DomUtil.focusDomElement(this.aDays[iNewIndex]);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlsup=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource(),iCurrentDay=this.iGetDayFromSource(oSource),iPreviousWeek=iCurrentDay-7;if(iPreviousWeek<0){if(this.oStartDate.iGetYear()==1&&this.oStartDate.iGetMonth()==0){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}this.gotoPreviousMonth();iPreviousWeek=this.aDays.length+iPreviousWeek;}else{UCF_DomUtil.setTabIndex(this.aDays[iCurrentDay],-1);}UCF_DomUtil.setTabIndex(this.aDays[iPreviousWeek],0);UCF_DomUtil.focusDomElement(this.aDays[iPreviousWeek]);this.iCurrentDay=iPreviousWeek;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onlsdown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var iCurrentDay=this.iGetDayFromSource(oSource);var iNextWeek=iCurrentDay+7;if(iNextWeek>=this.aDays.length){if(this.oStartDate.iGetYear()==9999&&this.oStartDate.iGetMonth()==11){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();return;}iNextWeek=iNextWeek-this.aDays.length;this.gotoNextMonth();}else{UCF_DomUtil.setTabIndex(this.aDays[iCurrentDay],-1);}UCF_DomUtil.setTabIndex(this.aDays[iNextWeek],0);UCF_DomUtil.focusDomElement(this.aDays[iNextWeek]);this.iCurrentDay=iNextWeek;oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}; UCF_DatePicker.prototype.onkeydown=function(oBrowserEvent){var iKeyCode=oBrowserEvent.iKeyCode();var bShift=oBrowserEvent.bShift();var bAlt=oBrowserEvent.bAlt();if(iKeyCode==UCF_KeyCodes.TAB){UCF_DomUtil.focusDomElement(this.oConnectedControl);this.close();}else if(iKeyCode==UCF_KeyCodes.ESCAPE||iKeyCode==UCF_KeyCodes.F4||(iKeyCode==UCF_KeyCodes.ARROW_UP&&bAlt)){UCF_DomUtil.focusDomElement(this.oConnectedControl);this.close();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.PAGE_DOWN&&!bShift){this.gotoNextMonth();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.PAGE_DOWN&&bShift){this.gotoNextYear();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.PAGE_UP&&!bShift){this.gotoPreviousMonth();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.PAGE_UP&&bShift){this.gotoPreviousYear();oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}else if(iKeyCode==UCF_KeyCodes.ENTER||iKeyCode==UCF_KeyCodes.SPACE){this.onclick(oBrowserEvent);oBrowserEvent.cancel();oBrowserEvent.cancelBubble();}}; UCF_DatePicker.prototype.render=function(){var oDomRef=this.oDomRef,mDatePicker=new Array(),iMonthNumber=this.oStartDate.iGetMonth(),iYear=this.oStartDate.iGetYear();oRealStartDate=this.oStartDate.oGetStartOfWeekDate(),iDaynumber=this.oStartDate.iGetFirstDayOfWeek(),iCurrentTime=new(UCF_ClassLoader.oGetClass("UCF_Date"))().iGetTime();if(oRealStartDate.iGetTime()==this.oStartDate.iGetTime())oRealStartDate.addDays(-7);var oCalcDate=oRealStartDate;mDatePicker.push("<div class=urCalPicWhl style=\"width:170px\">"); mDatePicker.push("<table cellpadding=0 cellspacing=0 border=0 style=\";width:100%\">");mDatePicker.push("<tr>");var sPrevYearClass=UCF_System.bIsRTL?"lsCalArrNextYear":"lsCalArrPrevYear",sNextYearClass=UCF_System.bIsRTL?"lsCalArrPrevYear":"lsCalArrNextYear";     if(iYear==1){mDatePicker.push("<th style=\"border:none;width:12\" class="+sPrevYearClass+"Dsbl>&nbsp;</th>");}else{mDatePicker.push("<th style=\"border:none;width:12\" goto=\"gotoPreviousYear\" class="+sPrevYearClass+" title=\""+this.oLS.sGetText("SAPUR_DN_YPREV")+"\">&nbsp;</th>");} if(iYear==1&&iMonthNumber==0){mDatePicker.push("<th style=\"border:none;width:12\" class=urCalArrPrevDsbl>&nbsp;</th>");}else{mDatePicker.push("<th style=\"border:none;width:12\" goto=\"gotoPreviousMonth\" class=urCalArrPrev title=\""+this.oLS.sGetText("SAPUR_DN_PREV")+"\">&nbsp;</th>");}mDatePicker.push("<th style=\"border:none;width:100\" colspan=4 class=\"urTxtStd urCalHdr\" nowrap align=center>");mDatePicker.push(this.oStartDate.sGetMonthTitle());mDatePicker.push("</th>"); if(iYear==9999&&iMonthNumber==11){mDatePicker.push("<th style=\"border:none;width:12\" class=urCalArrNextDsbl>&nbsp;</th>");}else{mDatePicker.push("<th style=\"border:none;width:12\" goto=\"gotoNextMonth\" class=urCalArrNext title=\""+this.oLS.sGetText("SAPUR_DN_NEXT")+"\">&nbsp;</th>");} if(iYear==9999){mDatePicker.push("<th style=\"border:none;width:12\" class="+sNextYearClass+"Dsbl>&nbsp;</th>");}else{mDatePicker.push("<th style=\"border:none;width:12\" goto=\"gotoNextYear\" class="+sNextYearClass+" title=\""+this.oLS.sGetText("SAPUR_DN_YNEXT")+"\">&nbsp;</th>");}mDatePicker.push("</tr>");mDatePicker.push("</table>");mDatePicker.push("<table cellpadding=0 cellspacing=0 border=0 style=\"width:100%\">"); mDatePicker.push("<tr class=\"urCalRow\">");if(this.bIncludeWeek)mDatePicker.push("<th>&nbsp;</th>");for(var n=0;n<7;n++){mDatePicker.push("<th class=\"urCalName\" style=\"padding:2\">");mDatePicker.push(UCF_Date.aDayNamesAbbrev[iDaynumber]);mDatePicker.push("</th>");iDaynumber++;if(iDaynumber>6)iDaynumber=0;}mDatePicker.push("</tr>"); for(var iWeek=0;iWeek<6;iWeek++){mDatePicker.push("<tr class=\"urCalRow\">");if(this.bIncludeWeek){mDatePicker.push("<th class=urCalNum style=\"padding:2px;\">");var iWeekNumber=oCalcDate.iGetWeek();if(iWeekNumber>0)mDatePicker.push(iWeekNumber);else mDatePicker.push("&nbsp;");mDatePicker.push("</th>");}for(var iDay=0;iDay<7;iDay++){mDatePicker.push("<td"); mDatePicker.push(" class=\"");if(oCalcDate.iGetMonth()!=this.oStartDate.iGetMonth()){mDatePicker.push(" urCalIna");}mDatePicker.push("\">");mDatePicker.push("<div");if(oCalcDate.iGetYear()>-1&&oCalcDate.iGetYear()<10000){mDatePicker.push(" date=\""+oCalcDate.iGetTime()+"\"");}mDatePicker.push(" style=\"");if(oCalcDate.iGetMonth()==this.oStartDate.iGetMonth()){mDatePicker.push("cursor:hand;");}if(oCalcDate.iGetTime()!=iCurrentTime){mDatePicker.push("padding:2px;");}mDatePicker.push("\"");mDatePicker.push(" class=\"");if(this.oSelectedDate&&oCalcDate.iGetTime()==this.oSelectedDate.iGetTime()&&oCalcDate.iGetMonth()==this.oStartDate.iGetMonth()){mDatePicker.push(" urMnuRowOn");}if(oCalcDate.iGetTime()==iCurrentTime){mDatePicker.push(" urToday");}mDatePicker.push("\"");mDatePicker.push(">");mDatePicker.push(oCalcDate.iGetDate());mDatePicker.push("</td>");oCalcDate.addDays(1);}mDatePicker.push("</tr>");}mDatePicker.push("</table>");mDatePicker.push("</div");this.oDomRef.innerHTML=mDatePicker.join(""); this.aDays=new Array();var aDays=this.oDomRef.getElementsByTagName("TD"); var iSelectedDay=-1;var iToday=-1;for(var i=0;i<aDays.length;i++){if(aDays[i].className.indexOf("urCalIna")>=0)continue;var oDay=aDays[i].firstChild;this.aDays.push(oDay);if(oDay.className.indexOf("urToday")>=0)iToday=this.aDays.length-1;if(oDay.className.indexOf("urMnuRowOn")>=0)iSelectedDay=this.aDays.length-1;}if(!this.bOpened&&iSelectedDay>-1){this.iCurrentDay=iSelectedDay;}else if(!this.bOpened&&iToday>-1){this.iCurrentDay=iToday;}else if(!this.bOpened){this.iCurrentDay=0;}if(!this.aDays[this.iCurrentDay])this.iCurrentDay=this.aDays.length-1;UCF_DomUtil.setTabIndex(this.aDays[this.iCurrentDay],0);UCF_JsUtil.delayedCall(0,UCF_DomUtil,"focusDomElement",[this.aDays[this.iCurrentDay]]);}; UCF_DatePicker.prototype.gotoNextMonth=function(){ if(this.oStartDate.iGetYear()==9999&&this.oStartDate.iGetMonth()==11)return;this.oStartDate.addMonths(1);this.render();}; UCF_DatePicker.prototype.gotoNextYear=function(){ if(this.oStartDate.iGetYear()==9999)return;this.oStartDate.addMonths(12);this.render();}; UCF_DatePicker.prototype.gotoPreviousMonth=function(){ if(this.oStartDate.iGetYear()==1&&this.oStartDate.iGetMonth()==0)return;this.oStartDate.addMonths(-1);this.render();}; UCF_DatePicker.prototype.gotoPreviousYear=function(){ if(this.oStartDate.iGetYear()==1)return;this.oStartDate.addMonths(-12);this.render();}; UCF_DatePicker.prototype.iGetDayFromSource=function(oSource){var iDay=0;var sDay=UCF_DomUtil.sGetInnerText(oSource);if(sDay)iDay=parseInt(sDay)-1;if(isNaN(iDay))iDay=this.iCurrentDay;this.iCurrentDay=iDay;return iDay;}; UCF_DatePicker.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oDateDomRef=oBrowserEvent.oSource;if(oDateDomRef.tagName=="TD")oDateDomRef=oDateDomRef.firstChild;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper; var sFormat=this.oConnectedControl.sFormatString,sDate=oDateDomRef.getAttribute("date");if(sDate){var oTodaysDate=new(UCF_ClassLoader.oGetClass("UCF_Date"))(),oFocusedDate=(new(UCF_ClassLoader.oGetClass("UCF_Date"))()).setTime(parseInt(sDate));var sDate=oFocusedDate.sGetFormattedDate(sFormat);oAccessibilityHelper.setText(sDate);if(this.oSelectedDate.iGetTime()==oFocusedDate.iGetTime()){oAccessibilityHelper.setSelected(true);}if(oFocusedDate.iGetTime()==oTodaysDate.iGetTime()){oAccessibilityHelper.setToday(true);}if(this.bReadOnce){this.bReadOnce=false;oAccessibilityHelper.addTutor("DP_TUT");}}};
function UCF_ItemListBoxDragDelegate(oLS,oDragSourceControl){UCF_DragDelegate.apply(this,[oLS]);this.setDragSourceControl(oDragSourceControl);};UCF_ItemListBoxDragDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DragDelegate"))();UCF_ItemListBoxDragDelegate.prototype.oGetGhost=function(){var oTable=this.oDragSourceControl.oDomRef.getElementsByTagName("table")[0];var oGhostFragment=oTable.cloneNode(true);var index=0;for(key in this.oDragSourceControl.mItems){if(!this.oDragSourceControl.bGetItemSelected(key)){var tr=oGhostFragment.getElementsByTagName("tr")[index];UCF_DomUtil.removeFromDom(tr);}else{index++;}}oGhostFragment.style.width=oTable.offsetWidth;var oGhost=new(UCF_ClassLoader.oGetClass("UCF_Ghost"))(oGhostFragment);oGhost.setOffset(12,12);return oGhost;};UCF_ItemListBoxDragDelegate.prototype.bIsDragPossible=function(oBrowserEvent){if(oBrowserEvent.oGetSource()==this.oDragSourceControl.oDomRef)return false;return true;};
function UCF_GridLayoutDropDecorator(oGridLayout,oLS){this.oGridLayout=oGridLayout;};UCF_GridLayoutDropDecorator.prototype=new UCF_Object();UCF_GridLayoutDropDecorator.BGCOLOR="#ffc54e"; UCF_GridLayoutDropDecorator.prototype.init=function(oDragSession){if(!this.oDomRef){this.oDomRef=document.createElement("TR");var oTD=document.createElement("TD");this.oDomRef.appendChild(oTD);oTD.style.border="1px dotted #93b2d0";oTD.style.backgroundColor=UCF_GridLayoutDropDecorator.BGCOLOR;this.oDomRef.style.height="1px";}if(this.oAnimation){this.oAnimation.stop();}var iHeight=1;if(oDragSession.oGhost)iHeight=oDragSession.oGhost.oGhostRef.scrollHeight; iHeight=Math.max(iHeight,48); iHeight=Math.min(iHeight,200);  if(this.oGridLayout.bDragStartedHere){this.oDomRef.style.height=(iHeight-1)+"px";}else{this.oAnimation=new(UCF_ClassLoader.oGetClass("UCF_Animation"))(this.oDomRef,500);this.oAnimation.addStyleChange("height","","px",this.oDomRef.scrollHeight,iHeight,this.oAnimation.M_TRANSITIONS.EaseIn);this.oAnimation.play();} this.oGridLayout.bDragStartedHere=false;};UCF_GridLayoutDropDecorator.prototype.update=function(oBrowserEvent){if(!this.oDomRef)return; var aTempCells=this.oGridLayout.oDomRef.rows;var aRows=[];for(var x=0;x<aTempCells.length;x++){ if(aTempCells[x]==this.oDomRef)continue; if(aTempCells[x].cells[0].style.display=="none")continue;aRows[aRows.length]=aTempCells[x];}var oViewPort=UCF_DomUtil.oGetObjectRect(this.oGridLayout.oDomRef),iOffsetY=oBrowserEvent.iPageY()-oViewPort.top,iHeight=0,bIndexSet=false,iOldIndex=this.iIndex;this.iIndex=0;for(var x=0;x<aRows.length;x++){var iThresholdY=iHeight+aRows[x].offsetHeight+2;  if(x==aRows.length-1)iThresholdY-=aRows[x].offsetHeight / 3;if(iOffsetY<iThresholdY){this.iIndex=x;bIndexSet=true;break;}iHeight=iThresholdY;}if(!bIndexSet)this.iIndex=aRows.length; if(aTempCells[0].cells[0].getAttribute("dummycell")=="true"){this.iIndex=0;this.sCell="";this.iOffset=0;this.oDummyCell=aTempCells[0].cells[0];this.oDummyCell.style.backgroundColor=UCF_GridLayoutDropDecorator.BGCOLOR;}else{if(iOldIndex==this.iIndex)return;UCF_DomUtil.removeFromDom(this.oDomRef);  var oTableBody=UCF_DomUtil.oGetFirstChild(this.oGridLayout.oDomRef);if(this.iIndex<aRows.length){var oRow=aRows[this.iIndex];oTableBody.insertBefore(this.oDomRef,oRow);this.sCell=oRow.cells[0].id;this.iOffset=-1;}else{oTableBody.appendChild(this.oDomRef);this.sCell=aRows[aRows.length-1].cells[0].id;this.iOffset=1;}}}; UCF_GridLayoutDropDecorator.prototype.cleanUp=function(){if(this.oDummyCell){this.oDummyCell.style.backgroundColor="";}if(this.oAnimation){this.oAnimation.stop();}if(!this.bDoNotCleanUp)this.doCleanUp();}; UCF_GridLayoutDropDecorator.prototype.doCleanUp=function(){UCF_DomUtil.removeFromDom(this.oDomRef);this.oDomRef=null;this.iIndex=-1;}; UCF_GridLayoutDropDecorator.prototype.hide=function(){};UCF_GridLayoutDropDecorator.prototype.show=function(){};UCF_GridLayoutDropDecorator.prototype.bIsVisible=function(){return true;};
 function UCF_Scrollbar(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.initProperties();this.bIsVertical=this.sScrollDirection=="VERTICAL";this.mNotificationMode=this.NOTIFICATION.AUTO;this.oDomRefHandle=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.HANDLE);this.oDomRefSpacer=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.SPACER);this.oDomRefBar=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.BAR);this.iPxDragReference=-1;this.iPxDragPositionReference=-1;this.iDragFirstVisbleItemReference=-1;this.iMouseWheelFirstVisbleItemReference=-1;this.oDomRefCurrentPressedButton=null;this.iScrollRepetitionIncrement=0;this.iScrollRepetitionProcessId=0;this.oScrolledElement=null;this.iTimedAccessCounter=0;this.bAttachToScrolledElement=false;};UCF_Scrollbar.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Scrollbar.prototype.initProperties=function(iScrollRange,iScrollClipping,iScrollPos,bSkipAutoCorrection){if(this.iMinimum==-1&&this.iMaximum==-1){this.bPixelDirectMode=true;if(!iScrollRange)iScrollRange=0;if(!iScrollClipping)iScrollClipping=0;if(!iScrollPos)iScrollPos=0;this.bShowScrollTip=false;this.iScrollRange=iScrollRange;this.iFirstVisibleItem=iScrollPos;this.iVisibleItemCount=iScrollClipping;this.bDisabled=this.iVisibleItemCount>=this.iScrollRange;this.iLargeChange=Math.round(this.iVisibleItemCount*7/8);this.iSmallChange=Math.round(this.iVisibleItemCount/8);}else{this.bPixelDirectMode=false;   if(!bSkipAutoCorrection&&((this.iValue>1&&this.iMinimum>=this.iMaximum)||this.iValue>this.iMaximum)){this.iMaximum=this.iValue;}this.iScrollRange=this.iMaximum+this.iLargeChange-1;this.iFirstVisibleItem=this.iValue;this.iVisibleItemCount=this.iLargeChange;this.bDisabled=this.iMinimum>=this.iMaximum;this.iSmallChange=1;}this.iMaxScrollTo=this.iScrollRange-this.iVisibleItemCount+1;}; UCF_Scrollbar.prototype.destroy=function(){this.oDomRefHandle=null;this.oDomRefSpacer=null;this.oDomRefBar=null;this.oDomRefCurrentPressedButton=null;this.oScrolledElement=null;this.mNotificationMode=this.NOTIFICATION.AUTO;this.bPixelDirectMode=false;this.detachResize();this.hideScrollTip();};  UCF_Scrollbar.prototype.E_EVENTS={Scroll:0,ClientUpdateResize:1}; UCF_Scrollbar.prototype.SUFFIX={NONE:"",HANDLE:"hdl",SPACER:"spc",BAR:"bar",SCROLLTIPS:"sct"}; UCF_Scrollbar.prototype.ACTION={NONE:"",PREVIOUS:"Prev",NEXT:"Nxt",BEGIN:"Bgn",END:"End",PREVIOUS_PAGE:"PPrev",NEXT_PAGE:"PNext",HANDLE_MOVE:"Hndl",POSITION:"Pos"}; UCF_Scrollbar.prototype.NOTIFICATION={NEVER:0,AUTO:1,ALWAYS:2,ALWAYS_WHEN_CHANGED:3}; UCF_Scrollbar.prototype.EVENT_PARAM_MAP_ACTION={"":"NONE","Prev":"PREVIOUS","Nxt":"NEXT","Bgn":"BEGIN","End":"END","PNext":"NEXT_PAGE","PPrev":"PREVIOUS_PAGE","Hndl":"DIRECT","Pos":"DIRECT",DIRECT:"DIRECT"}; UCF_Scrollbar.prototype.EVENT_PARAM_MAP_ACCESS={EXTERNAL:"EXTERNAL",SCROLLBAR:"SCROLLBAR"}; UCF_Scrollbar.prototype.ACCESS_TYPE={NONE:0,MOUSE:1,KEYBOARD:2,DRAG_START:3,DRAG:4,DRAG_END:5,MOUSE_WHEEL:6,MOUSE_WHEEL_END:7,MOUSE_WHEEL_CANCEL:8,REPETITION:9,REPETITION_END:10,EXTERNAL:11}; UCF_Scrollbar.prototype.SCROLL_REPETITION_STATE={NONE:0,STARTED:1,KEYBOARD:2,DRAG_START:3,DRAG:4,DRAG_END:5,MOUSE_WHEEL:6,MOUSE_WHEEL_END:7,REPETITION:8,REPETITION_END:9};UCF_Scrollbar.prototype.SCROLL_REPETITION_LATENCY=1000;UCF_Scrollbar.prototype.SCROLL_REPETITION_DELAY=50;  UCF_Scrollbar.prototype.onmousedown=function(oBrowserEvent){if(oBrowserEvent.eGetMouseButtonState()!=oBrowserEvent.MOUSE_BUTTON_STATE.Left)return true;var oAccessInfo=this.oGetAccessInfo(oBrowserEvent,this.ACCESS_TYPE.MOUSE);if(this.bDisabled)eAccessType=this.ACCESS_TYPE.NONE;if(oAccessInfo.eAction==this.ACTION.PREVIOUS){this.setPressedButtonUI(oAccessInfo);this.setScrollRepetition(-this.iSmallChange);}else if(oAccessInfo.eAction==this.ACTION.NEXT){this.setPressedButtonUI(oAccessInfo);this.setScrollRepetition(this.iSmallChange);}else if(oAccessInfo.eAction==this.ACTION.BEGIN){this.setPressedButtonUI(oAccessInfo);}else if(oAccessInfo.eAction==this.ACTION.END){this.setPressedButtonUI(oAccessInfo);}else if(oAccessInfo.eAction==this.ACTION.NEXT_PAGE){this.setScrollRepetition(this.iLargeChange);}else if(oAccessInfo.eAction==this.ACTION.PREVIOUS_PAGE){this.setScrollRepetition(-this.iLargeChange);}oBrowserEvent.cancelBubble();oBrowserEvent.cancel();return true;}; UCF_Scrollbar.prototype.onclick=function(oBrowserEvent){this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE);oBrowserEvent.cancelBubble();oBrowserEvent.cancel();return true;}; UCF_Scrollbar.prototype.onmousewheel=function(oBrowserEvent){if(this.bIsVertical&&!oBrowserEvent.bAlt()&&!oBrowserEvent.bCtrl()&&!oBrowserEvent.bShift()){this.iTimedAccessCounter++;UCF_JsUtil.delayedCall(300,this,"mousewheelRedirect",[oBrowserEvent,this.iTimedAccessCounter]);return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE_WHEEL);}else return true;}; UCF_Scrollbar.prototype.mousewheelRedirect=function(oBrowserEvent,iTimedAccessCounter){if(this.iTimedAccessCounter==iTimedAccessCounter){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.MOUSE_WHEEL_END);}}; UCF_Scrollbar.prototype.onlsdragstart=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.DRAG_START);};UCF_Scrollbar.prototype.onlsdragover=function(oBrowserEvent){var oDragSession=oBrowserEvent.oDragAndDropManager.oDragSession;if(oDragSession.eDragType==oDragSession.DRAG_TYPE.NONE)oBrowserEvent.cancelBubble();};UCF_Scrollbar.prototype.onlsdragenter=function(oBrowserEvent){var oDragSession=oBrowserEvent.oDragAndDropManager.oDragSession;if(oDragSession.eDragType==oDragSession.DRAG_TYPE.NONE)oBrowserEvent.cancelBubble();};UCF_Scrollbar.prototype.onlsdrop=function(oBrowserEvent){var oDragSession=oBrowserEvent.oDragAndDropManager.oDragSession;if(oDragSession.eDragType==oDragSession.DRAG_TYPE.NONE)oBrowserEvent.cancelBubble();}; UCF_Scrollbar.prototype.onlsdrag=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.DRAG);}; UCF_Scrollbar.prototype.onlsdragend=function(oBrowserEvent){return this.handleEvent(oBrowserEvent,this.ACCESS_TYPE.DRAG_END);};  UCF_Scrollbar.prototype.scrollToPrevious=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.PREVIOUS));}; UCF_Scrollbar.prototype.scrollToNext=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.NEXT));}; UCF_Scrollbar.prototype.scrollToPreviousPage=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.PREVIOUS_PAGE));}; UCF_Scrollbar.prototype.scrollToNextPage=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.NEXT_PAGE));}; UCF_Scrollbar.prototype.scrollToBegin=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.BEGIN));}; UCF_Scrollbar.prototype.scrollToEnd=function(){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.END));}; UCF_Scrollbar.prototype.bIsInInteraction=function(){if(this.iMouseWheelFirstVisbleItemReference>-1){ return true;}return false;}; UCF_Scrollbar.prototype.cancelInteraction=function(){if(this.bIsInInteraction()){if(this.iMouseWheelFirstVisbleItemReference>-1){ return this.handleEvent(null,this.ACCESS_TYPE.MOUSE_WHEEL_CANCEL);}}}; UCF_Scrollbar.prototype.scrollToPosition=function(iPosition){this.handleEvent(null,this.ACCESS_TYPE.EXTERNAL,this.oCreateAccessInfoByExternal(this.ACTION.POSITION,iPosition));};  UCF_Scrollbar.prototype.oGetAccessInfo=function(oBrowserEvent,eAccessType){var oDomRef=null,eAction=this.ACTION.NONE,sAccessFragmentType="";if(oBrowserEvent){oDomRef=oBrowserEvent.oGetSource();while(oDomRef&&oDomRef.tagName!="BODY"){if(!eAction&&oDomRef.getAttribute("acf")){sAccessFragmentType=oDomRef.getAttribute("acf");eAction=sAccessFragmentType;}if(sAccessFragmentType||oDomRef==this.oDomRef){break;}oDomRef=oDomRef.parentNode;}}return{oBrowserEvent:oBrowserEvent,eAccessType:eAccessType,sAccessFragmentType:sAccessFragmentType,oAccessFragmentDomRef:oDomRef,eAction:eAction,bHandled:false};}; UCF_Scrollbar.prototype.oCreateAccessInfoByExternal=function(eAction,iPosition){return{oBrowserEvent:null,eAccessType:this.ACCESS_TYPE.EXTERNAL,sAccessFragmentType:null,oAccessFragmentDomRef:null,eAction:eAction,bHandled:false,iPosition:iPosition?iPosition:0};}; UCF_Scrollbar.prototype.bIsSelectAccess=function(oAccessInfo){return oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE||(oAccessInfo.eAccessType==this.ACCESS_TYPE.KEYBOARD&&oAccessInfo.oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE);}; UCF_Scrollbar.prototype.setNotifactionMode=function(mNotificationMode){this.mNotificationMode=mNotificationMode;}; UCF_Scrollbar.prototype.handleEvent=function(oBrowserEvent,eAccessType,oAccessInfo){  this.detachResize();if(this.bDisabled)eAccessType=this.ACCESS_TYPE.NONE;else if(this.iScrollRepetitionIncrement!=0)eAccessType=this.ACCESS_TYPE.REPETITION_END;this.resetButtonUI();this.resetScrollRepetition();if(oAccessInfo)oAccessInfo.eAccessType=eAccessType;else oAccessInfo=this.oGetAccessInfo(oBrowserEvent,eAccessType);if(eAccessType==this.ACCESS_TYPE.REPETITION_END){this.scrollTo(oAccessInfo,this.iFirstVisibleItem);}else if(eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL){if(this.iMouseWheelFirstVisbleItemReference<0){this.iMouseWheelFirstVisbleItemReference=this.iFirstVisibleItem;}if(oBrowserEvent.oDomEvent.wheelDelta<0){this.scrollTo(oAccessInfo,this.iFirstVisibleItem+1);}else{this.scrollTo(oAccessInfo,this.iFirstVisibleItem-1);}}else if(eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_END){if(this.iMouseWheelFirstVisbleItemReference!=-1){ oAccessInfo.oBrowserEvent.oDomEvent=null;this.scrollTo(oAccessInfo,this.iFirstVisibleItem);this.iMouseWheelFirstVisbleItemReference=-1;}}else if(eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_CANCEL){if(this.iMouseWheelFirstVisbleItemReference!=-1){ this.scrollTo(oAccessInfo,this.iMouseWheelFirstVisbleItemReference);this.iMouseWheelFirstVisbleItemReference=-1;}}else if(eAccessType==this.ACCESS_TYPE.DRAG||eAccessType==this.ACCESS_TYPE.DRAG_END){if(oAccessInfo.eAction==this.ACTION.HANDLE_MOVE){var iPxTotal=this.bIsVertical?this.oDomRefBar.offsetHeight:this.oDomRefBar.offsetWidth,fPxItemRange=iPxTotal / this.iScrollRange,iPxDragReferenceTo=this.bIsVertical?oBrowserEvent.iPageY():oBrowserEvent.iPageX(),iPxDragDistance=iPxDragReferenceTo-this.iPxDragReference,iDragDistance=Math.round(iPxDragDistance / fPxItemRange);this.scrollTo(oAccessInfo,this.iDragFirstVisbleItemReference+((UCF_System.bIsRTL&&!this.bIsVertical)?-iDragDistance:iDragDistance));if(eAccessType==this.ACCESS_TYPE.DRAG_END){this.iPxDragReference=-1;this.iPxDragPositionReference=-1;this.iDragFirstVisbleItemReference=-1;}}}else if(eAccessType==this.ACCESS_TYPE.DRAG_START){if(oAccessInfo.eAction==this.ACTION.HANDLE_MOVE){this.iPxDragReference=this.bIsVertical?oBrowserEvent.oDragAndDropManager.iDragStartY:oBrowserEvent.oDragAndDropManager.iDragStartX;this.iPxDragPositionReference=this.bIsVertical?this.oDomRefSpacer.offsetHeight:this.oDomRefSpacer.offsetWidth;this.iDragFirstVisbleItemReference=this.iFirstVisibleItem;oAccessInfo.bHandled=true;}}else if(eAccessType==this.ACCESS_TYPE.MOUSE||eAccessType==this.ACCESS_TYPE.KEYBOARD||eAccessType==this.ACCESS_TYPE.EXTERNAL){if(oAccessInfo.eAction==this.ACTION.PREVIOUS){this.scrollTo(oAccessInfo,this.iFirstVisibleItem-this.iSmallChange);}else if(oAccessInfo.eAction==this.ACTION.NEXT){this.scrollTo(oAccessInfo,this.iFirstVisibleItem+this.iSmallChange);}else if(oAccessInfo.eAction==this.ACTION.BEGIN){this.scrollTo(oAccessInfo,1);}else if(oAccessInfo.eAction==this.ACTION.END){this.scrollTo(oAccessInfo,this.iScrollRange);}else if(oAccessInfo.eAction==this.ACTION.NEXT_PAGE){this.scrollTo(oAccessInfo,this.iFirstVisibleItem+this.iLargeChange);}else if(oAccessInfo.eAction==this.ACTION.PREVIOUS_PAGE){this.scrollTo(oAccessInfo,this.iFirstVisibleItem-this.iLargeChange);}else if(oAccessInfo.eAction==this.ACTION.POSITION){this.scrollTo(oAccessInfo,oAccessInfo.iPosition);}}if(oAccessInfo.bHandled&&oBrowserEvent&&oBrowserEvent.oDomEvent){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();oBrowserEvent.oDomEvent.returnValue=false;oBrowserEvent.bHandled=true;}if(eAccessType!=this.ACCESS_TYPE.DRAG)this.attachResize();return!oAccessInfo.bHandled;}; UCF_Scrollbar.prototype.scrollTo=function(oAccessInfo,iNewFirstVisibleItem){if(!this.bDisabled){var bNotify=false,bChanged=false,eAction=this.EVENT_PARAM_MAP_ACTION[oAccessInfo.eAction],eAccess=(oAccessInfo.eAccessType==this.ACCESS_TYPE.EXTERNAL)?this.EVENT_PARAM_MAP_ACCESS.EXTERNAL:this.EVENT_PARAM_MAP_ACCESS.SCROLLBAR;iNewFirstVisibleItem=Math.min(Math.max(1,iNewFirstVisibleItem),this.iMaxScrollTo);if(iNewFirstVisibleItem!=this.iFirstVisibleItem){this.setFirstVisibleItem(iNewFirstVisibleItem);bChanged=true;if(oAccessInfo.eAccessType!=this.ACCESS_TYPE.DRAG){bNotify=true;}}if(oAccessInfo.eAccessType==this.ACCESS_TYPE.DRAG_END&&this.iFirstVisibleItem!=this.iDragFirstVisbleItemReference){bNotify=true;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL){bNotify=false;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_END&&this.iFirstVisibleItem!=this.iMouseWheelFirstVisbleItemReference){bNotify=true;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_CANCEL){bNotify=false;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.REPETITION){bNotify=false;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.REPETITION_END){bNotify=true;eAction=this.EVENT_PARAM_MAP_ACTION.DIRECT;}if(this.mNotificationMode==this.NOTIFICATION.ALWAYS_WHEN_CHANGED){if(bChanged)bNotify=true;}else if(this.mNotificationMode==this.NOTIFICATION.ALWAYS)bNotify=true;else if(this.mNotificationMode==this.NOTIFICATION.NEVER)bNotify=false;if(oAccessInfo&&oAccessInfo.eAccessType==this.ACCESS_TYPE.DRAG){var iPxDragReferenceTo=this.bIsVertical?oAccessInfo.oBrowserEvent.iPageY():oAccessInfo.oBrowserEvent.iPageX(),iPxDragDistance=(UCF_System.bIsRTL&&!this.bIsVertical)?-(iPxDragReferenceTo-this.iPxDragReference):iPxDragReferenceTo-this.iPxDragReference,iPxPositionDirect=this.iPxDragPositionReference+iPxDragDistance;this.paintBar(iPxPositionDirect,false);}else{this.paintBar(-1,false);} if(this.bShowScrollTip){if(oAccessInfo.eAccessType==this.ACCESS_TYPE.DRAG||oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL||oAccessInfo.eAccessType==this.ACCESS_TYPE.REPETITION){this.showScrollTip();}else if(oAccessInfo.eAccessType==this.ACCESS_TYPE.DRAG_END||oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_END||oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL_CANCEL||oAccessInfo.eAccessType==this.ACCESS_TYPE.REPETITION_END){this.hideScrollTip();}}else{   this.oDomRefHandle.offsetWidth;}  if(oAccessInfo.eAccessType==this.ACCESS_TYPE.MOUSE_WHEEL){var oActiveElement=UCF_DomUtil.oGetActiveElement();if(oActiveElement&&oActiveElement.blur&&oActiveElement!=document&&oActiveElement!=document.body){oActiveElement.blur();}}if(bNotify){ if(!this.oScrolledElement&&this.sScrolledElementId){this.oScrolledElement=this.oGetControlById(this.sScrolledElementId);} this.fireEvent(this.E_EVENTS.Scroll,{iFirstVisibleItem:this.iFirstVisibleItem,eAction:eAction,eAccess:eAccess});if(!(this.oScrolledElement&&UCF_JsUtil.bInstanceOf(this.oScrolledElement,"UCF_SapTable")))this.fireScroll(this.sId,this.iFirstVisibleItem,eAction,eAccess);}oAccessInfo.bHandled=true;}}; UCF_Scrollbar.prototype.paintBar=function(iPxPositionDirect,bUpdateHandle){var sStyleAttribute=this.bIsVertical?"height":"width",iPxTotal=this.bIsVertical?this.oDomRefBar.offsetHeight:this.oDomRefBar.offsetWidth,fPxItemRange=iPxTotal / this.iScrollRange,fPxPosition=fPxItemRange*(this.iFirstVisibleItem-1),fPxHandleRange=fPxItemRange*this.iVisibleItemCount,iPxPosition=Math.round(fPxPosition),iPxHandleRange=Math.max(6,Math.round(fPxHandleRange)),iPxMaxPosition=iPxTotal-iPxHandleRange-1;if(iPxPositionDirect>=0){iPxPosition=iPxPositionDirect;} iPxPosition=Math.min(iPxPosition,iPxMaxPosition);if(iPxPosition>0){this.oDomRefSpacer.style.display=this.bIsVertical?"block":"inline";if(iPxTotal/100<1.0||this.bPixelDirectMode){ if(iPxPosition==iPxMaxPosition){this.oDomRefSpacer.style[sStyleAttribute]=iPxTotal-iPxHandleRange;}else{this.oDomRefSpacer.style[sStyleAttribute]=iPxPosition;}}else{ if(iPxPosition==iPxMaxPosition){var sPcHandleRange=this.oDomRefHandle.style[sStyleAttribute],iPcHandleRange=parseInt(sPcHandleRange.substr(0,sPcHandleRange.length-1));this.oDomRefSpacer.style[sStyleAttribute]=(100-iPcHandleRange)+"%";}else{this.oDomRefSpacer.style[sStyleAttribute]=Math.round((100*iPxPosition)/ iPxTotal)+"%";}}}else{this.oDomRefSpacer.style.display="none";this.oDomRefSpacer.style[sStyleAttribute]=0;}if(bUpdateHandle&&this.oDomRefHandle){var bHideHandle=false,sResultSize=null;if(this.bPixelDirectMode){bHideHandle=iPxHandleRange>=iPxTotal&&fPxPosition<=0;if(!this.bIsVertical&&UCF_System.sDevice=="ff1"){ var oDomRefInnerElement=this.oDomRefHandle.firstChild,iBorderWidh=this.oDomRefHandle.offsetWidth-oDomRefInnerElement.offsetWidth;this.oDomRefHandle.style[sStyleAttribute]=iPxHandleRange;oDomRefInnerElement.style[sStyleAttribute]=iPxHandleRange-iBorderWidh;}else{sResultSize=iPxHandleRange;}}else{if(this.iVisibleItemCount>=this.iScrollRange){bHideHandle=true;}else{sResultSize=Math.round((this.iVisibleItemCount/this.iScrollRange)*100)+"%";}}if(sResultSize!==null)this.oDomRefHandle.style[sStyleAttribute]=sResultSize;if(bHideHandle){this.oDomRefHandle.style.display="none";}else{this.oDomRefHandle.style.display=this.bIsVertical?"block":"inline";}}}; UCF_Scrollbar.prototype.setPressedButtonUI=function(oAccessInfo){if(this.oDomRefCurrentPressedButton==null){this.oDomRefCurrentPressedButton=oAccessInfo.oAccessFragmentDomRef;UCF_DomUtil.addClass(this.oDomRefCurrentPressedButton,"urSCBBtnPressed");}}; UCF_Scrollbar.prototype.resetButtonUI=function(){if(this.oDomRefCurrentPressedButton!=null){UCF_DomUtil.removeClass(this.oDomRefCurrentPressedButton,"urSCBBtnPressed");this.oDomRefCurrentPressedButton=null;}}; UCF_Scrollbar.prototype.setScrollRepetition=function(iIncrement){this.iScrollRepetitionProcessId++;UCF_JsUtil.delayedCall(this.SCROLL_REPETITION_LATENCY,this,"startScrollRepetition",[iIncrement,this.iScrollRepetitionProcessId]);}; UCF_Scrollbar.prototype.startScrollRepetition=function(iIncrement,iScrollRepetitionProcessId){if(iScrollRepetitionProcessId==this.iScrollRepetitionProcessId){this.iScrollRepetitionIncrement=iIncrement;this.processScrollRepetition();}}; UCF_Scrollbar.prototype.processScrollRepetition=function(){if(this.iScrollRepetitionIncrement!=0){this.scrollTo(this.oGetAccessInfo(null,this.ACCESS_TYPE.REPETITION),this.iFirstVisibleItem+this.iScrollRepetitionIncrement);UCF_JsUtil.delayedCall(this.SCROLL_REPETITION_DELAY,this,"processScrollRepetition");}}; UCF_Scrollbar.prototype.resetScrollRepetition=function(){this.iScrollRepetitionIncrement=0; this.iScrollRepetitionProcessId++;}; UCF_Scrollbar.prototype.showScrollTip=function(){if(!this.oDomRefScrollTip){this.initScrollTip();}this.updateScrollTip();}; UCF_Scrollbar.prototype.initScrollTip=function(){this.oDomRefScrollTip=document.createElement("DIV");this.oDomRefScrollTip.setAttribute("id","ur-scrolltip");this.oDomRefScrollTip.style.position="absolute";this.oDomRefScrollTip.style.top="0";this.oDomRefScrollTip.style.left="0";this.oLS.oGetRootRef().appendChild(this.oDomRefScrollTip); this.oDomRefAppScrollTipInfo=UCF_DomUtil.$(this.sId+"-"+this.SUFFIX.SCROLLTIPS);if(this.oDomRefAppScrollTipInfo){this.mAppScrollTipMap=eval("result="+this.oDomRefAppScrollTipInfo.getAttribute("sct")+";");}}; UCF_Scrollbar.prototype.updateScrollTip=function(){this.oDomRefScrollTip.innerHTML=this.sGetScrollTipHtml();this.updateScrollTipPosition();}; UCF_Scrollbar.prototype.hideScrollTip=function(){if(this.oDomRefScrollTip){this.oDomRefScrollTip.parentNode.removeChild(this.oDomRefScrollTip);}this.oDomRefScrollTip=null;this.mAppScrollTipMap=null;this.oDomRefAppScrollTipInfo=null;}; UCF_Scrollbar.prototype.updateScrollTipPosition=function(){var oRectHandle=this.oGetObjectRect(this.oDomRefHandle),oRectScrollTip=this.oGetObjectRect(this.oDomRefScrollTip),iScrollTipX=0,iScrollTipY=0;if(this.bIsVertical){if(UCF_System.bIsRTL){iScrollTipX=oRectHandle.left+oRectHandle.width;}else{iScrollTipX=oRectHandle.left-oRectScrollTip.width;}iScrollTipY=oRectHandle.top;}else{if(UCF_System.bIsRTL){iScrollTipX=oRectHandle.left+oRectHandle.width-oRectScrollTip.width;}else{iScrollTipX=oRectHandle.left;}iScrollTipY=oRectHandle.top-oRectScrollTip.height;}this.oDomRefScrollTip.style.left=iScrollTipX;this.oDomRefScrollTip.style.top=iScrollTipY;}; UCF_Scrollbar.prototype.sGetScrollTipHtml=function(){var aScrollTipHtml=[];aScrollTipHtml.push("<table class=\"urDataTipStd urDataTipTxt\" style=\"padding:1px 3px;height:16px;width:1px;text-align:");if(this.bIsVertical)aScrollTipHtml.push("right");else aScrollTipHtml.push("left");aScrollTipHtml.push(";\">");if(this.mAppScrollTipMap){var lastMatchIndex;for(var n in this.mAppScrollTipMap){if(n>this.iFirstVisibleItem)break;else lastMatchIndex=n;}aScrollTipHtml.push("<tr><td nowrap><b>");aScrollTipHtml.push(this.oDomRefAppScrollTipInfo.childNodes[this.mAppScrollTipMap[lastMatchIndex]].innerHTML);aScrollTipHtml.push("</b></td></tr>");}aScrollTipHtml.push("<tr><td nowrap>");if(this.bIsVertical&&this.sScrollTipValueDescription=="ROW"){aScrollTipHtml.push(this.oLS.sGetText("SAPUR_PG_ROW"));}else if(!this.bIsVertical&&this.sScrollTipValueDescription=="COL"){aScrollTipHtml.push(this.oLS.sGetText("SAPUR_PG_COLUMN"));}else{aScrollTipHtml.push(this.sScrollTipValueDescription);}aScrollTipHtml.push(" ");aScrollTipHtml.push(this.iFirstVisibleItem); aScrollTipHtml.push(" - ");aScrollTipHtml.push(this.iFirstVisibleItem+this.iVisibleItemCount-1); aScrollTipHtml.push(" ");aScrollTipHtml.push(this.oLS.sGetText("SAPUR_PG_INDEX"));aScrollTipHtml.push(" ");aScrollTipHtml.push(this.iItemCount); aScrollTipHtml.push("</td></tr>");aScrollTipHtml.push("</table>");return aScrollTipHtml.join("");};UCF_Scrollbar.prototype.setVisibleItemCount=function(iVisibleItemCount){if(iVisibleItemCount>0&&iVisibleItemCount!=this.iVisibleItemCount){var iDiff=iVisibleItemCount-this.iVisibleItemCount;this.iMaximum-=iDiff;this.iLargeChange+=iDiff;this.initProperties(this.iScrollRange,iVisibleItemCount,this.iFirstVisibleItem,true);this.paintBar(-1,true);}};UCF_Scrollbar.prototype.setFirstVisibleItem=function(iFirstVisibleItem){this.iFirstVisibleItem=iFirstVisibleItem;this.iValue=iFirstVisibleItem;};  UCF_Scrollbar.prototype.onresize=function(oBrowserEvent){if(this.sResizeTimer!=null)UCF_JsUtil.clearDelayedCall(this.sResizeTimer);this.sResizeTimer=UCF_JsUtil.delayedCall(10,this,"onClientUpdateResizeTimed");oBrowserEvent.cancelBubble();}; UCF_Scrollbar.prototype.onClientUpdateResizeTimed=function(){this.sResizeTimer=null;this.onClientUpdateResize();}; UCF_Scrollbar.prototype.attachResize=function(){if(this.bPixelDirectMode&&!this.bAttachedClientUpdateResize){this.attachBrowserEvent("resize",this.oDomRefBar);this.bAttachedClientUpdateResize=true;}}; UCF_Scrollbar.prototype.detachResize=function(){if(this.bPixelDirectMode&&this.bAttachedClientUpdateResize){this.detachBrowserEvent("resize",this.oDomRefBar);this.bAttachedClientUpdateResize=false;}}; UCF_Scrollbar.prototype.onClientUpdateResize=function(){this.fireEvent(this.E_EVENTS.ClientUpdateResize);}; UCF_Scrollbar.prototype.updateDimensions=function(iScrollRange,iScrollClipping,iScrollPos){if(this.bPixelDirectMode){this.detachResize();this.initProperties(iScrollRange,iScrollClipping,iScrollPos);this.paintBar(-1,true);this.attachResize();}}; UCF_Scrollbar.prototype.collectFocusInfo=function(oFocusInfo){oFocusInfo.setApplyControl(this);}; UCF_Scrollbar.prototype.applyFocusInfo=function(oFocusInfo){}; UCF_Scrollbar.prototype.aAttributeNames=["iValue","iMaximum","iMinimum","iLargeChange","iSmallChange","sScrollDirection","sScrolledElementId","bShowScrollTip","sScrollTipValueDescription","bEnabled","iItemCount"]; UCF_Scrollbar.prototype.aMethodNames=[];  UCF_Scrollbar.prototype.iValue=0; UCF_Scrollbar.prototype.iMaximum=100; UCF_Scrollbar.prototype.iMinimum=0; UCF_Scrollbar.prototype.iLargeChange=10; UCF_Scrollbar.prototype.iSmallChange=1; UCF_Scrollbar.prototype.sScrollDirection="VERTICAL"; UCF_Scrollbar.prototype.sScrolledElementId=''; UCF_Scrollbar.prototype.bShowScrollTip=false; UCF_Scrollbar.prototype.sScrollTipValueDescription=''; UCF_Scrollbar.prototype.bEnabled=true; UCF_Scrollbar.prototype.iItemCount=-1; UCF_Scrollbar.prototype.setDefaultValues=function(){this.iValue=0;this.iMaximum=100;this.iMinimum=0;this.iLargeChange=10;this.iSmallChange=1;this.sScrollDirection="VERTICAL";this.sScrolledElementId='';this.bShowScrollTip=false;this.sScrollTipValueDescription='';this.bEnabled=true;this.iItemCount=-1;}; UCF_Scrollbar.prototype.fireScroll=function(sId,iValue,sAction,sAccess){var mParams={Id:sId,Value:iValue,Action:sAction,Access:sAccess};this.fireSemanticEvent("Scrollbar","Scroll",mParams);};
 function UCF_ImageMap(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_ImageMap.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_ImageMap.prototype.aAttributeNames=[]; UCF_ImageMap.prototype.aMethodNames=[];  UCF_ImageMap.prototype.setDefaultValues=function(){}; UCF_ImageMap.prototype.fireImageMapClick=function(sId,sAreaId){var mParams={Id:sId,AreaId:sAreaId};this.fireSemanticEvent("ImageMap","ImageMapClick",mParams);};
  function UCF_Form(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_Form.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))();UCF_Form.prototype.E_EVENTS={Destroy:0}; UCF_Form.prototype.initialize=function(){ this.oDomRef._SAP_UCF_oldHandlerSubmit_=this.oDomRef.submit;this.attachBrowserEvent("submit",this.oDomRef);this.attachBrowserEvent("reset",this.oDomRef); var that=this;this.oDomRef.submit=function(event){that.fireSubmit(that.sId);};};UCF_Form.prototype.destroy=function(){this.oDomRef.submit=null;this.oDomRef._SAP_UCF_oldHandlerSubmit_=null;this.fireEvent(this.E_EVENTS.Destroy,{Id:this.sId});this.detachBrowserEvent("submit",this.oDomRef);this.detachBrowserEvent("reset",this.oDomRef);}; UCF_Form.prototype.onsubmit=function(oBrowserEvent){this.fireSubmit(this.sId);oBrowserEvent.cancel();}; UCF_Form.prototype.submit=function(){this.oDomRef['_SAP_UCF_oldHandlerSubmit_']();}; UCF_Form.prototype.onreset=function(oBrowserEvent){this.fireReset(this.sId);oBrowserEvent.cancel();}; UCF_Form.prototype.appendHiddenField=function(sName,sValue){     var oElem=null;try{ oElem=document.createElement("<input type='hidden' name='"+sName+"'/>");oElem.value=sValue;this.oDomRef.appendChild(oElem);}catch(e){}if(!oElem||oElem.nodeName!="INPUT"){ oElem=document.createElement("input");oElem.type="hidden";oElem.name=sName;oElem.value=sValue;this.oDomRef.appendChild(oElem);}}; UCF_Form.prototype.putHiddenField=function(sName,sValue){  var oElem=this.oDomRef.elements[sName];if(oElem){if(oElem.length){ for(var i=oElem.length-1;i>=0;i--){if(oElem[i]&&oElem[i].type&&(oElem[i].type=="hidden")){oElem[i].value=sValue;return;}}}else{ if(oElem&&oElem.type&&(oElem.type=="hidden")){oElem.value=sValue;return;}}} this.appendHiddenField(sName,sValue);}; UCF_Form.prototype.putHiddenFieldsByMap=function(mFieldMap){for(var sName in mFieldMap){this.putHiddenField(sName,mFieldMap[sName]);}}; UCF_Form.prototype.setAction=function(sAction){this.oDomRef.action=sAction;}; UCF_Form.prototype.sGetAction=function(){return this.oDomRef.action;}; UCF_Form.prototype.aAttributeNames=["bHasEventQueue"]; UCF_Form.prototype.aMethodNames=["submit","appendHiddenField","putHiddenField"];  UCF_Form.prototype.bHasEventQueue=false; UCF_Form.prototype.setDefaultValues=function(){this.bHasEventQueue=false;}; UCF_Form.prototype.fireSubmit=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Form","Submit",mParams);}; UCF_Form.prototype.fireReset=function(sId){var mParams={Id:sId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Reset)this.oLS.markDirty();this.fireSemanticEvent("Form","Reset",mParams);};
 function UCF_SizeInfo(){UCF_Object.apply(this);this.bRunning=false;};UCF_SizeInfo.prototype=new UCF_Object(); UCF_SizeInfo.prototype.trigger=function(){ if(!this.bRunning){this.start();}else{this.stop();}}; UCF_SizeInfo.prototype.start=function(){if(UCF_System.bClientDebug){var oDoc=UCF_DomUtil.oGetDocument();var oDiv=oDoc.createElement("div");with(oDiv.style){position="absolute";left="10px";height="40px";backgroundColor="#FF7";border="1px solid #888";margin="3px";padding="2px";filter="alpha(opacity=80)";overflow="auto";opacity=0.80; fontSize="0.7em";zIndex=9999;}oDiv.innerHTML="Size Info - Ready";oDoc.body.appendChild(oDiv);this.oDiv=oDiv;UCF_DomUtil.attachEvent(this.oDiv,"selectstart",function(){return false;});this.updatePanePosition();var oHelper=this;this.sOut="";this.updateForwarder=function(oEvent){oHelper.updateSizeInfo(oEvent)}; UCF_DomUtil.attachEvent(oDoc,"mousemove",this.updateForwarder);this.eventForwarder=function(){oHelper.onScrollOrResize();};UCF_DomUtil.attachEvent(oDiv,"click",function(){if(window.clipboardData&&clipboardData.setData){clipboardData.setData("Text",oHelper.sOut);}return false;});UCF_DomUtil.attachEvent(window,"scroll",this.eventForwarder);UCF_DomUtil.attachEvent(window,"resize",this.eventForwarder);this.bRunning=true;}}; UCF_SizeInfo.prototype.stop=function(){var oDoc=UCF_DomUtil.oGetDocument();oDoc.body.removeChild(this.oDiv); UCF_DomUtil.detachEvent(oDoc,"mousemove");UCF_DomUtil.detachEvent(window,"scroll",this.eventForwarder);UCF_DomUtil.detachEvent(window,"resize",this.eventForwarder);this.bRunning=false;}; UCF_SizeInfo.prototype.updateSizeInfo=function(oEvent){try{var oDoc=UCF_DomUtil.oGetDocument();if(oDoc.activeElement){var oActiveElementPosition=UCF_DomUtil.oGetObjectRect(oDoc.activeElement);var sX="Size:";var sY="Size:";if(oEvent){sX+=" cX:"+oEvent.clientX+" sX:"+oEvent.screenX;sY+=" cY:"+oEvent.clientY+" sY:"+oEvent.screenY;if(oEvent.offsetX){sX+=" oX:"+oEvent.offsetX;sY+=" oY:"+oEvent.offsetY;}if(window.event){sX+=" weX:"+window.event.x;sY+=" weY:"+window.event.y;}}if(oDoc.activeElement.width){sX+=" w:"+oDoc.activeElement.width;sY+=" h:"+oDoc.activeElement.height;}sX+=" cW:"+oDoc.activeElement.clientWidth+" oL:"+oDoc.activeElement.offsetLeft+" oW:"+oDoc.activeElement.offsetWidth+" sL:"+oDoc.body.scrollLeft+" RL:"+oActiveElementPosition.left+" RW:"+oActiveElementPosition.width;sY+=" cH:"+oDoc.activeElement.clientHeight+" oT:"+oDoc.activeElement.offsetTop+" oH:"+oDoc.activeElement.offsetHeight+" sT:"+oDoc.body.scrollTop+" RT:"+oActiveElementPosition.top+" RH:"+oActiveElementPosition.height;if(oDoc.activeElement.offsetParent&&oDoc.activeElement.offsetParent!=null){var oP=oDoc.activeElement.offsetParent;sX+=" oPoL:"+oP.offsetLeft;sY+=" oPoT:"+oP.offsetTop;}if(oDoc.activeElement.id){sY+=" Active:"+oDoc.activeElement.id;}this.oDiv.innerHTML=sX+"<br/>"+sY;this.sOut=this.oDiv.innerText;}}catch(e){}}; UCF_SizeInfo.prototype.onScrollOrResize=function(){this.updatePanePosition();}; UCF_SizeInfo.prototype.updatePanePosition=function(){var oDoc=UCF_DomUtil.oGetDocument();this.oDiv.style.top=oDoc.body.clientHeight-this.oDiv.offsetHeight-6+oDoc.body.scrollTop+"px";this.oDiv.style.width=oDoc.body.clientWidth-20+"px";};
 function UCF_LinkChoice(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.bIgnoreDefaultButton=true;};UCF_LinkChoice.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_LinkChoice.prototype.onclick=function(oBrowserEvent){ oBrowserEvent.cancel();oBrowserEvent.cancelBubble();this.toggleMenu(false);}; UCF_LinkChoice.prototype.onlsshow=function(oBrowserEvent){ oBrowserEvent.cancel(); oBrowserEvent.cancelBubble();this.toggleMenu(true);}; UCF_LinkChoice.prototype.onlsselect=function(oBrowserEvent){ oBrowserEvent.cancel();oBrowserEvent.cancelBubble();this.toggleMenu(true);}; UCF_LinkChoice.prototype.openMenu=function(bWithKeyboard){if(this.sPopupMenuId==""||this.oGetControlById(this.sPopupMenuId)==null)return;if(!this.oPopupMenu)this.oPopupMenu=this.oGetControlById(this.sPopupMenuId,true);if(this.oPopupMenu.bOpened)return;this.oPopupMenu.setAutoRefocus(true); this.oPopupMenu.setOpenerRef(this.oDomRef);this.oPopupMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oPopupMenu.open(bWithKeyboard);}; UCF_LinkChoice.prototype.toggleMenu=function(bWithKeyboard){ if(!this.bEnabled)return;if(this.sPopupMenuId==""||(this.sPopupMenuId!=""&&this.oGetControlById(this.sPopupMenuId)==null)){ this.fireMenuAccess(this.sId,this.sPopupMenuId);return;}if(!this.oPopupMenu)this.oPopupMenu=this.oGetControlById(this.sPopupMenuId,true);if(this.oPopupMenu.bOpened){this.oPopupMenu.close();}else{this.fireMenuAccess(this.sId,this.sPopupMenuId);this.openMenu(bWithKeyboard);}}; UCF_LinkChoice.prototype.setPopupMenuId=function(sPopupMenuId){if(this.oPopupMenu&&this.oPopupMenu.sId!=sPopupMenuId){ if(this.oPopupMenu.bOpened)this.oPopupMenu.close();this.oPopupMenu=null;}this.sPopupMenuId=sPopupMenuId;}; UCF_LinkChoice.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper; var sLabel=oAccessibilityHelper.sGetLabelText(this.sId);if(sLabel!=""){oAccessibilityHelper.setLabel(sLabel);}oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setText(this.sText);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setControlType("LNC");oAccessibilityHelper.addEnabledTutor("LNC_TUT",this.bEnabled);}; UCF_LinkChoice.prototype.aAttributeNames=["sTooltip","sText","bEnabled","sPopupMenuId","sAccessKey","sImageSrc"]; UCF_LinkChoice.prototype.aMethodNames=["openMenu","setPopupMenuId"];  UCF_LinkChoice.prototype.sTooltip=''; UCF_LinkChoice.prototype.sText=''; UCF_LinkChoice.prototype.bEnabled=true; UCF_LinkChoice.prototype.sPopupMenuId=''; UCF_LinkChoice.prototype.sAccessKey=''; UCF_LinkChoice.prototype.sImageSrc=''; UCF_LinkChoice.prototype.setDefaultValues=function(){this.sTooltip='';this.sText='';this.bEnabled=true;this.sPopupMenuId='';this.sAccessKey='';this.sImageSrc='';}; UCF_LinkChoice.prototype.fireMenuAccess=function(sId,sPopupMenuId){var mParams={Id:sId,PopupMenuId:sPopupMenuId};if(this.oLS&&this.oLS.markDirty&&this.mEvents.MenuAccess)this.oLS.markDirty();this.fireSemanticEvent("LinkChoice","MenuAccess",mParams);};
 function UCF_PatternContainerTitle(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);};UCF_PatternContainerTitle.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_PatternContainerTitle.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId==this.sId+"-menu"){this.toggleMenu();}}; UCF_PatternContainerTitle.prototype.onclick=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId==this.sId+"-menu"){this.toggleMenu();}}; UCF_PatternContainerTitle.prototype.onkeydown=function(oBrowserEvent){var oSource=oBrowserEvent.oGetSource();var sSourceId=oSource.getAttribute("id"); if(sSourceId==this.sId+"-menu"&&oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE){this.toggleMenu();oBrowserEvent.cancelBubble();oBrowserEvent.cancel();}}; UCF_PatternContainerTitle.prototype.onlshotkey=function(oBrowserEvent){if(this.sHotkeysId=='')return;var oHotkeys=this.oGetControlById(this.sHotkeysId);if(oHotkeys==null)return;oHotkey=oHotkeys.getHotkeyFromEvent(oBrowserEvent);if(oHotkey){oBrowserEvent.cancel();oBrowserEvent.cancelBubble();if(!oHotkeys.bHandleHotkeyOnClient(oHotkey))this.fireHotkey(this.sId,oHotkey.sHotkey,oHotkey.sProviderId);}}; UCF_PatternContainerTitle.prototype.toggleMenu=function(){if(!this.sOptionMenuId)return;var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); if(!oMenuButtonRef)return;if(!this.oOptionMenu){this.fireMenuAccess(this.sId);this.oOptionMenu=this.oLS.oControlFactory.oGetControlById(this.sOptionMenuId,true);if(!this.oOptionMenu)return;this.oOptionMenu.setOpenerRef(oMenuButtonRef);this.oOptionMenu.setOpenerId(this.sId);this.oOptionMenu.setAlignment(UCF_LayeredControl.ALIGNMENT.BOTTOMRIGHT);this.oOptionMenu.setOffsetTop(-1);this.oOptionMenu.setOffsetLeft(-1);this.oOptionMenu.attachEvent(this.oOptionMenu.E_EVENTS.Close,this,"onMenuClose")}if(this.bOptionMenuIsOpened){this.oOptionMenu.close();}else{this.oOptionMenu.open();}}; UCF_PatternContainerTitle.prototype.onMenuClose=function(oEvent){this.bOptionMenuIsOpened=false;var oMenuButtonRef=UCF_DomUtil.$(this.sId+"-menu"); oMenuButtonRef.focus();}; UCF_PatternContainerTitle.prototype.onlsskipforward=function(oBrowserEvent){this.handleSkipForward(oBrowserEvent);}; UCF_PatternContainerTitle.prototype.onlsskipback=function(oBrowserEvent){this.handleSkipBack(oBrowserEvent);}; UCF_PatternContainerTitle.prototype.onlsaccessibility=function(oBrowserEvent){var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper,oSource=oBrowserEvent.oGetSource(),oSourceControl=oBrowserEvent.oGetSourceControl();if(oSourceControl!=this)return;if(oSource==this.oDomRef){oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setText(this.sTitle);oAccessibilityHelper.setControlType("PCTIT");oAccessibilityHelper.addTutor("SKIP");}else if(oSource.id==this.sId+"-menu"){oAccessibilityHelper.setControlType("PCTIT_MNU");oAccessibilityHelper.addTutor("PCTIT_MNU_TUT");}else if(oSource.tp=="END"){oAccessibilityHelper.setControlType("PCTIT_END");oAccessibilityHelper.setText(this.sTitle);}oBrowserEvent.cancelBubble();}; UCF_PatternContainerTitle.prototype.aAttributeNames=["sTitle","bHasOptionMenu","sOptionMenuId","bCollapsed","sTooltip","sHotkeysId","sAccessKey"]; UCF_PatternContainerTitle.prototype.aMethodNames=[];  UCF_PatternContainerTitle.prototype.sTitle=''; UCF_PatternContainerTitle.prototype.bHasOptionMenu=false; UCF_PatternContainerTitle.prototype.sOptionMenuId=''; UCF_PatternContainerTitle.prototype.bCollapsed=false; UCF_PatternContainerTitle.prototype.sTooltip=''; UCF_PatternContainerTitle.prototype.sHotkeysId=''; UCF_PatternContainerTitle.prototype.sAccessKey=''; UCF_PatternContainerTitle.prototype.setDefaultValues=function(){this.sTitle='';this.bHasOptionMenu=false;this.sOptionMenuId='';this.bCollapsed=false;this.sTooltip='';this.sHotkeysId='';this.sAccessKey='';}; UCF_PatternContainerTitle.prototype.fireMenuAccess=function(sId){var mParams={Id:sId};this.fireSemanticEvent("PatternContainerTitle","MenuAccess",mParams);}; UCF_PatternContainerTitle.prototype.fireHotkey=function(sId,sHotkey,sProviderId){var mParams={Id:sId,Hotkey:sHotkey,ProviderId:sProviderId};this.fireSemanticEvent("PatternContainerTitle","Hotkey",mParams);};
 function UCF_ScrollArea(oDomRef){UCF_EventProvider.apply(this);this.oDomRef=oDomRef;this.bDragScrollingEnabled=true;var oScrollArea=this; this.sTimeOutId=null;this.iCurrentStepY=0;this.iCurrentStepX=0;this.iScrollTop=0;this.iScrollLeft=0;};UCF_ScrollArea.prototype=new UCF_EventProvider(); UCF_ScrollArea.prototype.E_EVENTS={Scroll:0};UCF_ScrollArea.prototype.destroy=function(){ this.cleanUpScrollTiming();}; UCF_ScrollArea.prototype.onscroll=function(oBrowserEvent){oBrowserEvent.cancelBubble();if(this.bIgnoreScrollEvent){return;}this.handleScroll();}; UCF_ScrollArea.prototype.handleScroll=function(){if(this.sTimeOutId==null){this.fireScroll();}else{this.cleanUpScrollTiming();}this.sTimeOutId=UCF_JsUtil.delayedCall(200,this,"fireScroll");}; UCF_ScrollArea.prototype.cleanUpScrollTiming=function(){if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);this.sTimeOutId=null;}}; UCF_ScrollArea.prototype.fireScroll=function(){var iScrollTop,iScrollLeft;this.cleanUpScrollTiming();this.sTimeOutId=null; iScrollTop=this.oDomRef.scrollTop;iScrollLeft=this.oDomRef.scrollLeft;if(this.iScrollTop!=iScrollTop||this.iScrollLeft!=iScrollLeft){this.iScrollTop=iScrollTop;this.iScrollLeft=iScrollLeft; if(UCF_System.bIsRTL){iScrollLeft=this.oDomRef.scrollWidth-this.oDomRef.clientWidth-this.oDomRef.scrollLeft;} this.fireEvent(this.E_EVENTS.Scroll,{iScrollTop:iScrollTop,iScrollLeft:iScrollLeft});}}; UCF_ScrollArea.prototype.setScrollPosition=function(iScrollTop,iScrollLeft){  var iScrollHeight=this.oDomRef.scrollHeight,iScrollWidth=this.oDomRef.scrollWidth; if(iScrollTop==-1)iScrollTop=iScrollHeight;if(iScrollLeft==-1)iScrollLeft=iScrollWidth; if(UCF_System.bIsRTL){iScrollLeft=iScrollWidth-this.oDomRef.clientWidth-iScrollLeft;}this.iScrollTop=iScrollTop;this.iScrollLeft=iScrollLeft; if(iScrollTop!=this.oDomRef.scrollTop||iScrollLeft!=this.oDomRef.scrollLeft){this.setIgnoreScrollEvent(true); this.oDomRef.scrollTop=iScrollTop;this.oDomRef.scrollLeft=iScrollLeft;  UCF_JsUtil.delayedCall(200,this,"setIgnoreScrollEvent",[false]);}}; UCF_ScrollArea.prototype.setIgnoreScrollEvent=function(bIgnoreScrollEvent){this.bIgnoreScrollEvent=bIgnoreScrollEvent;}; UCF_ScrollArea.prototype.enableDragScrolling=function(bEnabled){this.bDragScrollingEnabled=bEnabled;}; UCF_ScrollArea.prototype.onlsdragscroll=function(oBrowserEvent){if(!this.bDragScrollingEnabled)return;var oMouseLocation={x:oBrowserEvent.iPageX(),y:oBrowserEvent.iPageY()};var oViewPort=UCF_DomUtil.oGetObjectRect(this.oDomRef);  oViewPort.width=this.oDomRef.clientWidth;oViewPort.height=this.oDomRef.clientHeight;var iVerticalZone=Math.min(35,oViewPort.height / 4);var iHorizontalZone=Math.min(35,oViewPort.width / 4);var iScrollThresholdTop=oViewPort.top+iVerticalZone;var iScrollThresholdBottom=oViewPort.top+oViewPort.height-iVerticalZone;var iScrollThresholdLeft=oViewPort.left+iHorizontalZone;var iScrollThresholdRight=oViewPort.left+oViewPort.width-iHorizontalZone; var iStepY=0,iStepX=0;if(oMouseLocation.x<iScrollThresholdLeft){iStepX=-Math.round((iScrollThresholdLeft-oMouseLocation.x)/ iHorizontalZone*10);}else if(oMouseLocation.x>iScrollThresholdRight){iStepX=Math.round((oMouseLocation.x-iScrollThresholdRight)/ iHorizontalZone*10);}if(oMouseLocation.y<iScrollThresholdTop){iStepY=-Math.round((iScrollThresholdTop-oMouseLocation.y)/ iVerticalZone*10);}else if(oMouseLocation.y>iScrollThresholdBottom){iStepY=Math.round((oMouseLocation.y-iScrollThresholdBottom)/ iVerticalZone*10);}if(this.iCurrentStepX<iStepX)this.iCurrentStepX++;else if(this.iCurrentStepX>iStepX)this.iCurrentStepX--;if(this.iCurrentStepY<iStepY)this.iCurrentStepY++;else if(this.iCurrentStepY>iStepY)this.iCurrentStepY--;this.oDomRef.scrollLeft+=this.iCurrentStepX;this.oDomRef.scrollTop+=this.iCurrentStepY; this.onscroll();};
function UCF_TreeDropDelegate(oLS,oDropTargetControl){UCF_DropDelegate.apply(this,[oLS]);this.oLS=oLS;this.setDropTargetControl(oDropTargetControl);this.bDropAllowed=false;};UCF_TreeDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DropDelegate"))(); UCF_TreeDropDelegate.prototype.oCreateDropDecorator=function(){return new(UCF_ClassLoader.oGetClass("UCF_TreeDropDecorator"))(this.oDropTargetControl);};UCF_TreeDropDelegate.prototype.onlsdragenter=function(oBrowserEvent){this.onlsdragover(oBrowserEvent);};UCF_TreeDropDelegate.prototype.onlsdrop=function(oBrowserEvent){if(this.oDropDecorator)this.oDropDecorator.hide();if(this.bDropAllowed)UCF_DropDelegate.prototype.onlsdrop.apply(this,arguments);}; UCF_TreeDropDelegate.prototype.onlsdragover=function(oBrowserEvent){if(!this.oDropDecorator){var oDragAndDropManager=oBrowserEvent.oDragAndDropManager;this.oDropDecorator=this.oCreateDropDecorator();this.oDropDecorator.init(oDragAndDropManager.oDragSession);this.oDropDecorator.hide();}var oRelevantNode=this.oGetTagRelevantNode(oBrowserEvent);if(!oRelevantNode){this.forbidDrop(oBrowserEvent);return false;} if(this.iOffset==0&&!oRelevantNode.bHasChildren&&this.oDropTargetControl.bDropBug){this.forbidDrop(oBrowserEvent);return false;}var sDropTargetInfoId=oRelevantNode.sDropTargetInfo;if(!sDropTargetInfoId){this.forbidDrop(oBrowserEvent);return false;}var oDropTargetInfoControl=oRelevantNode.oGetControlById(sDropTargetInfoId);if(!oDropTargetInfoControl){this.forbidDrop(oBrowserEvent);return false;}var sDropTags=oDropTargetInfoControl.sGetTags();if(!sDropTags){this.forbidDrop(oBrowserEvent);return false;}var oDragAndDropManager=oBrowserEvent.oDragAndDropManager;if(!oDragAndDropManager.bGetDropAllowed(sDropTags)){this.forbidDrop(oBrowserEvent);return false;} oDragAndDropManager.initDropArea(oDragAndDropManager.oDragSession.DROP_TYPE.STANDARD,sDropTags,this.oDropDecorator);this.bDropAllowed=true;  oBrowserEvent.cancelBubble();return oBrowserEvent.bHandled=true;};UCF_TreeDropDelegate.prototype.forbidDrop=function(oBrowserEvent){ var oTreeNodeDomRef=UCF_DomUtil.oGetParentByAttribute(oBrowserEvent.oGetSource(),"ct","TRN");if(oTreeNodeDomRef){var oTreeNode=this.oLS.oControlFactory.oGetControlByDomRef(oTreeNodeDomRef,true);this.unmarkHovered(oTreeNode);}this.oDropDecorator.hide();this.bDropAllowed=false;oBrowserEvent.oDragAndDropManager.cleanUpDropArea();}; UCF_TreeDropDelegate.prototype.onlsdragleave=function(oBrowserEvent){this.forbidDrop(oBrowserEvent);};UCF_TreeDropDelegate.prototype.markHovered=function(oTreeNode){UCF_DomUtil.addClass(oTreeNode.oDomRef,"urTreNHov");};UCF_TreeDropDelegate.prototype.unmarkHovered=function(oTreeNode){UCF_DomUtil.removeClass(oTreeNode.oDomRef,"urTreNHov");};UCF_TreeDropDelegate.prototype.oGetTagRelevantNode=function(oBrowserEvent){ var oHoveredTreeNodeDomRef=UCF_DomUtil.oGetParentByAttribute(oBrowserEvent.oGetSource(),"ct","TRN");if(!oHoveredTreeNodeDomRef)return null;if(!this.oDropDecorator)return null;this.oDropDecorator.hide();var oContainer=document.getElementById(this.oDropTargetControl.sId+"-scrl");if(!oContainer)oContainer=this.oDropTargetControl.oDomRef;var oHoveredTreeNode=this.oLS.oControlFactory.oGetControlByDomRef(oHoveredTreeNodeDomRef,true),oRect=UCF_DomUtil.oGetObjectRect(oHoveredTreeNodeDomRef),iMouseY=oBrowserEvent.iPageY(),oInnerSpan=document.getElementById(oHoveredTreeNode.sId+"-cnt-start"),oInnerRect=UCF_DomUtil.oGetObjectRect(oInnerSpan.parentNode),oViewPort=UCF_DomUtil.oGetObjectRect(oContainer),iLeft=oInnerRect.left-(UCF_System.bIsRTL?21:0),iWidth=oContainer.clientWidth-(oInnerRect.left-oViewPort.left), iDivideBy=4; if(!this.oDropTargetControl.bDropBug&&!oHoveredTreeNode.sDropTargetInfo){iDivideBy=2;}this.unmarkHovered(oHoveredTreeNode); if(iMouseY<oRect.top+oRect.height / iDivideBy){this.oDropDecorator.setBounds(iLeft,oRect.top,iWidth);this.oDropDecorator.show();this.iOffset=-1;} else if(iMouseY>=oRect.top+oRect.height-oRect.height / iDivideBy){var iTop=oRect.top+oRect.height-(UCF_UserAgent.bIsFirefox(2)?0:4);this.oDropDecorator.setBounds(iLeft,iTop,iWidth);this.oDropDecorator.show();this.iOffset=1;} else{this.iOffset=0;this.markHovered(oHoveredTreeNode);}var oReferencedNode;if(Math.abs(this.iOffset)==1&&!this.oDropTargetControl.bDropBug){ if(UCF_JsUtil.bInstanceOf(oHoveredTreeNode.oGetParent(),"UCF_Tree"))return null;oReferencedNode=oHoveredTreeNode.oGetParent();}else{oReferencedNode=oHoveredTreeNode;}this.oDropTreeNode=oHoveredTreeNode;   return oReferencedNode;};UCF_TreeDropDelegate.prototype.oGetDropTargetControl=function(oBrowserEvent){return this.oGetTagRelevantNode(oBrowserEvent);};UCF_TreeDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oDropTreeNode.sDropTargetInfo,oTree=this.oDropTargetControl,sTreeNodeId=this.oDropTreeNode.sId,iOffset=this.iOffset,that=this;return function(sDragData,sMimeType){that.oDropDecorator.hide();oTree.fireDrop(oTree.sId,sDragId,sDropTargetInfoId,sTreeNodeId,iOffset,sDragData,sMimeType,sDragTags);};};UCF_TreeDropDelegate.prototype.onlsdraghover=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl();if(!oControl)return;if(oControl.sClassName!="UCF_TreeNode")return; if(oBrowserEvent.oGetSource().id!=oControl.sId+"-exp")return;if(this.oDropTargetControl.bOpened)return;oControl.expand();};
 function UCF_PopupManager(oLS){UCF_EventProvider.apply(this);this.oLS=oLS;this.oPopupWindows=null;this.sFocussedElementId=null;this.oBlockLayer=new(UCF_ClassLoader.oGetClass("UCF_BlockLayer"))("urPopupWindowBlockLayer",UCF_DomUtil.oGetTopWindow(),true);this.oBlockLayer.attachEvent(this.oBlockLayer.E_EVENTS.Click,this,"blinkUpperMostPopup");this.oBlockLayer.attachEvent(this.oBlockLayer.E_EVENTS.Focus,this,"focusUpperMostPopup");this.aLSLoaded=[]; this.bIframeCaching=true;};UCF_PopupManager.prototype=new UCF_EventProvider();UCF_PopupManager.prototype.DISPLAY_MODE={MODAL:"MODAL",AMODAL:"AMODAL",FLOATING:"FLOATING"};UCF_PopupManager.prototype.E_EVENTS={WindowOpen:0}; UCF_PopupManager.prototype.getPopups=function(){if(this.oPopupWindows!=null)return this.oPopupWindows;if(typeof(UCF_DomUtil.oGetTopWindow().ur_popupwindows)=="undefined"){UCF_DomUtil.oGetTopWindow().ur_popupwindows=new(UCF_DomUtil.oGetTopWindow()).Array();}return this.oPopupWindows=UCF_DomUtil.oGetTopWindow().ur_popupwindows;};UCF_PopupManager.prototype.getPopupCount=function(){if(typeof(UCF_DomUtil.oGetTopWindow().popupCount)=="undefined"){UCF_DomUtil.oGetTopWindow().popupCount=0;}return UCF_DomUtil.oGetTopWindow().popupCount;};UCF_PopupManager.prototype.increasePopupCount=function(){if(typeof(UCF_DomUtil.oGetTopWindow().popupCount)=="undefined"){UCF_DomUtil.oGetTopWindow().popupCount=0;}return UCF_DomUtil.oGetTopWindow().popupCount++;};UCF_PopupManager.prototype.decreasePopupCount=function(){return UCF_DomUtil.oGetTopWindow().popupCount--;}; UCF_PopupManager.prototype.createPopupWindow=function(oOpenerWindow,sURL,sId,oOnloadCallbackMethod,sDisplayMode){if(!sDisplayMode)sDisplayMode=this.DISPLAY_MODE.MODAL; this.oMainLS=this.oLS.oFindMainLS();if(sDisplayMode==this.DISPLAY_MODE.MODAL&&sURL){var upperMostPopup=this.oGetLastModalPopup(),upperMostBrowserWindow=this.oLS.oBrowserWindow;if(upperMostPopup&&upperMostPopup.ucfPopupWindow) upperMostBrowserWindow=upperMostPopup.ucfPopupWindow.oLS.oBrowserWindow;upperMostBrowserWindow.lock(UCF_BrowserWindow.LOCKTYPES.POPUP);} var index=this.getPopupCount();this.increasePopupCount();var popups=this.getPopups();var oIFrame=this.createIFrame(sURL,oOpenerWindow);popups[index]={sId:sId,oOpenerWindow:oOpenerWindow,oLS:this.oLS,oIFrame:oIFrame,focussedElementId:"",sDisplayMode:sDisplayMode};var oPopupManager=this;var f=function(){if(oOnloadCallbackMethod)oOnloadCallbackMethod(oOpenerWindow,sId);  var oMainPopupManager=oPopupManager.oLS.oGetMainLS().oGetPopupManagerInternal();oMainPopupManager.fireEvent(oMainPopupManager.E_EVENTS.WindowOpen,{oTargetLS:oMainPopupManager.aLSLoaded[sId],sPopupId:sId});delete oMainPopupManager.aLSLoaded[sId];UCF_DomUtil.detachEvent(oIFrame,"load",f);f=null;};var oUpperMostPopup=this.oGetLastModalPopup();oOpenerLS=null;if(oUpperMostPopup){oOpenerLS=this.oGetLSByPopupId(oUpperMostPopup.sId);}else{oOpenerLS=this.oLS;}if(oOpenerLS)oOpenerLS.sStoredFocusId=oOpenerLS.sGetFocusedElementId();UCF_DomUtil.attachEvent(oIFrame,"load",f);};UCF_PopupManager.prototype.handleLSloaded=function(oLS,sPopupId){this.aLSLoaded[sPopupId]=oLS;}; UCF_PopupManager.prototype.register=function(oPopup,index){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(popups[x].oIFrame==oPopup.oIFrame){popups[x].ucfPopupWindow=oPopup;break;}}this.oMainLS=this.oLS.oFindMainLS();this.updateZIndices(oPopup);}; UCF_PopupManager.prototype.popupMoved=function(ucfPopup){this.oBlockLayer.resizeBlocklayer();}; UCF_PopupManager.prototype.unregister=function(oPopup){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].ucfPopupWindow)continue;if(popups[x].ucfPopupWindow==oPopup){var oOpenerLS=popups[x].oLS; popups.splice(x,1);this.decreasePopupCount(); var oUpperMostPopup=this.oGetLastModalPopup();if(oUpperMostPopup){oOpenerLS=this.oGetLSByPopupId(oUpperMostPopup.sId);}if(oOpenerLS){oOpenerLS.focusWindow();oOpenerLS.oBrowserWindow.unlock(UCF_BrowserWindow.LOCKTYPES.POPUP);}break;}}return null;};UCF_PopupManager.prototype.unregister2=function(oPopup){this.updateZIndices(); var oIFrame=oPopup.oIFrame,oLastModalPopup=this.oGetLastModalPopup(), oMainLS=this.oLS.oGetMainLS();  if(oPopup&&oPopup.oLS)oPopup.oLS.destroy();if(oIFrame)oIFrame.setAttribute("inuse","false"); if(oLastModalPopup){oLastModalPopup.oLS.oGetPage().initBrowserHistory(false);}else{oMainLS.oGetPage().initBrowserHistory(false);}}; UCF_PopupManager.prototype.getIndexOfPopup=function(popup){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].ucfPopupWindow)continue;if(popups[x].ucfPopupWindow==popup)return x;}return null;}; UCF_PopupManager.prototype.createIFrame=function(sURL,oOpenerWindow){var oHostDocument=UCF_DomUtil.oGetTopWindow().document;  if(sURL.indexOf("http")==-1){var baseURL=oOpenerWindow.location.protocol+"//"+oOpenerWindow.location.host+oOpenerWindow.location.pathname;var lastSlashPos=baseURL.lastIndexOf("/");baseURL=baseURL.substr(0,lastSlashPos+1);sURL=baseURL+sURL;}var index=0;var sIframeId=null;for(;true;index++){sIframeId="URLS-PopupWindow-"+index;var oIFrame=oHostDocument.getElementById(sIframeId);if(oIFrame==null)break; if(oIFrame.getAttribute("inuse")=="false"){ oIFrame.style.display="block";if(UCF_UserAgent.bIsSafari()){    oIFrame.setAttribute("src","javascript:''");setTimeout(function(){oIFrame.setAttribute("src",sURL);},0);}else{   oIFrame.contentWindow.document.location.replace(sURL);}oIFrame.setAttribute("inuse","true");oIFrame.style.width="100px";oIFrame.style.height="50px"; oIFrame.style.visibility="hidden";return oIFrame;}}oIFrame=oHostDocument.createElement("IFRAME");oIFrame.setAttribute("frameBorder","no");oIFrame.setAttribute("id",sIframeId);oIFrame.setAttribute("name",sIframeId);oIFrame.setAttribute("tabIndex","-1"); oIFrame.setAttribute("inuse","true");   oIFrame.setAttribute(this.oLS.M_CONSTANTS.LSPOPUP,"true");var style=oIFrame.style;style.position="absolute";style.width="100px";style.height="50px";style.display="block";style.left="30px";style.top="-5000px";style.zIndex="5000";style.visibility="hidden"; oIFrame.setAttribute("src",sURL);oHostDocument.body.appendChild(oIFrame);return oIFrame;}; UCF_PopupManager.prototype.blinkUpperMostPopup=function(){var lastModalPopup=this.oGetLastModalPopup();if(lastModalPopup.ucfPopupWindow)lastModalPopup.ucfPopupWindow.blink();return false;};UCF_PopupManager.prototype.focusUpperMostPopup=function(){var popups=this.getPopups();if(popups.length>0){var oPopup=popups[popups.length-1];if(oPopup.ucfPopupWindow)oPopup.ucfPopupWindow.focus();}}; UCF_PopupManager.prototype.updateZIndices=function(oFocussedPopup){var zIndex=5000; if(!this.oGetLastModalPopup()){if(this.oBlockLayer)this.oBlockLayer.hide();this.oMainLS.oBrowserWindow.unlock(UCF_BrowserWindow.LOCKTYPES.POPUP);}var popups=this.getPopups(); for(var x=0;x<popups.length;x++){var popup=popups[x]; if(!popup||!popup.ucfPopupWindow)continue;if(popup.sDisplayMode==this.DISPLAY_MODE.FLOATING)continue; if(popup==this.oGetLastModalPopup()){this.oBlockLayer.show(zIndex++);this.oMainLS.oBrowserWindow.lock(UCF_BrowserWindow.LOCKTYPES.POPUP);}if(popup.ucfPopupWindow!=oFocussedPopup)popup.ucfPopupWindow.setZIndex(zIndex++);} for(var x=0;x<popups.length;x++){var popup=popups[x]; if(!popup||!popup.ucfPopupWindow)continue;if(popup.sDisplayMode!=this.DISPLAY_MODE.FLOATING)continue;if(popup.ucfPopupWindow!=oFocussedPopup)popup.ucfPopupWindow.setZIndex(zIndex++);} if(oFocussedPopup){var popup=null;for(var x=0;x<popups.length;x++){if(!popups[x]||!popups[x].ucfPopupWindow)continue;if(popups[x].ucfPopupWindow==oFocussedPopup){popup=popups[x];break;}}if(popup.sDisplayMode!=this.DISPLAY_MODE.MODAL||popup==this.oGetLastModalPopup())oFocussedPopup.setZIndex(zIndex++);}}; UCF_PopupManager.prototype.oGetLastModalPopup=function(){var popups=this.getPopups();for(var x=popups.length-1;x>=0;x--){if(!popups[x]||!popups[x].ucfPopupWindow)continue;if(popups[x].sDisplayMode==this.DISPLAY_MODE.MODAL)return popups[x];}return null;}; UCF_PopupManager.prototype.bIsActiveWindow=function(){var oLastModalPopup=this.oGetLastModalPopup();if(!oLastModalPopup){return true;}if(oLastModalPopup.ucfPopupWindow){return(this.oLS==oLastModalPopup.ucfPopupWindow.oLS);}return false;}; UCF_PopupManager.prototype.oGetWindowByPopupId=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(popups[x].sId==sId){return popups[x].oIFrame.contentWindow;}}return null;}; UCF_PopupManager.prototype.oGetLSByPopupId=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(popups[x].sId==sId&&popups[x].ucfPopupWindow){return popups[x].ucfPopupWindow.oLS;}}return null;}; UCF_PopupManager.prototype.sGetPopupIdByWindow=function(oWindow){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(popups[x].oIFrame.contentWindow==oWindow){return popups[x].sId;}}return null;}; UCF_PopupManager.prototype.oGetOpenerWindow=function(oWindow){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;var contentWindow=popups[x].oIFrame.contentWindow;if(contentWindow==oWindow)return popups[x].oOpenerWindow;}return null;}; UCF_PopupManager.prototype.oGetOpenerLSByPopupId=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].sId)return;if(popups[x].sId==sId){return popups[x].oLS;}}return null;}; UCF_PopupManager.prototype.closeAllPopups=function(){var popups=this.getPopups(); for(var x=popups.length-1;x>=0;x--){if(!popups[x])continue;this.closePopup(popups[x].sId);}}; UCF_PopupManager.prototype.closePopup=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(popups[x].sId!=sId)continue;if(popups[x].ucfPopupWindow){popups[x].ucfPopupWindow.dispose();}else{var oPopup=popups[x];popups.splice(x,1);this.decreasePopupCount();this.updateZIndices();var oIFrame=oPopup.oIFrame;oIFrame.setAttribute("inuse","false");}return;}}; UCF_PopupManager.prototype.notifyContentUpdate=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].ucfPopupWindow)continue;if(popups[x].sId==sId){popups[x].ucfPopupWindow.handleRoundtrip();return;}}}; UCF_PopupManager.prototype.notifyTitleUpdate=function(sId,sTitle){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].ucfPopupWindow)continue;if(popups[x].sId==sId){popups[x].ucfPopupWindow.setTitle(sTitle);return;}}}; UCF_PopupManager.prototype.destroy=function(){ var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x])continue;if(!popups[x].ucfPopupWindow)continue;if(popups[x].oOpenerWindow==window){var iFrame=popups[x].oIFrame;popups[x].ucfPopupWindow.destroy();iFrame.parentNode.removeChild(iFrame);popups.splice(x,1);}}this.oPopupWindows=null;if(!this.oBlockLayer){var oBlocklayerWindow=this.bBlocklayerLocal?this.oLS.oGetMainLS().oGetWindow():this.oGetHostWindow();this.oBlockLayer=new(UCF_ClassLoader.oGetClass("UCF_BlockLayer"))("urPopupWindowBlockLayer",oBlocklayerWindow,true);}if(this.oLS.bIsMainLS()){this.oBlockLayer.detachEvent(this.oBlockLayer.E_EVENTS.Click,this);this.oBlockLayer.hide();}this.oBlockLayer.destroy();this.oBlockLayer=null;this.oMainLS=null;UCF_EventProvider.prototype.destroy.apply(this,arguments);};UCF_PopupManager.prototype.releaseIFrame=function(oDomRefIframe){if(oDomRefIframe){oDomRefIframe.setAttribute("id","");UCF_JsUtil.delayedCall(2000,this,"delayedReleaseIFrame",[oDomRefIframe]);}};UCF_PopupManager.prototype.delayedReleaseIFrame=function(oDomRefIframe){if(UCF_UserAgent.bIsIE()){oDomRefIframe.src="javascript:''";}UCF_DomUtil.removeFromDom(oDomRefIframe);};UCF_PopupManager.prototype.oGetPopupById=function(sId){var popups=this.getPopups();for(var x=0;x<popups.length;x++){if(!popups[x]||!popups[x].ucfPopupWindow)continue;if(popups[x].sId==sId){return popups[x].ucfPopupWindow;}}return null;}; UCF_PopupManager.prototype.setIframeCaching=function(bOn){ if(!this.oLS.bIsMainLS()){this.oLS.oGetMainLS().oGetPopupManagerInternal().setIframeCaching(bOn);}this.bIframeCaching=bOn;}; UCF_PopupManager.prototype.bDoIframeCaching=function(){ if(!this.oLS.bIsMainLS()){return this.oLS.oGetMainLS().oGetPopupManagerInternal().bDoIframeCaching();}return this.bIframeCaching;};UCF_PopupManager.prototype.aPublicMethods=["createPopupWindow","oGetWindowByPopupId","sGetPopupIdByWindow","oGetOpenerWindow","oGetOpenerLSByPopupId","closeAllPopups","closePopup","notifyContentUpdate","notifyTitleUpdate"];
 function UCF_DropTargetDropDelegate(oLS,oDropTargetControl){UCF_DropDelegate.apply(this,[oLS]);this.setDropTargetControl(oDropTargetControl);};UCF_DropTargetDropDelegate.prototype=new(UCF_ClassLoader.oGetClass("UCF_DropDelegate"))();UCF_DropTargetDropDelegate.prototype.oCreateDropDecorator=function(oBrowserEvent){var oDomRef=this.oDropTargetControl.oDomRef;return{oDomRef:oDomRef,sHoverColor:"#ffc54e",init:function(){this.sBackgroundColor=this.oDomRef.style.backgroundColor;this.oDomRef.style.backgroundColor=this.sHoverColor;this.oDomRef.style.padding="0px";this.oDomRef.style.border="1px dotted "+this.sHoverColor;},cleanUp:function(){ this.oDomRef.style.backgroundColor=this.sBackgroundColor;this.oDomRef.style.padding="1px";this.oDomRef.style.border="0px";},update:function(){},hide:function(){},show:function(){},bIsVisible:function(){return true;}};};UCF_DropTargetDropDelegate.prototype.fGetDropCallBack=function(sDragId,sDragTags){var sDropTargetInfoId=this.oDropTargetControl.sDropTargetInfo;var oDropTargetControl=this.oDropTargetControl;return function(sDragData,sMimeType){oDropTargetControl.fireDrop(oDropTargetControl.sId,sDragId,sDropTargetInfoId,sDragData,sMimeType,sDragTags);};};
function UCF_SapTableMatrixCell(oDomRef,oTable){UCF_SapTableBaseCell.apply(this,arguments);};UCF_SapTableMatrixCell.prototype=new(UCF_ClassLoader.oGetClass("UCF_SapTableBaseCell"))();UCF_SapTableMatrixCell.prototype.setCellState=function(){};UCF_SapTableMatrixCell.prototype.mGetSelectionState=function(){return this.SELECTION_STATE.NOT_SELECTED;}; UCF_SapTableMatrixCell.prototype.aAttributeNames=["sCellBackgroundDesign","sHeaderCellIds","sRowHeaderCellIds"]; UCF_SapTableMatrixCell.prototype.aMethodNames=[];  UCF_SapTableMatrixCell.prototype.sCellBackgroundDesign="STANDARD"; UCF_SapTableMatrixCell.prototype.sHeaderCellIds=''; UCF_SapTableMatrixCell.prototype.sRowHeaderCellIds=''; UCF_SapTableMatrixCell.prototype.setDefaultValues=function(){this.sCellBackgroundDesign="STANDARD";this.sHeaderCellIds='';this.sRowHeaderCellIds='';};
 function UCF_CheckBox(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]);this.oImageRef=UCF_DomUtil.$(this.sId+"-img");this.oFocusDomRef=UCF_DomUtil.$(this.sId+"-lbl"); if(this.oDataTip){this.oDataTip.setOpenerRef(this.oImageRef);if(this.sTooltip!=""||UCF_System.bIs508)this.oDataTip.setAlignment(UCF_LayeredControl.ALIGNMENT.TOPLEFT);if(this.bShowHelp){this.oDataTip.setHoverDomRef(this.oFocusDomRef);this.oDataTip.setHoverDomRefExcluded(this.oImageRef);}}};UCF_CheckBox.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_CheckBox.prototype.bIsFocusable=function(){if(UCF_System.bIs508||(this.bEnabled&&!this.bReadonly))return(this.oFocusDomRef!=null);else return false;}; UCF_CheckBox.prototype.onclick=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return;this.oFocusDomRef.focus();this.toggle();oBrowserEvent.cancelBubble();}; UCF_CheckBox.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_CheckBox.prototype.onkeydown=function(oBrowserEvent){if(!this.bEnabled||this.bReadonly)return; if(oBrowserEvent.iKeyCode()==UCF_KeyCodes.SPACE&&!oBrowserEvent.bAlt()){this.toggle();oBrowserEvent.cancel();}}; UCF_CheckBox.prototype.toggle=function(){if(this.oDataTip&&this.oDataTip.sExplanationText)this.oDataTip.close();this.bChecked=!this.bChecked;var previousClassName=this.oImageRef.className;this.oImageRef.className='';if(this.bChecked){this.oImageRef.className=previousClassName.replace("Off","On");}else{this.oImageRef.className=previousClassName.replace("On","Off");}this.fireChange(this.sId,this.bChecked);this.refocus(this.oFocusDomRef);}; UCF_CheckBox.prototype.onlsaccessibility=function(oBrowserEvent){if(oBrowserEvent.oGetSourceControl()!=this)return;var oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;oAccessibilityHelper.setControlType("C"); var sControlText=this.sText,sLabelText=oAccessibilityHelper.sGetLabelText(this.sId),oLabel=oAccessibilityHelper.sGetLabel(this.sId);if(sControlText!=""&&sLabelText!=""){oAccessibilityHelper.setLabel(sLabelText+" - "+sControlText);}else{oAccessibilityHelper.setLabel(sLabelText+sControlText);} if(oLabel&&oLabel.bRequired)oAccessibilityHelper.setRequired(true);oAccessibilityHelper.setAccessKey(this.sAccessKey);oAccessibilityHelper.setEnabled(this.bEnabled);oAccessibilityHelper.setReadonly(this.bReadonly);oAccessibilityHelper.setSelected(this.bChecked);oAccessibilityHelper.setNotSelected(!this.bChecked);oAccessibilityHelper.setInvalid(this.bInvalid);oAccessibilityHelper.setTooltip(this.sTooltip);if(!this.bReadonly){if(this.bChecked)oAccessibilityHelper.addEnabledTutor("DESELECT_TUT",this.bEnabled);else oAccessibilityHelper.addEnabledTutor("SELECT_TUT",this.bEnabled);}}; UCF_CheckBox.prototype.aAttributeNames=["bChecked","bEnabled","bReadonly","sText","sTooltip","bInvalid","bShowHelp","sInputState","sAccessKey"]; UCF_CheckBox.prototype.aMethodNames=[];  UCF_CheckBox.prototype.bChecked=false; UCF_CheckBox.prototype.bEnabled=true; UCF_CheckBox.prototype.bReadonly=false; UCF_CheckBox.prototype.sText=''; UCF_CheckBox.prototype.sTooltip=''; UCF_CheckBox.prototype.bInvalid=false; UCF_CheckBox.prototype.bShowHelp=false; UCF_CheckBox.prototype.sInputState="NONE"; UCF_CheckBox.prototype.sAccessKey=''; UCF_CheckBox.prototype.setDefaultValues=function(){this.bChecked=false;this.bEnabled=true;this.bReadonly=false;this.sText='';this.sTooltip='';this.bInvalid=false;this.bShowHelp=false;this.sInputState="NONE";this.sAccessKey='';}; UCF_CheckBox.prototype.fireChange=function(sId,bChecked){var mParams={Id:sId,Checked:bChecked};if(this.oLS&&this.oLS.markDirty&&this.mEvents.Change)this.oLS.markDirty();this.fireSemanticEvent("CheckBox","Change",mParams);}; UCF_CheckBox.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("CheckBox","DoubleClick",mParams);};
 function UCF_DragDropDecoration(oLS,oDomRefAffectedElement,oBoundaries){this.oLS=oLS;this.oBoundaries=oBoundaries;this.oCleanBoundaries=null;this.oDomRefHtmlContainer=null;this.oHtmlContainerRect=null;this.oDomRefAffectedElement=oDomRefAffectedElement;this.iArrowOffset=0;this.aRaster=null;this.bIsDragDecoration=false;this.bIsInsert=false;this.bIsVertical=false;this.bIsLine=false;this.iHtmlPosTop=-10000;this.iHtmlPosLeft=-10000;this.bDebugMode=false;  this.bPosAccu=UCF_System.sDevice!="ff1"&&UCF_System.sDevice!="sf3";};UCF_DragDropDecoration.prototype=new UCF_Object();UCF_DragDropDecoration.prototype.init=function(oDragSession){var oDomRefCalcContainer=null;this.oDragSession=oDragSession;this.bIsDragDecoration=(this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.H_RESIZE||this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.V_RESIZE);if(this.oDragSession.eDropType==this.oDragSession.DROP_TYPE.H_INSERT||this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.H_RESIZE){this.bIsVertical=false;this.bIsLine=true;if(this.oDragSession.eDropType==this.oDragSession.DROP_TYPE.H_INSERT)this.bIsInsert=true;}else if(this.oDragSession.eDropType==this.oDragSession.DROP_TYPE.V_INSERT||this.oDragSession.eDragType==this.oDragSession.DRAG_TYPE.V_RESIZE){this.bIsVertical=true;this.bIsLine=true;if(this.oDragSession.eDropType==this.oDragSession.DROP_TYPE.V_INSERT)this.bIsInsert=true;}oDomRefCalcContainer=UCF_DomUtil.oGetParentScrollContainer(this.oDomRefAffectedElement);this.oDomRefHtmlContainer=(oDomRefCalcContainer==document.body)?this.oLS.oGetRootRef():oDomRefCalcContainer;this.oHtmlContainerRect=UCF_DomUtil.oGetObjectRect(oDomRefCalcContainer);this.oCleanBoundaries={top:this.oBoundaries.top,left:this.oBoundaries.left,width:this.oBoundaries.width,height:this.oBoundaries.height};if(this.bPosAccu){this.oCleanBoundaries.left-=this.oHtmlContainerRect.left;this.oCleanBoundaries.top-=this.oHtmlContainerRect.top;} if(UCF_System.bIsRTL&&this.oLS.oGetRootRef()!=this.oDomRefHtmlContainer)this.oCleanBoundaries.left-=UCF_DomUtil.iGetVerticalScollbarOffset(this.oDomRefHtmlContainer);this.createHtml();};UCF_DragDropDecoration.prototype.cleanUp=function(){UCF_DomUtil.removeFromDom(this.oDomRefLine);this.oDomRefLine=null;UCF_DomUtil.removeFromDom(this.oDomRefArrow);this.oDomRefArrow=null;if(this.bDebugMode){UCF_DomUtil.removeFromDom(this.oDomRefBRect);this.oDomRefBRect=null;}this.oBoundaries=null;this.oCleanBoundaries=null;this.oDomRefHtmlContainer=null;this.oHtmlContainerRect=null;this.oDomRefAffectedElement=null;this.aRaster=null;this.oDragSession=null;};UCF_DragDropDecoration.prototype.setArrowOffset=function(iArrowOffset){this.iArrowOffset=iArrowOffset;};UCF_DragDropDecoration.prototype.addRasterPoint=function(iOffset,iSnapRange,oRasterPointData){if(!this.aRaster)this.aRaster=new Array();if(!oRasterPointData)oRasterPointData={};oRasterPointData.iOffset=iOffset;oRasterPointData.iSnapRange=iSnapRange;this.aRaster[this.aRaster.length]=oRasterPointData;};UCF_DragDropDecoration.prototype.oGetRasterPoint=function(){return this.oCurrentRasterPoint;};UCF_DragDropDecoration.prototype.createHtml=function(){var oDomRefBody=document.body,oDomRefLine=null;if(this.bIsLine){var sBorderStyle="1px solid gray",sLineSize="3px",oDomRefLine=this.oDomRefLine?this.oDomRefLine:document.createElement("DIV"),oDomRefLine=oDomRefLine;oDomRefLine.style.position="absolute";oDomRefLine.style.filter="progid:DXImageTransform.Microsoft.Alpha( Opacity=60, Style=0 )";oDomRefLine.style.textAlign="center";oDomRefLine.style.verticalAlign="middle";oDomRefLine.style.fontSize="1px";if(this.bIsInsert){var oDomRefArrow=this.oDomRefArrow?this.oDomRefArrow:document.createElement("DIV");oDomRefArrow.style.position="absolute";oDomRefArrow.style.backgroundRepeat="no-repeat";oDomRefArrow.style.backgroundPosition="top left";oDomRefArrow.style.width=12;oDomRefArrow.style.height=12;oDomRefArrow.style.overflow="hidden";if(this.bIsVertical){if(UCF_System.bIsRTL){oDomRefArrow.className="urDDDecoRight";oDomRefArrow.style.backgroundPosition="top right";}else{oDomRefArrow.className="urDDDecoLeft";}}else{oDomRefArrow.className="urDDDecoTop";}this.oDomRefArrow=oDomRefArrow;if(!oDomRefArrow.parentNode)this.oDomRefHtmlContainer.appendChild(oDomRefArrow);}oDomRefLine.style.backgroundColor="black";if(this.bIsVertical){oDomRefLine.style.borderTop=sBorderStyle;oDomRefLine.style.borderBottom=sBorderStyle;oDomRefLine.style.width=this.oCleanBoundaries.width;oDomRefLine.style.height=sLineSize;}else{oDomRefLine.style.borderLeft=sBorderStyle;oDomRefLine.style.borderRight=sBorderStyle;oDomRefLine.style.width=sLineSize;oDomRefLine.style.height=this.oCleanBoundaries.height;}if(!oDomRefLine.parentNode)this.oDomRefHtmlContainer.appendChild(oDomRefLine);}if(this.bDebugMode){if(!this.oDomRefBRect){this.oDomRefBRect=document.createElement("DIV");this.oDomRefHtmlContainer.appendChild(this.oDomRefBRect);}this.oDomRefBRect.style.position="absolute";this.oDomRefBRect.style.border="1px solid red";this.oDomRefBRect.style.top=this.oCleanBoundaries.top;this.oDomRefBRect.style.left=this.oCleanBoundaries.left;this.oDomRefBRect.style.width=this.oCleanBoundaries.width;this.oDomRefBRect.style.height=this.oCleanBoundaries.height;}if(oDomRefLine!=this.oDomRefLine){this.oDomRefLine=oDomRefLine;this.hide();}};UCF_DragDropDecoration.prototype.hide=function(){if(this.oDomRefLine){this.oDomRefLine.style.top=-10000;this.oDomRefLine.style.left=-10000;}if(this.oDomRefArrow){this.oDomRefArrow.style.top=-10000;this.oDomRefArrow.style.left=-10000;}};UCF_DragDropDecoration.prototype.show=function(){this.setHtmlPosition(this.iHtmlPosTop,this.iHtmlPosLeft);};UCF_DragDropDecoration.prototype.setHtmlPosition=function(iTop,iLeft){var iTopOffset=0,iLeftOffset=0;this.iHtmlPosTop=iTop;this.iHtmlPosLeft=iLeft;if(this.bIsLine){if(this.bIsVertical)iTopOffset=-1;else iLeftOffset=-1;}if(this.oDomRefLine){this.oDomRefLine.style.top=this.oCleanBoundaries.top+iTop+iTopOffset;if(UCF_System.bIsRTL&&this.bIsVertical){this.oDomRefLine.style.left=this.oCleanBoundaries.left+iLeft+iLeftOffset-this.iArrowOffset;}else{this.oDomRefLine.style.left=this.oCleanBoundaries.left+iLeft+iLeftOffset;}}if(this.oDomRefArrow){if(this.bIsVertical){if(UCF_System.bIsRTL){iTopOffset=-6;iLeftOffset=this.oCleanBoundaries.width-6+iLeftOffset;}else{iTopOffset=-6;iLeftOffset=-10-this.iArrowOffset;}}else{iTopOffset=-10-this.iArrowOffset;iLeftOffset=-6;}this.oDomRefArrow.style.top=parseInt(this.oCleanBoundaries.top+iTop+iTopOffset);this.oDomRefArrow.style.left=parseInt(this.oCleanBoundaries.left+iLeft+iLeftOffset);}};UCF_DragDropDecoration.prototype.oGetSnappedRasterPoint=function(iPos){if(this.aRaster){var oRasterPoint,iDistance;for(var i=0;i<this.aRaster.length;i++){oRasterPoint=this.aRaster[i];iDistance=Math.abs(iPos-oRasterPoint.iOffset);if(iDistance<=oRasterPoint.iSnapRange){return oRasterPoint;}}}return null};UCF_DragDropDecoration.prototype.update=function(oBrowserEvent){var iTop=oBrowserEvent.iPageY()-this.oCleanBoundaries.top-(this.bPosAccu?this.oHtmlContainerRect.top:0)-2,iLeft=oBrowserEvent.iPageX()-this.oCleanBoundaries.left-(this.bPosAccu?this.oHtmlContainerRect.left:0)+(UCF_System.bIsRTL?2:-2),bShow=false; if(UCF_System.bIsRTL&&this.oLS.oGetRootRef()!=this.oDomRefHtmlContainer)iLeft-=UCF_DomUtil.iGetVerticalScollbarOffset(this.oDomRefHtmlContainer);iTop=Math.max(0,iTop);iTop=Math.min(this.oCleanBoundaries.height,iTop);iLeft=Math.max(0,iLeft);iLeft=Math.min(this.oCleanBoundaries.width,iLeft);if(this.bIsVertical){iLeft=0;if(this.aRaster){this.oCurrentRasterPoint=this.oGetSnappedRasterPoint(iTop);if(this.oCurrentRasterPoint){iTop=this.oCurrentRasterPoint.iOffset;bShow=true;}}else{bShow=true;}}else{iTop=0;if(this.aRaster){this.oCurrentRasterPoint=this.oGetSnappedRasterPoint(iLeft);if(this.oCurrentRasterPoint){iLeft=this.oCurrentRasterPoint.iOffset+(UCF_System.bIsRTL?-2:0);bShow=true;}}else{bShow=true;}}if(bShow)this.setHtmlPosition(iTop,iLeft);else this.hide();};UCF_DragDropDecoration.prototype.bIsVisible=function(){return true;};
 function UCF_Label(oDomRef,oLS){UCF_Control.apply(this,[oDomRef,oLS]); if(this.sLabelFor){this.oTarget=this.oLS.oControlFactory.oGetControlById(this.sLabelFor);if(this.oTarget){if(this.oTarget.oFocusDomRef){this.oTargetRef=this.oTarget.oFocusDomRef;}else{this.oTargetRef=this.oDomRef;}}}this.bAllowTextSelection=true;};UCF_Label.prototype=new(UCF_ClassLoader.oGetClass("UCF_Control"))(); UCF_Label.prototype.onclick=function(oBrowserEvent){ if(!this.oTarget)return;if(this.oTarget.sClassName=="UCF_CheckBox"||this.oTarget.sClassName=="UCF_RadioButton"||this.oTarget.sClassName=="UCF_TriStateCheckBox"){this.oTargetRef.click();}else if(this.oTarget.sClassName=="UCF_RadioButtonGroup"||this.oTarget.sClassName=="UCF_CheckBoxGroup"||this.oTarget.sClassName=="UCF_MeltingGroup"){ this.oTarget.focus();}else{this.oTargetRef.focus();}}; UCF_Label.prototype.ondblclick=function(oBrowserEvent){if(this.mEvents.DoubleClick){this.fireDoubleClick(this.sId);oBrowserEvent.cancelBubble();}}; UCF_Label.prototype.onmouseover=function(oBrowserEvent){ if(this.bShowHelp&&this.oTarget&&this.oTarget.oDataTip){this.bOldShowOnActivate=this.oTarget.oDataTip.bShowOnActivate;this.bOldAutoHideTimeout=this.oTarget.oDataTip.iAutoHideTimeout;this.oTarget.oDataTip.bShowOnActivate=false; this.oTarget.oDataTip.iAutoHideTimeout=0; if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}this.sTimeOutId=UCF_JsUtil.delayedCall(400,this.oTarget.oDataTip,"open");}}; UCF_Label.prototype.onmouseout=function(oBrowserEvent){if(this.bShowHelp&&this.oTarget&&this.oTarget.oDataTip){this.oTarget.oDataTip.close();this.oTarget.oDataTip.bShowOnActivate=this.bOldShowOnActivate;this.oTarget.oDataTip.iAutoHideTimeout=this.bOldAutoHideTimeout;}if(this.sTimeOutId){UCF_JsUtil.clearDelayedCall(this.sTimeOutId);}}; UCF_Label.prototype.onlsaccessibility=function(oBrowserEvent){var oControl=oBrowserEvent.oGetSourceControl(),oAccessibilityHelper=oBrowserEvent.oAccessibilityHelper;if(this.sLabelFor==""){ oAccessibilityHelper.setText(this.sText);oAccessibilityHelper.setTooltip(this.sTooltip);oAccessibilityHelper.setEmpty(true);}}; UCF_Label.prototype.aAttributeNames=["sTooltip","sLabelFor","sText","bRequired","bShowHelp"]; UCF_Label.prototype.aMethodNames=[];  UCF_Label.prototype.sTooltip=''; UCF_Label.prototype.sLabelFor=''; UCF_Label.prototype.sText=''; UCF_Label.prototype.bRequired=false; UCF_Label.prototype.bShowHelp=false; UCF_Label.prototype.setDefaultValues=function(){this.sTooltip='';this.sLabelFor='';this.sText='';this.bRequired=false;this.bShowHelp=false;}; UCF_Label.prototype.fireDoubleClick=function(sId){var mParams={Id:sId};this.fireSemanticEvent("Label","DoubleClick",mParams);};
